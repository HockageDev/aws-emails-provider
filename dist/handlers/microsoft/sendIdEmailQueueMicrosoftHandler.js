var r4=Object.create;var Il=Object.defineProperty;var n4=Object.getOwnPropertyDescriptor;var o4=Object.getOwnPropertyNames;var i4=Object.getPrototypeOf,s4=Object.prototype.hasOwnProperty;var v=(t,e)=>()=>(t&&(e=t(t=0)),e);var g=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),gt=(t,e)=>{for(var r in e)Il(t,r,{get:e[r],enumerable:!0})},tT=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of o4(e))!s4.call(t,o)&&o!==r&&Il(t,o,{get:()=>e[o],enumerable:!(n=n4(e,o))||n.enumerable});return t};var ae=(t,e,r)=>(r=t!=null?r4(i4(t)):{},tT(e||!t||!t.__esModule?Il(r,"default",{value:t,enumerable:!0}):r,t)),M=t=>tT(Il({},"__esModule",{value:!0}),t);var rT={};gt(rT,{badRequest:()=>u4,noContent:()=>l4,notImplemented:()=>m4,ok:()=>c4,okHTML:()=>d4,serverError:()=>a4,unauthorized:()=>p4});var a4,c4,d4,l4,u4,p4,m4,nT=v(()=>{a4=(t="/")=>({statusCode:500,body:JSON.stringify({type:"urn:problem:server-error",title:"Server Error",detail:"An unexpected error has occurred, contact the administrator.",instance:t,status:500}),headers:{"Content-Type":"application/problem+json"}}),c4=t=>({statusCode:200,body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}),d4=t=>({statusCode:200,body:JSON.stringify(t),headers:{"Content-Type":"text/html"}}),l4=()=>({statusCode:204}),u4=t=>(e="/")=>({statusCode:400,body:JSON.stringify({type:"urn:problem:bad-request",title:"Bad Request",detail:t,instance:e,status:400}),headers:{"Content-Type":"application/problem+json"}}),p4=t=>(e="/")=>({statusCode:401,body:JSON.stringify({type:"urn:problem:unauthorized",title:"Unauthorized",detail:t,instance:e,status:401}),headers:{"Content-Type":"application/problem+json"}}),m4=(t="/")=>({statusCode:501,body:JSON.stringify({type:"urn:problem:not-implemented",title:"Not Implemented",detail:"Not Implemented",instance:t,status:501}),headers:{"Content-Type":"application/problem+json"}})});var Jn,Rl=v(()=>{"use strict";Jn=class{static serializeJSONBlob(e){return JSON.stringify(e)}static serializeAccounts(e){let r={};return Object.keys(e).map(function(n){let o=e[n];r[n]={home_account_id:o.homeAccountId,environment:o.environment,realm:o.realm,local_account_id:o.localAccountId,username:o.username,authority_type:o.authorityType,name:o.name,client_info:o.clientInfo,last_modification_time:o.lastModificationTime,last_modification_app:o.lastModificationApp,tenantProfiles:o.tenantProfiles?.map(i=>JSON.stringify(i))}}),r}static serializeIdTokens(e){let r={};return Object.keys(e).map(function(n){let o=e[n];r[n]={home_account_id:o.homeAccountId,environment:o.environment,credential_type:o.credentialType,client_id:o.clientId,secret:o.secret,realm:o.realm}}),r}static serializeAccessTokens(e){let r={};return Object.keys(e).map(function(n){let o=e[n];r[n]={home_account_id:o.homeAccountId,environment:o.environment,credential_type:o.credentialType,client_id:o.clientId,secret:o.secret,realm:o.realm,target:o.target,cached_at:o.cachedAt,expires_on:o.expiresOn,extended_expires_on:o.extendedExpiresOn,refresh_on:o.refreshOn,key_id:o.keyId,token_type:o.tokenType,requestedClaims:o.requestedClaims,requestedClaimsHash:o.requestedClaimsHash,userAssertionHash:o.userAssertionHash}}),r}static serializeRefreshTokens(e){let r={};return Object.keys(e).map(function(n){let o=e[n];r[n]={home_account_id:o.homeAccountId,environment:o.environment,credential_type:o.credentialType,client_id:o.clientId,secret:o.secret,family_id:o.familyId,target:o.target,realm:o.realm}}),r}static serializeAppMetadata(e){let r={};return Object.keys(e).map(function(n){let o=e[n];r[n]={client_id:o.clientId,environment:o.environment,family_id:o.familyId}}),r}static serializeAllCache(e){return{Account:this.serializeAccounts(e.accounts),IdToken:this.serializeIdTokens(e.idTokens),AccessToken:this.serializeAccessTokens(e.accessTokens),RefreshToken:this.serializeRefreshTokens(e.refreshTokens),AppMetadata:this.serializeAppMetadata(e.appMetadata)}}}});var b,he,jt,hg,tt,Qt,ls,zr,us,oT,ln,Yt,ps,Ke,de,nc,iT,Xn,ms,Ot,ct,ie,un,wl,Pl,oc,ii,Ol,Ie,ic,Re=v(()=>{"use strict";b={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},he={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},jt=[b.OPENID_SCOPE,b.PROFILE_SCOPE,b.OFFLINE_ACCESS_SCOPE],hg=[...jt,b.EMAIL_SCOPE],tt={CONTENT_TYPE:"Content-Type",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},Qt={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},ls={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},zr={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},us={PLAIN:"plain",S256:"S256"},oT={QUERY:"query",FRAGMENT:"fragment"},ln={...oT,FORM_POST:"form_post"},Yt={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},ps={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},Ke={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},de={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},nc="appmetadata",iT="client_info",Xn="1",ms={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},Ot={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},ct={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},ie={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},un={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},wl={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},Pl={username:"username",password:"password"},oc={httpSuccess:200,httpBadRequest:400},ii={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},Ol={CONFIGURED_MATCHES_DETECTED:"1",CONFIGURED_NO_AUTO_DETECTION:"2",CONFIGURED_NOT_DETECTED:"3",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Ie={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},ic=300});var hs={};gt(hs,{postRequestFailed:()=>ac,unexpectedError:()=>sc});var sc,ac,fg=v(()=>{"use strict";sc="unexpected_error",ac="post_request_failed"});function yg(t,e){return new te(t,e?`${xl[t]} ${e}`:xl[t])}var xl,gg,te,pn=v(()=>{"use strict";Re();fg();xl={[sc]:"Unexpected error in authentication.",[ac]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},gg={unexpectedError:{code:sc,desc:xl[sc]},postRequestFailed:{code:ac,desc:xl[ac]}},te=class t extends Error{constructor(e,r,n){let o=r?`${e}: ${r}`:e;super(o),Object.setPrototypeOf(this,t.prototype),this.errorCode=e||b.EMPTY_STRING,this.errorMessage=r||b.EMPTY_STRING,this.subError=n||b.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}});var Ce={};gt(Ce,{authTimeNotFound:()=>mn,authorizationCodeMissingFromServerResponse:()=>Ei,bindingKeyNotRemoved:()=>Ci,cannotAppendScopeSet:()=>yi,cannotRemoveEmptyScope:()=>gi,clientInfoDecodingError:()=>Zn,clientInfoEmptyError:()=>si,deviceCodeExpired:()=>uc,deviceCodePollingCancelled:()=>lc,deviceCodeUnknownError:()=>pc,emptyInputScopeSet:()=>ro,endSessionEndpointNotSupported:()=>Si,endpointResolutionError:()=>xt,hashNotDeserialized:()=>li,invalidAssertion:()=>fc,invalidCacheEnvironment:()=>fn,invalidCacheRecord:()=>_i,invalidClientCredential:()=>gc,invalidState:()=>Dr,keyIdMissing:()=>Ti,maxAgeTranspired:()=>mi,methodNotImplemented:()=>J,missingTenantIdError:()=>Ec,multipleMatchingAccounts:()=>dc,multipleMatchingAppMetadata:()=>hi,multipleMatchingTokens:()=>cc,nestedAppAuthBridgeDisabled:()=>Cc,networkError:()=>ci,noAccountFound:()=>mc,noAccountInSilentRequest:()=>hn,noCryptoObject:()=>no,noNetworkConnectivity:()=>_c,nonceMismatch:()=>pi,nullOrEmptyToken:()=>ai,openIdConfigError:()=>di,requestCannotBeMade:()=>fi,stateMismatch:()=>ui,stateNotFound:()=>to,tokenClaimsCnfRequiredForSignedJwt:()=>vi,tokenParsingError:()=>eo,tokenRefreshRequired:()=>Vr,unexpectedCredentialType:()=>hc,userCanceled:()=>vc,userTimeoutReached:()=>yc});var Zn,si,eo,ai,xt,ci,di,li,Dr,ui,to,pi,mn,mi,cc,dc,hi,fi,gi,yi,ro,lc,uc,pc,hn,_i,fn,mc,no,hc,fc,gc,Vr,yc,vi,Ei,Ci,Si,Ti,_c,vc,Ec,J,Cc,rt=v(()=>{"use strict";Zn="client_info_decoding_error",si="client_info_empty_error",eo="token_parsing_error",ai="null_or_empty_token",xt="endpoints_resolution_error",ci="network_error",di="openid_config_error",li="hash_not_deserialized",Dr="invalid_state",ui="state_mismatch",to="state_not_found",pi="nonce_mismatch",mn="auth_time_not_found",mi="max_age_transpired",cc="multiple_matching_tokens",dc="multiple_matching_accounts",hi="multiple_matching_appMetadata",fi="request_cannot_be_made",gi="cannot_remove_empty_scope",yi="cannot_append_scopeset",ro="empty_input_scopeset",lc="device_code_polling_cancelled",uc="device_code_expired",pc="device_code_unknown_error",hn="no_account_in_silent_request",_i="invalid_cache_record",fn="invalid_cache_environment",mc="no_account_found",no="no_crypto_object",hc="unexpected_credential_type",fc="invalid_assertion",gc="invalid_client_credential",Vr="token_refresh_required",yc="user_timeout_reached",vi="token_claims_cnf_required_for_signedjwt",Ei="authorization_code_missing_from_server_response",Ci="binding_key_not_removed",Si="end_session_endpoint_not_supported",Ti="key_id_missing",_c="no_network_connectivity",vc="user_canceled",Ec="missing_tenant_id_error",J="method_not_implemented",Cc="nested_app_auth_bridge_disabled"});function I(t,e){return new oo(t,e)}var Y,_g,oo,dt=v(()=>{"use strict";pn();rt();Y={[Zn]:"The client info could not be parsed/decoded correctly",[si]:"The client info was empty",[eo]:"Token cannot be parsed",[ai]:"The token is null or empty",[xt]:"Endpoints cannot be resolved",[ci]:"Network request failed",[di]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[li]:"The hash parameters could not be deserialized",[Dr]:"State was not the expected format",[ui]:"State mismatch error",[to]:"State not found",[pi]:"Nonce mismatch error",[mn]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[mi]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[cc]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[dc]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[hi]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[fi]:"Token request cannot be made without authorization code or refresh token.",[gi]:"Cannot remove null or empty scope from ScopeSet",[yi]:"Cannot append ScopeSet",[ro]:"Empty input ScopeSet cannot be processed",[lc]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[uc]:"Device code is expired.",[pc]:"Device code stopped polling for unknown reasons.",[hn]:"Please pass an account object, silent flow is not supported without account information",[_i]:"Cache record object was null or undefined.",[fn]:"Invalid environment when attempting to create cache entry",[mc]:"No account found in cache for given key.",[no]:"No crypto object detected.",[hc]:"Unexpected credential type.",[fc]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[gc]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Vr]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[yc]:"User defined timeout for device code polling reached",[vi]:"Cannot generate a POP jwt if the token_claims are not populated",[Ei]:"Server response does not contain an authorization code to proceed",[Ci]:"Could not remove the credential's binding key from storage.",[Si]:"The provided authority does not support logout",[Ti]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[_c]:"No network connectivity. Check your internet connection.",[vc]:"User cancelled the flow.",[Ec]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[J]:"This method has not been implemented",[Cc]:"The nested app auth bridge is disabled"},_g={clientInfoDecodingError:{code:Zn,desc:Y[Zn]},clientInfoEmptyError:{code:si,desc:Y[si]},tokenParsingError:{code:eo,desc:Y[eo]},nullOrEmptyToken:{code:ai,desc:Y[ai]},endpointResolutionError:{code:xt,desc:Y[xt]},networkError:{code:ci,desc:Y[ci]},unableToGetOpenidConfigError:{code:di,desc:Y[di]},hashNotDeserialized:{code:li,desc:Y[li]},invalidStateError:{code:Dr,desc:Y[Dr]},stateMismatchError:{code:ui,desc:Y[ui]},stateNotFoundError:{code:to,desc:Y[to]},nonceMismatchError:{code:pi,desc:Y[pi]},authTimeNotFoundError:{code:mn,desc:Y[mn]},maxAgeTranspired:{code:mi,desc:Y[mi]},multipleMatchingTokens:{code:cc,desc:Y[cc]},multipleMatchingAccounts:{code:dc,desc:Y[dc]},multipleMatchingAppMetadata:{code:hi,desc:Y[hi]},tokenRequestCannotBeMade:{code:fi,desc:Y[fi]},removeEmptyScopeError:{code:gi,desc:Y[gi]},appendScopeSetError:{code:yi,desc:Y[yi]},emptyInputScopeSetError:{code:ro,desc:Y[ro]},DeviceCodePollingCancelled:{code:lc,desc:Y[lc]},DeviceCodeExpired:{code:uc,desc:Y[uc]},DeviceCodeUnknownError:{code:pc,desc:Y[pc]},NoAccountInSilentRequest:{code:hn,desc:Y[hn]},invalidCacheRecord:{code:_i,desc:Y[_i]},invalidCacheEnvironment:{code:fn,desc:Y[fn]},noAccountFound:{code:mc,desc:Y[mc]},noCryptoObj:{code:no,desc:Y[no]},unexpectedCredentialType:{code:hc,desc:Y[hc]},invalidAssertion:{code:fc,desc:Y[fc]},invalidClientCredential:{code:gc,desc:Y[gc]},tokenRefreshRequired:{code:Vr,desc:Y[Vr]},userTimeoutReached:{code:yc,desc:Y[yc]},tokenClaimsRequired:{code:vi,desc:Y[vi]},noAuthorizationCodeFromServer:{code:Ei,desc:Y[Ei]},bindingKeyNotRemovedError:{code:Ci,desc:Y[Ci]},logoutNotSupported:{code:Si,desc:Y[Si]},keyIdMissing:{code:Ti,desc:Y[Ti]},noNetworkConnectivity:{code:_c,desc:Y[_c]},userCanceledError:{code:vc,desc:Y[vc]},missingTenantIdError:{code:Ec,desc:Y[Ec]},nestedAppAuthBridgeDisabled:{code:Cc,desc:Y[Cc]}},oo=class t extends te{constructor(e,r){super(e,r?`${Y[e]}: ${r}`:Y[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,t.prototype)}}});var Nl={};gt(Nl,{checkMaxAge:()=>Sc,extractTokenClaims:()=>gn,getJWSPayload:()=>sT});function gn(t,e){let r=sT(t);try{let n=e(r);return JSON.parse(n)}catch{throw I(eo)}}function sT(t){if(!t)throw I(ai);let r=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!r||r.length<4)throw I(eo);return r[2]}function Sc(t,e){if(e===0||Date.now()-3e5>t+e)throw I(mi)}var fs=v(()=>{"use strict";dt();rt();});var ir,vg=v(()=>{"use strict";ir={Default:0,Adfs:1,Dsts:2,Ciam:3}});function aT(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}var cT=v(()=>{"use strict";});var gs={};gt(gs,{authorityMismatch:()=>Pc,authorityUriInsecure:()=>Ai,cannotAllowNativeBroker:()=>wc,cannotSetOIDCOptions:()=>Rc,claimsRequestParsingError:()=>Tc,emptyInputScopesError:()=>Ri,invalidAuthenticationHeader:()=>Ic,invalidAuthorityMetadata:()=>Ni,invalidClaims:()=>yn,invalidCloudDiscoveryMetadata:()=>io,invalidCodeChallengeMethod:()=>xi,invalidPromptValue:()=>wi,logoutRequestEmpty:()=>Oi,missingNonceAuthenticationHeader:()=>Ac,missingSshJwk:()=>vn,missingSshKid:()=>bc,pkceParamsMissing:()=>_n,redirectUriEmpty:()=>bi,tokenRequestEmpty:()=>Pi,untrustedAuthority:()=>Di,urlEmptyError:()=>Ii,urlParseError:()=>Kr});var bi,Tc,Ai,Kr,Ii,Ri,wi,yn,Pi,Oi,xi,_n,io,Ni,Di,vn,bc,Ac,Ic,Rc,wc,Pc,Wr=v(()=>{"use strict";bi="redirect_uri_empty",Tc="claims_request_parsing_error",Ai="authority_uri_insecure",Kr="url_parse_error",Ii="empty_url_error",Ri="empty_input_scopes_error",wi="invalid_prompt_value",yn="invalid_claims",Pi="token_request_empty",Oi="logout_request_empty",xi="invalid_code_challenge_method",_n="pkce_params_missing",io="invalid_cloud_discovery_metadata",Ni="invalid_authority_metadata",Di="untrusted_authority",vn="missing_ssh_jwk",bc="missing_ssh_kid",Ac="missing_nonce_authentication_header",Ic="invalid_authentication_header",Rc="cannot_set_OIDCOptions",wc="cannot_allow_native_broker",Pc="authority_mismatch"});function ue(t){return new ys(t)}var Fe,Eg,ys,En=v(()=>{"use strict";pn();Wr();Fe={[bi]:"A redirect URI is required for all calls, and none has been set.",[Tc]:"Could not parse the given claims request object.",[Ai]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Kr]:"URL could not be parsed into appropriate segments.",[Ii]:"URL was empty or null.",[Ri]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[wi]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[yn]:"Given claims parameter must be a stringified JSON object.",[Pi]:"Token request was empty and not found in cache.",[Oi]:"The logout request was null or undefined.",[xi]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[_n]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[io]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Ni]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Di]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[vn]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[bc]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[Ac]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[Ic]:"Invalid authentication header provided",[Rc]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[wc]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[Pc]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."},Eg={redirectUriNotSet:{code:bi,desc:Fe[bi]},claimsRequestParsingError:{code:Tc,desc:Fe[Tc]},authorityUriInsecure:{code:Ai,desc:Fe[Ai]},urlParseError:{code:Kr,desc:Fe[Kr]},urlEmptyError:{code:Ii,desc:Fe[Ii]},emptyScopesError:{code:Ri,desc:Fe[Ri]},invalidPrompt:{code:wi,desc:Fe[wi]},invalidClaimsRequest:{code:yn,desc:Fe[yn]},tokenRequestEmptyError:{code:Pi,desc:Fe[Pi]},logoutRequestEmptyError:{code:Oi,desc:Fe[Oi]},invalidCodeChallengeMethod:{code:xi,desc:Fe[xi]},invalidCodeChallengeParams:{code:_n,desc:Fe[_n]},invalidCloudDiscoveryMetadata:{code:io,desc:Fe[io]},invalidAuthorityMetadata:{code:Ni,desc:Fe[Ni]},untrustedAuthority:{code:Di,desc:Fe[Di]},missingSshJwk:{code:vn,desc:Fe[vn]},missingSshKid:{code:bc,desc:Fe[bc]},missingNonceAuthenticationHeader:{code:Ac,desc:Fe[Ac]},invalidAuthenticationHeader:{code:Ic,desc:Fe[Ic]},cannotSetOIDCOptions:{code:Rc,desc:Fe[Rc]},cannotAllowNativeBroker:{code:wc,desc:Fe[wc]},authorityMismatch:{code:Pc,desc:Fe[Pc]}},ys=class t extends te{constructor(e){super(e,Fe[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,t.prototype)}}});var xe,ki=v(()=>{"use strict";xe=class{static isEmptyObj(e){if(e)try{let r=JSON.parse(e);return Object.keys(r).length===0}catch{}return!0}static startsWith(e,r){return e.indexOf(r)===0}static endsWith(e,r){return e.length>=r.length&&e.lastIndexOf(r)===e.length-r.length}static queryStringToObject(e){let r={},n=e.split("&"),o=i=>decodeURIComponent(i.replace(/\+/g," "));return n.forEach(i=>{if(i.trim()){let[s,a]=i.split(/=(.+)/g,2);s&&a&&(r[o(s)]=o(a))}}),r}static trimArrayEntries(e){return e.map(r=>r.trim())}static removeEmptyStringsFromArray(e){return e.filter(r=>!!r)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,r){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(r)}}});var Dl={};gt(Dl,{getDeserializedResponse:()=>Cg,stripLeadingHashOrQuery:()=>dT});function dT(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}function Cg(t){if(!t||t.indexOf("=")<0)return null;try{let e=dT(t),r=Object.fromEntries(new URLSearchParams(e));if(r.code||r.error||r.error_description||r.state)return r}catch{throw I(li)}return null}var Sg=v(()=>{"use strict";dt();rt();});var re,Mi=v(()=>{"use strict";En();ki();Re();Sg();Wr();re=class t{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw ue(Ii);e.includes("#")||(this._urlString=t.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let r=e.toLowerCase();return xe.endsWith(r,"?")?r=r.slice(0,-1):xe.endsWith(r,"?/")&&(r=r.slice(0,-2)),xe.endsWith(r,"/")||(r+="/"),r}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw ue(Kr)}if(!e.HostNameAndPort||!e.PathSegments)throw ue(Kr);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw ue(Ai)}static appendQueryString(e,r){return r?e.indexOf("?")<0?`${e}?${r}`:`${e}&${r}`:e}static removeHashFromUrl(e){return t.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let r=this.getUrlComponents(),n=r.PathSegments;return e&&n.length!==0&&(n[0]===Qt.COMMON||n[0]===Qt.ORGANIZATIONS)&&(n[0]=e),t.constructAuthorityUriFromObject(r)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),r=this.urlString.match(e);if(!r)throw ue(Kr);let n={Protocol:r[1],HostNameAndPort:r[4],AbsolutePath:r[5],QueryString:r[7]},o=n.AbsolutePath.split("/");return o=o.filter(i=>i&&i.length>0),n.PathSegments=o,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){let r=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(r);if(!n)throw ue(Kr);return n[2]}static getAbsoluteUrl(e,r){if(e[0]===b.FORWARD_SLASH){let o=new t(r).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new t(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Cg(e)}}});function pT(t,e){let r,n=t.canonicalAuthority;if(n){let o=new re(n).getUrlComponents().HostNameAndPort;r=lT(o,t.cloudDiscoveryMetadata?.metadata,Ot.CONFIG,e)||lT(o,bg.metadata,Ot.HARDCODED_VALUES,e)||t.knownAuthorities}return r||[]}function lT(t,e,r,n){if(n?.trace(`getAliasesFromMetadata called with source: ${r}`),t&&e){let o=Oc(e,t);if(o)return n?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${r}, returning aliases`),o.aliases;n?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${r}`)}return null}function mT(t){return Oc(bg.metadata,t)}function Oc(t,e){for(let r=0;r<t.length;r++){let n=t[r];if(n.aliases.includes(e))return n}return null}var uT,Tg,bg,Ag,Ig=v(()=>{"use strict";Mi();Re();uT={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},Tg=uT.endpointMetadata,bg=uT.instanceDiscoveryMetadata,Ag=new Set;bg.metadata.forEach(t=>{t.aliases.forEach(e=>{Ag.add(e)})})});var Gt,xc=v(()=>{"use strict";Gt={AAD:"AAD",OIDC:"OIDC"}});var Cn,kl=v(()=>{"use strict";Cn={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"}});function hT(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}var fT=v(()=>{"use strict";});function gT(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}var yT=v(()=>{"use strict";});var C,FOe,Qr=v(()=>{"use strict";C={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"},FOe=new Map([[C.AcquireTokenByCode,"ATByCode"],[C.AcquireTokenByRefreshToken,"ATByRT"],[C.AcquireTokenSilent,"ATS"],[C.AcquireTokenSilentAsync,"ATSAsync"],[C.AcquireTokenPopup,"ATPopup"],[C.AcquireTokenRedirect,"ATRedirect"],[C.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[C.CryptoOptsSignJwt,"CryptoSignJwt"],[C.SilentCacheClientAcquireToken,"SltCacheClientAT"],[C.SilentIframeClientAcquireToken,"SltIframeClientAT"],[C.SilentRefreshClientAcquireToken,"SltRClientAT"],[C.SsoSilent,"SsoSlt"],[C.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[C.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[C.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[C.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[C.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[C.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[C.BrokerHandhshake,"BrokerHandshake"],[C.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[C.AcquireTokenByBroker,"ATByBroker"],[C.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[C.RefreshTokenClientAcquireToken,"RTClientAT"],[C.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[C.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[C.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[C.AcquireTokenFromCache,"ATFromCache"],[C.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[C.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[C.AcquireTokenBySilentIframe,"ATBySltIframe"],[C.InitializeBaseRequest,"InitBaseReq"],[C.InitializeSilentRequest,"InitSltReq"],[C.InitializeClientApplication,"InitClientApplication"],[C.SilentIframeClientTokenHelper,"SIClientTHelper"],[C.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[C.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[C.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[C.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[C.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[C.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[C.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[C.StandardInteractionClientInitializeAuthorizationCodeRequest,"StdIntClientInitAuthCodeReq"],[C.GetAuthCodeUrl,"GetAuthCodeUrl"],[C.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[C.HandleCodeResponse,"HandleCodeResp"],[C.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[C.AuthClientAcquireToken,"AuthClientAT"],[C.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[C.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[C.AuthClientCreateQueryString,"AuthClientCreateQueryStr"],[C.PopTokenGenerateCnf,"PopTGenCnf"],[C.PopTokenGenerateKid,"PopTGenKid"],[C.HandleServerTokenResponse,"HandleServerTRes"],[C.DeserializeResponse,"DeserializeRes"],[C.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[C.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[C.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[C.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[C.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[C.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[C.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[C.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[C.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[C.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[C.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[C.AcquireTokenByCodeAsync,"ATByCodeAsync"],[C.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[C.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[C.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[C.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[C.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[C.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[C.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[C.NativeGenerateAuthResult,"NtvGenAuthRes"],[C.RemoveHiddenIframe,"RemoveHiddenIframe"],[C.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[C.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[C.GeneratePkceCodes,"GenPkceCodes"],[C.GenerateCodeVerifier,"GenCodeVerifier"],[C.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[C.Sha256Digest,"Sha256Digest"],[C.GetRandomValues,"GetRandomValues"]])});var _T,se,so=v(()=>{"use strict";_T=(t,e,r,n,o)=>(...i)=>{r.trace(`Executing function ${e}`);let s=n?.startMeasurement(e,o);if(o){let a=e+"CallCount";n?.incrementFields({[a]:1},o)}try{let a=t(...i);return s?.end({success:!0}),r.trace(`Returning result from ${e}`),a}catch(a){r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(a))}catch{r.trace("Unable to print error message.")}throw s?.end({success:!1},a),a}},se=(t,e,r,n,o)=>(...i)=>{r.trace(`Executing function ${e}`);let s=n?.startMeasurement(e,o);if(o){let a=e+"CallCount";n?.incrementFields({[a]:1},o)}return n?.setPreQueueTime(e,o),t(...i).then(a=>(r.trace(`Returning result from ${e}`),s?.end({success:!0}),a)).catch(a=>{r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(a))}catch{r.trace("Unable to print error message.")}throw s?.end({success:!1},a),a})}});var Nc,vT=v(()=>{"use strict";Re();Qr();so();Nc=class t{constructor(e,r,n,o){this.networkInterface=e,this.logger=r,this.performanceClient=n,this.correlationId=o}async detectRegion(e,r){this.performanceClient?.addQueueMeasurement(C.RegionDiscoveryDetectRegion,this.correlationId);let n=e;if(n)r.region_source=ii.ENVIRONMENT_VARIABLE;else{let o=t.IMDS_OPTIONS;try{let i=await se(this.getRegionFromIMDS.bind(this),C.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(b.IMDS_VERSION,o);if(i.status===oc.httpSuccess&&(n=i.body,r.region_source=ii.IMDS),i.status===oc.httpBadRequest){let s=await se(this.getCurrentVersion.bind(this),C.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(o);if(!s)return r.region_source=ii.FAILED_AUTO_DETECTION,null;let a=await se(this.getRegionFromIMDS.bind(this),C.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(s,o);a.status===oc.httpSuccess&&(n=a.body,r.region_source=ii.IMDS)}}catch{return r.region_source=ii.FAILED_AUTO_DETECTION,null}}return n||(r.region_source=ii.FAILED_AUTO_DETECTION),n||null}async getRegionFromIMDS(e,r){return this.performanceClient?.addQueueMeasurement(C.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${b.IMDS_ENDPOINT}?api-version=${e}&format=text`,r,b.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(C.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let r=await this.networkInterface.sendGetRequestAsync(`${b.IMDS_ENDPOINT}?format=json`,e);return r.status===oc.httpBadRequest&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}};Nc.IMDS_OPTIONS={headers:{Metadata:"true"}}});var we={};gt(we,{delay:()=>h4,isTokenExpired:()=>_s,nowSeconds:()=>Jt,wasClockTurnedBack:()=>Rg});function Jt(){return Math.round(new Date().getTime()/1e3)}function _s(t,e){let r=Number(t)||0;return Jt()+e>r}function Rg(t){return Number(t)>Jt()}function h4(t,e){return new Promise(r=>setTimeout(()=>r(e),t))}var Li=v(()=>{"use strict";});var lt={};gt(lt,{createAccessTokenEntity:()=>Pg,createIdTokenEntity:()=>wg,createRefreshTokenEntity:()=>Og,generateAppMetadataKey:()=>A4,generateAuthorityMetadataExpiresAt:()=>Ll,generateCredentialKey:()=>Dc,isAccessTokenEntity:()=>f4,isAppMetadataEntity:()=>I4,isAuthorityMetadataEntity:()=>R4,isAuthorityMetadataExpired:()=>Ul,isCredentialEntity:()=>Ml,isIdTokenEntity:()=>g4,isRefreshTokenEntity:()=>y4,isServerTelemetryEntity:()=>T4,isThrottlingEntity:()=>b4,updateAuthorityEndpointMetadata:()=>vs,updateCloudDiscoveryMetadata:()=>kc});function Dc(t){return[_4(t),v4(t),E4(t),C4(t),S4(t)].join(Ke.CACHE_KEY_SEPARATOR).toLowerCase()}function wg(t,e,r,n,o){return{credentialType:de.ID_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r,realm:o}}function Pg(t,e,r,n,o,i,s,a,c,d,u,m,f,h,y){let E={homeAccountId:t,credentialType:de.ACCESS_TOKEN,secret:r,cachedAt:Jt().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:n,realm:o,target:i,tokenType:u||ie.BEARER};if(m&&(E.userAssertionHash=m),d&&(E.refreshOn=d.toString()),h&&(E.requestedClaims=h,E.requestedClaimsHash=y),E.tokenType?.toLowerCase()!==ie.BEARER.toLowerCase())switch(E.credentialType=de.ACCESS_TOKEN_WITH_AUTH_SCHEME,E.tokenType){case ie.POP:let A=gn(r,c);if(!A?.cnf?.kid)throw I(vi);E.keyId=A.cnf.kid;break;case ie.SSH:E.keyId=f}return E}function Og(t,e,r,n,o,i,s){let a={credentialType:de.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r};return i&&(a.userAssertionHash=i),o&&(a.familyId=o),s&&(a.expiresOn=s.toString()),a}function Ml(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}function f4(t){return t?Ml(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===de.ACCESS_TOKEN||t.credentialType===de.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function g4(t){return t?Ml(t)&&t.hasOwnProperty("realm")&&t.credentialType===de.ID_TOKEN:!1}function y4(t){return t?Ml(t)&&t.credentialType===de.REFRESH_TOKEN:!1}function _4(t){return[t.homeAccountId,t.environment].join(Ke.CACHE_KEY_SEPARATOR).toLowerCase()}function v4(t){let e=t.credentialType===de.REFRESH_TOKEN&&t.familyId||t.clientId;return[t.credentialType,e,t.realm||""].join(Ke.CACHE_KEY_SEPARATOR).toLowerCase()}function E4(t){return(t.target||"").toLowerCase()}function C4(t){return(t.requestedClaimsHash||"").toLowerCase()}function S4(t){return t.tokenType&&t.tokenType.toLowerCase()!==ie.BEARER.toLowerCase()?t.tokenType.toLowerCase():""}function T4(t,e){let r=t.indexOf(ct.CACHE_KEY)===0,n=!0;return e&&(n=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),r&&n}function b4(t,e){let r=!1;t&&(r=t.indexOf(un.THROTTLING_PREFIX)===0);let n=!0;return e&&(n=e.hasOwnProperty("throttleTime")),r&&n}function A4({environment:t,clientId:e}){return[nc,t,e].join(Ke.CACHE_KEY_SEPARATOR).toLowerCase()}function I4(t,e){return e?t.indexOf(nc)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function R4(t,e){return e?t.indexOf(ms.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function Ll(){return Jt()+ms.REFRESH_TIME_SECONDS}function vs(t,e,r){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=r,t.jwks_uri=e.jwks_uri}function kc(t,e,r){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=r}function Ul(t){return t.expiresAt<=Jt()}var Es=v(()=>{"use strict";fs();dt();Re();Li();rt();});function ET(t){let n=new re(t).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(n){case Qt.COMMON:case Qt.ORGANIZATIONS:case Qt.CONSUMERS:return;default:return n}}function Fl(t){return t.endsWith(b.FORWARD_SLASH)?t:`${t}${b.FORWARD_SLASH}`}function xg(t){let e=t.cloudDiscoveryMetadata,r;if(e)try{r=JSON.parse(e)}catch{throw ue(io)}return{canonicalAuthority:t.authority?Fl(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:r}}var kr,Bl=v(()=>{"use strict";vg();cT();Mi();dt();Re();Ig();En();xc();kl();fT();yT();vT();pn();Qr();so();Es();rt();Wr();kr=class t{constructor(e,r,n,o,i,s,a,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=r,this.cacheManager=n,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=a,this.correlationId=s,this.managedIdentity=c||!1,this.regionDiscovery=new Nc(r,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(b.CIAM_AUTH_URL))return ir.Ciam;let r=e.PathSegments;if(r.length)switch(r[0].toLowerCase()){case b.ADFS:return ir.Adfs;case b.DSTS:return ir.Dsts}return ir.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new re(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw I(xt)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw I(xt)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw I(xt)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw I(Si);return this.replacePath(this.metadata.end_session_endpoint)}else throw I(xt)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw I(xt)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw I(xt)}canReplaceTenant(e){return e.PathSegments.length===1&&!t.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===ir.Default&&this.protocolMode===Gt.AAD}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let r=e,o=new re(this.metadata.canonical_authority).getUrlComponents(),i=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,c)=>{let d=i[c];if(c===0&&this.canReplaceTenant(o)){let u=new re(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];d!==u&&(this.logger.verbose(`Replacing tenant domain name ${d} with id ${u}`),d=u)}a!==d&&(r=r.replace(`/${d}/`,`/${a}/`))}),this.replaceTenant(r)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===ir.Adfs||this.protocolMode!==Gt.AAD&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(C.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),r=await se(this.updateCloudDiscoveryMetadata.bind(this),C.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let n=await se(this.updateEndpointMetadata.bind(this),C.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,r,{source:n}),this.performanceClient?.addFields({cloudDiscoverySource:r,authorityEndpointSource:n},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:Ll(),jwks_uri:""}),e}updateCachedMetadata(e,r,n){r!==Ot.CACHE&&n?.source!==Ot.CACHE&&(e.expiresAt=Ll(),e.canonical_authority=this.canonicalAuthority);let o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(C.AuthorityUpdateEndpointMetadata,this.correlationId);let r=this.updateEndpointMetadataFromLocalSources(e);if(r){if(r.source===Ot.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&r.metadata){let o=await se(this.updateMetadataWithRegionalInformation.bind(this),C.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r.metadata);vs(e,o,!1),e.canonical_authority=this.canonicalAuthority}return r.source}let n=await se(this.getEndpointMetadataFromNetwork.bind(this),C.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(n=await se(this.updateMetadataWithRegionalInformation.bind(this),C.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n)),vs(e,n,!0),Ot.NETWORK;throw I(di,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let r=this.getEndpointMetadataFromConfig();if(r)return this.logger.verbose("Found endpoint metadata in authority configuration"),vs(e,r,!1),{source:Ot.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let o=this.getEndpointMetadataFromHardcodedValues();if(o)return vs(e,o,!1),{source:Ot.HARDCODED_VALUES,metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let n=Ul(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Ot.CACHE}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new re(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw ue(Ni)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(C.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},r=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${r}`);try{let n=await this.networkInterface.sendGetRequestAsync(r,e);return aT(n.body)?n.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(n){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${n}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Tg?Tg[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(C.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let r=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(r){if(r!==b.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=Ol.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=r,t.replaceWithRegionalInformation(e,r);let n=await se(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),C.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(n)return this.regionDiscoveryMetadata.region_outcome=Ol.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=n,t.replaceWithRegionalInformation(e,n);this.regionDiscoveryMetadata.region_outcome=Ol.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(C.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let r=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(r)return r;let n=await se(this.getCloudDiscoveryMetadataFromNetwork.bind(this),C.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return kc(e,n,!0),Ot.NETWORK;throw ue(Di)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||b.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||b.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||b.NOT_APPLICABLE}`);let r=this.getCloudDiscoveryMetadataFromConfig();if(r)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),kc(e,r,!1),Ot.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let o=mT(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),kc(e,o,!1),Ot.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let n=Ul(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!n?(this.logger.verbose("Found cloud discovery metadata in the cache."),Ot.CACHE):(n&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===ir.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),r=Oc(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),r)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),r;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),ue(io)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(C.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${b.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,r={},n=null;try{let o=await this.networkInterface.sendGetRequestAsync(e,r),i,s;if(hT(o.body))i=o.body,s=i.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${i.tenant_discovery_endpoint}`);else if(gT(o.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${o.status}`),i=o.body,i.error===b.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${i.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${i.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),s=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),n=Oc(s,this.hostnameAndPort)}catch(o){if(o instanceof te)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${o.errorCode}
Error Description: ${o.errorMessage}`);else{let i=o;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${i.name}
Error Description: ${i.message}`)}return null}return n||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),n=t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),n}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(r=>r&&re.getDomainFromUrl(r).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,r){let n;if(r&&r.azureCloudInstance!==Cn.None){let o=r.tenant?r.tenant:b.DEFAULT_COMMON_TENANT;n=`${r.azureCloudInstance}/${o}/`}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return b.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw I(xt)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return Ag.has(e)}static isPublicCloudAuthority(e){return b.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,r,n){let o=new re(e);o.validateAsUri();let i=o.getUrlComponents(),s=`${r}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(s=`${r}.${b.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let a=re.constructAuthorityUriFromObject({...o.getUrlComponents(),HostNameAndPort:s}).urlString;return n?`${a}?${n}`:a}static replaceWithRegionalInformation(e,r){let n={...e};return n.authorization_endpoint=t.buildRegionalAuthorityString(n.authorization_endpoint,r),n.token_endpoint=t.buildRegionalAuthorityString(n.token_endpoint,r),n.end_session_endpoint&&(n.end_session_endpoint=t.buildRegionalAuthorityString(n.end_session_endpoint,r)),n}static transformCIAMAuthority(e){let r=e,o=new re(e).getUrlComponents();if(o.PathSegments.length===0&&o.HostNameAndPort.endsWith(b.CIAM_AUTH_URL)){let i=o.HostNameAndPort.split(".")[0];r=`${r}${i}${b.AAD_TENANT_DOMAIN_SUFFIX}`}return r}};kr.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Qt.COMMON,Qt.CONSUMERS,Qt.ORGANIZATIONS])});var ql={};gt(ql,{createDiscoveredInstance:()=>Ng});async function Ng(t,e,r,n,o,i,s){s?.addQueueMeasurement(C.AuthorityFactoryCreateDiscoveredInstance,i);let a=kr.transformCIAMAuthority(Fl(t)),c=new kr(a,e,r,n,o,i,s);try{return await se(c.resolveEndpointsAsync.bind(c),C.AuthorityResolveEndpointsAsync,o,s,i)(),c}catch{throw I(xt)}}var Dg=v(()=>{"use strict";Bl();dt();Qr();so();rt();});async function Nt(t,e,r){return typeof t=="string"?t:t({clientId:e,tokenEndpoint:r})}var Hl=v(()=>{"use strict";});var Ui={};gt(Ui,{ACCESS_TOKEN:()=>O4,CCS_HEADER:()=>F4,CLAIMS:()=>Ug,CLIENT_ASSERTION:()=>ay,CLIENT_ASSERTION_TYPE:()=>cy,CLIENT_ID:()=>ao,CLIENT_INFO:()=>M4,CLIENT_REQUEST_ID:()=>Kg,CLIENT_SECRET:()=>sy,CODE:()=>Gg,CODE_CHALLENGE:()=>$g,CODE_CHALLENGE_METHOD:()=>zg,CODE_VERIFIER:()=>Vg,DEVICE_CODE:()=>iy,DOMAIN_HINT:()=>fy,ERROR:()=>w4,ERROR_DESCRIPTION:()=>P4,EXPIRES_IN:()=>N4,FOCI:()=>U4,GRANT_TYPE:()=>Lg,ID_TOKEN:()=>x4,ID_TOKEN_HINT:()=>oy,LOGIN_HINT:()=>hy,LOGOUT_HINT:()=>py,NATIVE_BROKER:()=>uy,NONCE:()=>Hg,OBO_ASSERTION:()=>dy,ON_BEHALF_OF:()=>L4,POST_LOGOUT_URI:()=>ny,PROMPT:()=>jg,REDIRECT_URI:()=>kg,REFRESH_TOKEN:()=>Bg,REFRESH_TOKEN_EXPIRES_IN:()=>D4,REQUESTED_TOKEN_USE:()=>ly,REQ_CNF:()=>$l,RESPONSE_MODE:()=>Mg,RESPONSE_TYPE:()=>jl,RETURN_SPA_CODE:()=>zl,SCOPE:()=>Fg,SESSION_STATE:()=>k4,SID:()=>my,STATE:()=>qg,TOKEN_TYPE:()=>Gl,X_APP_NAME:()=>ty,X_APP_VER:()=>ry,X_CLIENT_CPU:()=>Jg,X_CLIENT_CURR_TELEM:()=>Xg,X_CLIENT_EXTRA_SKU:()=>B4,X_CLIENT_LAST_TELEM:()=>Zg,X_CLIENT_OS:()=>Yg,X_CLIENT_SKU:()=>Wg,X_CLIENT_VER:()=>Qg,X_MS_LIB_CAPABILITY:()=>ey});var ao,kg,jl,Mg,Lg,Ug,Fg,w4,P4,O4,x4,Bg,N4,D4,qg,Hg,jg,k4,M4,Gg,$g,zg,Vg,Kg,Wg,Qg,Yg,Jg,Xg,Zg,ey,ty,ry,ny,oy,iy,sy,ay,cy,Gl,$l,dy,ly,L4,U4,F4,zl,uy,py,my,hy,fy,B4,Mc=v(()=>{"use strict";ao="client_id",kg="redirect_uri",jl="response_type",Mg="response_mode",Lg="grant_type",Ug="claims",Fg="scope",w4="error",P4="error_description",O4="access_token",x4="id_token",Bg="refresh_token",N4="expires_in",D4="refresh_token_expires_in",qg="state",Hg="nonce",jg="prompt",k4="session_state",M4="client_info",Gg="code",$g="code_challenge",zg="code_challenge_method",Vg="code_verifier",Kg="client-request-id",Wg="x-client-SKU",Qg="x-client-VER",Yg="x-client-OS",Jg="x-client-CPU",Xg="x-client-current-telemetry",Zg="x-client-last-telemetry",ey="x-ms-lib-capability",ty="x-app-name",ry="x-app-ver",ny="post_logout_redirect_uri",oy="id_token_hint",iy="device_code",sy="client_secret",ay="client_assertion",cy="client_assertion_type",Gl="token_type",$l="req_cnf",dy="assertion",ly="requested_token_use",L4="on_behalf_of",U4="foci",F4="X-AnchorMailbox",zl="return_spa_code",uy="nativebroker",py="logout_hint",my="sid",hy="login_hint",fy="domain_hint",B4="x-client-xtra-sku"});var Cs,gy=v(()=>{"use strict";dt();rt();Cs={createNewGuid:()=>{throw I(J)},base64Decode:()=>{throw I(J)},base64Encode:()=>{throw I(J)},base64UrlEncode:()=>{throw I(J)},encodeKid:()=>{throw I(J)},async getPublicKeyThumbprint(){throw I(J)},async removeTokenBindingKey(){throw I(J)},async clearKeystore(){throw I(J)},async signJwt(){throw I(J)},async hashString(){throw I(J)}}});var Be,Xt,Vl=v(()=>{"use strict";Re();(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace"})(Be||(Be={}));Xt=class t{constructor(e,r,n){this.level=Be.Info;let o=()=>{},i=e||t.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||o,this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level=typeof i.logLevel=="number"?i.logLevel:Be.Info,this.correlationId=i.correlationId||b.EMPTY_STRING,this.packageName=r||b.EMPTY_STRING,this.packageVersion=n||b.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Be.Info}}clone(e,r,n){return new t({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,r)}logMessage(e,r){if(r.logLevel>this.level||!this.piiLoggingEnabled&&r.containsPii)return;let i=`${`[${new Date().toUTCString()}] : [${r.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Be[r.logLevel]} - ${e}`;this.executeCallback(r.logLevel,i,r.containsPii||!1)}executeCallback(e,r,n){this.localCallback&&this.localCallback(e,r,n)}error(e,r){this.logMessage(e,{logLevel:Be.Error,containsPii:!1,correlationId:r||b.EMPTY_STRING})}errorPii(e,r){this.logMessage(e,{logLevel:Be.Error,containsPii:!0,correlationId:r||b.EMPTY_STRING})}warning(e,r){this.logMessage(e,{logLevel:Be.Warning,containsPii:!1,correlationId:r||b.EMPTY_STRING})}warningPii(e,r){this.logMessage(e,{logLevel:Be.Warning,containsPii:!0,correlationId:r||b.EMPTY_STRING})}info(e,r){this.logMessage(e,{logLevel:Be.Info,containsPii:!1,correlationId:r||b.EMPTY_STRING})}infoPii(e,r){this.logMessage(e,{logLevel:Be.Info,containsPii:!0,correlationId:r||b.EMPTY_STRING})}verbose(e,r){this.logMessage(e,{logLevel:Be.Verbose,containsPii:!1,correlationId:r||b.EMPTY_STRING})}verbosePii(e,r){this.logMessage(e,{logLevel:Be.Verbose,containsPii:!0,correlationId:r||b.EMPTY_STRING})}trace(e,r){this.logMessage(e,{logLevel:Be.Trace,containsPii:!1,correlationId:r||b.EMPTY_STRING})}tracePii(e,r){this.logMessage(e,{logLevel:Be.Trace,containsPii:!0,correlationId:r||b.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}});var Kl,Ss,Wl=v(()=>{"use strict";Kl="@azure/msal-common",Ss="14.14.2"});var nt,Lc=v(()=>{"use strict";En();ki();dt();Re();Wr();rt();nt=class t{constructor(e){let r=e?xe.trimArrayEntries([...e]):[],n=r?xe.removeEmptyStringsFromArray(r):[];this.validateInputScopes(n),this.scopes=new Set,n.forEach(o=>this.scopes.add(o))}static fromString(e){let n=(e||b.EMPTY_STRING).split(" ");return new t(n)}static createSearchScopes(e){let r=new t(e);return r.containsOnlyOIDCScopes()?r.removeScope(b.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}validateInputScopes(e){if(!e||e.length<1)throw ue(Ri)}containsScope(e){let r=this.printScopesLowerCase().split(" "),n=new t(r);return e?n.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(r=>this.containsScope(r))}containsOnlyOIDCScopes(){let e=0;return hg.forEach(r=>{this.containsScope(r)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(r=>this.appendScope(r))}catch{throw I(yi)}}removeScope(e){if(!e)throw I(gi);this.scopes.delete(e.trim())}removeOIDCScopes(){hg.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw I(ro);let r=new Set;return e.scopes.forEach(n=>r.add(n.toLowerCase())),this.scopes.forEach(n=>r.add(n.toLowerCase())),r}intersectingScopeSets(e){if(!e)throw I(ro);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let r=this.unionScopeSets(e),n=e.getScopeCount(),o=this.getScopeCount();return r.size<o+n}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(r=>e.push(r)),e}printScopes(){return this.scopes?this.asArray().join(" "):b.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}});function Ts(t,e){if(!t)throw I(si);try{let r=e(t);return JSON.parse(r)}catch{throw I(Zn)}}function Sn(t){if(!t)throw I(Zn);let e=t.split(Ke.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?b.EMPTY_STRING:e[1]}}var Uc=v(()=>{"use strict";dt();Re();rt();});function Fc(t,e){return!!t&&!!e&&t===e.split(".")[1]}function Bc(t,e,r,n){if(n){let{oid:o,sub:i,tid:s,name:a,tfp:c,acr:d}=n,u=s||c||d||"";return{tenantId:u,localAccountId:o||i||"",name:a,isHomeTenant:Fc(u,t)}}else return{tenantId:r,localAccountId:e,isHomeTenant:Fc(r,t)}}function Ql(t,e,r,n){let o=t;if(e){let{isHomeTenant:i,...s}=e;o={...t,...s}}if(r){let{isHomeTenant:i,...s}=Bc(t.homeAccountId,t.localAccountId,t.tenantId,r);return o={...o,...s,idTokenClaims:r,idToken:n},o}return o}var Yl=v(()=>{"use strict";});function Jl(t){return t&&(t.tid||t.tfp||t.acr)||null}var yy=v(()=>{"use strict";});var ut,Xl=v(()=>{"use strict";Re();Uc();Yl();dt();vg();yy();xc();rt();ut=class t{generateAccountId(){return[this.homeAccountId,this.environment].join(Ke.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return t.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){let r=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",r||e.tenantId||""].join(Ke.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,r,n){let o=new t;r.authorityType===ir.Adfs?o.authorityType=ps.ADFS_ACCOUNT_TYPE:r.protocolMode===Gt.AAD?o.authorityType=ps.MSSTS_ACCOUNT_TYPE:o.authorityType=ps.GENERIC_ACCOUNT_TYPE;let i;e.clientInfo&&n&&(i=Ts(e.clientInfo,n)),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;let s=e.environment||r&&r.getPreferredCache();if(!s)throw I(fn);o.environment=s,o.realm=i?.utid||Jl(e.idTokenClaims)||"",o.localAccountId=i?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let a=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,c=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(o.username=a||c||"",o.name=e.idTokenClaims?.name||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{let d=Bc(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[d]}return o}static createFromAccountInfo(e,r,n){let o=new t;return o.authorityType=e.authorityType||ps.GENERIC_ACCOUNT_TYPE,o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.cloudGraphHostName=r,o.msGraphHost=n,o.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),o}static generateHomeAccountId(e,r,n,o,i){if(!(r===ir.Adfs||r===ir.Dsts)){if(e)try{let s=Ts(e,o.base64Decode);if(s.uid&&s.utid)return`${s.uid}.${s.utid}`}catch{}n.warning("No client info in response")}return i?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,r,n){if(!e||!r)return!1;let o=!0;if(n){let i=e.idTokenClaims||{},s=r.idTokenClaims||{};o=i.iat===s.iat&&i.nonce===s.nonce}return e.homeAccountId===r.homeAccountId&&e.localAccountId===r.localAccountId&&e.username===r.username&&e.tenantId===r.tenantId&&e.environment===r.environment&&e.nativeAccountId===r.nativeAccountId&&o}}});var Zl,qc,_y=v(()=>{"use strict";Zl="cache_quota_exceeded",qc="cache_error_unknown"});var vy,bs,CT=v(()=>{"use strict";_y();vy={[Zl]:"Exceeded cache storage capacity.",[qc]:"Unexpected error occurred when using cache storage."},bs=class t extends Error{constructor(e,r){let n=r||(vy[e]?vy[e]:vy[qc]);super(`${e}: ${n}`),Object.setPrototypeOf(this,t.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}}});var co,Hc,Ey=v(()=>{"use strict";Re();Es();Lc();Xl();dt();Yl();fs();Wl();Ig();CT();rt();_y();co=class t{constructor(e,r,n,o){this.clientId=e,this.cryptoImpl=r,this.commonLogger=n.clone(Kl,Ss),this.staticAuthorityOptions=o}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){let r=this.getAllAccounts(e);return r.length>1?r.sort(o=>o.idTokenClaims?-1:1)[0]:r.length===1?r[0]:null}getBaseAccountInfo(e){let r=this.getAccountsFilteredBy(e);return r.length>0?r[0].getAccountInfo():null}buildTenantProfiles(e,r){return e.flatMap(n=>this.getTenantProfilesFromAccountEntity(n,r?.tenantId,r))}getTenantedAccountInfoByFilter(e,r,n,o){let i=null,s;if(o&&!this.tenantProfileMatchesFilter(n,o))return null;let a=this.getIdToken(e,r,n.tenantId);return a&&(s=gn(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(s,o))?null:(i=Ql(e,n,s,a?.secret),i)}getTenantProfilesFromAccountEntity(e,r,n){let o=e.getAccountInfo(),i=o.tenantProfiles||new Map,s=this.getTokenKeys();if(r){let c=i.get(r);if(c)i=new Map([[r,c]]);else return[]}let a=[];return i.forEach(c=>{let d=this.getTenantedAccountInfoByFilter(o,s,c,n);d&&a.push(d)}),a}tenantProfileMatchesFilter(e,r){return!(r.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,r.localAccountId)||r.name&&e.name!==r.name||r.isHomeTenant!==void 0&&e.isHomeTenant!==r.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,r){return!(r&&(r.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,r.localAccountId)||r.loginHint&&!this.matchLoginHintFromTokenClaims(e,r.loginHint)||r.username&&!this.matchUsername(e.preferred_username,r.username)||r.name&&!this.matchName(e,r.name)||r.sid&&!this.matchSid(e,r.sid)))}async saveCacheRecord(e,r,n){if(!e)throw I(_i);try{e.account&&this.setAccount(e.account),e.idToken&&r?.idToken!==!1&&this.setIdTokenCredential(e.idToken),e.accessToken&&r?.accessToken!==!1&&await this.saveAccessToken(e.accessToken),e.refreshToken&&r?.refreshToken!==!1&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(o){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),o instanceof Error?(this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${o.message}`,n),o.name==="QuotaExceededError"||o.name==="NS_ERROR_DOM_QUOTA_REACHED"||o.message.includes("exceeded the quota")?(this.commonLogger?.error("CacheManager.saveCacheRecord: exceeded storage quota",n),new bs(Zl)):new bs(o.name,o.message)):(this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${o}`,n),new bs(qc))}}async saveAccessToken(e){let r={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},n=this.getTokenKeys(),o=nt.fromString(e.target),i=[];n.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,r,!1))return;let a=this.getAccessTokenCredential(s);a&&this.credentialMatchesFilter(a,r)&&nt.fromString(a.target).intersectingScopeSets(o)&&i.push(this.removeAccessToken(s))}),await Promise.all(i),this.setAccessTokenCredential(e)}getAccountsFilteredBy(e){let r=this.getAccountKeys(),n=[];return r.forEach(o=>{if(!this.isAccountKey(o,e.homeAccountId))return;let i=this.getAccount(o,this.commonLogger);if(!i||e.homeAccountId&&!this.matchHomeAccountId(i,e.homeAccountId)||e.username&&!this.matchUsername(i.username,e.username)||e.environment&&!this.matchEnvironment(i,e.environment)||e.realm&&!this.matchRealm(i,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(i,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(i,e.authorityType))return;let s={localAccountId:e?.localAccountId,name:e?.name},a=i.tenantProfiles?.filter(c=>this.tenantProfileMatchesFilter(c,s));a&&a.length===0||n.push(i)}),n}isAccountKey(e,r,n){return!(e.split(Ke.CACHE_KEY_SEPARATOR).length<3||r&&!e.toLowerCase().includes(r.toLowerCase())||n&&!e.toLowerCase().includes(n.toLowerCase()))}isCredentialKey(e){if(e.split(Ke.CACHE_KEY_SEPARATOR).length<6)return!1;let r=e.toLowerCase();if(r.indexOf(de.ID_TOKEN.toLowerCase())===-1&&r.indexOf(de.ACCESS_TOKEN.toLowerCase())===-1&&r.indexOf(de.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&r.indexOf(de.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(r.indexOf(de.REFRESH_TOKEN.toLowerCase())>-1){let n=`${de.REFRESH_TOKEN}${Ke.CACHE_KEY_SEPARATOR}${this.clientId}${Ke.CACHE_KEY_SEPARATOR}`,o=`${de.REFRESH_TOKEN}${Ke.CACHE_KEY_SEPARATOR}${Xn}${Ke.CACHE_KEY_SEPARATOR}`;if(r.indexOf(n.toLowerCase())===-1&&r.indexOf(o.toLowerCase())===-1)return!1}else if(r.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,r){return!(r.clientId&&!this.matchClientId(e,r.clientId)||r.userAssertionHash&&!this.matchUserAssertionHash(e,r.userAssertionHash)||typeof r.homeAccountId=="string"&&!this.matchHomeAccountId(e,r.homeAccountId)||r.environment&&!this.matchEnvironment(e,r.environment)||r.realm&&!this.matchRealm(e,r.realm)||r.credentialType&&!this.matchCredentialType(e,r.credentialType)||r.familyId&&!this.matchFamilyId(e,r.familyId)||r.target&&!this.matchTarget(e,r.target)||(r.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==r.requestedClaimsHash||e.credentialType===de.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(r.tokenType&&!this.matchTokenType(e,r.tokenType)||r.tokenType===ie.SSH&&r.keyId&&!this.matchKeyId(e,r.keyId)))}getAppMetadataFilteredBy(e){let r=this.getKeys(),n={};return r.forEach(o=>{if(!this.isAppMetadata(o))return;let i=this.getAppMetadata(o);i&&(e.environment&&!this.matchEnvironment(i,e.environment)||e.clientId&&!this.matchClientId(i,e.clientId)||(n[o]=i))}),n}getAuthorityMetadataByAlias(e){let r=this.getAuthorityMetadataKeys(),n=null;return r.forEach(o=>{if(!this.isAuthorityMetadata(o)||o.indexOf(this.clientId)===-1)return;let i=this.getAuthorityMetadata(o);i&&i.aliases.indexOf(e)!==-1&&(n=i)}),n}async removeAllAccounts(){let e=this.getAccountKeys(),r=[];e.forEach(n=>{r.push(this.removeAccount(n))}),await Promise.all(r)}async removeAccount(e){let r=this.getAccount(e,this.commonLogger);r&&(await this.removeAccountContext(r),this.removeItem(e))}async removeAccountContext(e){let r=this.getTokenKeys(),n=e.generateAccountId(),o=[];r.idToken.forEach(i=>{i.indexOf(n)===0&&this.removeIdToken(i)}),r.accessToken.forEach(i=>{i.indexOf(n)===0&&o.push(this.removeAccessToken(i))}),r.refreshToken.forEach(i=>{i.indexOf(n)===0&&this.removeRefreshToken(i)}),await Promise.all(o)}updateOutdatedCachedAccount(e,r,n){if(r&&r.isSingleTenant()){this.commonLogger?.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");let o=this.getAccountKeys().filter(d=>d.startsWith(r.homeAccountId)),i=[];o.forEach(d=>{let u=this.getCachedAccountEntity(d);u&&i.push(u)});let s=i.find(d=>Fc(d.realm,d.homeAccountId))||i[0];s.tenantProfiles=i.map(d=>({tenantId:d.realm,localAccountId:d.localAccountId,name:d.name,isHomeTenant:Fc(d.realm,d.homeAccountId)}));let a=t.toObject(new ut,{...s}),c=a.generateAccountKey();return o.forEach(d=>{d!==c&&this.removeOutdatedAccount(e)}),this.setAccount(a),n?.verbose("Updated an outdated account entity in the cache"),a}return r}async removeAccessToken(e){let r=this.getAccessTokenCredential(e);if(r){if(r.credentialType.toLowerCase()===de.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&r.tokenType===ie.POP){let o=r.keyId;if(o)try{await this.cryptoImpl.removeTokenBindingKey(o)}catch{throw I(Ci)}}return this.removeItem(e)}}removeAppMetadata(){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r)}),!0}readAccountFromCache(e){let r=ut.generateAccountCacheKey(e);return this.getAccount(r,this.commonLogger)}getIdToken(e,r,n,o,i){this.commonLogger.trace("CacheManager - getIdToken called");let s={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:de.ID_TOKEN,clientId:this.clientId,realm:n},a=this.getIdTokensByFilter(s,r),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let d=a;if(!n){let u=new Map;a.forEach((f,h)=>{f.realm===e.tenantId&&u.set(h,f)});let m=u.size;if(m<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(m===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),u.values().next().value;d=u}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),d.forEach((u,m)=>{this.removeIdToken(m)}),o&&i&&o.addFields({multiMatchedID:a.size},i),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,r){let n=r&&r.idToken||this.getTokenKeys().idToken,o=new Map;return n.forEach(i=>{if(!this.idTokenKeyMatchesFilter(i,{clientId:this.clientId,...e}))return;let s=this.getIdTokenCredential(i);s&&this.credentialMatchesFilter(s,e)&&o.set(i,s)}),o}idTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,r,n,o,i,s){this.commonLogger.trace("CacheManager - getAccessToken called");let a=nt.createSearchScopes(r.scopes),c=r.authenticationScheme||ie.BEARER,d=c&&c.toLowerCase()!==ie.BEARER.toLowerCase()?de.ACCESS_TOKEN_WITH_AUTH_SCHEME:de.ACCESS_TOKEN,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:d,clientId:this.clientId,realm:o||e.tenantId,target:a,tokenType:c,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash},m=n&&n.accessToken||this.getTokenKeys().accessToken,f=[];m.forEach(y=>{if(this.accessTokenKeyMatchesFilter(y,u,!0)){let E=this.getAccessTokenCredential(y);E&&this.credentialMatchesFilter(E,u)&&f.push(E)}});let h=f.length;return h<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):h>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),f.forEach(y=>{this.removeAccessToken(Dc(y))}),i&&s&&i.addFields({multiMatchedAT:f.length},s),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),f[0])}accessTokenKeyMatchesFilter(e,r,n){let o=e.toLowerCase();if(r.clientId&&o.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&o.indexOf(r.homeAccountId.toLowerCase())===-1||r.realm&&o.indexOf(r.realm.toLowerCase())===-1||r.requestedClaimsHash&&o.indexOf(r.requestedClaimsHash.toLowerCase())===-1)return!1;if(r.target){let i=r.target.asArray();for(let s=0;s<i.length;s++){if(n&&!o.includes(i[s].toLowerCase()))return!1;if(!n&&o.includes(i[s].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){let r=this.getTokenKeys(),n=[];return r.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,e,!0))return;let i=this.getAccessTokenCredential(o);i&&this.credentialMatchesFilter(i,e)&&n.push(i)}),n}getRefreshToken(e,r,n,o,i){this.commonLogger.trace("CacheManager - getRefreshToken called");let s=r?Xn:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:de.REFRESH_TOKEN,clientId:this.clientId,familyId:s},c=n&&n.refreshToken||this.getTokenKeys().refreshToken,d=[];c.forEach(m=>{if(this.refreshTokenKeyMatchesFilter(m,a)){let f=this.getRefreshTokenCredential(m);f&&this.credentialMatchesFilter(f,a)&&d.push(f)}});let u=d.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&o&&i&&o.addFields({multiMatchedRT:u},i),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),d[0])}refreshTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.familyId&&n.indexOf(r.familyId.toLowerCase())===-1||!r.familyId&&r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let r={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(r),o=Object.keys(n).map(s=>n[s]),i=o.length;if(i<1)return null;if(i>1)throw I(hi);return o[0]}isAppMetadataFOCI(e){let r=this.readAppMetadataFromCache(e);return!!(r&&r.familyId===Xn)}matchHomeAccountId(e,r){return typeof e.homeAccountId=="string"&&r===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,r){let n=e.oid||e.sub;return r===n}matchLocalAccountIdFromTenantProfile(e,r){return e.localAccountId===r}matchName(e,r){return r.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,r){return!!(e&&typeof e=="string"&&r?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,r){return!!(e.userAssertionHash&&r===e.userAssertionHash)}matchEnvironment(e,r){if(this.staticAuthorityOptions){let o=pT(this.staticAuthorityOptions,this.commonLogger);if(o.includes(r)&&o.includes(e.environment))return!0}let n=this.getAuthorityMetadataByAlias(r);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,r){return e.credentialType&&r.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,r){return!!(e.clientId&&r===e.clientId)}matchFamilyId(e,r){return!!(e.familyId&&r===e.familyId)}matchRealm(e,r){return e.realm?.toLowerCase()===r.toLowerCase()}matchNativeAccountId(e,r){return!!(e.nativeAccountId&&r===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,r){return e.login_hint===r||e.preferred_username===r||e.upn===r}matchSid(e,r){return e.sid===r}matchAuthorityType(e,r){return!!(e.authorityType&&r.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,r){return e.credentialType!==de.ACCESS_TOKEN&&e.credentialType!==de.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:nt.fromString(e.target).containsScopeSet(r)}matchTokenType(e,r){return!!(e.tokenType&&e.tokenType===r)}matchKeyId(e,r){return!!(e.keyId&&e.keyId===r)}isAppMetadata(e){return e.indexOf(nc)!==-1}isAuthorityMetadata(e){return e.indexOf(ms.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${ms.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,r){for(let n in r)e[n]=r[n];return e}},Hc=class extends co{setAccount(){throw I(J)}getAccount(){throw I(J)}getCachedAccountEntity(){throw I(J)}setIdTokenCredential(){throw I(J)}getIdTokenCredential(){throw I(J)}setAccessTokenCredential(){throw I(J)}getAccessTokenCredential(){throw I(J)}setRefreshTokenCredential(){throw I(J)}getRefreshTokenCredential(){throw I(J)}setAppMetadata(){throw I(J)}getAppMetadata(){throw I(J)}setServerTelemetry(){throw I(J)}getServerTelemetry(){throw I(J)}setAuthorityMetadata(){throw I(J)}getAuthorityMetadata(){throw I(J)}getAuthorityMetadataKeys(){throw I(J)}setThrottlingCache(){throw I(J)}getThrottlingCache(){throw I(J)}removeItem(){throw I(J)}getKeys(){throw I(J)}getAccountKeys(){throw I(J)}getTokenKeys(){throw I(J)}async clear(){throw I(J)}updateCredentialCacheKey(){throw I(J)}removeOutdatedAccount(){throw I(J)}}});function ST({authOptions:t,systemOptions:e,loggerOptions:r,cacheOptions:n,storageInterface:o,networkInterface:i,cryptoInterface:s,clientCredentials:a,libraryInfo:c,telemetry:d,serverTelemetryManager:u,persistencePlugin:m,serializableCache:f}){let h={...H4,...r};return{authOptions:W4(t),systemOptions:{...q4,...e},loggerOptions:h,cacheOptions:{...j4,...n},storageInterface:o||new Hc(t.clientId,Cs,new Xt(h)),networkInterface:i||G4,cryptoInterface:s||Cs,clientCredentials:a||z4,libraryInfo:{...$4,...c},telemetry:{...K4,...d},serverTelemetryManager:u||null,persistencePlugin:m||null,serializableCache:f||null}}function W4(t){return{clientCapabilities:[],azureCloudOptions:V4,skipAuthorityMetadataCache:!1,...t}}function jc(t){return t.authOptions.authority.options.protocolMode===Gt.OIDC}var q4,H4,j4,G4,$4,z4,V4,K4,eu=v(()=>{"use strict";gy();Vl();Re();Wl();kl();Ey();xc();dt();rt();q4={tokenRenewalOffsetSeconds:ic,preventCorsPreflight:!1},H4={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Be.Info,correlationId:b.EMPTY_STRING},j4={claimsBasedCachingEnabled:!1},G4={async sendGetRequestAsync(){throw I(J)},async sendPostRequestAsync(){throw I(J)}},$4={sku:b.SKU,version:Ss,cpu:b.EMPTY_STRING,os:b.EMPTY_STRING},z4={clientSecret:b.EMPTY_STRING,clientAssertion:void 0},V4={azureCloudInstance:Cn.None,tenant:`${b.DEFAULT_COMMON_TENANT}`},K4={application:{appName:"",appVersion:""}}});var $t,Gc=v(()=>{"use strict";pn();$t=class t extends te{constructor(e,r,n,o,i){super(e,r,n),this.name="ServerError",this.errorNo=o,this.status=i,Object.setPrototypeOf(this,t.prototype)}}});var $c,TT=v(()=>{"use strict";Re();Gc();$c=class t{static generateThrottlingStorageKey(e){return`${un.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,r){let n=t.generateThrottlingStorageKey(r),o=e.getThrottlingCache(n);if(o){if(o.throttleTime<Date.now()){e.removeItem(n);return}throw new $t(o.errorCodes?.join(" ")||b.EMPTY_STRING,o.errorMessage,o.subError)}}static postProcess(e,r,n){if(t.checkResponseStatus(n)||t.checkResponseForRetryAfter(n)){let o={throttleTime:t.calculateThrottleTime(parseInt(n.headers[tt.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(t.generateThrottlingStorageKey(r),o)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(tt.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let r=e<=0?0:e,n=Date.now()/1e3;return Math.floor(Math.min(n+(r||un.DEFAULT_THROTTLE_TIME_SECONDS),n+un.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,r,n,o){let i={clientId:r,authority:n.authority,scopes:n.scopes,homeAccountIdentifier:o,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid},s=this.generateThrottlingStorageKey(i);e.removeItem(s)}}});var tu,bT=v(()=>{"use strict";TT();pn();dt();rt();tu=class{constructor(e,r){this.networkClient=e,this.cacheManager=r}async sendPostRequest(e,r,n){$c.preProcess(this.cacheManager,e);let o;try{o=await this.networkClient.sendPostRequestAsync(r,n)}catch(i){throw i instanceof te?i:I(ci)}return $c.postProcess(this.cacheManager,e,o),o}}});var Dt,zc=v(()=>{"use strict";Dt={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"}});var Yr,Cy=v(()=>{"use strict";En();Re();Wr();Yr=class{static validateRedirectUri(e){if(!e)throw ue(bi)}static validatePrompt(e){let r=[];for(let n in zr)r.push(zr[n]);if(r.indexOf(e)<0)throw ue(wi)}static validateClaims(e){try{JSON.parse(e)}catch{throw ue(yn)}}static validateCodeChallengeParams(e,r){if(!e||!r)throw ue(_n);this.validateCodeChallengeMethod(r)}static validateCodeChallengeMethod(e){if([us.PLAIN,us.S256].indexOf(e)<0)throw ue(xi)}}});var Ne,Vc=v(()=>{"use strict";Re();Mc();Lc();En();Cy();Wr();Ne=class{constructor(){this.parameters=new Map}addResponseTypeCode(){this.parameters.set(jl,encodeURIComponent(b.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(jl,encodeURIComponent(`${b.TOKEN_RESPONSE_TYPE} ${b.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set(Mg,encodeURIComponent(e||ln.QUERY))}addNativeBroker(){this.parameters.set(uy,encodeURIComponent("1"))}addScopes(e,r=!0,n=jt){r&&!n.includes("openid")&&!e.includes("openid")&&n.push("openid");let o=r?[...e||[],...n]:e||[],i=new nt(o);this.parameters.set(Fg,encodeURIComponent(i.printScopes()))}addClientId(e){this.parameters.set(ao,encodeURIComponent(e))}addRedirectUri(e){Yr.validateRedirectUri(e),this.parameters.set(kg,encodeURIComponent(e))}addPostLogoutRedirectUri(e){Yr.validateRedirectUri(e),this.parameters.set(ny,encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set(oy,encodeURIComponent(e))}addDomainHint(e){this.parameters.set(fy,encodeURIComponent(e))}addLoginHint(e){this.parameters.set(hy,encodeURIComponent(e))}addCcsUpn(e){this.parameters.set(tt.CCS_HEADER,encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set(tt.CCS_HEADER,encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set(my,encodeURIComponent(e))}addClaims(e,r){let n=this.addClientCapabilitiesToClaims(e,r);Yr.validateClaims(n),this.parameters.set(Ug,encodeURIComponent(n))}addCorrelationId(e){this.parameters.set(Kg,encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set(Wg,e.sku),this.parameters.set(Qg,e.version),e.os&&this.parameters.set(Yg,e.os),e.cpu&&this.parameters.set(Jg,e.cpu)}addApplicationTelemetry(e){e?.appName&&this.parameters.set(ty,e.appName),e?.appVersion&&this.parameters.set(ry,e.appVersion)}addPrompt(e){Yr.validatePrompt(e),this.parameters.set(`${jg}`,encodeURIComponent(e))}addState(e){e&&this.parameters.set(qg,encodeURIComponent(e))}addNonce(e){this.parameters.set(Hg,encodeURIComponent(e))}addCodeChallengeParams(e,r){if(Yr.validateCodeChallengeParams(e,r),e&&r)this.parameters.set($g,encodeURIComponent(e)),this.parameters.set(zg,encodeURIComponent(r));else throw ue(_n)}addAuthorizationCode(e){this.parameters.set(Gg,encodeURIComponent(e))}addDeviceCode(e){this.parameters.set(iy,encodeURIComponent(e))}addRefreshToken(e){this.parameters.set(Bg,encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set(Vg,encodeURIComponent(e))}addClientSecret(e){this.parameters.set(sy,encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set(ay,encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set(cy,encodeURIComponent(e))}addOboAssertion(e){this.parameters.set(dy,encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set(ly,encodeURIComponent(e))}addGrantType(e){this.parameters.set(Lg,encodeURIComponent(e))}addClientInfo(){this.parameters.set(iT,"1")}addExtraQueryParameters(e){Object.entries(e).forEach(([r,n])=>{!this.parameters.has(r)&&n&&this.parameters.set(r,n)})}addClientCapabilitiesToClaims(e,r){let n;if(!e)n={};else try{n=JSON.parse(e)}catch{throw ue(yn)}return r&&r.length>0&&(n.hasOwnProperty(ls.ACCESS_TOKEN)||(n[ls.ACCESS_TOKEN]={}),n[ls.ACCESS_TOKEN][ls.XMS_CC]={values:r}),JSON.stringify(n)}addUsername(e){this.parameters.set(Pl.username,encodeURIComponent(e))}addPassword(e){this.parameters.set(Pl.password,encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(Gl,ie.POP),this.parameters.set($l,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(Gl,ie.SSH),this.parameters.set($l,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set(Xg,e.generateCurrentRequestHeaderValue()),this.parameters.set(Zg,e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set(ey,un.X_MS_LIB_CAPABILITY_VALUE)}addLogoutHint(e){this.parameters.set(py,encodeURIComponent(e))}createQueryString(){let e=new Array;return this.parameters.forEach((r,n)=>{e.push(`${n}=${r}`)}),e.join("&")}}});var yt,Kc=v(()=>{"use strict";eu();bT();Vl();Re();Wl();zc();Uc();Vc();Dg();Qr();yt=class{constructor(e,r){this.config=ST(e),this.logger=new Xt(this.config.loggerOptions,Kl,Ss),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new tu(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=r}createTokenRequestHeaders(e){let r={};if(r[tt.CONTENT_TYPE]=b.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Dt.HOME_ACCOUNT_ID:try{let n=Sn(e.credential);r[tt.CCS_HEADER]=`Oid:${n.uid}@${n.utid}`}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case Dt.UPN:r[tt.CCS_HEADER]=`UPN: ${e.credential}`;break}return r}async executePostToTokenEndpoint(e,r,n,o,i,s){s&&this.performanceClient?.addQueueMeasurement(s,i);let a=await this.networkManager.sendPostRequest(o,e,{body:r,headers:n});return this.performanceClient?.addFields({refreshTokenSize:a.body.refresh_token?.length||0,httpVerToken:a.headers?.[tt.X_MS_HTTP_VERSION]||""},i),this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a}async updateAuthority(e,r){this.performanceClient?.addQueueMeasurement(C.UpdateTokenEndpointAuthority,r);let n=`https://${e}/${this.authority.tenant}/`,o=await Ng(n,this.networkClient,this.cacheManager,this.authority.options,this.logger,r,this.performanceClient);this.authority=o}createTokenQueryParameters(e){let r=new Ne;return e.tokenQueryParameters&&r.addExtraQueryParameters(e.tokenQueryParameters),r.createQueryString()}}});var ru={};gt(ru,{badToken:()=>uo,consentRequired:()=>Ty,interactionRequired:()=>Sy,loginRequired:()=>by,nativeAccountUnavailable:()=>Wc,noTokensFound:()=>lo,refreshTokenExpired:()=>Qc});var lo,Wc,Qc,Sy,Ty,by,uo,nu=v(()=>{"use strict";lo="no_tokens_found",Wc="native_account_unavailable",Qc="refresh_token_expired",Sy="interaction_required",Ty="consent_required",by="login_required",uo="bad_token"});function Iy(t,e,r){let n=!!t&&AT.indexOf(t)>-1,o=!!r&&Q4.indexOf(r)>-1,i=!!e&&AT.some(s=>e.indexOf(s)>-1);return n||i||o}function iu(t){return new sr(t,ou[t])}var AT,Q4,ou,Ay,sr,su=v(()=>{"use strict";Re();pn();nu();AT=[Sy,Ty,by,uo],Q4=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],ou={[lo]:"No refresh token found in the cache. Please sign-in.",[Wc]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[Qc]:"Refresh token has expired.",[uo]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."},Ay={noTokensFoundError:{code:lo,desc:ou[lo]},native_account_unavailable:{code:Wc,desc:ou[Wc]},bad_token:{code:uo,desc:ou[uo]}},sr=class t extends te{constructor(e,r,n,o,i,s,a,c){super(e,r,n),Object.setPrototypeOf(this,t.prototype),this.timestamp=o||b.EMPTY_STRING,this.traceId=i||b.EMPTY_STRING,this.correlationId=s||b.EMPTY_STRING,this.claims=a||b.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}}});var au,IT=v(()=>{"use strict";Re();dt();rt();au=class t{static setRequestState(e,r,n){let o=t.generateLibraryState(e,n);return r?`${o}${b.RESOURCE_DELIM}${r}`:o}static generateLibraryState(e,r){if(!e)throw I(no);let n={id:e.createNewGuid()};r&&(n.meta=r);let o=JSON.stringify(n);return e.base64Encode(o)}static parseRequestState(e,r){if(!e)throw I(no);if(!r)throw I(Dr);try{let n=r.split(b.RESOURCE_DELIM),o=n[0],i=n.length>1?n.slice(1).join(b.RESOURCE_DELIM):b.EMPTY_STRING,s=e.base64Decode(o),a=JSON.parse(s);return{userRequestState:i||b.EMPTY_STRING,libraryState:a}}catch{throw I(Dr)}}}});var Y4,Tn,cu=v(()=>{"use strict";Li();Mi();Qr();so();Y4={SW:"sw",UHW:"uhw"},Tn=class{constructor(e,r){this.cryptoUtils=e,this.performanceClient=r}async generateCnf(e,r){this.performanceClient?.addQueueMeasurement(C.PopTokenGenerateCnf,e.correlationId);let n=await se(this.generateKid.bind(this),C.PopTokenGenerateCnf,r,this.performanceClient,e.correlationId)(e),o=this.cryptoUtils.base64UrlEncode(JSON.stringify(n));return{kid:n.kid,reqCnfString:o}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(C.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:Y4.SW}}async signPopToken(e,r,n){return this.signPayload(e,r,n)}async signPayload(e,r,n,o){let{resourceRequestMethod:i,resourceRequestUri:s,shrClaims:a,shrNonce:c,shrOptions:d}=n,m=(s?new re(s):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:Jt(),m:i?.toUpperCase(),u:m?.HostNameAndPort,nonce:c||this.cryptoUtils.createNewGuid(),p:m?.AbsolutePath,q:m?.QueryString?[[],m.QueryString]:void 0,client_claims:a||void 0,...o},r,d,n.correlationId)}}});var ar,Ry=v(()=>{"use strict";ar=class{constructor(e,r){this.cache=e,this.hasChanged=r}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}});function J4(t){let e="code=",r=t.error_uri?.lastIndexOf(e);return r&&r>=0?t.error_uri?.substring(r+e.length):void 0}function RT(t,e,r,n,o,i,s,a,c,d,u){u?.verbose("setCachedAccount called");let f=t.getAccountKeys().find(w=>w.startsWith(r)),h=null;f&&(h=t.getAccount(f,u));let y=h||ut.createAccount({homeAccountId:r,idTokenClaims:o,clientInfo:i,environment:s,cloudGraphHostName:c?.cloud_graph_host_name,msGraphHost:c?.msgraph_host,nativeAccountId:d},e,n),E=y.tenantProfiles||[],A=a||y.realm;if(A&&!E.find(w=>w.tenantId===A)){let w=Bc(r,y.localAccountId,A,o);E.push(w)}return y.tenantProfiles=E,y}var We,Yc=v(()=>{"use strict";dt();Gc();Lc();Xl();su();IT();Re();cu();Ry();Qr();fs();yy();Yl();Es();rt();We=class t{constructor(e,r,n,o,i,s,a){this.clientId=e,this.cacheStorage=r,this.cryptoObj=n,this.logger=o,this.serializableCache=i,this.persistencePlugin=s,this.performanceClient=a}validateServerAuthorizationCodeResponse(e,r){if(!e.state||!r)throw e.state?I(to,"Cached State"):I(to,"Server State");let n,o;try{n=decodeURIComponent(e.state)}catch{throw I(Dr,e.state)}try{o=decodeURIComponent(r)}catch{throw I(Dr,e.state)}if(n!==o)throw I(ui);if(e.error||e.error_description||e.suberror){let i=J4(e);throw Iy(e.error,e.error_description,e.suberror)?new sr(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",i):new $t(e.error||"",e.error_description,e.suberror,i)}}validateTokenResponse(e,r){if(e.error||e.error_description||e.suberror){let n=`Error(s): ${e.error_codes||b.NOT_AVAILABLE} - Timestamp: ${e.timestamp||b.NOT_AVAILABLE} - Description: ${e.error_description||b.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||b.NOT_AVAILABLE} - Trace ID: ${e.trace_id||b.NOT_AVAILABLE}`,o=e.error_codes?.length?e.error_codes[0]:void 0,i=new $t(e.error,n,e.suberror,o,e.status);if(r&&e.status&&e.status>=he.SERVER_ERROR_RANGE_START&&e.status<=he.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${i}`);return}else if(r&&e.status&&e.status>=he.CLIENT_ERROR_RANGE_START&&e.status<=he.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${i}`);return}throw Iy(e.error,e.error_description,e.suberror)?new sr(e.error,e.error_description,e.suberror,e.timestamp||b.EMPTY_STRING,e.trace_id||b.EMPTY_STRING,e.correlation_id||b.EMPTY_STRING,e.claims||b.EMPTY_STRING,o):i}}async handleServerTokenResponse(e,r,n,o,i,s,a,c,d){this.performanceClient?.addQueueMeasurement(C.HandleServerTokenResponse,e.correlation_id);let u;if(e.id_token){if(u=gn(e.id_token||b.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&u.nonce!==i.nonce)throw I(pi);if(o.maxAge||o.maxAge===0){let y=u.auth_time;if(!y)throw I(mn);Sc(y,o.maxAge)}}this.homeAccountIdentifier=ut.generateHomeAccountId(e.client_info||b.EMPTY_STRING,r.authorityType,this.logger,this.cryptoObj,u);let m;i&&i.state&&(m=au.parseRequestState(this.cryptoObj,i.state)),e.key_id=e.key_id||o.sshKid||void 0;let f=this.generateCacheRecord(e,r,n,o,u,s,i),h;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),h=new ar(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(h)),a&&!c&&f.account){let y=f.account.generateAccountKey();if(!this.cacheStorage.getAccount(y,this.logger))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await t.generateAuthenticationResult(this.cryptoObj,r,f,!1,o,u,m,void 0,d)}await this.cacheStorage.saveCacheRecord(f,o.storeInCache,o.correlationId)}finally{this.persistencePlugin&&this.serializableCache&&h&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(h))}return t.generateAuthenticationResult(this.cryptoObj,r,f,!1,o,u,m,e,d)}generateCacheRecord(e,r,n,o,i,s,a){let c=r.getPreferredCache();if(!c)throw I(fn);let d=Jl(i),u,m;e.id_token&&i&&(u=wg(this.homeAccountIdentifier,c,e.id_token,this.clientId,d||""),m=RT(this.cacheStorage,r,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i,e.client_info,c,d,a,void 0,this.logger));let f=null;if(e.access_token){let E=e.scope?nt.fromString(e.scope):new nt(o.scopes||[]),A=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,w=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,x=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,K=n+A,W=K+w,le=x&&x>0?n+x:void 0;f=Pg(this.homeAccountIdentifier,c,e.access_token,this.clientId,d||r.tenant||"",E.printScopes(),K,W,this.cryptoObj.base64Decode,le,e.token_type,s,e.key_id,o.claims,o.requestedClaimsHash)}let h=null;if(e.refresh_token){let E;if(e.refresh_token_expires_in){let A=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;E=n+A}h=Og(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,s,E)}let y=null;return e.foci&&(y={clientId:this.clientId,environment:c,familyId:e.foci}),{account:m,idToken:u,accessToken:f,refreshToken:h,appMetadata:y}}static async generateAuthenticationResult(e,r,n,o,i,s,a,c,d){let u=b.EMPTY_STRING,m=[],f=null,h,y,E=b.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType===ie.POP&&!i.popKid){let K=new Tn(e),{secret:W,keyId:le}=n.accessToken;if(!le)throw I(Ti);u=await K.signPopToken(W,le,i)}else u=n.accessToken.secret;m=nt.fromString(n.accessToken.target).asArray(),f=new Date(Number(n.accessToken.expiresOn)*1e3),h=new Date(Number(n.accessToken.extendedExpiresOn)*1e3),n.accessToken.refreshOn&&(y=new Date(Number(n.accessToken.refreshOn)*1e3))}n.appMetadata&&(E=n.appMetadata.familyId===Xn?Xn:"");let A=s?.oid||s?.sub||"",w=s?.tid||"";c?.spa_accountid&&n.account&&(n.account.nativeAccountId=c?.spa_accountid);let x=n.account?Ql(n.account.getAccountInfo(),void 0,s,n.idToken?.secret):null;return{authority:r.canonicalAuthority,uniqueId:A,tenantId:w,scopes:m,account:x,idToken:n?.idToken?.secret||"",idTokenClaims:s||{},accessToken:u,fromCache:o,expiresOn:f,extExpiresOn:h,refreshOn:y,correlationId:i.correlationId,requestId:d||b.EMPTY_STRING,familyId:E,tokenType:n.accessToken?.tokenType||b.EMPTY_STRING,state:a?a.userRequestState:b.EMPTY_STRING,cloudGraphHostName:n.account?.cloudGraphHostName||b.EMPTY_STRING,msGraphHost:n.account?.msGraphHost||b.EMPTY_STRING,code:c?.spa_code,fromNativeBroker:!1}}}});var As,wT=v(()=>{"use strict";Kc();Vc();Re();Mc();eu();Yc();ki();dt();Mi();cu();Li();Uc();zc();En();Cy();Qr();so();Hl();rt();Wr();As=class extends yt{constructor(e,r){super(e,r),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async getAuthCodeUrl(e){this.performanceClient?.addQueueMeasurement(C.GetAuthCodeUrl,e.correlationId);let r=await se(this.createAuthCodeUrlQueryString.bind(this),C.AuthClientCreateQueryString,this.logger,this.performanceClient,e.correlationId)(e);return re.appendQueryString(this.authority.authorizationEndpoint,r)}async acquireToken(e,r){if(this.performanceClient?.addQueueMeasurement(C.AuthClientAcquireToken,e.correlationId),!e.code)throw I(fi);let n=Jt(),o=await se(this.executeTokenRequest.bind(this),C.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),i=o.headers?.[tt.X_MS_REQUEST_ID],s=new We(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return s.validateTokenResponse(o.body),se(s.handleServerTokenResponse.bind(s),C.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,n,e,r,void 0,void 0,void 0,i)}handleFragmentResponse(e,r){if(new We(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,r),!e.code)throw I(Ei);return e}getLogoutUri(e){if(!e)throw ue(Oi);let r=this.createLogoutUrlQueryString(e);return re.appendQueryString(this.authority.endSessionEndpoint,r)}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(C.AuthClientExecuteTokenRequest,r.correlationId);let n=this.createTokenQueryParameters(r),o=re.appendQueryString(e.tokenEndpoint,n),i=await se(this.createTokenRequestBody.bind(this),C.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,r.correlationId)(r),s;if(r.clientInfo)try{let d=Ts(r.clientInfo,this.cryptoUtils.base64Decode);s={credential:`${d.uid}${Ke.CLIENT_INFO_SEPARATOR}${d.utid}`,type:Dt.HOME_ACCOUNT_ID}}catch(d){this.logger.verbose("Could not parse client info for CCS Header: "+d)}let a=this.createTokenRequestHeaders(s||r.ccsCredential),c={clientId:r.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:r.scopes,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid};return se(this.executePostToTokenEndpoint.bind(this),C.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,r.correlationId)(o,i,a,c,r.correlationId,C.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(C.AuthClientCreateTokenRequestBody,e.correlationId);let r=new Ne;if(r.addClientId(e.tokenBodyParameters?.[ao]||this.config.authOptions.clientId),this.includeRedirectUri?r.addRedirectUri(e.redirectUri):Yr.validateRedirectUri(e.redirectUri),r.addScopes(e.scopes,!0,this.oidcDefaultScopes),r.addAuthorizationCode(e.code),r.addLibraryInfo(this.config.libraryInfo),r.addApplicationTelemetry(this.config.telemetry.application),r.addThrottling(),this.serverTelemetryManager&&!jc(this.config)&&r.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&r.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&r.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let i=this.config.clientCredentials.clientAssertion;r.addClientAssertion(await Nt(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),r.addClientAssertionType(i.assertionType)}if(r.addGrantType(Yt.AUTHORIZATION_CODE_GRANT),r.addClientInfo(),e.authenticationScheme===ie.POP){let i=new Tn(this.cryptoUtils,this.performanceClient),s;e.popKid?s=this.cryptoUtils.encodeKid(e.popKid):s=(await se(i.generateCnf.bind(i),C.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,r.addPopToken(s)}else if(e.authenticationScheme===ie.SSH)if(e.sshJwk)r.addSshJwk(e.sshJwk);else throw ue(vn);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();r.addCorrelationId(n),(!xe.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,this.config.authOptions.clientCapabilities);let o;if(e.clientInfo)try{let i=Ts(e.clientInfo,this.cryptoUtils.base64Decode);o={credential:`${i.uid}${Ke.CLIENT_INFO_SEPARATOR}${i.utid}`,type:Dt.HOME_ACCOUNT_ID}}catch(i){this.logger.verbose("Could not parse client info for CCS Header: "+i)}else o=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&o)switch(o.type){case Dt.HOME_ACCOUNT_ID:try{let i=Sn(o.credential);r.addCcsOid(i)}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case Dt.UPN:r.addCcsUpn(o.credential);break}return e.tokenBodyParameters&&r.addExtraQueryParameters(e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[zl])&&r.addExtraQueryParameters({[zl]:"1"}),r.createQueryString()}async createAuthCodeUrlQueryString(e){this.performanceClient?.addQueueMeasurement(C.AuthClientCreateQueryString,e.correlationId);let r=new Ne;r.addClientId(e.extraQueryParameters?.[ao]||this.config.authOptions.clientId);let n=[...e.scopes||[],...e.extraScopesToConsent||[]];r.addScopes(n,!0,this.oidcDefaultScopes),r.addRedirectUri(e.redirectUri);let o=e.correlationId||this.config.cryptoInterface.createNewGuid();if(r.addCorrelationId(o),r.addResponseMode(e.responseMode),r.addResponseTypeCode(),r.addLibraryInfo(this.config.libraryInfo),jc(this.config)||r.addApplicationTelemetry(this.config.telemetry.application),r.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&r.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&r.addPrompt(e.prompt),e.domainHint&&r.addDomainHint(e.domainHint),e.prompt!==zr.SELECT_ACCOUNT)if(e.sid&&e.prompt===zr.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),r.addSid(e.sid);else if(e.account){let i=this.extractAccountSid(e.account),s=this.extractLoginHint(e.account);if(s&&e.domainHint&&(this.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),s=null),s){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),r.addLoginHint(s);try{let a=Sn(e.account.homeAccountId);r.addCcsOid(a)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(i&&e.prompt===zr.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),r.addSid(i);try{let a=Sn(e.account.homeAccountId);r.addCcsOid(a)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),r.addLoginHint(e.loginHint),r.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),r.addLoginHint(e.account.username);try{let a=Sn(e.account.homeAccountId);r.addCcsOid(a)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),r.addLoginHint(e.loginHint),r.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&r.addNonce(e.nonce),e.state&&r.addState(e.state),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.extraQueryParameters&&r.addExtraQueryParameters(e.extraQueryParameters),e.nativeBroker&&(r.addNativeBroker(),e.authenticationScheme===ie.POP)){let i=new Tn(this.cryptoUtils),s;e.popKid?s=this.cryptoUtils.encodeKid(e.popKid):s=(await se(i.generateCnf.bind(i),C.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,r.addPopToken(s)}return r.createQueryString()}createLogoutUrlQueryString(e){let r=new Ne;return e.postLogoutRedirectUri&&r.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&r.addCorrelationId(e.correlationId),e.idTokenHint&&r.addIdTokenHint(e.idTokenHint),e.state&&r.addState(e.state),e.logoutHint&&r.addLogoutHint(e.logoutHint),e.extraQueryParameters&&r.addExtraQueryParameters(e.extraQueryParameters),r.createQueryString()}extractAccountSid(e){return e.idTokenClaims?.sid||null}extractLoginHint(e){return e.idTokenClaims?.login_hint||null}}});var X4,po,wy=v(()=>{"use strict";eu();Kc();Vc();Re();Mc();Yc();cu();ki();En();dt();Gc();Li();Mi();zc();Uc();su();Qr();so();Es();Hl();Wr();rt();nu();X4=300,po=class extends yt{constructor(e,r){super(e,r)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(C.RefreshTokenClientAcquireToken,e.correlationId);let r=Jt(),n=await se(this.executeTokenRequest.bind(this),C.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),o=n.headers?.[tt.X_MS_REQUEST_ID],i=new We(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(n.body),se(i.handleServerTokenResponse.bind(i),C.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,r,e,void 0,void 0,!0,e.forceCache,o)}async acquireTokenByRefreshToken(e){if(!e)throw ue(Pi);if(this.performanceClient?.addQueueMeasurement(C.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw I(hn);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await se(this.acquireTokenWithCachedRefreshToken.bind(this),C.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(n){let o=n instanceof sr&&n.errorCode===lo,i=n instanceof $t&&n.errorCode===wl.INVALID_GRANT_ERROR&&n.subError===wl.CLIENT_MISMATCH_ERROR;if(o||i)return se(this.acquireTokenWithCachedRefreshToken.bind(this),C.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw n}return se(this.acquireTokenWithCachedRefreshToken.bind(this),C.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,r){this.performanceClient?.addQueueMeasurement(C.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let n=_T(this.cacheManager.getRefreshToken.bind(this.cacheManager),C.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,r,void 0,this.performanceClient,e.correlationId);if(!n)throw iu(lo);if(n.expiresOn&&_s(n.expiresOn,e.refreshTokenExpirationOffsetSeconds||X4))throw iu(Qc);let o={...e,refreshToken:n.secret,authenticationScheme:e.authenticationScheme||ie.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Dt.HOME_ACCOUNT_ID}};try{return await se(this.acquireToken.bind(this),C.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(o)}catch(i){if(i instanceof sr&&i.subError===uo){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let s=Dc(n);this.cacheManager.removeRefreshToken(s)}throw i}}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(C.RefreshTokenClientExecuteTokenRequest,e.correlationId);let n=this.createTokenQueryParameters(e),o=re.appendQueryString(r.tokenEndpoint,n),i=await se(this.createTokenRequestBody.bind(this),C.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),s=this.createTokenRequestHeaders(e.ccsCredential),a={clientId:e.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:r.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return se(this.executePostToTokenEndpoint.bind(this),C.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(o,i,s,a,e.correlationId,C.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(C.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let r=e.correlationId,n=new Ne;if(n.addClientId(e.tokenBodyParameters?.[ao]||this.config.authOptions.clientId),e.redirectUri&&n.addRedirectUri(e.redirectUri),n.addScopes(e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),n.addGrantType(Yt.REFRESH_TOKEN_GRANT),n.addClientInfo(),n.addLibraryInfo(this.config.libraryInfo),n.addApplicationTelemetry(this.config.telemetry.application),n.addThrottling(),this.serverTelemetryManager&&!jc(this.config)&&n.addServerTelemetry(this.serverTelemetryManager),n.addCorrelationId(r),n.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&n.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let o=this.config.clientCredentials.clientAssertion;n.addClientAssertion(await Nt(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),n.addClientAssertionType(o.assertionType)}if(e.authenticationScheme===ie.POP){let o=new Tn(this.cryptoUtils,this.performanceClient),i;e.popKid?i=this.cryptoUtils.encodeKid(e.popKid):i=(await se(o.generateCnf.bind(o),C.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,n.addPopToken(i)}else if(e.authenticationScheme===ie.SSH)if(e.sshJwk)n.addSshJwk(e.sshJwk);else throw ue(vn);if((!xe.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Dt.HOME_ACCOUNT_ID:try{let o=Sn(e.ccsCredential.credential);n.addCcsOid(o)}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case Dt.UPN:n.addCcsUpn(e.ccsCredential.credential);break}return e.tokenBodyParameters&&n.addExtraQueryParameters(e.tokenBodyParameters),n.createQueryString()}}});var Jc,PT=v(()=>{"use strict";Kc();Li();wy();dt();Yc();Re();ki();fs();Qr();so();Bl();rt();Jc=class extends yt{constructor(e,r){super(e,r)}async acquireToken(e){try{let[r,n]=await this.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...jt]});return n===Ie.PROACTIVELY_REFRESHED&&(this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new po(this.config,this.performanceClient).acquireTokenByRefreshToken(e).catch(()=>{})),r}catch(r){if(r instanceof oo&&r.errorCode===Vr)return new po(this.config,this.performanceClient).acquireTokenByRefreshToken(e);throw r}}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(C.SilentFlowClientAcquireCachedToken,e.correlationId);let r=Ie.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!xe.isEmptyObj(e.claims))throw this.setCacheOutcome(Ie.FORCE_REFRESH_OR_CLAIMS,e.correlationId),I(Vr);if(!e.account)throw I(hn);let n=e.account.tenantId||ET(e.authority),o=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,o,n,this.performanceClient,e.correlationId);if(i){if(Rg(i.cachedAt)||_s(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Ie.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),I(Vr);i.refreshOn&&_s(i.refreshOn,0)&&(r=Ie.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Ie.NO_CACHED_ACCESS_TOKEN,e.correlationId),I(Vr);let s=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.readAccountFromCache(e.account),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,o,n,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(r,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await se(this.generateResultFromCacheRecord.bind(this),C.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),r]}setCacheOutcome(e,r){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},r),e!==Ie.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,r){this.performanceClient?.addQueueMeasurement(C.SilentFlowClientGenerateResultFromCacheRecord,r.correlationId);let n;if(e.idToken&&(n=gn(e.idToken.secret,this.config.cryptoInterface.base64Decode)),r.maxAge||r.maxAge===0){let o=n?.auth_time;if(!o)throw I(mn);Sc(o,r.maxAge)}return We.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,r,n)}}});function Z4(t){let{skus:e,libraryName:r,libraryVersion:n,extensionName:o,extensionVersion:i}=t,s=new Map([[0,[r,n]],[2,[o,i]]]),a=[];if(e?.length){if(a=e.split(OT),a.length<4)return e}else a=Array.from({length:4},()=>xT);return s.forEach((c,d)=>{c.length===2&&c[0]?.length&&c[1]?.length&&eQ({skuArr:a,index:d,skuName:c[0],skuVersion:c[1]})}),a.join(OT)}function eQ(t){let{skuArr:e,index:r,skuName:n,skuVersion:o}=t;r>=e.length||(e[r]=[n,o].join(xT))}var OT,xT,Fi,NT=v(()=>{"use strict";Re();pn();OT=",",xT="|";Fi=class t{constructor(e,r){this.cacheOutcome=Ie.NOT_APPLICABLE,this.cacheManager=r,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||b.EMPTY_STRING,this.wrapperVer=e.wrapperVer||b.EMPTY_STRING,this.telemetryCacheKey=ct.CACHE_KEY+Ke.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${ct.VALUE_SEPARATOR}${this.cacheOutcome}`,r=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();n?.length&&r.push(`broker_error=${n}`);let o=r.join(ct.VALUE_SEPARATOR),i=this.getRegionDiscoveryFields(),s=[e,i].join(ct.VALUE_SEPARATOR);return[ct.SCHEMA_VERSION,s,o].join(ct.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*r).join(ct.VALUE_SEPARATOR),o=e.errors.slice(0,r).join(ct.VALUE_SEPARATOR),i=e.errors.length,s=r<i?ct.OVERFLOW_TRUE:ct.OVERFLOW_FALSE,a=[i,s].join(ct.VALUE_SEPARATOR);return[ct.SCHEMA_VERSION,e.cacheHits,n,o,a].join(ct.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let r=this.getLastRequests();r.errors.length>=ct.MAX_CACHED_ERRORS&&(r.failedRequests.shift(),r.failedRequests.shift(),r.errors.shift()),r.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof te?e.subError?r.errors.push(e.subError):e.errorCode?r.errors.push(e.errorCode):r.errors.push(e.toString()):r.errors.push(e.toString()):r.errors.push(ct.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.errors.length;if(r===n)this.cacheManager.removeItem(this.telemetryCacheKey);else{let o={failedRequests:e.failedRequests.slice(r*2),errors:e.errors.slice(r),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o)}}static maxErrorsToSend(e){let r,n=0,o=0,i=e.errors.length;for(r=0;r<i;r++){let s=e.failedRequests[2*r]||b.EMPTY_STRING,a=e.failedRequests[2*r+1]||b.EMPTY_STRING,c=e.errors[r]||b.EMPTY_STRING;if(o+=s.toString().length+a.toString().length+c.length+3,o<ct.MAX_LAST_HEADER_BYTES)n+=1;else break}return n}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||b.EMPTY_STRING),e.push(this.regionSource||b.EMPTY_STRING),e.push(this.regionOutcome||b.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let r=this.getLastRequests();r.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return Z4(e)}}});var Se=v(()=>{"use strict";fs();Dg();Es();Li();Sg();Hl();Mc();wT();wy();PT();Kc();zc();Bl();kl();xc();Ey();Xl();Ry();Mi();gy();Vc();Yc();Lc();Vl();su();pn();Gc();dt();En();Re();ki();NT();nu();fg();rt();Wr();});var bn,du=v(()=>{"use strict";Se();bn=class{static deserializeJSONBlob(e){return e?JSON.parse(e):{}}static deserializeAccounts(e){let r={};return e&&Object.keys(e).map(function(n){let o=e[n],i={homeAccountId:o.home_account_id,environment:o.environment,realm:o.realm,localAccountId:o.local_account_id,username:o.username,authorityType:o.authority_type,name:o.name,clientInfo:o.client_info,lastModificationTime:o.last_modification_time,lastModificationApp:o.last_modification_app,tenantProfiles:o.tenantProfiles?.map(a=>JSON.parse(a))},s=new ut;co.toObject(s,i),r[n]=s}),r}static deserializeIdTokens(e){let r={};return e&&Object.keys(e).map(function(n){let o=e[n],i={homeAccountId:o.home_account_id,environment:o.environment,credentialType:o.credential_type,clientId:o.client_id,secret:o.secret,realm:o.realm};r[n]=i}),r}static deserializeAccessTokens(e){let r={};return e&&Object.keys(e).map(function(n){let o=e[n],i={homeAccountId:o.home_account_id,environment:o.environment,credentialType:o.credential_type,clientId:o.client_id,secret:o.secret,realm:o.realm,target:o.target,cachedAt:o.cached_at,expiresOn:o.expires_on,extendedExpiresOn:o.extended_expires_on,refreshOn:o.refresh_on,keyId:o.key_id,tokenType:o.token_type,requestedClaims:o.requestedClaims,requestedClaimsHash:o.requestedClaimsHash,userAssertionHash:o.userAssertionHash};r[n]=i}),r}static deserializeRefreshTokens(e){let r={};return e&&Object.keys(e).map(function(n){let o=e[n],i={homeAccountId:o.home_account_id,environment:o.environment,credentialType:o.credential_type,clientId:o.client_id,secret:o.secret,familyId:o.family_id,target:o.target,realm:o.realm};r[n]=i}),r}static deserializeAppMetadata(e){let r={};return e&&Object.keys(e).map(function(n){let o=e[n];r[n]={clientId:o.client_id,environment:o.environment,familyId:o.family_id}}),r}static deserializeAllCache(e){return{accounts:e.Account?this.deserializeAccounts(e.Account):{},idTokens:e.IdToken?this.deserializeIdTokens(e.IdToken):{},accessTokens:e.AccessToken?this.deserializeAccessTokens(e.AccessToken):{},refreshTokens:e.RefreshToken?this.deserializeRefreshTokens(e.RefreshToken):{},appMetadata:e.AppMetadata?this.deserializeAppMetadata(e.AppMetadata):{}}}}});var Py={};gt(Py,{Deserializer:()=>bn,Serializer:()=>Jn});var DT=v(()=>{"use strict";Rl();du();});var kT,Is,MT,LT,mo,Jr,UT,tQ,Oy,Z,ne,ot,qe,lu,FT,BT,qT,uu,_t,An,cr,pu,HT,jT,GT,$T,He=v(()=>{"use strict";Se();kT="Authorization",Is="Metadata",MT="X-IDENTITY-HEADER",LT="secret",mo="api-version",Jr="resource",UT="system_assigned_managed_identity",tQ="managed_identity",Oy=`https://login.microsoftonline.com/${tQ}/`,Z={AZURE_POD_IDENTITY_AUTHORITY_HOST:"AZURE_POD_IDENTITY_AUTHORITY_HOST",IDENTITY_ENDPOINT:"IDENTITY_ENDPOINT",IDENTITY_HEADER:"IDENTITY_HEADER",IDENTITY_SERVER_THUMBPRINT:"IDENTITY_SERVER_THUMBPRINT",IMDS_ENDPOINT:"IMDS_ENDPOINT",MSI_ENDPOINT:"MSI_ENDPOINT"},ne={APP_SERVICE:"AppService",AZURE_ARC:"AzureArc",CLOUD_SHELL:"CloudShell",DEFAULT_TO_IMDS:"DefaultToImds",IMDS:"Imds",SERVICE_FABRIC:"ServiceFabric"},ot={SYSTEM_ASSIGNED:"system-assigned",USER_ASSIGNED_CLIENT_ID:"user-assigned-client-id",USER_ASSIGNED_RESOURCE_ID:"user-assigned-resource-id",USER_ASSIGNED_OBJECT_ID:"user-assigned-object-id"},qe={GET:"get",POST:"post"},lu={SUCCESS:he.SUCCESS,SUCCESS_RANGE_START:he.SUCCESS_RANGE_START,SUCCESS_RANGE_END:he.SUCCESS_RANGE_END,SERVER_ERROR:he.SERVER_ERROR},FT="REGION_NAME",BT=32,qT={SHA256:"sha256"},uu={CV_CHARSET:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~"},_t={MSAL_SKU:"msal.js.node",JWT_BEARER_ASSERTION_TYPE:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer",AUTHORIZATION_PENDING:"authorization_pending",HTTP_PROTOCOL:"http://",LOCALHOST:"localhost"},An={acquireTokenSilent:62,acquireTokenByUsernamePassword:371,acquireTokenByDeviceCode:671,acquireTokenByClientCredential:771,acquireTokenByCode:871,acquireTokenByRefreshToken:872},cr={ALGORITHM:"alg",RSA_256:"RS256",PSS_256:"PS256",X5T_256:"x5t#S256",X5T:"x5t",X5C:"x5c",AUDIENCE:"aud",EXPIRATION_TIME:"exp",ISSUER:"iss",SUBJECT:"sub",NOT_BEFORE:"nbf",JWT_ID:"jti"},pu={INTERVAL_MS:100,TIMEOUT_MS:5e3},HT=4096,jT=3,GT=1e3,$T=[he.NOT_FOUND,he.REQUEST_TIMEOUT,he.TOO_MANY_REQUESTS,he.SERVER_ERROR,he.SERVICE_UNAVAILABLE,he.GATEWAY_TIMEOUT]});var Rs,zT=v(()=>{"use strict";Rs=class{static getNetworkResponse(e,r,n){return{headers:e,body:r,status:n}}static urlToHttpOptions(e){let r={protocol:e.protocol,hostname:e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return e.port!==""&&(r.port=Number(e.port)),(e.username||e.password)&&(r.auth=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`),r}}});var mu,xy,ws,VT,KT,WT,QT=v(()=>{"use strict";Se();He();zT();mu=ae(require("http"),1),xy=ae(require("https"),1);ws=class{constructor(e,r){this.proxyUrl=e||"",this.customAgentOptions=r||{}}async sendGetRequestAsync(e,r,n){return this.proxyUrl?VT(e,this.proxyUrl,qe.GET,r,this.customAgentOptions,n):KT(e,qe.GET,r,this.customAgentOptions,n)}async sendPostRequestAsync(e,r){return this.proxyUrl?VT(e,this.proxyUrl,qe.POST,r,this.customAgentOptions):KT(e,qe.POST,r,this.customAgentOptions)}},VT=(t,e,r,n,o,i)=>{let s=new URL(t),a=new URL(e),c=n?.headers||{},d={host:a.hostname,port:a.port,method:"CONNECT",path:s.hostname,headers:c};o&&Object.keys(o).length&&(d.agent=new mu.default.Agent(o));let u="";if(r===qe.POST){let f=n?.body||"";u=`Content-Type: application/x-www-form-urlencoded\r
Content-Length: ${f.length}\r
\r
${f}`}else i&&(d.timeout=i);let m=`${r.toUpperCase()} ${s.href} HTTP/1.1\r
Host: ${s.host}\r
Connection: close\r
`+u+`\r
`;return new Promise((f,h)=>{let y=mu.default.request(d);i&&y.on("timeout",()=>{y.destroy(),h(new Error("Request time out"))}),y.end(),y.on("connect",(E,A)=>{let w=E?.statusCode||lu.SERVER_ERROR;(w<lu.SUCCESS_RANGE_START||w>lu.SUCCESS_RANGE_END)&&(y.destroy(),A.destroy(),h(new Error(`Error connecting to proxy. Http status code: ${E.statusCode}. Http status message: ${E?.statusMessage||"Unknown"}`))),A.write(m);let x=[];A.on("data",K=>{x.push(K)}),A.on("end",()=>{let W=Buffer.concat([...x]).toString().split(`\r
`),le=parseInt(W[0].split(" ")[1]),et=W[0].split(" ").slice(2).join(" "),Nr=W[W.length-1],bt=W.slice(1,W.length-2),Ee=new Map;bt.forEach(rc=>{let eT=rc.split(new RegExp(/:\s(.*)/s)),t4=eT[0],mg=eT[1];try{let Al=JSON.parse(mg);Al&&typeof Al=="object"&&(mg=Al)}catch{}Ee.set(t4,mg)});let ds=Object.fromEntries(Ee),bl=Rs.getNetworkResponse(ds,WT(le,et,ds,Nr),le);(le<he.SUCCESS_RANGE_START||le>he.SUCCESS_RANGE_END)&&bl.body.error!==_t.AUTHORIZATION_PENDING&&y.destroy(),f(bl)}),A.on("error",K=>{y.destroy(),A.destroy(),h(new Error(K.toString()))})}),y.on("error",E=>{y.destroy(),h(new Error(E.toString()))})})},KT=(t,e,r,n,o)=>{let i=e===qe.POST,s=r?.body||"",a=new URL(t),c=r?.headers||{},d={method:e,headers:c,...Rs.urlToHttpOptions(a)};return n&&Object.keys(n).length&&(d.agent=new xy.default.Agent(n)),i?d.headers={...d.headers,"Content-Length":s.length}:o&&(d.timeout=o),new Promise((u,m)=>{let f;d.protocol==="http:"?f=mu.default.request(d):f=xy.default.request(d),i&&f.write(s),o&&f.on("timeout",()=>{f.destroy(),m(new Error("Request time out"))}),f.end(),f.on("response",h=>{let y=h.headers,E=h.statusCode,A=h.statusMessage,w=[];h.on("data",x=>{w.push(x)}),h.on("end",()=>{let x=Buffer.concat([...w]).toString(),K=y,W=Rs.getNetworkResponse(K,WT(E,A,K,x),E);(E<he.SUCCESS_RANGE_START||E>he.SUCCESS_RANGE_END)&&W.body.error!==_t.AUTHORIZATION_PENDING&&f.destroy(),u(W)})}),f.on("error",h=>{f.destroy(),m(new Error(h.toString()))})})},WT=(t,e,r,n)=>{let o;try{o=JSON.parse(n)}catch{let s,a;t>=he.CLIENT_ERROR_RANGE_START&&t<=he.CLIENT_ERROR_RANGE_END?(s="client_error",a="A client"):t>=he.SERVER_ERROR_RANGE_START&&t<=he.SERVER_ERROR_RANGE_END?(s="server_error",a="A server"):(s="unknown_error",a="An unknown"),o={error:s,error_description:`${a} error occured.
Http status code: ${t}
Http status message: ${e||"Unknown"}
Headers: ${JSON.stringify(r)}`}}return o}});var hu,fu,ho,gu,YT,JT,yu,_u,vu,Eu,Xc,XT,Cu,Su,Bi,qi=v(()=>{"use strict";He();hu="invalid_file_extension",fu="invalid_file_path",ho="invalid_managed_identity_id_type",gu="invalid_secret",YT="missing_client_id",JT="network_unavailable",yu="platform_not_supported",_u="unable_to_create_azure_arc",vu="unable_to_create_cloud_shell",Eu="unable_to_create_source",Xc="unable_to_read_secret_file",XT="user_assigned_not_available_at_runtime",Cu="www_authenticate_header_missing",Su="www_authenticate_header_unsupported_format",Bi={[Z.AZURE_POD_IDENTITY_AUTHORITY_HOST]:"azure_pod_identity_authority_host_url_malformed",[Z.IDENTITY_ENDPOINT]:"identity_endpoint_url_malformed",[Z.IMDS_ENDPOINT]:"imds_endpoint_url_malformed",[Z.MSI_ENDPOINT]:"msi_endpoint_url_malformed"}});function Qe(t){return new Ny(t)}var rQ,Ny,Ps=v(()=>{"use strict";Se();qi();He();rQ={[hu]:"The file path in the WWW-Authenticate header does not contain a .key file.",[fu]:"The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.",[ho]:"More than one ManagedIdentityIdType was provided.",[gu]:"The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.",[yu]:"The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.",[YT]:"A ManagedIdentityId id was not provided.",[Bi.AZURE_POD_IDENTITY_AUTHORITY_HOST]:`The Managed Identity's '${Z.AZURE_POD_IDENTITY_AUTHORITY_HOST}' environment variable is malformed.`,[Bi.IDENTITY_ENDPOINT]:`The Managed Identity's '${Z.IDENTITY_ENDPOINT}' environment variable is malformed.`,[Bi.IMDS_ENDPOINT]:`The Managed Identity's '${Z.IMDS_ENDPOINT}' environment variable is malformed.`,[Bi.MSI_ENDPOINT]:`The Managed Identity's '${Z.MSI_ENDPOINT}' environment variable is malformed.`,[JT]:"Authentication unavailable. The request to the managed identity endpoint timed out.",[_u]:"Azure Arc Managed Identities can only be system assigned.",[vu]:"Cloud Shell Managed Identities can only be system assigned.",[Eu]:"Unable to create a Managed Identity source based on environment variables.",[Xc]:"Unable to read the secret file.",[XT]:"Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.",[Cu]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.",[Su]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format."},Ny=class t extends te{constructor(e){super(e,rQ[e]),this.name="ManagedIdentityError",Object.setPrototypeOf(this,t.prototype)}}});var Tu,ZT=v(()=>{"use strict";Ps();He();qi();Tu=class{get id(){return this._id}set id(e){this._id=e}get idType(){return this._idType}set idType(e){this._idType=e}constructor(e){let r=e?.userAssignedClientId,n=e?.userAssignedResourceId,o=e?.userAssignedObjectId;if(r){if(n||o)throw Qe(ho);this.id=r,this.idType=ot.USER_ASSIGNED_CLIENT_ID}else if(n){if(r||o)throw Qe(ho);this.id=n,this.idType=ot.USER_ASSIGNED_RESOURCE_ID}else if(o){if(r||n)throw Qe(ho);this.id=o,this.idType=ot.USER_ASSIGNED_OBJECT_ID}else this.id=UT,this.idType=ot.SYSTEM_ASSIGNED}}});var bu,eb=v(()=>{"use strict";bu=class{constructor(e,r,n){this.maxRetries=e,this.retryDelay=r,this.httpStatusCodesToRetryOn=n}retryAfterMillisecondsToSleep(e){if(!e)return 0;let r=Math.round(parseFloat(e)*1e3);return isNaN(r)&&(r=Math.max(0,new Date(e).valueOf()-new Date().valueOf())),r}async pauseForRetry(e,r,n){if(this.httpStatusCodesToRetryOn.includes(e)&&r<this.maxRetries){let o=this.retryAfterMillisecondsToSleep(n);return await new Promise(i=>setTimeout(i,o||this.retryDelay)),!0}return!1}}});var Au,tb=v(()=>{"use strict";Se();He();Au=class{constructor(e,r){this.httpClientNoRetries=e,this.retryPolicy=r}async sendNetworkRequestAsyncHelper(e,r,n){return e===qe.GET?this.httpClientNoRetries.sendGetRequestAsync(r,n):this.httpClientNoRetries.sendPostRequestAsync(r,n)}async sendNetworkRequestAsync(e,r,n){let o=await this.sendNetworkRequestAsyncHelper(e,r,n),i=0;for(;await this.retryPolicy.pauseForRetry(o.status,i,o.headers[tt.RETRY_AFTER]);)o=await this.sendNetworkRequestAsyncHelper(e,r,n),i++;return o}async sendGetRequestAsync(e,r){return this.sendNetworkRequestAsync(qe.GET,e,r)}async sendPostRequestAsync(e,r){return this.sendNetworkRequestAsync(qe.POST,e,r)}}});var pt,zt,Zc=v(()=>{"use strict";Se();pt={invalidLoopbackAddressType:{code:"invalid_loopback_server_address_type",desc:"Loopback server address is not type string. This is unexpected."},unableToLoadRedirectUri:{code:"unable_to_load_redirectUrl",desc:"Loopback server callback was invoked without a url. This is unexpected."},noAuthCodeInResponse:{code:"no_auth_code_in_response",desc:"No auth code found in the server response. Please check your network trace to determine what happened."},noLoopbackServerExists:{code:"no_loopback_server_exists",desc:"No loopback server exists yet."},loopbackServerAlreadyExists:{code:"loopback_server_already_exists",desc:"Loopback server already exists. Cannot create another."},loopbackServerTimeout:{code:"loopback_server_timeout",desc:"Timed out waiting for auth code listener to be registered."},stateNotFoundError:{code:"state_not_found",desc:"State not found. Please verify that the request originated from msal."},thumbprintMissing:{code:"thumbprint_missing_from_client_certificate",desc:"Client certificate does not contain a SHA-1 or SHA-256 thumbprint."}},zt=class t extends te{constructor(e,r){super(e,r),this.name="NodeAuthError"}static createInvalidLoopbackAddressTypeError(){return new t(pt.invalidLoopbackAddressType.code,`${pt.invalidLoopbackAddressType.desc}`)}static createUnableToLoadRedirectUrlError(){return new t(pt.unableToLoadRedirectUri.code,`${pt.unableToLoadRedirectUri.desc}`)}static createNoAuthCodeInResponseError(){return new t(pt.noAuthCodeInResponse.code,`${pt.noAuthCodeInResponse.desc}`)}static createNoLoopbackServerExistsError(){return new t(pt.noLoopbackServerExists.code,`${pt.noLoopbackServerExists.desc}`)}static createLoopbackServerAlreadyExistsError(){return new t(pt.loopbackServerAlreadyExists.code,`${pt.loopbackServerAlreadyExists.desc}`)}static createLoopbackServerTimeoutError(){return new t(pt.loopbackServerTimeout.code,`${pt.loopbackServerTimeout.desc}`)}static createStateNotFoundError(){return new t(pt.stateNotFoundError.code,pt.stateNotFoundError.desc)}static createThumbprintMissingError(){return new t(pt.thumbprintMissing.code,pt.thumbprintMissing.desc)}}});function Iu({auth:t,broker:e,cache:r,system:n,telemetry:o}){let i={...iQ,networkClient:new ws(n?.proxyUrl,n?.customAgentOptions),loggerOptions:n?.loggerOptions||Dy,disableInternalRetries:n?.disableInternalRetries||!1};if(t.clientCertificate&&!t.clientCertificate.thumbprint&&!t.clientCertificate.thumbprintSha256)throw zt.createStateNotFoundError();return{auth:{...nQ,...t},broker:{...e},cache:{...oQ,...r},system:{...i,...n},telemetry:{...sQ,...o}}}function rb({managedIdentityIdParams:t,system:e}){let r=new Tu(t),n=e?.loggerOptions||Dy,o;if(e?.networkClient?o=e.networkClient:o=new ws(e?.proxyUrl,e?.customAgentOptions),!e?.disableInternalRetries){let i=new bu(jT,GT,$T);o=new Au(o,i)}return{managedIdentityId:r,system:{loggerOptions:n,networkClient:o}}}var nQ,oQ,Dy,iQ,sQ,Ru=v(()=>{"use strict";Se();QT();ZT();He();eb();tb();Zc();nQ={clientId:b.EMPTY_STRING,authority:b.DEFAULT_AUTHORITY,clientSecret:b.EMPTY_STRING,clientAssertion:b.EMPTY_STRING,clientCertificate:{thumbprint:b.EMPTY_STRING,thumbprintSha256:b.EMPTY_STRING,privateKey:b.EMPTY_STRING,x5c:b.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:b.EMPTY_STRING,authorityMetadata:b.EMPTY_STRING,clientCapabilities:[],protocolMode:Gt.AAD,azureCloudOptions:{azureCloudInstance:Cn.None,tenant:b.EMPTY_STRING},skipAuthorityMetadataCache:!1},oQ={claimsBasedCachingEnabled:!1},Dy={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Be.Info},iQ={loggerOptions:Dy,networkClient:new ws,proxyUrl:b.EMPTY_STRING,customAgentOptions:{},disableInternalRetries:!1},sQ={application:{appName:b.EMPTY_STRING,appVersion:b.EMPTY_STRING}}});function ky(){return wu>Pu.length-16&&(nb.default.randomFillSync(Pu),wu=0),Pu.slice(wu,wu+=16)}var nb,Pu,wu,ob=v(()=>{nb=ae(require("crypto")),Pu=new Uint8Array(256),wu=Pu.length});var ib,sb=v(()=>{ib=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function aQ(t){return typeof t=="string"&&ib.test(t)}var ab,cb=v(()=>{sb();ab=aQ});function cQ(t,e=0){let r=(vt[t[e+0]]+vt[t[e+1]]+vt[t[e+2]]+vt[t[e+3]]+"-"+vt[t[e+4]]+vt[t[e+5]]+"-"+vt[t[e+6]]+vt[t[e+7]]+"-"+vt[t[e+8]]+vt[t[e+9]]+"-"+vt[t[e+10]]+vt[t[e+11]]+vt[t[e+12]]+vt[t[e+13]]+vt[t[e+14]]+vt[t[e+15]]).toLowerCase();if(!ab(r))throw TypeError("Stringified UUID is invalid");return r}var vt,db,lb=v(()=>{cb();vt=[];for(let t=0;t<256;++t)vt.push((t+256).toString(16).substr(1));db=cQ});function dQ(t,e,r){t=t||{};let n=t.random||(t.rng||ky)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let o=0;o<16;++o)e[r+o]=n[o];return e}return db(n)}var My,ub=v(()=>{ob();lb();My=dQ});var pb=v(()=>{ub()});var Ou,mb=v(()=>{"use strict";pb();Ou=class{generateGuid(){return My()}isGuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}}});var Zt,ed=v(()=>{"use strict";Se();Zt=class t{static base64Encode(e,r){return Buffer.from(e,r).toString("base64")}static base64EncodeUrl(e,r){return t.base64Encode(e,r).replace(/=/g,b.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(e){return Buffer.from(e,"base64").toString("utf8")}static base64DecodeUrl(e){let r=e.replace(/-/g,"+").replace(/_/g,"/");for(;r.length%4;)r+="=";return t.base64Decode(r)}}});var hb,Os,Ly=v(()=>{"use strict";He();hb=ae(require("crypto"),1);Os=class{sha256(e){return hb.default.createHash(qT.SHA256).update(e).digest()}}});var fb,xu,gb=v(()=>{"use strict";Se();He();ed();Ly();fb=ae(require("crypto"),1);xu=class{constructor(){this.hashUtils=new Os}async generatePkceCodes(){let e=this.generateCodeVerifier(),r=this.generateCodeChallengeFromVerifier(e);return{verifier:e,challenge:r}}generateCodeVerifier(){let e=[],r=256-256%uu.CV_CHARSET.length;for(;e.length<=BT;){let o=fb.default.randomBytes(1)[0];if(o>=r)continue;let i=o%uu.CV_CHARSET.length;e.push(uu.CV_CHARSET[i])}let n=e.join(b.EMPTY_STRING);return Zt.base64EncodeUrl(n)}generateCodeChallengeFromVerifier(e){return Zt.base64EncodeUrl(this.hashUtils.sha256(e).toString("base64"),"base64")}}});var fo,Nu=v(()=>{"use strict";mb();ed();gb();Ly();fo=class{constructor(){this.pkceGenerator=new xu,this.guidGenerator=new Ou,this.hashUtils=new Os}base64UrlEncode(){throw new Error("Method not implemented.")}encodeKid(){throw new Error("Method not implemented.")}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(e){return Zt.base64Encode(e)}base64Decode(e){return Zt.base64Decode(e)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw new Error("Method not implemented.")}removeTokenBindingKey(){throw new Error("Method not implemented.")}clearKeystore(){throw new Error("Method not implemented.")}signJwt(){throw new Error("Method not implemented.")}async hashString(e){return Zt.base64EncodeUrl(this.hashUtils.sha256(e).toString("base64"),"base64")}}});var go,Du=v(()=>{"use strict";Se();du();Rl();go=class extends co{constructor(e,r,n,o){super(r,n,e,o),this.cache={},this.changeEmitters=[],this.logger=e}registerChangeEmitter(e){this.changeEmitters.push(e)}emitChange(){this.changeEmitters.forEach(e=>e.call(null))}cacheToInMemoryCache(e){let r={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(let n in e){let o=e[n];if(typeof o=="object")if(o instanceof ut)r.accounts[n]=o;else if(lt.isIdTokenEntity(o))r.idTokens[n]=o;else if(lt.isAccessTokenEntity(o))r.accessTokens[n]=o;else if(lt.isRefreshTokenEntity(o))r.refreshTokens[n]=o;else if(lt.isAppMetadataEntity(n,o))r.appMetadata[n]=o;else continue}return r}inMemoryCacheToCache(e){let r=this.getCache();return r={...r,...e.accounts,...e.idTokens,...e.accessTokens,...e.refreshTokens,...e.appMetadata},r}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(e){this.logger.trace("Setting in-memory cache");let r=this.inMemoryCacheToCache(e);this.setCache(r),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(e){this.logger.trace("Setting cache key value store"),this.cache=e,this.emitChange()}getItem(e){return this.logger.tracePii(`Item key: ${e}`),this.getCache()[e]}setItem(e,r){this.logger.tracePii(`Item key: ${e}`);let n=this.getCache();n[e]=r,this.setCache(n)}getAccountKeys(){let e=this.getInMemoryCache();return Object.keys(e.accounts)}getTokenKeys(){let e=this.getInMemoryCache();return{idToken:Object.keys(e.idTokens),accessToken:Object.keys(e.accessTokens),refreshToken:Object.keys(e.refreshTokens)}}getAccount(e){let r=this.getCachedAccountEntity(e);return r&&ut.isAccountEntity(r)?this.updateOutdatedCachedAccount(e,r):null}getCachedAccountEntity(e){return this.getItem(e)?Object.assign(new ut,this.getItem(e)):null}setAccount(e){let r=e.generateAccountKey();this.setItem(r,e)}getIdTokenCredential(e){let r=this.getItem(e);return lt.isIdTokenEntity(r)?r:null}setIdTokenCredential(e){let r=lt.generateCredentialKey(e);this.setItem(r,e)}getAccessTokenCredential(e){let r=this.getItem(e);return lt.isAccessTokenEntity(r)?r:null}setAccessTokenCredential(e){let r=lt.generateCredentialKey(e);this.setItem(r,e)}getRefreshTokenCredential(e){let r=this.getItem(e);return lt.isRefreshTokenEntity(r)?r:null}setRefreshTokenCredential(e){let r=lt.generateCredentialKey(e);this.setItem(r,e)}getAppMetadata(e){let r=this.getItem(e);return lt.isAppMetadataEntity(e,r)?r:null}setAppMetadata(e){let r=lt.generateAppMetadataKey(e);this.setItem(r,e)}getServerTelemetry(e){let r=this.getItem(e);return r&&lt.isServerTelemetryEntity(e,r)?r:null}setServerTelemetry(e,r){this.setItem(e,r)}getAuthorityMetadata(e){let r=this.getItem(e);return r&&lt.isAuthorityMetadataEntity(e,r)?r:null}getAuthorityMetadataKeys(){return this.getKeys().filter(e=>this.isAuthorityMetadata(e))}setAuthorityMetadata(e,r){this.setItem(e,r)}getThrottlingCache(e){let r=this.getItem(e);return r&&lt.isThrottlingEntity(e,r)?r:null}setThrottlingCache(e,r){this.setItem(e,r)}removeItem(e){this.logger.tracePii(`Item key: ${e}`);let r=!1,n=this.getCache();return n[e]&&(delete n[e],r=!0),r&&(this.setCache(n),this.emitChange()),r}removeOutdatedAccount(e){this.removeItem(e)}containsKey(e){return this.getKeys().includes(e)}getKeys(){this.logger.trace("Retrieving all cache keys");let e=this.getCache();return[...Object.keys(e)]}async clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach(r=>{this.removeItem(r)}),this.emitChange()}static generateInMemoryCache(e){return bn.deserializeAllCache(bn.deserializeJSONBlob(e))}static generateJsonCache(e){return Jn.serializeAllCache(e)}updateCredentialCacheKey(e,r){let n=lt.generateCredentialKey(r);if(e!==n){let o=this.getItem(e);if(o)return this.removeItem(e),this.setItem(n,o),this.logger.verbose(`Updated an outdated ${r.credentialType} cache key`),n;this.logger.error(`Attempted to update an outdated ${r.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}}});var td,xs,Uy=v(()=>{"use strict";Se();du();Rl();td={Account:{},IdToken:{},AccessToken:{},RefreshToken:{},AppMetadata:{}},xs=class{constructor(e,r,n){this.cacheHasChanged=!1,this.storage=e,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),n&&(this.persistence=n),this.logger=r}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let e=Jn.serializeAllCache(this.storage.getInMemoryCache());return this.cacheSnapshot?(this.logger.trace("Reading cache snapshot from disk"),e=this.mergeState(JSON.parse(this.cacheSnapshot),e)):this.logger.trace("No cache snapshot to merge"),this.cacheHasChanged=!1,JSON.stringify(e)}deserialize(e){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=e,this.cacheSnapshot){this.logger.trace("Reading cache snapshot from disk");let r=bn.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(r)}else this.logger.trace("No cache snapshot to deserialize")}getKVStore(){return this.storage.getCache()}async getAllAccounts(){this.logger.trace("getAllAccounts called");let e;try{return this.persistence&&(e=new ar(this,!0),await this.persistence.beforeCacheAccess(e)),this.storage.getAllAccounts()}finally{this.persistence&&e&&await this.persistence.afterCacheAccess(e)}}async getAccountByHomeId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.homeAccountId===e)[0]||null}async getAccountByLocalId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.localAccountId===e)[0]||null}async removeAccount(e){this.logger.trace("removeAccount called");let r;try{this.persistence&&(r=new ar(this,!0),await this.persistence.beforeCacheAccess(r)),await this.storage.removeAccount(ut.generateAccountCacheKey(e))}finally{this.persistence&&r&&await this.persistence.afterCacheAccess(r)}}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(e,r){this.logger.trace("Merging in-memory cache with cache snapshot");let n=this.mergeRemovals(e,r);return this.mergeUpdates(n,r)}mergeUpdates(e,r){return Object.keys(r).forEach(n=>{let o=r[n];if(!e.hasOwnProperty(n))o!==null&&(e[n]=o);else{let i=o!==null,s=typeof o=="object",a=!Array.isArray(o),c=typeof e[n]<"u"&&e[n]!==null;i&&s&&a&&c?this.mergeUpdates(e[n],o):e[n]=o}}),e}mergeRemovals(e,r){this.logger.trace("Remove updated entries in cache");let n=e.Account?this.mergeRemovalsDict(e.Account,r.Account):e.Account,o=e.AccessToken?this.mergeRemovalsDict(e.AccessToken,r.AccessToken):e.AccessToken,i=e.RefreshToken?this.mergeRemovalsDict(e.RefreshToken,r.RefreshToken):e.RefreshToken,s=e.IdToken?this.mergeRemovalsDict(e.IdToken,r.IdToken):e.IdToken,a=e.AppMetadata?this.mergeRemovalsDict(e.AppMetadata,r.AppMetadata):e.AppMetadata;return{...e,Account:n,AccessToken:o,RefreshToken:i,IdToken:s,AppMetadata:a}}mergeRemovalsDict(e,r){let n={...e};return Object.keys(e).forEach(o=>{(!r||!r.hasOwnProperty(o))&&delete n[o]}),n}overlayDefaults(e){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...td.Account,...e.Account},IdToken:{...td.IdToken,...e.IdToken},AccessToken:{...td.AccessToken,...e.AccessToken},RefreshToken:{...td.RefreshToken,...e.RefreshToken},AppMetadata:{...td.AppMetadata,...e.AppMetadata}}}}});var Ns=g((Fy,_b)=>{var ku=require("buffer"),Xr=ku.Buffer;function yb(t,e){for(var r in t)e[r]=t[r]}Xr.from&&Xr.alloc&&Xr.allocUnsafe&&Xr.allocUnsafeSlow?_b.exports=ku:(yb(ku,Fy),Fy.Buffer=Hi);function Hi(t,e,r){return Xr(t,e,r)}Hi.prototype=Object.create(Xr.prototype);yb(Xr,Hi);Hi.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Xr(t,e,r)};Hi.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Xr(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Hi.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Xr(t)};Hi.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return ku.SlowBuffer(t)}});var By=g((OLe,vb)=>{var Mu=Ns().Buffer,lQ=require("stream"),uQ=require("util");function Lu(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=Mu.alloc(0),this;if(typeof t.pipe=="function")return this.buffer=Mu.alloc(0),t.pipe(this),this;if(t.length||typeof t=="object")return this.buffer=t,this.writable=!1,process.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}uQ.inherits(Lu,lQ);Lu.prototype.write=function(e){this.buffer=Mu.concat([this.buffer,Mu.from(e)]),this.emit("data",e)};Lu.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1};vb.exports=Lu});var Cb=g((xLe,Eb)=>{"use strict";var rd=require("buffer").Buffer,qy=require("buffer").SlowBuffer;Eb.exports=Uu;function Uu(t,e){if(!rd.isBuffer(t)||!rd.isBuffer(e)||t.length!==e.length)return!1;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}Uu.install=function(){rd.prototype.equal=qy.prototype.equal=function(e){return Uu(this,e)}};var pQ=rd.prototype.equal,mQ=qy.prototype.equal;Uu.restore=function(){rd.prototype.equal=pQ,qy.prototype.equal=mQ}});var Tb=g((NLe,Sb)=>{"use strict";function Hy(t){var e=(t/8|0)+(t%8===0?0:1);return e}var hQ={ES256:Hy(256),ES384:Hy(384),ES512:Hy(521)};function fQ(t){var e=hQ[t];if(e)return e;throw new Error('Unknown algorithm "'+t+'"')}Sb.exports=fQ});var Ob=g((DLe,Pb)=>{"use strict";var Fu=Ns().Buffer,Ab=Tb(),Bu=128,Ib=0,gQ=32,yQ=16,_Q=2,Rb=yQ|gQ|Ib<<6,qu=_Q|Ib<<6;function vQ(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function wb(t){if(Fu.isBuffer(t))return t;if(typeof t=="string")return Fu.from(t,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function EQ(t,e){t=wb(t);var r=Ab(e),n=r+1,o=t.length,i=0;if(t[i++]!==Rb)throw new Error('Could not find expected "seq"');var s=t[i++];if(s===(Bu|1)&&(s=t[i++]),o-i<s)throw new Error('"seq" specified length of "'+s+'", only "'+(o-i)+'" remaining');if(t[i++]!==qu)throw new Error('Could not find expected "int" for "r"');var a=t[i++];if(o-i-2<a)throw new Error('"r" specified length of "'+a+'", only "'+(o-i-2)+'" available');if(n<a)throw new Error('"r" specified length of "'+a+'", max of "'+n+'" is acceptable');var c=i;if(i+=a,t[i++]!==qu)throw new Error('Could not find expected "int" for "s"');var d=t[i++];if(o-i!==d)throw new Error('"s" specified length of "'+d+'", expected "'+(o-i)+'"');if(n<d)throw new Error('"s" specified length of "'+d+'", max of "'+n+'" is acceptable');var u=i;if(i+=d,i!==o)throw new Error('Expected to consume entire buffer, but "'+(o-i)+'" bytes remain');var m=r-a,f=r-d,h=Fu.allocUnsafe(m+a+f+d);for(i=0;i<m;++i)h[i]=0;t.copy(h,i,c+Math.max(-m,0),c+a),i=r;for(var y=i;i<y+f;++i)h[i]=0;return t.copy(h,i,u+Math.max(-f,0),u+d),h=h.toString("base64"),h=vQ(h),h}function bb(t,e,r){for(var n=0;e+n<r&&t[e+n]===0;)++n;var o=t[e+n]>=Bu;return o&&--n,n}function CQ(t,e){t=wb(t);var r=Ab(e),n=t.length;if(n!==r*2)throw new TypeError('"'+e+'" signatures must be "'+r*2+'" bytes, saw "'+n+'"');var o=bb(t,0,r),i=bb(t,r,t.length),s=r-o,a=r-i,c=2+s+1+1+a,d=c<Bu,u=Fu.allocUnsafe((d?2:3)+c),m=0;return u[m++]=Rb,d?u[m++]=c:(u[m++]=Bu|1,u[m++]=c&255),u[m++]=qu,u[m++]=s,o<0?(u[m++]=0,m+=t.copy(u,m,0,r)):m+=t.copy(u,m,o,r),u[m++]=qu,u[m++]=a,i<0?(u[m++]=0,t.copy(u,m,r)):t.copy(u,m,r+i),u}Pb.exports={derToJose:EQ,joseToDer:CQ}});var $y=g((kLe,Bb)=>{var SQ=Cb(),ks=Ns().Buffer,Zr=require("crypto"),Nb=Ob(),xb=require("util"),TQ=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,nd="secret must be a string or buffer",Ds="key must be a string or a buffer",bQ="key must be a string, a buffer or an object",jy=typeof Zr.createPublicKey=="function";jy&&(Ds+=" or a KeyObject",nd+="or a KeyObject");function Db(t){if(!ks.isBuffer(t)&&typeof t!="string"&&(!jy||typeof t!="object"||typeof t.type!="string"||typeof t.asymmetricKeyType!="string"||typeof t.export!="function"))throw Mr(Ds)}function kb(t){if(!ks.isBuffer(t)&&typeof t!="string"&&typeof t!="object")throw Mr(bQ)}function AQ(t){if(!ks.isBuffer(t)){if(typeof t=="string")return t;if(!jy||typeof t!="object"||t.type!=="secret"||typeof t.export!="function")throw Mr(nd)}}function Gy(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Mb(t){t=t.toString();var e=4-t.length%4;if(e!==4)for(var r=0;r<e;++r)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}function Mr(t){var e=[].slice.call(arguments,1),r=xb.format.bind(xb,t).apply(null,e);return new TypeError(r)}function IQ(t){return ks.isBuffer(t)||typeof t=="string"}function od(t){return IQ(t)||(t=JSON.stringify(t)),t}function Lb(t){return function(r,n){AQ(n),r=od(r);var o=Zr.createHmac("sha"+t,n),i=(o.update(r),o.digest("base64"));return Gy(i)}}function RQ(t){return function(r,n,o){var i=Lb(t)(r,o);return SQ(ks.from(n),ks.from(i))}}function Ub(t){return function(r,n){kb(n),r=od(r);var o=Zr.createSign("RSA-SHA"+t),i=(o.update(r),o.sign(n,"base64"));return Gy(i)}}function Fb(t){return function(r,n,o){Db(o),r=od(r),n=Mb(n);var i=Zr.createVerify("RSA-SHA"+t);return i.update(r),i.verify(o,n,"base64")}}function wQ(t){return function(r,n){kb(n),r=od(r);var o=Zr.createSign("RSA-SHA"+t),i=(o.update(r),o.sign({key:n,padding:Zr.constants.RSA_PKCS1_PSS_PADDING,saltLength:Zr.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return Gy(i)}}function PQ(t){return function(r,n,o){Db(o),r=od(r),n=Mb(n);var i=Zr.createVerify("RSA-SHA"+t);return i.update(r),i.verify({key:o,padding:Zr.constants.RSA_PKCS1_PSS_PADDING,saltLength:Zr.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function OQ(t){var e=Ub(t);return function(){var n=e.apply(null,arguments);return n=Nb.derToJose(n,"ES"+t),n}}function xQ(t){var e=Fb(t);return function(n,o,i){o=Nb.joseToDer(o,"ES"+t).toString("base64");var s=e(n,o,i);return s}}function NQ(){return function(){return""}}function DQ(){return function(e,r){return r===""}}Bb.exports=function(e){var r={hs:Lb,rs:Ub,ps:wQ,es:OQ,none:NQ},n={hs:RQ,rs:Fb,ps:PQ,es:xQ,none:DQ},o=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!o)throw Mr(TQ,e);var i=(o[1]||o[3]).toLowerCase(),s=o[2];return{sign:r[i](s),verify:n[i](s)}}});var zy=g((MLe,qb)=>{var kQ=require("buffer").Buffer;qb.exports=function(e){return typeof e=="string"?e:typeof e=="number"||kQ.isBuffer(e)?e.toString():JSON.stringify(e)}});var Vb=g((LLe,zb)=>{var MQ=Ns().Buffer,Hb=By(),LQ=$y(),UQ=require("stream"),jb=zy(),Vy=require("util");function Gb(t,e){return MQ.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function FQ(t,e,r){r=r||"utf8";var n=Gb(jb(t),"binary"),o=Gb(jb(e),r);return Vy.format("%s.%s",n,o)}function $b(t){var e=t.header,r=t.payload,n=t.secret||t.privateKey,o=t.encoding,i=LQ(e.alg),s=FQ(e,r,o),a=i.sign(s,n);return Vy.format("%s.%s",s,a)}function Hu(t){var e=t.secret||t.privateKey||t.key,r=new Hb(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=r,this.payload=new Hb(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}Vy.inherits(Hu,UQ);Hu.prototype.sign=function(){try{var e=$b({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}};Hu.sign=$b;zb.exports=Hu});var rA=g((ULe,tA)=>{var Wb=Ns().Buffer,Kb=By(),BQ=$y(),qQ=require("stream"),Qb=zy(),HQ=require("util"),jQ=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function GQ(t){return Object.prototype.toString.call(t)==="[object Object]"}function $Q(t){if(GQ(t))return t;try{return JSON.parse(t)}catch{return}}function Yb(t){var e=t.split(".",1)[0];return $Q(Wb.from(e,"base64").toString("binary"))}function zQ(t){return t.split(".",2).join(".")}function Jb(t){return t.split(".")[2]}function VQ(t,e){e=e||"utf8";var r=t.split(".")[1];return Wb.from(r,"base64").toString(e)}function Xb(t){return jQ.test(t)&&!!Yb(t)}function Zb(t,e,r){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}t=Qb(t);var o=Jb(t),i=zQ(t),s=BQ(e);return s.verify(i,o,r)}function eA(t,e){if(e=e||{},t=Qb(t),!Xb(t))return null;var r=Yb(t);if(!r)return null;var n=VQ(t);return(r.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:r,payload:n,signature:Jb(t)}}function Ms(t){t=t||{};var e=t.secret||t.publicKey||t.key,r=new Kb(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=r,this.signature=new Kb(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}HQ.inherits(Ms,qQ);Ms.prototype.verify=function(){try{var e=Zb(this.signature.buffer,this.algorithm,this.key.buffer),r=eA(this.signature.buffer,this.encoding);return this.emit("done",e,r),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};Ms.decode=eA;Ms.isValid=Xb;Ms.verify=Zb;tA.exports=Ms});var Gu=g(yo=>{var nA=Vb(),ju=rA(),KQ=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];yo.ALGORITHMS=KQ;yo.sign=nA.sign;yo.verify=ju.verify;yo.decode=ju.decode;yo.isValid=ju.isValid;yo.createSign=function(e){return new nA(e)};yo.createVerify=function(e){return new ju(e)}});var Ky=g((BLe,oA)=>{var WQ=Gu();oA.exports=function(t,e){e=e||{};var r=WQ.decode(t,e);if(!r)return null;var n=r.payload;if(typeof n=="string")try{var o=JSON.parse(n);o!==null&&typeof o=="object"&&(n=o)}catch{}return e.complete===!0?{header:r.header,payload:n,signature:r.signature}:n}});var id=g((qLe,iA)=>{var $u=function(t,e){Error.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=t,e&&(this.inner=e)};$u.prototype=Object.create(Error.prototype);$u.prototype.constructor=$u;iA.exports=$u});var Wy=g((HLe,aA)=>{var sA=id(),zu=function(t,e){sA.call(this,t),this.name="NotBeforeError",this.date=e};zu.prototype=Object.create(sA.prototype);zu.prototype.constructor=zu;aA.exports=zu});var Qy=g((jLe,dA)=>{var cA=id(),Vu=function(t,e){cA.call(this,t),this.name="TokenExpiredError",this.expiredAt=e};Vu.prototype=Object.create(cA.prototype);Vu.prototype.constructor=Vu;dA.exports=Vu});var uA=g((GLe,lA)=>{var Ls=1e3,Us=Ls*60,Fs=Us*60,ji=Fs*24,QQ=ji*7,YQ=ji*365.25;lA.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return JQ(t);if(r==="number"&&isFinite(t))return e.long?ZQ(t):XQ(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function JQ(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*YQ;case"weeks":case"week":case"w":return r*QQ;case"days":case"day":case"d":return r*ji;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Fs;case"minutes":case"minute":case"mins":case"min":case"m":return r*Us;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ls;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function XQ(t){var e=Math.abs(t);return e>=ji?Math.round(t/ji)+"d":e>=Fs?Math.round(t/Fs)+"h":e>=Us?Math.round(t/Us)+"m":e>=Ls?Math.round(t/Ls)+"s":t+"ms"}function ZQ(t){var e=Math.abs(t);return e>=ji?Ku(t,e,ji,"day"):e>=Fs?Ku(t,e,Fs,"hour"):e>=Us?Ku(t,e,Us,"minute"):e>=Ls?Ku(t,e,Ls,"second"):t+" ms"}function Ku(t,e,r,n){var o=e>=r*1.5;return Math.round(t/r)+" "+n+(o?"s":"")}});var Yy=g(($Le,pA)=>{var e6=uA();pA.exports=function(t,e){var r=e||Math.floor(Date.now()/1e3);if(typeof t=="string"){var n=e6(t);return typeof n>"u"?void 0:Math.floor(r+n/1e3)}else return typeof t=="number"?r+t:void 0}});var sd=g((zLe,mA)=>{var t6="2.0.0",r6=Number.MAX_SAFE_INTEGER||9007199254740991,n6=16,o6=250,i6=["major","premajor","minor","preminor","patch","prepatch","prerelease"];mA.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:n6,MAX_SAFE_BUILD_LENGTH:o6,MAX_SAFE_INTEGER:r6,RELEASE_TYPES:i6,SEMVER_SPEC_VERSION:t6,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var ad=g((VLe,hA)=>{var s6=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};hA.exports=s6});var Bs=g((In,fA)=>{var{MAX_SAFE_COMPONENT_LENGTH:Jy,MAX_SAFE_BUILD_LENGTH:a6,MAX_LENGTH:c6}=sd(),d6=ad();In=fA.exports={};var l6=In.re=[],u6=In.safeRe=[],D=In.src=[],k=In.t={},p6=0,Xy="[a-zA-Z0-9-]",m6=[["\\s",1],["\\d",c6],[Xy,a6]],h6=t=>{for(let[e,r]of m6)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},X=(t,e,r)=>{let n=h6(e),o=p6++;d6(t,o,e),k[t]=o,D[o]=e,l6[o]=new RegExp(e,r?"g":void 0),u6[o]=new RegExp(n,r?"g":void 0)};X("NUMERICIDENTIFIER","0|[1-9]\\d*");X("NUMERICIDENTIFIERLOOSE","\\d+");X("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Xy}*`);X("MAINVERSION",`(${D[k.NUMERICIDENTIFIER]})\\.(${D[k.NUMERICIDENTIFIER]})\\.(${D[k.NUMERICIDENTIFIER]})`);X("MAINVERSIONLOOSE",`(${D[k.NUMERICIDENTIFIERLOOSE]})\\.(${D[k.NUMERICIDENTIFIERLOOSE]})\\.(${D[k.NUMERICIDENTIFIERLOOSE]})`);X("PRERELEASEIDENTIFIER",`(?:${D[k.NUMERICIDENTIFIER]}|${D[k.NONNUMERICIDENTIFIER]})`);X("PRERELEASEIDENTIFIERLOOSE",`(?:${D[k.NUMERICIDENTIFIERLOOSE]}|${D[k.NONNUMERICIDENTIFIER]})`);X("PRERELEASE",`(?:-(${D[k.PRERELEASEIDENTIFIER]}(?:\\.${D[k.PRERELEASEIDENTIFIER]})*))`);X("PRERELEASELOOSE",`(?:-?(${D[k.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${D[k.PRERELEASEIDENTIFIERLOOSE]})*))`);X("BUILDIDENTIFIER",`${Xy}+`);X("BUILD",`(?:\\+(${D[k.BUILDIDENTIFIER]}(?:\\.${D[k.BUILDIDENTIFIER]})*))`);X("FULLPLAIN",`v?${D[k.MAINVERSION]}${D[k.PRERELEASE]}?${D[k.BUILD]}?`);X("FULL",`^${D[k.FULLPLAIN]}$`);X("LOOSEPLAIN",`[v=\\s]*${D[k.MAINVERSIONLOOSE]}${D[k.PRERELEASELOOSE]}?${D[k.BUILD]}?`);X("LOOSE",`^${D[k.LOOSEPLAIN]}$`);X("GTLT","((?:<|>)?=?)");X("XRANGEIDENTIFIERLOOSE",`${D[k.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);X("XRANGEIDENTIFIER",`${D[k.NUMERICIDENTIFIER]}|x|X|\\*`);X("XRANGEPLAIN",`[v=\\s]*(${D[k.XRANGEIDENTIFIER]})(?:\\.(${D[k.XRANGEIDENTIFIER]})(?:\\.(${D[k.XRANGEIDENTIFIER]})(?:${D[k.PRERELEASE]})?${D[k.BUILD]}?)?)?`);X("XRANGEPLAINLOOSE",`[v=\\s]*(${D[k.XRANGEIDENTIFIERLOOSE]})(?:\\.(${D[k.XRANGEIDENTIFIERLOOSE]})(?:\\.(${D[k.XRANGEIDENTIFIERLOOSE]})(?:${D[k.PRERELEASELOOSE]})?${D[k.BUILD]}?)?)?`);X("XRANGE",`^${D[k.GTLT]}\\s*${D[k.XRANGEPLAIN]}$`);X("XRANGELOOSE",`^${D[k.GTLT]}\\s*${D[k.XRANGEPLAINLOOSE]}$`);X("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Jy}})(?:\\.(\\d{1,${Jy}}))?(?:\\.(\\d{1,${Jy}}))?`);X("COERCE",`${D[k.COERCEPLAIN]}(?:$|[^\\d])`);X("COERCEFULL",D[k.COERCEPLAIN]+`(?:${D[k.PRERELEASE]})?(?:${D[k.BUILD]})?(?:$|[^\\d])`);X("COERCERTL",D[k.COERCE],!0);X("COERCERTLFULL",D[k.COERCEFULL],!0);X("LONETILDE","(?:~>?)");X("TILDETRIM",`(\\s*)${D[k.LONETILDE]}\\s+`,!0);In.tildeTrimReplace="$1~";X("TILDE",`^${D[k.LONETILDE]}${D[k.XRANGEPLAIN]}$`);X("TILDELOOSE",`^${D[k.LONETILDE]}${D[k.XRANGEPLAINLOOSE]}$`);X("LONECARET","(?:\\^)");X("CARETTRIM",`(\\s*)${D[k.LONECARET]}\\s+`,!0);In.caretTrimReplace="$1^";X("CARET",`^${D[k.LONECARET]}${D[k.XRANGEPLAIN]}$`);X("CARETLOOSE",`^${D[k.LONECARET]}${D[k.XRANGEPLAINLOOSE]}$`);X("COMPARATORLOOSE",`^${D[k.GTLT]}\\s*(${D[k.LOOSEPLAIN]})$|^$`);X("COMPARATOR",`^${D[k.GTLT]}\\s*(${D[k.FULLPLAIN]})$|^$`);X("COMPARATORTRIM",`(\\s*)${D[k.GTLT]}\\s*(${D[k.LOOSEPLAIN]}|${D[k.XRANGEPLAIN]})`,!0);In.comparatorTrimReplace="$1$2$3";X("HYPHENRANGE",`^\\s*(${D[k.XRANGEPLAIN]})\\s+-\\s+(${D[k.XRANGEPLAIN]})\\s*$`);X("HYPHENRANGELOOSE",`^\\s*(${D[k.XRANGEPLAINLOOSE]})\\s+-\\s+(${D[k.XRANGEPLAINLOOSE]})\\s*$`);X("STAR","(<|>)?=?\\s*\\*");X("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");X("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Wu=g((KLe,gA)=>{var f6=Object.freeze({loose:!0}),g6=Object.freeze({}),y6=t=>t?typeof t!="object"?f6:t:g6;gA.exports=y6});var Zy=g((WLe,vA)=>{var yA=/^[0-9]+$/,_A=(t,e)=>{let r=yA.test(t),n=yA.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},_6=(t,e)=>_A(e,t);vA.exports={compareIdentifiers:_A,rcompareIdentifiers:_6}});var At=g((QLe,TA)=>{var Qu=ad(),{MAX_LENGTH:EA,MAX_SAFE_INTEGER:Yu}=sd(),{safeRe:CA,t:SA}=Bs(),v6=Wu(),{compareIdentifiers:qs}=Zy(),e_=class t{constructor(e,r){if(r=v6(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>EA)throw new TypeError(`version is longer than ${EA} characters`);Qu("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?CA[SA.LOOSE]:CA[SA.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Yu||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Yu||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Yu||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){let i=+o;if(i>=0&&i<Yu)return i}return o}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Qu("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),qs(this.major,e.major)||qs(this.minor,e.minor)||qs(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],o=e.prerelease[r];if(Qu("prerelease compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return qs(n,o)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],o=e.build[r];if(Qu("build compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return qs(n,o)}while(++r)}inc(e,r,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let o=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[o];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(o)}}if(r){let i=[r,o];n===!1&&(i=[r]),qs(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};TA.exports=e_});var Gi=g((YLe,AA)=>{var bA=At(),E6=(t,e,r=!1)=>{if(t instanceof bA)return t;try{return new bA(t,e)}catch(n){if(!r)return null;throw n}};AA.exports=E6});var RA=g((JLe,IA)=>{var C6=Gi(),S6=(t,e)=>{let r=C6(t,e);return r?r.version:null};IA.exports=S6});var PA=g((XLe,wA)=>{var T6=Gi(),b6=(t,e)=>{let r=T6(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};wA.exports=b6});var NA=g((ZLe,xA)=>{var OA=At(),A6=(t,e,r,n,o)=>{typeof r=="string"&&(o=n,n=r,r=void 0);try{return new OA(t instanceof OA?t.version:t,r).inc(e,n,o).version}catch{return null}};xA.exports=A6});var MA=g((eUe,kA)=>{var DA=Gi(),I6=(t,e)=>{let r=DA(t,null,!0),n=DA(e,null,!0),o=r.compare(n);if(o===0)return null;let i=o>0,s=i?r:n,a=i?n:r,c=!!s.prerelease.length;if(!!a.prerelease.length&&!c)return!a.patch&&!a.minor?"major":s.patch?"patch":s.minor?"minor":"major";let u=c?"pre":"";return r.major!==n.major?u+"major":r.minor!==n.minor?u+"minor":r.patch!==n.patch?u+"patch":"prerelease"};kA.exports=I6});var UA=g((tUe,LA)=>{var R6=At(),w6=(t,e)=>new R6(t,e).major;LA.exports=w6});var BA=g((rUe,FA)=>{var P6=At(),O6=(t,e)=>new P6(t,e).minor;FA.exports=O6});var HA=g((nUe,qA)=>{var x6=At(),N6=(t,e)=>new x6(t,e).patch;qA.exports=N6});var GA=g((oUe,jA)=>{var D6=Gi(),k6=(t,e)=>{let r=D6(t,e);return r&&r.prerelease.length?r.prerelease:null};jA.exports=k6});var dr=g((iUe,zA)=>{var $A=At(),M6=(t,e,r)=>new $A(t,r).compare(new $A(e,r));zA.exports=M6});var KA=g((sUe,VA)=>{var L6=dr(),U6=(t,e,r)=>L6(e,t,r);VA.exports=U6});var QA=g((aUe,WA)=>{var F6=dr(),B6=(t,e)=>F6(t,e,!0);WA.exports=B6});var Ju=g((cUe,JA)=>{var YA=At(),q6=(t,e,r)=>{let n=new YA(t,r),o=new YA(e,r);return n.compare(o)||n.compareBuild(o)};JA.exports=q6});var ZA=g((dUe,XA)=>{var H6=Ju(),j6=(t,e)=>t.sort((r,n)=>H6(r,n,e));XA.exports=j6});var tI=g((lUe,eI)=>{var G6=Ju(),$6=(t,e)=>t.sort((r,n)=>G6(n,r,e));eI.exports=$6});var cd=g((uUe,rI)=>{var z6=dr(),V6=(t,e,r)=>z6(t,e,r)>0;rI.exports=V6});var Xu=g((pUe,nI)=>{var K6=dr(),W6=(t,e,r)=>K6(t,e,r)<0;nI.exports=W6});var t_=g((mUe,oI)=>{var Q6=dr(),Y6=(t,e,r)=>Q6(t,e,r)===0;oI.exports=Y6});var r_=g((hUe,iI)=>{var J6=dr(),X6=(t,e,r)=>J6(t,e,r)!==0;iI.exports=X6});var Zu=g((fUe,sI)=>{var Z6=dr(),eY=(t,e,r)=>Z6(t,e,r)>=0;sI.exports=eY});var ep=g((gUe,aI)=>{var tY=dr(),rY=(t,e,r)=>tY(t,e,r)<=0;aI.exports=rY});var n_=g((yUe,cI)=>{var nY=t_(),oY=r_(),iY=cd(),sY=Zu(),aY=Xu(),cY=ep(),dY=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return nY(t,r,n);case"!=":return oY(t,r,n);case">":return iY(t,r,n);case">=":return sY(t,r,n);case"<":return aY(t,r,n);case"<=":return cY(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};cI.exports=dY});var lI=g((_Ue,dI)=>{var lY=At(),uY=Gi(),{safeRe:tp,t:rp}=Bs(),pY=(t,e)=>{if(t instanceof lY)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?tp[rp.COERCEFULL]:tp[rp.COERCE]);else{let c=e.includePrerelease?tp[rp.COERCERTLFULL]:tp[rp.COERCERTL],d;for(;(d=c.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||d.index+d[0].length!==r.index+r[0].length)&&(r=d),c.lastIndex=d.index+d[1].length+d[2].length;c.lastIndex=-1}if(r===null)return null;let n=r[2],o=r[3]||"0",i=r[4]||"0",s=e.includePrerelease&&r[5]?`-${r[5]}`:"",a=e.includePrerelease&&r[6]?`+${r[6]}`:"";return uY(`${n}.${o}.${i}${s}${a}`,e)};dI.exports=pY});var pI=g((vUe,uI)=>{var o_=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let o=this.map.keys().next().value;this.delete(o)}this.map.set(e,r)}return this}};uI.exports=o_});var lr=g((EUe,gI)=>{var mY=/\s+/g,i_=class t{constructor(e,r){if(r=fY(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof s_)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(mY," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(o=>!hI(o[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let o of this.set)if(o.length===1&&SY(o[0])){this.set=[o];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&EY)|(this.options.loose&&CY))+":"+e,o=mI.get(n);if(o)return o;let i=this.options.loose,s=i?Vt[kt.HYPHENRANGELOOSE]:Vt[kt.HYPHENRANGE];e=e.replace(s,NY(this.options.includePrerelease)),Pe("hyphen replace",e),e=e.replace(Vt[kt.COMPARATORTRIM],yY),Pe("comparator trim",e),e=e.replace(Vt[kt.TILDETRIM],_Y),Pe("tilde trim",e),e=e.replace(Vt[kt.CARETTRIM],vY),Pe("caret trim",e);let a=e.split(" ").map(m=>TY(m,this.options)).join(" ").split(/\s+/).map(m=>xY(m,this.options));i&&(a=a.filter(m=>(Pe("loose invalid filter",m,this.options),!!m.match(Vt[kt.COMPARATORLOOSE])))),Pe("range list",a);let c=new Map,d=a.map(m=>new s_(m,this.options));for(let m of d){if(hI(m))return[m];c.set(m.value,m)}c.size>1&&c.has("")&&c.delete("");let u=[...c.values()];return mI.set(n,u),u}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>fI(n,r)&&e.set.some(o=>fI(o,r)&&n.every(i=>o.every(s=>i.intersects(s,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new gY(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(DY(this.set[r],e,this.options))return!0;return!1}};gI.exports=i_;var hY=pI(),mI=new hY,fY=Wu(),s_=dd(),Pe=ad(),gY=At(),{safeRe:Vt,t:kt,comparatorTrimReplace:yY,tildeTrimReplace:_Y,caretTrimReplace:vY}=Bs(),{FLAG_INCLUDE_PRERELEASE:EY,FLAG_LOOSE:CY}=sd(),hI=t=>t.value==="<0.0.0-0",SY=t=>t.value==="",fI=(t,e)=>{let r=!0,n=t.slice(),o=n.pop();for(;r&&n.length;)r=n.every(i=>o.intersects(i,e)),o=n.pop();return r},TY=(t,e)=>(Pe("comp",t,e),t=IY(t,e),Pe("caret",t),t=bY(t,e),Pe("tildes",t),t=wY(t,e),Pe("xrange",t),t=OY(t,e),Pe("stars",t),t),Mt=t=>!t||t.toLowerCase()==="x"||t==="*",bY=(t,e)=>t.trim().split(/\s+/).map(r=>AY(r,e)).join(" "),AY=(t,e)=>{let r=e.loose?Vt[kt.TILDELOOSE]:Vt[kt.TILDE];return t.replace(r,(n,o,i,s,a)=>{Pe("tilde",t,n,o,i,s,a);let c;return Mt(o)?c="":Mt(i)?c=`>=${o}.0.0 <${+o+1}.0.0-0`:Mt(s)?c=`>=${o}.${i}.0 <${o}.${+i+1}.0-0`:a?(Pe("replaceTilde pr",a),c=`>=${o}.${i}.${s}-${a} <${o}.${+i+1}.0-0`):c=`>=${o}.${i}.${s} <${o}.${+i+1}.0-0`,Pe("tilde return",c),c})},IY=(t,e)=>t.trim().split(/\s+/).map(r=>RY(r,e)).join(" "),RY=(t,e)=>{Pe("caret",t,e);let r=e.loose?Vt[kt.CARETLOOSE]:Vt[kt.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(o,i,s,a,c)=>{Pe("caret",t,o,i,s,a,c);let d;return Mt(i)?d="":Mt(s)?d=`>=${i}.0.0${n} <${+i+1}.0.0-0`:Mt(a)?i==="0"?d=`>=${i}.${s}.0${n} <${i}.${+s+1}.0-0`:d=`>=${i}.${s}.0${n} <${+i+1}.0.0-0`:c?(Pe("replaceCaret pr",c),i==="0"?s==="0"?d=`>=${i}.${s}.${a}-${c} <${i}.${s}.${+a+1}-0`:d=`>=${i}.${s}.${a}-${c} <${i}.${+s+1}.0-0`:d=`>=${i}.${s}.${a}-${c} <${+i+1}.0.0-0`):(Pe("no pr"),i==="0"?s==="0"?d=`>=${i}.${s}.${a}${n} <${i}.${s}.${+a+1}-0`:d=`>=${i}.${s}.${a}${n} <${i}.${+s+1}.0-0`:d=`>=${i}.${s}.${a} <${+i+1}.0.0-0`),Pe("caret return",d),d})},wY=(t,e)=>(Pe("replaceXRanges",t,e),t.split(/\s+/).map(r=>PY(r,e)).join(" ")),PY=(t,e)=>{t=t.trim();let r=e.loose?Vt[kt.XRANGELOOSE]:Vt[kt.XRANGE];return t.replace(r,(n,o,i,s,a,c)=>{Pe("xRange",t,n,o,i,s,a,c);let d=Mt(i),u=d||Mt(s),m=u||Mt(a),f=m;return o==="="&&f&&(o=""),c=e.includePrerelease?"-0":"",d?o===">"||o==="<"?n="<0.0.0-0":n="*":o&&f?(u&&(s=0),a=0,o===">"?(o=">=",u?(i=+i+1,s=0,a=0):(s=+s+1,a=0)):o==="<="&&(o="<",u?i=+i+1:s=+s+1),o==="<"&&(c="-0"),n=`${o+i}.${s}.${a}${c}`):u?n=`>=${i}.0.0${c} <${+i+1}.0.0-0`:m&&(n=`>=${i}.${s}.0${c} <${i}.${+s+1}.0-0`),Pe("xRange return",n),n})},OY=(t,e)=>(Pe("replaceStars",t,e),t.trim().replace(Vt[kt.STAR],"")),xY=(t,e)=>(Pe("replaceGTE0",t,e),t.trim().replace(Vt[e.includePrerelease?kt.GTE0PRE:kt.GTE0],"")),NY=t=>(e,r,n,o,i,s,a,c,d,u,m,f)=>(Mt(n)?r="":Mt(o)?r=`>=${n}.0.0${t?"-0":""}`:Mt(i)?r=`>=${n}.${o}.0${t?"-0":""}`:s?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,Mt(d)?c="":Mt(u)?c=`<${+d+1}.0.0-0`:Mt(m)?c=`<${d}.${+u+1}.0-0`:f?c=`<=${d}.${u}.${m}-${f}`:t?c=`<${d}.${u}.${+m+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),DY=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Pe(t[n].semver),t[n].semver!==s_.ANY&&t[n].semver.prerelease.length>0){let o=t[n].semver;if(o.major===e.major&&o.minor===e.minor&&o.patch===e.patch)return!0}return!1}return!0}});var dd=g((CUe,SI)=>{var ld=Symbol("SemVer ANY"),d_=class t{static get ANY(){return ld}constructor(e,r){if(r=yI(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),c_("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===ld?this.value="":this.value=this.operator+this.semver.version,c_("comp",this)}parse(e){let r=this.options.loose?_I[vI.COMPARATORLOOSE]:_I[vI.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new EI(n[2],this.options.loose):this.semver=ld}toString(){return this.value}test(e){if(c_("Comparator.test",e,this.options.loose),this.semver===ld||e===ld)return!0;if(typeof e=="string")try{e=new EI(e,this.options)}catch{return!1}return a_(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new CI(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new CI(this.value,r).test(e.semver):(r=yI(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||a_(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||a_(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};SI.exports=d_;var yI=Wu(),{safeRe:_I,t:vI}=Bs(),a_=n_(),c_=ad(),EI=At(),CI=lr()});var ud=g((SUe,TI)=>{var kY=lr(),MY=(t,e,r)=>{try{e=new kY(e,r)}catch{return!1}return e.test(t)};TI.exports=MY});var AI=g((TUe,bI)=>{var LY=lr(),UY=(t,e)=>new LY(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));bI.exports=UY});var RI=g((bUe,II)=>{var FY=At(),BY=lr(),qY=(t,e,r)=>{let n=null,o=null,i=null;try{i=new BY(e,r)}catch{return null}return t.forEach(s=>{i.test(s)&&(!n||o.compare(s)===-1)&&(n=s,o=new FY(n,r))}),n};II.exports=qY});var PI=g((AUe,wI)=>{var HY=At(),jY=lr(),GY=(t,e,r)=>{let n=null,o=null,i=null;try{i=new jY(e,r)}catch{return null}return t.forEach(s=>{i.test(s)&&(!n||o.compare(s)===1)&&(n=s,o=new HY(n,r))}),n};wI.exports=GY});var NI=g((IUe,xI)=>{var l_=At(),$Y=lr(),OI=cd(),zY=(t,e)=>{t=new $Y(t,e);let r=new l_("0.0.0");if(t.test(r)||(r=new l_("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let o=t.set[n],i=null;o.forEach(s=>{let a=new l_(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||OI(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),i&&(!r||OI(r,i))&&(r=i)}return r&&t.test(r)?r:null};xI.exports=zY});var kI=g((RUe,DI)=>{var VY=lr(),KY=(t,e)=>{try{return new VY(t,e).range||"*"}catch{return null}};DI.exports=KY});var np=g((wUe,FI)=>{var WY=At(),UI=dd(),{ANY:QY}=UI,YY=lr(),JY=ud(),MI=cd(),LI=Xu(),XY=ep(),ZY=Zu(),e5=(t,e,r,n)=>{t=new WY(t,n),e=new YY(e,n);let o,i,s,a,c;switch(r){case">":o=MI,i=XY,s=LI,a=">",c=">=";break;case"<":o=LI,i=ZY,s=MI,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(JY(t,e,n))return!1;for(let d=0;d<e.set.length;++d){let u=e.set[d],m=null,f=null;if(u.forEach(h=>{h.semver===QY&&(h=new UI(">=0.0.0")),m=m||h,f=f||h,o(h.semver,m.semver,n)?m=h:s(h.semver,f.semver,n)&&(f=h)}),m.operator===a||m.operator===c||(!f.operator||f.operator===a)&&i(t,f.semver))return!1;if(f.operator===c&&s(t,f.semver))return!1}return!0};FI.exports=e5});var qI=g((PUe,BI)=>{var t5=np(),r5=(t,e,r)=>t5(t,e,">",r);BI.exports=r5});var jI=g((OUe,HI)=>{var n5=np(),o5=(t,e,r)=>n5(t,e,"<",r);HI.exports=o5});var zI=g((xUe,$I)=>{var GI=lr(),i5=(t,e,r)=>(t=new GI(t,r),e=new GI(e,r),t.intersects(e,r));$I.exports=i5});var KI=g((NUe,VI)=>{var s5=ud(),a5=dr();VI.exports=(t,e,r)=>{let n=[],o=null,i=null,s=t.sort((u,m)=>a5(u,m,r));for(let u of s)s5(u,e,r)?(i=u,o||(o=u)):(i&&n.push([o,i]),i=null,o=null);o&&n.push([o,null]);let a=[];for(let[u,m]of n)u===m?a.push(u):!m&&u===s[0]?a.push("*"):m?u===s[0]?a.push(`<=${m}`):a.push(`${u} - ${m}`):a.push(`>=${u}`);let c=a.join(" || "),d=typeof e.raw=="string"?e.raw:String(e);return c.length<d.length?c:e}});var ZI=g((DUe,XI)=>{var WI=lr(),p_=dd(),{ANY:u_}=p_,pd=ud(),m_=dr(),c5=(t,e,r={})=>{if(t===e)return!0;t=new WI(t,r),e=new WI(e,r);let n=!1;e:for(let o of t.set){for(let i of e.set){let s=l5(o,i,r);if(n=n||s!==null,s)continue e}if(n)return!1}return!0},d5=[new p_(">=0.0.0-0")],QI=[new p_(">=0.0.0")],l5=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===u_){if(e.length===1&&e[0].semver===u_)return!0;r.includePrerelease?t=d5:t=QI}if(e.length===1&&e[0].semver===u_){if(r.includePrerelease)return!0;e=QI}let n=new Set,o,i;for(let h of t)h.operator===">"||h.operator===">="?o=YI(o,h,r):h.operator==="<"||h.operator==="<="?i=JI(i,h,r):n.add(h.semver);if(n.size>1)return null;let s;if(o&&i){if(s=m_(o.semver,i.semver,r),s>0)return null;if(s===0&&(o.operator!==">="||i.operator!=="<="))return null}for(let h of n){if(o&&!pd(h,String(o),r)||i&&!pd(h,String(i),r))return null;for(let y of e)if(!pd(h,String(y),r))return!1;return!0}let a,c,d,u,m=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1,f=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1;m&&m.prerelease.length===1&&i.operator==="<"&&m.prerelease[0]===0&&(m=!1);for(let h of e){if(u=u||h.operator===">"||h.operator===">=",d=d||h.operator==="<"||h.operator==="<=",o){if(f&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===f.major&&h.semver.minor===f.minor&&h.semver.patch===f.patch&&(f=!1),h.operator===">"||h.operator===">="){if(a=YI(o,h,r),a===h&&a!==o)return!1}else if(o.operator===">="&&!pd(o.semver,String(h),r))return!1}if(i){if(m&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===m.major&&h.semver.minor===m.minor&&h.semver.patch===m.patch&&(m=!1),h.operator==="<"||h.operator==="<="){if(c=JI(i,h,r),c===h&&c!==i)return!1}else if(i.operator==="<="&&!pd(i.semver,String(h),r))return!1}if(!h.operator&&(i||o)&&s!==0)return!1}return!(o&&d&&!i&&s!==0||i&&u&&!o&&s!==0||f||m)},YI=(t,e,r)=>{if(!t)return e;let n=m_(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},JI=(t,e,r)=>{if(!t)return e;let n=m_(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};XI.exports=c5});var op=g((kUe,rR)=>{var h_=Bs(),eR=sd(),u5=At(),tR=Zy(),p5=Gi(),m5=RA(),h5=PA(),f5=NA(),g5=MA(),y5=UA(),_5=BA(),v5=HA(),E5=GA(),C5=dr(),S5=KA(),T5=QA(),b5=Ju(),A5=ZA(),I5=tI(),R5=cd(),w5=Xu(),P5=t_(),O5=r_(),x5=Zu(),N5=ep(),D5=n_(),k5=lI(),M5=dd(),L5=lr(),U5=ud(),F5=AI(),B5=RI(),q5=PI(),H5=NI(),j5=kI(),G5=np(),$5=qI(),z5=jI(),V5=zI(),K5=KI(),W5=ZI();rR.exports={parse:p5,valid:m5,clean:h5,inc:f5,diff:g5,major:y5,minor:_5,patch:v5,prerelease:E5,compare:C5,rcompare:S5,compareLoose:T5,compareBuild:b5,sort:A5,rsort:I5,gt:R5,lt:w5,eq:P5,neq:O5,gte:x5,lte:N5,cmp:D5,coerce:k5,Comparator:M5,Range:L5,satisfies:U5,toComparators:F5,maxSatisfying:B5,minSatisfying:q5,minVersion:H5,validRange:j5,outside:G5,gtr:$5,ltr:z5,intersects:V5,simplifyRange:K5,subset:W5,SemVer:u5,re:h_.re,src:h_.src,tokens:h_.t,SEMVER_SPEC_VERSION:eR.SEMVER_SPEC_VERSION,RELEASE_TYPES:eR.RELEASE_TYPES,compareIdentifiers:tR.compareIdentifiers,rcompareIdentifiers:tR.rcompareIdentifiers}});var oR=g((MUe,nR)=>{var Q5=op();nR.exports=Q5.satisfies(process.version,">=15.7.0")});var sR=g((LUe,iR)=>{var Y5=op();iR.exports=Y5.satisfies(process.version,">=16.9.0")});var f_=g((UUe,aR)=>{var J5=oR(),X5=sR(),Z5={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},eJ={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};aR.exports=function(t,e){if(!t||!e)return;let r=e.asymmetricKeyType;if(!r)return;let n=Z5[r];if(!n)throw new Error(`Unknown key type "${r}".`);if(!n.includes(t))throw new Error(`"alg" parameter for "${r}" key type must be one of: ${n.join(", ")}.`);if(J5)switch(r){case"ec":let o=e.asymmetricKeyDetails.namedCurve,i=eJ[t];if(o!==i)throw new Error(`"alg" parameter "${t}" requires curve "${i}".`);break;case"rsa-pss":if(X5){let s=parseInt(t.slice(-3),10),{hashAlgorithm:a,mgf1HashAlgorithm:c,saltLength:d}=e.asymmetricKeyDetails;if(a!==`sha${s}`||c!==a)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${t}.`);if(d!==void 0&&d>s>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${t}.`)}break}}});var g_=g((FUe,cR)=>{var tJ=op();cR.exports=tJ.satisfies(process.version,"^6.12.0 || >=8.0.0")});var uR=g((BUe,lR)=>{var Te=id(),rJ=Wy(),dR=Qy(),nJ=Ky(),oJ=Yy(),iJ=f_(),sJ=g_(),aJ=Gu(),{KeyObject:cJ,createSecretKey:dJ,createPublicKey:lJ}=require("crypto"),y_=["RS256","RS384","RS512"],uJ=["ES256","ES384","ES512"],__=["RS256","RS384","RS512"],pJ=["HS256","HS384","HS512"];sJ&&(y_.splice(y_.length,0,"PS256","PS384","PS512"),__.splice(__.length,0,"PS256","PS384","PS512"));lR.exports=function(t,e,r,n){typeof r=="function"&&!n&&(n=r,r={}),r||(r={}),r=Object.assign({},r);let o;if(n?o=n:o=function(u,m){if(u)throw u;return m},r.clockTimestamp&&typeof r.clockTimestamp!="number")return o(new Te("clockTimestamp must be a number"));if(r.nonce!==void 0&&(typeof r.nonce!="string"||r.nonce.trim()===""))return o(new Te("nonce must be a non-empty string"));if(r.allowInvalidAsymmetricKeyTypes!==void 0&&typeof r.allowInvalidAsymmetricKeyTypes!="boolean")return o(new Te("allowInvalidAsymmetricKeyTypes must be a boolean"));let i=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!t)return o(new Te("jwt must be provided"));if(typeof t!="string")return o(new Te("jwt must be a string"));let s=t.split(".");if(s.length!==3)return o(new Te("jwt malformed"));let a;try{a=nJ(t,{complete:!0})}catch(u){return o(u)}if(!a)return o(new Te("invalid token"));let c=a.header,d;if(typeof e=="function"){if(!n)return o(new Te("verify must be called asynchronous if secret or public key is provided as a callback"));d=e}else d=function(u,m){return m(null,e)};return d(c,function(u,m){if(u)return o(new Te("error in secret or public key callback: "+u.message));let f=s[2].trim()!=="";if(!f&&m)return o(new Te("jwt signature is required"));if(f&&!m)return o(new Te("secret or public key must be provided"));if(!f&&!r.algorithms)return o(new Te('please specify "none" in "algorithms" to verify unsigned tokens'));if(m!=null&&!(m instanceof cJ))try{m=lJ(m)}catch{try{m=dJ(typeof m=="string"?Buffer.from(m):m)}catch{return o(new Te("secretOrPublicKey is not valid key material"))}}if(r.algorithms||(m.type==="secret"?r.algorithms=pJ:["rsa","rsa-pss"].includes(m.asymmetricKeyType)?r.algorithms=__:m.asymmetricKeyType==="ec"?r.algorithms=uJ:r.algorithms=y_),r.algorithms.indexOf(a.header.alg)===-1)return o(new Te("invalid algorithm"));if(c.alg.startsWith("HS")&&m.type!=="secret")return o(new Te(`secretOrPublicKey must be a symmetric key when using ${c.alg}`));if(/^(?:RS|PS|ES)/.test(c.alg)&&m.type!=="public")return o(new Te(`secretOrPublicKey must be an asymmetric key when using ${c.alg}`));if(!r.allowInvalidAsymmetricKeyTypes)try{iJ(c.alg,m)}catch(E){return o(E)}let h;try{h=aJ.verify(t,a.header.alg,m)}catch(E){return o(E)}if(!h)return o(new Te("invalid signature"));let y=a.payload;if(typeof y.nbf<"u"&&!r.ignoreNotBefore){if(typeof y.nbf!="number")return o(new Te("invalid nbf value"));if(y.nbf>i+(r.clockTolerance||0))return o(new rJ("jwt not active",new Date(y.nbf*1e3)))}if(typeof y.exp<"u"&&!r.ignoreExpiration){if(typeof y.exp!="number")return o(new Te("invalid exp value"));if(i>=y.exp+(r.clockTolerance||0))return o(new dR("jwt expired",new Date(y.exp*1e3)))}if(r.audience){let E=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(y.aud)?y.aud:[y.aud]).some(function(x){return E.some(function(K){return K instanceof RegExp?K.test(x):K===x})}))return o(new Te("jwt audience invalid. expected: "+E.join(" or ")))}if(r.issuer&&(typeof r.issuer=="string"&&y.iss!==r.issuer||Array.isArray(r.issuer)&&r.issuer.indexOf(y.iss)===-1))return o(new Te("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&y.sub!==r.subject)return o(new Te("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&y.jti!==r.jwtid)return o(new Te("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&y.nonce!==r.nonce)return o(new Te("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if(typeof y.iat!="number")return o(new Te("iat required when maxAge is specified"));let E=oJ(r.maxAge,y.iat);if(typeof E>"u")return o(new Te('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(i>=E+(r.clockTolerance||0))return o(new dR("maxAge exceeded",new Date(E*1e3)))}if(r.complete===!0){let E=a.signature;return o(null,{header:c,payload:y,signature:E})}return o(null,y)})}});var yR=g((qUe,gR)=>{var pR=1/0,hR=9007199254740991,mJ=17976931348623157e292,mR=NaN,hJ="[object Arguments]",fJ="[object Function]",gJ="[object GeneratorFunction]",yJ="[object String]",_J="[object Symbol]",vJ=/^\s+|\s+$/g,EJ=/^[-+]0x[0-9a-f]+$/i,CJ=/^0b[01]+$/i,SJ=/^0o[0-7]+$/i,TJ=/^(?:0|[1-9]\d*)$/,bJ=parseInt;function AJ(t,e){for(var r=-1,n=t?t.length:0,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}function IJ(t,e,r,n){for(var o=t.length,i=r+(n?1:-1);n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}function RJ(t,e,r){if(e!==e)return IJ(t,wJ,r);for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}function wJ(t){return t!==t}function PJ(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function OJ(t,e){return AJ(e,function(r){return t[r]})}function xJ(t,e){return function(r){return t(e(r))}}var ip=Object.prototype,E_=ip.hasOwnProperty,sp=ip.toString,NJ=ip.propertyIsEnumerable,DJ=xJ(Object.keys,Object),kJ=Math.max;function MJ(t,e){var r=fR(t)||qJ(t)?PJ(t.length,String):[],n=r.length,o=!!n;for(var i in t)(e||E_.call(t,i))&&!(o&&(i=="length"||UJ(i,n)))&&r.push(i);return r}function LJ(t){if(!FJ(t))return DJ(t);var e=[];for(var r in Object(t))E_.call(t,r)&&r!="constructor"&&e.push(r);return e}function UJ(t,e){return e=e??hR,!!e&&(typeof t=="number"||TJ.test(t))&&t>-1&&t%1==0&&t<e}function FJ(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||ip;return t===r}function BJ(t,e,r,n){t=C_(t)?t:YJ(t),r=r&&!n?KJ(r):0;var o=t.length;return r<0&&(r=kJ(o+r,0)),$J(t)?r<=o&&t.indexOf(e,r)>-1:!!o&&RJ(t,e,r)>-1}function qJ(t){return HJ(t)&&E_.call(t,"callee")&&(!NJ.call(t,"callee")||sp.call(t)==hJ)}var fR=Array.isArray;function C_(t){return t!=null&&GJ(t.length)&&!jJ(t)}function HJ(t){return S_(t)&&C_(t)}function jJ(t){var e=v_(t)?sp.call(t):"";return e==fJ||e==gJ}function GJ(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=hR}function v_(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function S_(t){return!!t&&typeof t=="object"}function $J(t){return typeof t=="string"||!fR(t)&&S_(t)&&sp.call(t)==yJ}function zJ(t){return typeof t=="symbol"||S_(t)&&sp.call(t)==_J}function VJ(t){if(!t)return t===0?t:0;if(t=WJ(t),t===pR||t===-pR){var e=t<0?-1:1;return e*mJ}return t===t?t:0}function KJ(t){var e=VJ(t),r=e%1;return e===e?r?e-r:e:0}function WJ(t){if(typeof t=="number")return t;if(zJ(t))return mR;if(v_(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=v_(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(vJ,"");var r=CJ.test(t);return r||SJ.test(t)?bJ(t.slice(2),r?2:8):EJ.test(t)?mR:+t}function QJ(t){return C_(t)?MJ(t):LJ(t)}function YJ(t){return t?OJ(t,QJ(t)):[]}gR.exports=BJ});var vR=g((HUe,_R)=>{var JJ="[object Boolean]",XJ=Object.prototype,ZJ=XJ.toString;function e8(t){return t===!0||t===!1||t8(t)&&ZJ.call(t)==JJ}function t8(t){return!!t&&typeof t=="object"}_R.exports=e8});var bR=g((jUe,TR)=>{var ER=1/0,r8=17976931348623157e292,CR=NaN,n8="[object Symbol]",o8=/^\s+|\s+$/g,i8=/^[-+]0x[0-9a-f]+$/i,s8=/^0b[01]+$/i,a8=/^0o[0-7]+$/i,c8=parseInt,d8=Object.prototype,l8=d8.toString;function u8(t){return typeof t=="number"&&t==f8(t)}function SR(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function p8(t){return!!t&&typeof t=="object"}function m8(t){return typeof t=="symbol"||p8(t)&&l8.call(t)==n8}function h8(t){if(!t)return t===0?t:0;if(t=g8(t),t===ER||t===-ER){var e=t<0?-1:1;return e*r8}return t===t?t:0}function f8(t){var e=h8(t),r=e%1;return e===e?r?e-r:e:0}function g8(t){if(typeof t=="number")return t;if(m8(t))return CR;if(SR(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=SR(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(o8,"");var r=s8.test(t);return r||a8.test(t)?c8(t.slice(2),r?2:8):i8.test(t)?CR:+t}TR.exports=u8});var IR=g((GUe,AR)=>{var y8="[object Number]",_8=Object.prototype,v8=_8.toString;function E8(t){return!!t&&typeof t=="object"}function C8(t){return typeof t=="number"||E8(t)&&v8.call(t)==y8}AR.exports=C8});var OR=g(($Ue,PR)=>{var S8="[object Object]";function T8(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}function b8(t,e){return function(r){return t(e(r))}}var A8=Function.prototype,RR=Object.prototype,wR=A8.toString,I8=RR.hasOwnProperty,R8=wR.call(Object),w8=RR.toString,P8=b8(Object.getPrototypeOf,Object);function O8(t){return!!t&&typeof t=="object"}function x8(t){if(!O8(t)||w8.call(t)!=S8||T8(t))return!1;var e=P8(t);if(e===null)return!0;var r=I8.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&wR.call(r)==R8}PR.exports=x8});var NR=g((zUe,xR)=>{var N8="[object String]",D8=Object.prototype,k8=D8.toString,M8=Array.isArray;function L8(t){return!!t&&typeof t=="object"}function U8(t){return typeof t=="string"||!M8(t)&&L8(t)&&k8.call(t)==N8}xR.exports=U8});var UR=g((VUe,LR)=>{var F8="Expected a function",DR=1/0,B8=17976931348623157e292,kR=NaN,q8="[object Symbol]",H8=/^\s+|\s+$/g,j8=/^[-+]0x[0-9a-f]+$/i,G8=/^0b[01]+$/i,$8=/^0o[0-7]+$/i,z8=parseInt,V8=Object.prototype,K8=V8.toString;function W8(t,e){var r;if(typeof e!="function")throw new TypeError(F8);return t=Z8(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}function Q8(t){return W8(2,t)}function MR(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Y8(t){return!!t&&typeof t=="object"}function J8(t){return typeof t=="symbol"||Y8(t)&&K8.call(t)==q8}function X8(t){if(!t)return t===0?t:0;if(t=eX(t),t===DR||t===-DR){var e=t<0?-1:1;return e*B8}return t===t?t:0}function Z8(t){var e=X8(t),r=e%1;return e===e?r?e-r:e:0}function eX(t){if(typeof t=="number")return t;if(J8(t))return kR;if(MR(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=MR(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(H8,"");var r=G8.test(t);return r||$8.test(t)?z8(t.slice(2),r?2:8):j8.test(t)?kR:+t}LR.exports=Q8});var VR=g((KUe,zR)=>{var FR=Yy(),tX=g_(),rX=f_(),BR=Gu(),nX=yR(),ap=vR(),qR=bR(),T_=IR(),jR=OR(),_o=NR(),oX=UR(),{KeyObject:iX,createSecretKey:sX,createPrivateKey:aX}=require("crypto"),GR=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];tX&&GR.splice(3,0,"PS256","PS384","PS512");var cX={expiresIn:{isValid:function(t){return qR(t)||_o(t)&&t},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(t){return qR(t)||_o(t)&&t},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(t){return _o(t)||Array.isArray(t)},message:'"audience" must be a string or array'},algorithm:{isValid:nX.bind(null,GR),message:'"algorithm" must be a valid string enum value'},header:{isValid:jR,message:'"header" must be an object'},encoding:{isValid:_o,message:'"encoding" must be a string'},issuer:{isValid:_o,message:'"issuer" must be a string'},subject:{isValid:_o,message:'"subject" must be a string'},jwtid:{isValid:_o,message:'"jwtid" must be a string'},noTimestamp:{isValid:ap,message:'"noTimestamp" must be a boolean'},keyid:{isValid:_o,message:'"keyid" must be a string'},mutatePayload:{isValid:ap,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:ap,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:ap,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},dX={iat:{isValid:T_,message:'"iat" should be a number of seconds'},exp:{isValid:T_,message:'"exp" should be a number of seconds'},nbf:{isValid:T_,message:'"nbf" should be a number of seconds'}};function $R(t,e,r,n){if(!jR(r))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(r).forEach(function(o){let i=t[o];if(!i){if(!e)throw new Error('"'+o+'" is not allowed in "'+n+'"');return}if(!i.isValid(r[o]))throw new Error(i.message)})}function lX(t){return $R(cX,!1,t,"options")}function uX(t){return $R(dX,!0,t,"payload")}var HR={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},pX=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];zR.exports=function(t,e,r,n){typeof r=="function"?(n=r,r={}):r=r||{};let o=typeof t=="object"&&!Buffer.isBuffer(t),i=Object.assign({alg:r.algorithm||"HS256",typ:o?"JWT":void 0,kid:r.keyid},r.header);function s(d){if(n)return n(d);throw d}if(!e&&r.algorithm!=="none")return s(new Error("secretOrPrivateKey must have a value"));if(e!=null&&!(e instanceof iX))try{e=aX(e)}catch{try{e=sX(typeof e=="string"?Buffer.from(e):e)}catch{return s(new Error("secretOrPrivateKey is not valid key material"))}}if(i.alg.startsWith("HS")&&e.type!=="secret")return s(new Error(`secretOrPrivateKey must be a symmetric key when using ${i.alg}`));if(/^(?:RS|PS|ES)/.test(i.alg)){if(e.type!=="private")return s(new Error(`secretOrPrivateKey must be an asymmetric key when using ${i.alg}`));if(!r.allowInsecureKeySizes&&!i.alg.startsWith("ES")&&e.asymmetricKeyDetails!==void 0&&e.asymmetricKeyDetails.modulusLength<2048)return s(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`))}if(typeof t>"u")return s(new Error("payload is required"));if(o){try{uX(t)}catch(d){return s(d)}r.mutatePayload||(t=Object.assign({},t))}else{let d=pX.filter(function(u){return typeof r[u]<"u"});if(d.length>0)return s(new Error("invalid "+d.join(",")+" option for "+typeof t+" payload"))}if(typeof t.exp<"u"&&typeof r.expiresIn<"u")return s(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof t.nbf<"u"&&typeof r.notBefore<"u")return s(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{lX(r)}catch(d){return s(d)}if(!r.allowInvalidAsymmetricKeyTypes)try{rX(i.alg,e)}catch(d){return s(d)}let a=t.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete t.iat:o&&(t.iat=a),typeof r.notBefore<"u"){try{t.nbf=FR(r.notBefore,a)}catch(d){return s(d)}if(typeof t.nbf>"u")return s(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof r.expiresIn<"u"&&typeof t=="object"){try{t.exp=FR(r.expiresIn,a)}catch(d){return s(d)}if(typeof t.exp>"u")return s(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(HR).forEach(function(d){let u=HR[d];if(typeof r[d]<"u"){if(typeof t[u]<"u")return s(new Error('Bad "options.'+d+'" option. The payload already has an "'+u+'" property.'));t[u]=r[d]}});let c=r.encoding||"utf8";if(typeof n=="function")n=n&&oX(n),BR.createSign({header:i,privateKey:e,payload:t,encoding:c}).once("error",n).once("done",function(d){if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(i.alg)&&d.length<256)return n(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`));n(null,d)});else{let d=BR.sign({header:i,payload:t,secret:e,encoding:c});if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(i.alg)&&d.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`);return d}}});var WR=g((WUe,KR)=>{KR.exports={decode:Ky(),verify:uR(),sign:VR(),JsonWebTokenError:id(),NotBeforeError:Wy(),TokenExpiredError:Qy()}});var QR,Rn,cp=v(()=>{"use strict";QR=ae(WR(),1);Se();ed();He();Rn=class t{static fromAssertion(e){let r=new t;return r.jwt=e,r}static fromCertificate(e,r,n){let o=new t;return o.privateKey=r,o.thumbprint=e,o.useSha256=!1,n&&(o.publicCertificate=this.parseCertificate(n)),o}static fromCertificateWithSha256Thumbprint(e,r,n){let o=new t;return o.privateKey=r,o.thumbprint=e,o.useSha256=!0,n&&(o.publicCertificate=this.parseCertificate(n)),o}getJwt(e,r,n){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&r===this.issuer&&n===this.jwtAudience?this.jwt:this.createJwt(e,r,n);if(this.jwt)return this.jwt;throw I(Ce.invalidAssertion)}createJwt(e,r,n){this.issuer=r,this.jwtAudience=n;let o=we.nowSeconds();this.expirationTime=o+600;let s={alg:this.useSha256?cr.PSS_256:cr.RSA_256},a=this.useSha256?cr.X5T_256:cr.X5T;Object.assign(s,{[a]:Zt.base64EncodeUrl(this.thumbprint,"hex")}),this.publicCertificate&&Object.assign(s,{[cr.X5C]:this.publicCertificate});let c={[cr.AUDIENCE]:this.jwtAudience,[cr.EXPIRATION_TIME]:this.expirationTime,[cr.ISSUER]:this.issuer,[cr.SUBJECT]:this.issuer,[cr.NOT_BEFORE]:o,[cr.JWT_ID]:e.createNewGuid()};return this.jwt=QR.default.sign(c,this.privateKey,{header:s}),this.jwt}isExpired(){return this.expirationTime<we.nowSeconds()}static parseCertificate(e){let r=/-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs,n=[],o;for(;(o=r.exec(e))!==null;)n.push(o[1].replace(/\r*\n/g,b.EMPTY_STRING));return n}}});var dp,wn,md=v(()=>{"use strict";dp="@azure/msal-node",wn="2.13.1"});var Hs,b_=v(()=>{"use strict";Se();Hs=class extends yt{constructor(e){super(e)}async acquireToken(e){this.logger.info("in acquireToken call in username-password client");let r=we.nowSeconds(),n=await this.executeTokenRequest(this.authority,e),o=new We(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(n.body),o.handleServerTokenResponse(n.body,this.authority,r,e)}async executeTokenRequest(e,r){let n=this.createTokenQueryParameters(r),o=re.appendQueryString(e.tokenEndpoint,n),i=await this.createTokenRequestBody(r),s=this.createTokenRequestHeaders({credential:r.username,type:Dt.UPN}),a={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:r.scopes,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid};return this.executePostToTokenEndpoint(o,i,s,a,r.correlationId)}async createTokenRequestBody(e){let r=new Ne;r.addClientId(this.config.authOptions.clientId),r.addUsername(e.username),r.addPassword(e.password),r.addScopes(e.scopes),r.addResponseTypeForTokenAndIdToken(),r.addGrantType(Yt.RESOURCE_OWNER_PASSWORD_GRANT),r.addClientInfo(),r.addLibraryInfo(this.config.libraryInfo),r.addApplicationTelemetry(this.config.telemetry.application),r.addThrottling(),this.serverTelemetryManager&&r.addServerTelemetry(this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();r.addCorrelationId(n),this.config.clientCredentials.clientSecret&&r.addClientSecret(this.config.clientCredentials.clientSecret);let o=this.config.clientCredentials.clientAssertion;return o&&(r.addClientAssertion(await Nt(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),r.addClientAssertionType(o.assertionType)),(!xe.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.username&&r.addCcsUpn(e.username),r.createQueryString()}}});var vo,lp=v(()=>{"use strict";Se();Ru();Nu();Du();He();Uy();cp();md();Zc();b_();vo=class{constructor(e){this.config=Iu(e),this.cryptoProvider=new fo,this.logger=new Xt(this.config.system.loggerOptions,dp,wn),this.storage=new go(this.logger,this.config.auth.clientId,this.cryptoProvider,xg(this.config.auth)),this.tokenCache=new xs(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(e){this.logger.info("getAuthCodeUrl called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),responseMode:e.responseMode||ln.QUERY,authenticationScheme:ie.BEARER},n=await this.buildOauthClientConfiguration(r.authority,r.correlationId,void 0,void 0,e.azureCloudOptions),o=new As(n);return this.logger.verbose("Auth code client created",r.correlationId),o.getAuthCodeUrl(r)}async acquireTokenByCode(e,r){this.logger.info("acquireTokenByCode called"),e.state&&r&&(this.logger.info("acquireTokenByCode - validating state"),this.validateState(e.state,r.state||""),r={...r,state:""});let n={...e,...await this.initializeBaseRequest(e),authenticationScheme:ie.BEARER},o=this.initializeServerTelemetryManager(An.acquireTokenByCode,n.correlationId);try{let i=await this.buildOauthClientConfiguration(n.authority,n.correlationId,o,void 0,e.azureCloudOptions),s=new As(i);return this.logger.verbose("Auth code client created",n.correlationId),await s.acquireToken(n,r)}catch(i){throw i instanceof te&&i.setCorrelationId(n.correlationId),o.cacheFailedRequest(i),i}}async acquireTokenByRefreshToken(e){this.logger.info("acquireTokenByRefreshToken called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),authenticationScheme:ie.BEARER},n=this.initializeServerTelemetryManager(An.acquireTokenByRefreshToken,r.correlationId);try{let o=await this.buildOauthClientConfiguration(r.authority,r.correlationId,n,void 0,e.azureCloudOptions),i=new po(o);return this.logger.verbose("Refresh token client created",r.correlationId),await i.acquireToken(r)}catch(o){throw o instanceof te&&o.setCorrelationId(r.correlationId),n.cacheFailedRequest(o),o}}async acquireTokenSilent(e){let r={...e,...await this.initializeBaseRequest(e),forceRefresh:e.forceRefresh||!1},n=this.initializeServerTelemetryManager(An.acquireTokenSilent,r.correlationId,r.forceRefresh);try{let o=await this.buildOauthClientConfiguration(r.authority,r.correlationId,n,void 0,e.azureCloudOptions),i=new Jc(o);return this.logger.verbose("Silent flow client created",r.correlationId),await i.acquireToken(r)}catch(o){throw o instanceof te&&o.setCorrelationId(r.correlationId),n.cacheFailedRequest(o),o}}async acquireTokenByUsernamePassword(e){this.logger.info("acquireTokenByUsernamePassword called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)},n=this.initializeServerTelemetryManager(An.acquireTokenByUsernamePassword,r.correlationId);try{let o=await this.buildOauthClientConfiguration(r.authority,r.correlationId,n,void 0,e.azureCloudOptions),i=new Hs(o);return this.logger.verbose("Username password client created",r.correlationId),await i.acquireToken(r)}catch(o){throw o instanceof te&&o.setCorrelationId(r.correlationId),n.cacheFailedRequest(o),o}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}validateState(e,r){if(!e)throw zt.createStateNotFoundError();if(e!==r)throw I(Ce.stateMismatch)}getLogger(){return this.logger}setLogger(e){this.logger=e}async buildOauthClientConfiguration(e,r,n,o,i){this.logger.verbose("buildOauthClientConfiguration called",r);let s=i||this.config.auth.azureCloudOptions,a=await this.createAuthority(e,r,o,s);return this.logger.info(`Building oauth client configuration with the following authority: ${a.tokenEndpoint}.`,r),n?.updateRegionDiscoveryMetadata(a.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:r},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:n,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:await this.getClientAssertion(a)},libraryInfo:{sku:_t.MSAL_SKU,version:wn,cpu:process.arch||b.EMPTY_STRING,os:process.platform||b.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}async getClientAssertion(e){return this.developerProvidedClientAssertion&&(this.clientAssertion=Rn.fromAssertion(await Nt(this.developerProvidedClientAssertion,this.config.auth.clientId,e.tokenEndpoint))),this.clientAssertion&&{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,e.tokenEndpoint),assertionType:_t.JWT_BEARER_ASSERTION_TYPE}}async initializeBaseRequest(e){return this.logger.verbose("initializeRequestScopes called",e.correlationId),e.authenticationScheme&&e.authenticationScheme===ie.POP&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",e.correlationId),e.authenticationScheme=ie.BEARER,this.config.cache.claimsBasedCachingEnabled&&e.claims&&!xe.isEmptyObj(e.claims)&&(e.requestedClaimsHash=await this.cryptoProvider.hashString(e.claims)),{...e,scopes:[...e&&e.scopes||[],...jt],correlationId:e&&e.correlationId||this.cryptoProvider.createNewGuid(),authority:e.authority||this.config.auth.authority}}initializeServerTelemetryManager(e,r,n){let o={clientId:this.config.auth.clientId,correlationId:r,apiId:e,forceRefresh:n||!1};return new Fi(o,this.storage)}async createAuthority(e,r,n,o){this.logger.verbose("createAuthority called",r);let i=kr.generateAuthority(e,o),s={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:n,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};return ql.createDiscoveredInstance(i,this.config.system.networkClient,this.storage,s,this.logger,r)}clearCache(){this.storage.clear()}}});var YR,up,JR=v(()=>{"use strict";Se();YR=ae(require("http"),1);Zc();He();up=class{async listenForAuthCode(e,r){if(this.server)throw zt.createLoopbackServerAlreadyExistsError();return new Promise((n,o)=>{this.server=YR.default.createServer((i,s)=>{let a=i.url;if(a){if(a===b.FORWARD_SLASH){s.end(e||"Auth code was successfully acquired. You can close this window now.");return}}else{s.end(r||"Error occurred loading redirectUrl"),o(zt.createUnableToLoadRedirectUrlError());return}let c=this.getRedirectUri(),d=new URL(a,c),u=Dl.getDeserializedResponse(d.search)||{};u.code&&(s.writeHead(he.REDIRECT,{location:c}),s.end()),u.error&&s.end(r||`Error occurred: ${u.error}`),n(u)}),this.server.listen(0,"127.0.0.1")})}getRedirectUri(){if(!this.server||!this.server.listening)throw zt.createNoLoopbackServerExistsError();let e=this.server.address();if(!e||typeof e=="string"||!e.port)throw this.closeServer(),zt.createInvalidLoopbackAddressTypeError();let r=e&&e.port;return`${_t.HTTP_PROTOCOL}${_t.LOCALHOST}:${r}`}closeServer(){this.server&&(this.server.close(),typeof this.server.closeAllConnections=="function"&&this.server.closeAllConnections(),this.server.unref(),this.server=void 0)}}});var js,A_=v(()=>{"use strict";Se();js=class extends yt{constructor(e){super(e)}async acquireToken(e){let r=await this.getDeviceCode(e);e.deviceCodeCallback(r);let n=we.nowSeconds(),o=await this.acquireTokenWithDeviceCode(e,r),i=new We(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(o),i.handleServerTokenResponse(o,this.authority,n,e)}async getDeviceCode(e){let r=this.createExtraQueryParameters(e),n=re.appendQueryString(this.authority.deviceCodeEndpoint,r),o=this.createQueryString(e),i=this.createTokenRequestHeaders(),s={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return this.executePostRequestToDeviceCodeEndpoint(n,o,i,s)}createExtraQueryParameters(e){let r=new Ne;return e.extraQueryParameters&&r.addExtraQueryParameters(e.extraQueryParameters),r.createQueryString()}async executePostRequestToDeviceCodeEndpoint(e,r,n,o){let{body:{user_code:i,device_code:s,verification_uri:a,expires_in:c,interval:d,message:u}}=await this.networkManager.sendPostRequest(o,e,{body:r,headers:n});return{userCode:i,deviceCode:s,verificationUri:a,expiresIn:c,interval:d,message:u}}createQueryString(e){let r=new Ne;return r.addScopes(e.scopes),r.addClientId(this.config.authOptions.clientId),e.extraQueryParameters&&r.addExtraQueryParameters(e.extraQueryParameters),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,this.config.authOptions.clientCapabilities),r.createQueryString()}continuePolling(e,r,n){if(n)throw this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true"),I(Ce.deviceCodePollingCancelled);if(r&&r<e&&we.nowSeconds()>r)throw this.logger.error(`User defined timeout for device code polling reached. The timeout was set for ${r}`),I(Ce.userTimeoutReached);if(we.nowSeconds()>e)throw r&&this.logger.verbose(`User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for ${r}`),this.logger.error(`Device code expired. Expiration time of device code was ${e}`),I(Ce.deviceCodeExpired);return!0}async acquireTokenWithDeviceCode(e,r){let n=this.createTokenQueryParameters(e),o=re.appendQueryString(this.authority.tokenEndpoint,n),i=this.createTokenRequestBody(e,r),s=this.createTokenRequestHeaders(),a=e.timeout?we.nowSeconds()+e.timeout:void 0,c=we.nowSeconds()+r.expiresIn,d=r.interval*1e3;for(;this.continuePolling(c,a,e.cancel);){let u={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},m=await this.executePostToTokenEndpoint(o,i,s,u,e.correlationId);if(m.body&&m.body.error)if(m.body.error===b.AUTHORIZATION_PENDING)this.logger.info("Authorization pending. Continue polling."),await we.delay(d);else throw this.logger.info("Unexpected error in polling from the server"),yg(hs.postRequestFailed,m.body.error);else return this.logger.verbose("Authorization completed successfully. Polling stopped."),m.body}throw this.logger.error("Polling stopped for unknown reasons."),I(Ce.deviceCodeUnknownError)}createTokenRequestBody(e,r){let n=new Ne;n.addScopes(e.scopes),n.addClientId(this.config.authOptions.clientId),n.addGrantType(Yt.DEVICE_CODE_GRANT),n.addDeviceCode(r.deviceCode);let o=e.correlationId||this.config.cryptoInterface.createNewGuid();return n.addCorrelationId(o),n.addClientInfo(),n.addLibraryInfo(this.config.libraryInfo),n.addApplicationTelemetry(this.config.telemetry.application),n.addThrottling(),this.serverTelemetryManager&&n.addServerTelemetry(this.serverTelemetryManager),(!xe.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(e.claims,this.config.authOptions.clientCapabilities),n.createQueryString()}}});var pp,XR=v(()=>{"use strict";He();Se();lp();Zc();JR();A_();md();pp=class extends vo{constructor(e){super(e),this.config.broker.nativeBrokerPlugin&&(this.config.broker.nativeBrokerPlugin.isBrokerAvailable?(this.nativeBrokerPlugin=this.config.broker.nativeBrokerPlugin,this.nativeBrokerPlugin.setLogger(this.config.system.loggerOptions)):this.logger.warning("NativeBroker implementation was provided but the broker is unavailable.")),this.skus=Fi.makeExtraSkuString({libraryName:_t.MSAL_SKU,libraryVersion:wn})}async acquireTokenByDeviceCode(e){this.logger.info("acquireTokenByDeviceCode called",e.correlationId);let r=Object.assign(e,await this.initializeBaseRequest(e)),n=this.initializeServerTelemetryManager(An.acquireTokenByDeviceCode,r.correlationId);try{let o=await this.buildOauthClientConfiguration(r.authority,r.correlationId,n,void 0,e.azureCloudOptions),i=new js(o);return this.logger.verbose("Device code client created",r.correlationId),await i.acquireToken(r)}catch(o){throw o instanceof te&&o.setCorrelationId(r.correlationId),n.cacheFailedRequest(o),o}}async acquireTokenInteractive(e){let r=e.correlationId||this.cryptoProvider.createNewGuid();this.logger.trace("acquireTokenInteractive called",r);let{openBrowser:n,successTemplate:o,errorTemplate:i,windowHandle:s,loopbackClient:a,...c}=e;if(this.nativeBrokerPlugin){let y={...c,clientId:this.config.auth.clientId,scopes:e.scopes||jt,redirectUri:`${_t.HTTP_PROTOCOL}${_t.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:r,extraParameters:{...c.extraQueryParameters,...c.tokenQueryParameters,[Ui.X_CLIENT_EXTRA_SKU]:this.skus},accountId:c.account?.nativeAccountId};return this.nativeBrokerPlugin.acquireTokenInteractive(y,s)}let{verifier:d,challenge:u}=await this.cryptoProvider.generatePkceCodes(),m=a||new up,f={},h=null;try{let y=m.listenForAuthCode(o,i).then(W=>{f=W}).catch(W=>{h=W}),E=await this.waitForRedirectUri(m),A={...c,correlationId:r,scopes:e.scopes||jt,redirectUri:E,responseMode:ln.QUERY,codeChallenge:u,codeChallengeMethod:us.S256},w=await this.getAuthCodeUrl(A);if(await n(w),await y,h)throw h;if(f.error)throw new $t(f.error,f.error_description,f.suberror);if(!f.code)throw zt.createNoAuthCodeInResponseError();let x=f.client_info,K={code:f.code,codeVerifier:d,clientInfo:x||b.EMPTY_STRING,...A};return await this.acquireTokenByCode(K)}finally{m.closeServer()}}async acquireTokenSilent(e){let r=e.correlationId||this.cryptoProvider.createNewGuid();if(this.logger.trace("acquireTokenSilent called",r),this.nativeBrokerPlugin){let n={...e,clientId:this.config.auth.clientId,scopes:e.scopes||jt,redirectUri:`${_t.HTTP_PROTOCOL}${_t.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:r,extraParameters:{...e.tokenQueryParameters,[Ui.X_CLIENT_EXTRA_SKU]:this.skus},accountId:e.account.nativeAccountId,forceRefresh:e.forceRefresh||!1};return this.nativeBrokerPlugin.acquireTokenSilent(n)}return super.acquireTokenSilent(e)}async signOut(e){if(this.nativeBrokerPlugin&&e.account.nativeAccountId){let r={clientId:this.config.auth.clientId,accountId:e.account.nativeAccountId,correlationId:e.correlationId||this.cryptoProvider.createNewGuid()};await this.nativeBrokerPlugin.signOut(r)}await this.getTokenCache().removeAccount(e.account)}async getAllAccounts(){if(this.nativeBrokerPlugin){let e=this.cryptoProvider.createNewGuid();return this.nativeBrokerPlugin.getAllAccounts(this.config.auth.clientId,e)}return this.getTokenCache().getAllAccounts()}async waitForRedirectUri(e){return new Promise((r,n)=>{let o=0,i=setInterval(()=>{if(pu.TIMEOUT_MS/pu.INTERVAL_MS<o){clearInterval(i),n(zt.createLoopbackServerTimeoutError());return}try{let s=e.getRedirectUri();clearInterval(i),r(s);return}catch(s){if(s instanceof te&&s.errorCode===pt.noLoopbackServerExists.code){o++;return}clearInterval(i),n(s);return}},pu.INTERVAL_MS)})}}});var Eo,mp=v(()=>{"use strict";Se();Eo=class extends yt{constructor(e,r){super(e),this.appTokenProvider=r}async acquireToken(e){if(e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority);let[r,n]=await this.getCachedAuthenticationResult(e,this.config,this.cryptoUtils,this.authority,this.cacheManager,this.serverTelemetryManager);return r?(n===Ie.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.executeTokenRequest(e,this.authority,!0)),r):this.executeTokenRequest(e,this.authority)}async getCachedAuthenticationResult(e,r,n,o,i,s){let a=r,c=r,d=Ie.NOT_APPLICABLE,u;a.serializableCache&&a.persistencePlugin&&(u=new ar(a.serializableCache,!1),await a.persistencePlugin.beforeCacheAccess(u));let m=this.readAccessTokenFromCache(o,c.managedIdentityId?.id||a.authOptions.clientId,new nt(e.scopes||[]),i);return a.serializableCache&&a.persistencePlugin&&u&&await a.persistencePlugin.afterCacheAccess(u),m?we.isTokenExpired(m.expiresOn,a.systemOptions?.tokenRenewalOffsetSeconds||ic)?(s?.setCacheOutcome(Ie.CACHED_ACCESS_TOKEN_EXPIRED),[null,Ie.CACHED_ACCESS_TOKEN_EXPIRED]):(m.refreshOn&&we.isTokenExpired(m.refreshOn.toString(),0)&&(d=Ie.PROACTIVELY_REFRESHED,s?.setCacheOutcome(Ie.PROACTIVELY_REFRESHED)),[await We.generateAuthenticationResult(n,o,{account:null,idToken:null,accessToken:m,refreshToken:null,appMetadata:null},!0,e),d]):(s?.setCacheOutcome(Ie.NO_CACHED_ACCESS_TOKEN),[null,Ie.NO_CACHED_ACCESS_TOKEN])}readAccessTokenFromCache(e,r,n,o){let i={homeAccountId:b.EMPTY_STRING,environment:e.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:de.ACCESS_TOKEN,clientId:r,realm:e.tenant,target:nt.createSearchScopes(n.asArray())},s=o.getAccessTokensByFilter(i);if(s.length<1)return null;if(s.length>1)throw I(Ce.multipleMatchingTokens);return s[0]}async executeTokenRequest(e,r,n){let o,i;if(this.appTokenProvider){this.logger.info("Using appTokenProvider extensibility.");let c={correlationId:e.correlationId,tenantId:this.config.authOptions.authority.tenant,scopes:e.scopes,claims:e.claims};i=we.nowSeconds();let d=await this.appTokenProvider(c);o={access_token:d.accessToken,expires_in:d.expiresInSeconds,refresh_in:d.refreshInSeconds,token_type:ie.BEARER}}else{let c=this.createTokenQueryParameters(e),d=re.appendQueryString(r.tokenEndpoint,c),u=await this.createTokenRequestBody(e),m=this.createTokenRequestHeaders(),f={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};this.logger.info("Sending token request to endpoint: "+r.tokenEndpoint),i=we.nowSeconds();let h=await this.executePostToTokenEndpoint(d,u,m,f,e.correlationId);o=h.body,o.status=h.status}let s=new We(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return s.validateTokenResponse(o,n),await s.handleServerTokenResponse(o,this.authority,i,e)}async createTokenRequestBody(e){let r=new Ne;r.addClientId(this.config.authOptions.clientId),r.addScopes(e.scopes,!1),r.addGrantType(Yt.CLIENT_CREDENTIALS_GRANT),r.addLibraryInfo(this.config.libraryInfo),r.addApplicationTelemetry(this.config.telemetry.application),r.addThrottling(),this.serverTelemetryManager&&r.addServerTelemetry(this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();r.addCorrelationId(n),this.config.clientCredentials.clientSecret&&r.addClientSecret(this.config.clientCredentials.clientSecret);let o=e.clientAssertion||this.config.clientCredentials.clientAssertion;return o&&(r.addClientAssertion(await Nt(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),r.addClientAssertionType(o.assertionType)),(!xe.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,this.config.authOptions.clientCapabilities),r.createQueryString()}}});var Gs,I_=v(()=>{"use strict";Se();ed();Gs=class extends yt{constructor(e){super(e)}async acquireToken(e){if(this.scopeSet=new nt(e.scopes||[]),this.userAssertionHash=await this.cryptoUtils.hashString(e.oboAssertion),e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority,this.userAssertionHash);try{return await this.getCachedAuthenticationResult(e)}catch{return await this.executeTokenRequest(e,this.authority,this.userAssertionHash)}}async getCachedAuthenticationResult(e){let r=this.readAccessTokenFromCacheForOBO(this.config.authOptions.clientId,e);if(r){if(we.isTokenExpired(r.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.serverTelemetryManager?.setCacheOutcome(Ie.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info(`OnbehalfofFlow:getCachedAuthenticationResult - Cached access token is expired or will expire within ${this.config.systemOptions.tokenRenewalOffsetSeconds} seconds.`),I(Ce.tokenRefreshRequired)}else throw this.serverTelemetryManager?.setCacheOutcome(Ie.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),I(Ce.tokenRefreshRequired);let n=this.readIdTokenFromCacheForOBO(r.homeAccountId),o,i=null;if(n){o=Nl.extractTokenClaims(n.secret,Zt.base64Decode);let s=o.oid||o.sub,a={homeAccountId:n.homeAccountId,environment:n.environment,tenantId:n.realm,username:b.EMPTY_STRING,localAccountId:s||b.EMPTY_STRING};i=this.cacheManager.readAccountFromCache(a)}return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),We.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:i,accessToken:r,idToken:n,refreshToken:null,appMetadata:null},!0,e,o)}readIdTokenFromCacheForOBO(e){let r={homeAccountId:e,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:de.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant},n=this.cacheManager.getIdTokensByFilter(r);return Object.values(n).length<1?null:Object.values(n)[0]}readAccessTokenFromCacheForOBO(e,r){let n=r.authenticationScheme||ie.BEARER,i={credentialType:n&&n.toLowerCase()!==ie.BEARER.toLowerCase()?de.ACCESS_TOKEN_WITH_AUTH_SCHEME:de.ACCESS_TOKEN,clientId:e,target:nt.createSearchScopes(this.scopeSet.asArray()),tokenType:n,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash,userAssertionHash:this.userAssertionHash},s=this.cacheManager.getAccessTokensByFilter(i),a=s.length;if(a<1)return null;if(a>1)throw I(Ce.multipleMatchingTokens);return s[0]}async executeTokenRequest(e,r,n){let o=this.createTokenQueryParameters(e),i=re.appendQueryString(r.tokenEndpoint,o),s=await this.createTokenRequestBody(e),a=this.createTokenRequestHeaders(),c={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},d=we.nowSeconds(),u=await this.executePostToTokenEndpoint(i,s,a,c,e.correlationId),m=new We(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return m.validateTokenResponse(u.body),await m.handleServerTokenResponse(u.body,this.authority,d,e,void 0,n)}async createTokenRequestBody(e){let r=new Ne;r.addClientId(this.config.authOptions.clientId),r.addScopes(e.scopes),r.addGrantType(Yt.JWT_BEARER),r.addClientInfo(),r.addLibraryInfo(this.config.libraryInfo),r.addApplicationTelemetry(this.config.telemetry.application),r.addThrottling(),this.serverTelemetryManager&&r.addServerTelemetry(this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();r.addCorrelationId(n),r.addRequestTokenUse(Ui.ON_BEHALF_OF),r.addOboAssertion(e.oboAssertion),this.config.clientCredentials.clientSecret&&r.addClientSecret(this.config.clientCredentials.clientSecret);let o=this.config.clientCredentials.clientAssertion;return o&&(r.addClientAssertion(await Nt(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),r.addClientAssertionType(o.assertionType)),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,this.config.authOptions.clientCapabilities),r.createQueryString()}}});var hp,ZR=v(()=>{"use strict";lp();cp();He();Se();mp();I_();hp=class extends vo{constructor(e){super(e),this.setClientCredential(),this.appTokenProvider=void 0}SetAppTokenProvider(e){this.appTokenProvider=e}async acquireTokenByClientCredential(e){this.logger.info("acquireTokenByClientCredential called",e.correlationId);let r;e.clientAssertion&&(r={assertion:await Nt(e.clientAssertion,this.config.auth.clientId),assertionType:_t.JWT_BEARER_ASSERTION_TYPE});let n=await this.initializeBaseRequest(e),o={...n,scopes:n.scopes.filter(u=>!jt.includes(u))},i={...e,...o,clientAssertion:r},a=new re(i.authority).getUrlComponents().PathSegments[0];if(Object.values(Qt).includes(a))throw I(Ce.missingTenantIdError);let c={azureRegion:i.azureRegion,environmentRegion:process.env[FT]},d=this.initializeServerTelemetryManager(An.acquireTokenByClientCredential,i.correlationId,i.skipCache);try{let u=await this.buildOauthClientConfiguration(i.authority,i.correlationId,d,c,e.azureCloudOptions),m=new Eo(u,this.appTokenProvider);return this.logger.verbose("Client credential client created",i.correlationId),await m.acquireToken(i)}catch(u){throw u instanceof te&&u.setCorrelationId(i.correlationId),d.cacheFailedRequest(u),u}}async acquireTokenOnBehalfOf(e){this.logger.info("acquireTokenOnBehalfOf called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)};try{let n=await this.buildOauthClientConfiguration(r.authority,r.correlationId,void 0,void 0,e.azureCloudOptions),o=new Gs(n);return this.logger.verbose("On behalf of client created",r.correlationId),await o.acquireToken(r)}catch(n){throw n instanceof te&&n.setCorrelationId(r.correlationId),n}}setClientCredential(){let e=!!this.config.auth.clientSecret,r=!!this.config.auth.clientAssertion,n=(!!this.config.auth.clientCertificate?.thumbprint||!!this.config.auth.clientCertificate?.thumbprintSha256)&&!!this.config.auth.clientCertificate?.privateKey;if(!this.appTokenProvider){if(e&&r||r&&n||e&&n)throw I(Ce.invalidClientCredential);if(this.config.auth.clientSecret){this.clientSecret=this.config.auth.clientSecret;return}if(this.config.auth.clientAssertion){this.developerProvidedClientAssertion=this.config.auth.clientAssertion;return}if(n)this.clientAssertion=this.config.auth.clientCertificate.thumbprintSha256?Rn.fromCertificateWithSha256Thumbprint(this.config.auth.clientCertificate.thumbprintSha256,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c):Rn.fromCertificate(this.config.auth.clientCertificate.thumbprint,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c);else throw I(Ce.invalidClientCredential)}}}});var R_,er,$s=v(()=>{"use strict";Se();He();Ps();qi();R_={MANAGED_IDENTITY_CLIENT_ID:"client_id",MANAGED_IDENTITY_OBJECT_ID:"object_id",MANAGED_IDENTITY_RESOURCE_ID:"mi_res_id"},er=class{constructor(e,r,n,o){this.logger=e,this.nodeStorage=r,this.networkClient=n,this.cryptoProvider=o}async getServerTokenResponseAsync(e,r,n,o){return this.getServerTokenResponse(e)}getServerTokenResponse(e){let r,n;return e.body.expires_on&&(n=e.body.expires_on-we.nowSeconds(),n>2*3600&&(r=n/2)),{status:e.status,access_token:e.body.access_token,expires_in:n,scope:e.body.resource,token_type:e.body.token_type,refresh_in:r,correlation_id:e.body.correlation_id||e.body.correlationId,error:typeof e.body.error=="string"?e.body.error:e.body.error?.code,error_description:e.body.message||(typeof e.body.error=="string"?e.body.error_description:e.body.error?.message),error_codes:e.body.error_codes,timestamp:e.body.timestamp,trace_id:e.body.trace_id}}async acquireTokenWithManagedIdentity(e,r,n,o){let i=this.createRequest(e.resource,r),s=i.headers;s[tt.CONTENT_TYPE]=b.URL_FORM_CONTENT_TYPE;let a={headers:s};Object.keys(i.bodyParameters).length&&(a.body=i.computeParametersBodyString());let c=we.nowSeconds(),d;try{i.httpMethod===qe.POST?d=await this.networkClient.sendPostRequestAsync(i.computeUri(),a):d=await this.networkClient.sendGetRequestAsync(i.computeUri(),a)}catch(f){throw f instanceof te?f:I(Ce.networkError)}let u=new We(r.id,this.nodeStorage,this.cryptoProvider,this.logger,null,null),m=await this.getServerTokenResponseAsync(d,this.networkClient,i,a);return u.validateTokenResponse(m,o),u.handleServerTokenResponse(m,n,c,e)}getManagedIdentityUserAssignedIdQueryParameterKey(e){switch(e){case ot.USER_ASSIGNED_CLIENT_ID:return this.logger.info("[Managed Identity] Adding user assigned client id to the request."),R_.MANAGED_IDENTITY_CLIENT_ID;case ot.USER_ASSIGNED_RESOURCE_ID:return this.logger.info("[Managed Identity] Adding user assigned resource id to the request."),R_.MANAGED_IDENTITY_RESOURCE_ID;case ot.USER_ASSIGNED_OBJECT_ID:return this.logger.info("[Managed Identity] Adding user assigned object id to the request."),R_.MANAGED_IDENTITY_OBJECT_ID;default:throw Qe(ho)}}};er.getValidatedEnvVariableUrlString=(t,e,r,n)=>{try{return new re(e).urlString}catch{throw n.info(`[Managed Identity] ${r} managed identity is unavailable because the '${t}' environment variable is malformed.`),Qe(Bi[t])}}});var ur,zs=v(()=>{"use strict";Se();ur=class{constructor(e,r){this.httpMethod=e,this._baseEndpoint=r,this.headers={},this.bodyParameters={},this.queryParameters={}}computeUri(){let e=new Ne;this.queryParameters&&e.addExtraQueryParameters(this.queryParameters);let r=e.createQueryString();return re.appendQueryString(this._baseEndpoint,r)}computeParametersBodyString(){let e=new Ne;return this.bodyParameters&&e.addExtraQueryParameters(this.bodyParameters),e.createQueryString()}}});var mX,hd,ew=v(()=>{"use strict";$s();He();zs();mX="2019-08-01",hd=class t extends er{constructor(e,r,n,o,i,s){super(e,r,n,o),this.identityEndpoint=i,this.identityHeader=s}static getEnvironmentVariables(){let e=process.env[Z.IDENTITY_ENDPOINT],r=process.env[Z.IDENTITY_HEADER];return[e,r]}static tryCreate(e,r,n,o){let[i,s]=t.getEnvironmentVariables();if(!i||!s)return e.info(`[Managed Identity] ${ne.APP_SERVICE} managed identity is unavailable because one or both of the '${Z.IDENTITY_HEADER}' and '${Z.IDENTITY_ENDPOINT}' environment variables are not defined.`),null;let a=t.getValidatedEnvVariableUrlString(Z.IDENTITY_ENDPOINT,i,ne.APP_SERVICE,e);return e.info(`[Managed Identity] Environment variables validation passed for ${ne.APP_SERVICE} managed identity. Endpoint URI: ${a}. Creating ${ne.APP_SERVICE} managed identity.`),new t(e,r,n,o,i,s)}createRequest(e,r){let n=new ur(qe.GET,this.identityEndpoint);return n.headers[MT]=this.identityHeader,n.queryParameters[mo]=mX,n.queryParameters[Jr]=e,r.idType!==ot.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType)]=r.id),n}}});var Pn,ow,hX,tw,rw,nw,fX,fd,iw=v(()=>{"use strict";Se();zs();$s();Ps();He();Pn=require("fs"),ow=ae(require("path"),1);qi();hX="2019-11-01",tw="http://127.0.0.1:40342/metadata/identity/oauth2/token",rw="N/A: himds executable exists",nw={win32:`${process.env.ProgramData}\\AzureConnectedMachineAgent\\Tokens\\`,linux:"/var/opt/azcmagent/tokens/"},fX={win32:`${process.env.ProgramFiles}\\AzureConnectedMachineAgent\\himds.exe`,linux:"/opt/azcmagent/bin/himds"},fd=class t extends er{constructor(e,r,n,o,i){super(e,r,n,o),this.identityEndpoint=i}static getEnvironmentVariables(){let e=process.env[Z.IDENTITY_ENDPOINT],r=process.env[Z.IMDS_ENDPOINT];if(!e||!r){let n=fX[process.platform];try{(0,Pn.accessSync)(n,Pn.constants.F_OK|Pn.constants.R_OK),e=tw,r=rw}catch{}}return[e,r]}static tryCreate(e,r,n,o,i){let[s,a]=t.getEnvironmentVariables();if(!s||!a)return e.info(`[Managed Identity] ${ne.AZURE_ARC} managed identity is unavailable through environment variables because one or both of '${Z.IDENTITY_ENDPOINT}' and '${Z.IMDS_ENDPOINT}' are not defined. ${ne.AZURE_ARC} managed identity is also unavailable through file detection.`),null;if(a===rw)e.info(`[Managed Identity] ${ne.AZURE_ARC} managed identity is available through file detection. Defaulting to known ${ne.AZURE_ARC} endpoint: ${tw}. Creating ${ne.AZURE_ARC} managed identity.`);else{let c=t.getValidatedEnvVariableUrlString(Z.IDENTITY_ENDPOINT,s,ne.AZURE_ARC,e);c.endsWith("/")&&c.slice(0,-1),t.getValidatedEnvVariableUrlString(Z.IMDS_ENDPOINT,a,ne.AZURE_ARC,e),e.info(`[Managed Identity] Environment variables validation passed for ${ne.AZURE_ARC} managed identity. Endpoint URI: ${c}. Creating ${ne.AZURE_ARC} managed identity.`)}if(i.idType!==ot.SYSTEM_ASSIGNED)throw Qe(_u);return new t(e,r,n,o,s)}createRequest(e){let r=new ur(qe.GET,this.identityEndpoint.replace("localhost","127.0.0.1"));return r.headers[Is]="true",r.queryParameters[mo]=hX,r.queryParameters[Jr]=e,r}async getServerTokenResponseAsync(e,r,n,o){let i;if(e.status===he.UNAUTHORIZED){let s=e.headers["www-authenticate"];if(!s)throw Qe(Cu);if(!s.includes("Basic realm="))throw Qe(Su);let a=s.split("Basic realm=")[1];if(!nw.hasOwnProperty(process.platform))throw Qe(yu);let c=nw[process.platform],d=ow.default.basename(a);if(!d.endsWith(".key"))throw Qe(hu);if(c+d!==a)throw Qe(fu);let u;try{u=await(0,Pn.statSync)(a).size}catch{throw Qe(Xc)}if(u>HT)throw Qe(gu);let m;try{m=(0,Pn.readFileSync)(a,"utf-8")}catch{throw Qe(Xc)}let f=`Basic ${m}`;this.logger.info("[Managed Identity] Adding authorization header to the request."),n.headers[kT]=f;try{i=await r.sendGetRequestAsync(n.computeUri(),o)}catch(h){throw h instanceof te?h:I(Ce.networkError)}}return this.getServerTokenResponse(i||e)}}});var gd,sw=v(()=>{"use strict";zs();$s();He();Ps();qi();gd=class t extends er{constructor(e,r,n,o,i){super(e,r,n,o),this.msiEndpoint=i}static getEnvironmentVariables(){return[process.env[Z.MSI_ENDPOINT]]}static tryCreate(e,r,n,o,i){let[s]=t.getEnvironmentVariables();if(!s)return e.info(`[Managed Identity] ${ne.CLOUD_SHELL} managed identity is unavailable because the '${Z.MSI_ENDPOINT} environment variable is not defined.`),null;let a=t.getValidatedEnvVariableUrlString(Z.MSI_ENDPOINT,s,ne.CLOUD_SHELL,e);if(e.info(`[Managed Identity] Environment variable validation passed for ${ne.CLOUD_SHELL} managed identity. Endpoint URI: ${a}. Creating ${ne.CLOUD_SHELL} managed identity.`),i.idType!==ot.SYSTEM_ASSIGNED)throw Qe(vu);return new t(e,r,n,o,s)}createRequest(e){let r=new ur(qe.POST,this.msiEndpoint);return r.headers[Is]="true",r.bodyParameters[Jr]=e,r}}});var aw,gX,yX,fp,cw=v(()=>{"use strict";zs();$s();He();aw="/metadata/identity/oauth2/token",gX=`http://169.254.169.254${aw}`,yX="2018-02-01",fp=class t extends er{constructor(e,r,n,o,i){super(e,r,n,o),this.identityEndpoint=i}static tryCreate(e,r,n,o){let i;return process.env[Z.AZURE_POD_IDENTITY_AUTHORITY_HOST]?(e.info(`[Managed Identity] Environment variable ${Z.AZURE_POD_IDENTITY_AUTHORITY_HOST} for ${ne.IMDS} returned endpoint: ${process.env[Z.AZURE_POD_IDENTITY_AUTHORITY_HOST]}`),i=t.getValidatedEnvVariableUrlString(Z.AZURE_POD_IDENTITY_AUTHORITY_HOST,`${process.env[Z.AZURE_POD_IDENTITY_AUTHORITY_HOST]}${aw}`,ne.IMDS,e)):(e.info(`[Managed Identity] Unable to find ${Z.AZURE_POD_IDENTITY_AUTHORITY_HOST} environment variable for ${ne.IMDS}, using the default endpoint.`),i=gX),new t(e,r,n,o,i)}createRequest(e,r){let n=new ur(qe.GET,this.identityEndpoint);return n.headers[Is]="true",n.queryParameters[mo]=yX,n.queryParameters[Jr]=e,r.idType!==ot.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType)]=r.id),n}}});var _X,yd,dw=v(()=>{"use strict";zs();$s();He();_X="2019-07-01-preview",yd=class t extends er{constructor(e,r,n,o,i,s){super(e,r,n,o),this.identityEndpoint=i,this.identityHeader=s}static getEnvironmentVariables(){let e=process.env[Z.IDENTITY_ENDPOINT],r=process.env[Z.IDENTITY_HEADER],n=process.env[Z.IDENTITY_SERVER_THUMBPRINT];return[e,r,n]}static tryCreate(e,r,n,o,i){let[s,a,c]=t.getEnvironmentVariables();if(!s||!a||!c)return e.info(`[Managed Identity] ${ne.SERVICE_FABRIC} managed identity is unavailable because one or all of the '${Z.IDENTITY_HEADER}', '${Z.IDENTITY_ENDPOINT}' or '${Z.IDENTITY_SERVER_THUMBPRINT}' environment variables are not defined.`),null;let d=t.getValidatedEnvVariableUrlString(Z.IDENTITY_ENDPOINT,s,ne.SERVICE_FABRIC,e);return e.info(`[Managed Identity] Environment variables validation passed for ${ne.SERVICE_FABRIC} managed identity. Endpoint URI: ${d}. Creating ${ne.SERVICE_FABRIC} managed identity.`),i.idType!==ot.SYSTEM_ASSIGNED&&e.warning(`[Managed Identity] ${ne.SERVICE_FABRIC} user assigned managed identity is configured in the cluster, not during runtime. See also: https://learn.microsoft.com/en-us/azure/service-fabric/configure-existing-cluster-enable-managed-identity-token-service.`),new t(e,r,n,o,s,a)}createRequest(e,r){let n=new ur(qe.GET,this.identityEndpoint);return n.headers[LT]=this.identityHeader,n.queryParameters[mo]=_X,n.queryParameters[Jr]=e,r.idType!==ot.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType)]=r.id),n}}});var _d,lw=v(()=>{"use strict";ew();iw();sw();cw();dw();Ps();He();qi();_d=class t{constructor(e,r,n,o){this.logger=e,this.nodeStorage=r,this.networkClient=n,this.cryptoProvider=o}async sendManagedIdentityTokenRequest(e,r,n,o){return t.identitySource||(t.identitySource=this.selectManagedIdentitySource(this.logger,this.nodeStorage,this.networkClient,this.cryptoProvider,r)),t.identitySource.acquireTokenWithManagedIdentity(e,r,n,o)}allEnvironmentVariablesAreDefined(e){return Object.values(e).every(r=>r!==void 0)}getManagedIdentitySource(){return t.sourceName=this.allEnvironmentVariablesAreDefined(yd.getEnvironmentVariables())?ne.SERVICE_FABRIC:this.allEnvironmentVariablesAreDefined(hd.getEnvironmentVariables())?ne.APP_SERVICE:this.allEnvironmentVariablesAreDefined(gd.getEnvironmentVariables())?ne.CLOUD_SHELL:this.allEnvironmentVariablesAreDefined(fd.getEnvironmentVariables())?ne.AZURE_ARC:ne.DEFAULT_TO_IMDS,t.sourceName}selectManagedIdentitySource(e,r,n,o,i){let s=yd.tryCreate(e,r,n,o,i)||hd.tryCreate(e,r,n,o)||gd.tryCreate(e,r,n,o,i)||fd.tryCreate(e,r,n,o,i)||fp.tryCreate(e,r,n,o);if(!s)throw Qe(Eu);return s}}});var gp,uw=v(()=>{"use strict";Se();Ru();md();Nu();mp();lw();Du();He();gp=class t{constructor(e){this.config=rb(e||{}),this.logger=new Xt(this.config.system.loggerOptions,dp,wn);let r={canonicalAuthority:b.DEFAULT_AUTHORITY};t.nodeStorage||(t.nodeStorage=new go(this.logger,this.config.managedIdentityId.id,Cs,r)),this.networkClient=this.config.system.networkClient,this.cryptoProvider=new fo;let n={protocolMode:Gt.AAD,knownAuthorities:[Oy],cloudDiscoveryMetadata:"",authorityMetadata:""};this.fakeAuthority=new kr(Oy,this.networkClient,t.nodeStorage,n,this.logger,this.cryptoProvider.createNewGuid(),void 0,!0),this.fakeClientCredentialClient=new Eo({authOptions:{clientId:this.config.managedIdentityId.id,authority:this.fakeAuthority}}),this.managedIdentityClient=new _d(this.logger,t.nodeStorage,this.networkClient,this.cryptoProvider)}async acquireToken(e){if(!e.resource)throw ue(gs.urlEmptyError);let r={forceRefresh:e.forceRefresh,resource:e.resource.replace("/.default",""),scopes:[e.resource.replace("/.default","")],authority:this.fakeAuthority.canonicalAuthority,correlationId:this.cryptoProvider.createNewGuid()};if(r.forceRefresh)return this.managedIdentityClient.sendManagedIdentityTokenRequest(r,this.config.managedIdentityId,this.fakeAuthority);let[n,o]=await this.fakeClientCredentialClient.getCachedAuthenticationResult(r,this.config,this.cryptoProvider,this.fakeAuthority,t.nodeStorage);return n?(o===Ie.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.managedIdentityClient.sendManagedIdentityTokenRequest(r,this.config.managedIdentityId,this.fakeAuthority,!0)),n):this.managedIdentityClient.sendManagedIdentityTokenRequest(r,this.config.managedIdentityId,this.fakeAuthority)}getManagedIdentitySource(){return _d.sourceName||this.managedIdentityClient.getManagedIdentitySource()}}});var yp,pw=v(()=>{"use strict";Se();yp=class{constructor(e,r){this.client=e,this.partitionManager=r}async beforeCacheAccess(e){let r=await this.partitionManager.getKey(),n=await this.client.get(r);e.tokenCache.deserialize(n)}async afterCacheAccess(e){if(e.cacheHasChanged){let r=e.tokenCache.getKVStore(),n=Object.values(r).filter(o=>ut.isAccountEntity(o));if(n.length>0){let o=n[0],i=await this.partitionManager.extractKey(o);await this.client.set(i,e.tokenCache.serialize())}}}}});var mw={};gt(mw,{AuthError:()=>te,AuthErrorCodes:()=>hs,AuthErrorMessage:()=>gg,AzureCloudInstance:()=>Cn,ClientApplication:()=>vo,ClientAssertion:()=>Rn,ClientAuthError:()=>oo,ClientAuthErrorCodes:()=>Ce,ClientAuthErrorMessage:()=>_g,ClientConfigurationError:()=>ys,ClientConfigurationErrorCodes:()=>gs,ClientConfigurationErrorMessage:()=>Eg,ClientCredentialClient:()=>Eo,ConfidentialClientApplication:()=>hp,CryptoProvider:()=>fo,DeviceCodeClient:()=>js,DistributedCachePlugin:()=>yp,InteractionRequiredAuthError:()=>sr,InteractionRequiredAuthErrorCodes:()=>ru,InteractionRequiredAuthErrorMessage:()=>Ay,LogLevel:()=>Be,Logger:()=>Xt,ManagedIdentityApplication:()=>gp,ManagedIdentitySourceNames:()=>ne,NodeStorage:()=>go,OnBehalfOfClient:()=>Gs,PromptValue:()=>zr,ProtocolMode:()=>Gt,PublicClientApplication:()=>pp,ResponseMode:()=>ln,ServerError:()=>$t,TokenCache:()=>xs,TokenCacheContext:()=>ar,UsernamePasswordClient:()=>Hs,buildAppConfiguration:()=>Iu,internals:()=>Py,version:()=>wn});var hw=v(()=>{"use strict";DT();XR();ZR();lp();mp();A_();I_();uw();b_();Ru();cp();Uy();Du();pw();He();Nu();Se();md();});var ye={};gt(ye,{__addDisposableResource:()=>Mw,__assign:()=>_p,__asyncDelegator:()=>Rw,__asyncGenerator:()=>Iw,__asyncValues:()=>ww,__await:()=>Vs,__awaiter:()=>Ew,__classPrivateFieldGet:()=>Nw,__classPrivateFieldIn:()=>kw,__classPrivateFieldSet:()=>Dw,__createBinding:()=>Ep,__decorate:()=>yw,__disposeResources:()=>Lw,__esDecorate:()=>vX,__exportStar:()=>Sw,__extends:()=>fw,__generator:()=>Cw,__importDefault:()=>xw,__importStar:()=>Ow,__makeTemplateObject:()=>Pw,__metadata:()=>vw,__param:()=>_w,__propKey:()=>CX,__read:()=>P_,__rest:()=>gw,__runInitializers:()=>EX,__setFunctionName:()=>SX,__spread:()=>Tw,__spreadArray:()=>Aw,__spreadArrays:()=>bw,__values:()=>vp,default:()=>AX});function fw(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");w_(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function gw(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]]);return r}function yw(t,e,r,n){var o=arguments.length,i=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(i=(o<3?s(i):o>3?s(e,r,i):s(e,r))||i);return o>3&&i&&Object.defineProperty(e,r,i),i}function _w(t,e){return function(r,n){e(r,n,t)}}function vX(t,e,r,n,o,i){function s(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var a=n.kind,c=a==="getter"?"get":a==="setter"?"set":"value",d=!e&&t?n.static?t:t.prototype:null,u=e||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),m,f=!1,h=r.length-1;h>=0;h--){var y={};for(var E in n)y[E]=E==="access"?{}:n[E];for(var E in n.access)y.access[E]=n.access[E];y.addInitializer=function(w){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(w||null))};var A=(0,r[h])(a==="accessor"?{get:u.get,set:u.set}:u[c],y);if(a==="accessor"){if(A===void 0)continue;if(A===null||typeof A!="object")throw new TypeError("Object expected");(m=s(A.get))&&(u.get=m),(m=s(A.set))&&(u.set=m),(m=s(A.init))&&o.unshift(m)}else(m=s(A))&&(a==="field"?o.unshift(m):u[c]=m)}d&&Object.defineProperty(d,n.name,u),f=!0}function EX(t,e,r){for(var n=arguments.length>2,o=0;o<e.length;o++)r=n?e[o].call(t,r):e[o].call(t);return n?r:void 0}function CX(t){return typeof t=="symbol"?t:"".concat(t)}function SX(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function vw(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Ew(t,e,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function a(u){try{d(n.next(u))}catch(m){s(m)}}function c(u){try{d(n.throw(u))}catch(m){s(m)}}function d(u){u.done?i(u.value):o(u.value).then(a,c)}d((n=n.apply(t,e||[])).next())})}function Cw(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(d){return function(u){return c([d,u])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,d[0]&&(r=0)),r;)try{if(n=1,o&&(i=d[0]&2?o.return:d[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,d[1])).done)return i;switch(o=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(t,r)}catch(u){d=[6,u],o=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Sw(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Ep(e,t,r)}function vp(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function P_(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i}function Tw(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(P_(arguments[e]));return t}function bw(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),o=0,e=0;e<r;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n}function Aw(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function Vs(t){return this instanceof Vs?(this.v=t,this):new Vs(t)}function Iw(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(h){return function(y){return Promise.resolve(y).then(h,m)}}function a(h,y){n[h]&&(o[h]=function(E){return new Promise(function(A,w){i.push([h,E,A,w])>1||c(h,E)})},y&&(o[h]=y(o[h])))}function c(h,y){try{d(n[h](y))}catch(E){f(i[0][3],E)}}function d(h){h.value instanceof Vs?Promise.resolve(h.value.v).then(u,m):f(i[0][2],h)}function u(h){c("next",h)}function m(h){c("throw",h)}function f(h,y){h(y),i.shift(),i.length&&c(i[0][0],i[0][1])}}function Rw(t){var e,r;return e={},n("next"),n("throw",function(o){throw o}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(o,i){e[o]=t[o]?function(s){return(r=!r)?{value:Vs(t[o](s)),done:!1}:i?i(s):s}:i}}function ww(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof vp=="function"?vp(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(s){return new Promise(function(a,c){s=t[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(d){i({value:d,done:a})},s)}}function Pw(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Ow(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Ep(e,t,r);return TX(e,t),e}function xw(t){return t&&t.__esModule?t:{default:t}}function Nw(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function Dw(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r}function kw(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Mw(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,o;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(o=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");o&&(n=function(){try{o.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function Lw(t){function e(i){t.error=t.hasError?new bX(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var r,n=0;function o(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(o);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(o,function(s){return e(s),o()})}else n|=1}catch(s){e(s)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return o()}var w_,_p,Ep,TX,bX,AX,_e=v(()=>{w_=function(t,e){return w_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},w_(t,e)};_p=function(){return _p=Object.assign||function(e){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},_p.apply(this,arguments)};Ep=Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};TX=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};bX=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};AX={__extends:fw,__assign:_p,__rest:gw,__decorate:yw,__param:_w,__metadata:vw,__awaiter:Ew,__generator:Cw,__createBinding:Ep,__exportStar:Sw,__values:vp,__read:P_,__spread:Tw,__spreadArrays:bw,__spreadArray:Aw,__await:Vs,__asyncGenerator:Iw,__asyncDelegator:Rw,__asyncValues:ww,__makeTemplateObject:Pw,__importStar:Ow,__importDefault:xw,__classPrivateFieldGet:Nw,__classPrivateFieldSet:Dw,__classPrivateFieldIn:kw,__addDisposableResource:Mw,__disposeResources:Lw}});var vd=g(Cp=>{"use strict";Object.defineProperty(Cp,"__esModule",{value:!0});Cp.RequestMethod=void 0;var Uw;(function(t){t.GET="GET",t.PATCH="PATCH",t.POST="POST",t.PUT="PUT",t.DELETE="DELETE"})(Uw||(Cp.RequestMethod=Uw={}))});var Fw=g(Sp=>{"use strict";Object.defineProperty(Sp,"__esModule",{value:!0});Sp.BatchRequestContent=void 0;var Ks=(_e(),M(ye)),O_=vd(),IX=function(){function t(e){if(this.requests=new Map,typeof e<"u"){var r=t.requestLimit;if(e.length>r){var n=new Error("Maximum requests limit exceeded, Max allowed number of requests are ".concat(r));throw n.name="Limit Exceeded Error",n}for(var o=0,i=e;o<i.length;o++){var s=i[o];this.addRequest(s)}}}return t.validateDependencies=function(e){var r=function(s){for(var a=s.entries(),c=a.next();!c.done;){var d=c.value[1];if(d.dependsOn!==void 0&&d.dependsOn.length>0)return!1;c=a.next()}return!0},n=function(s){var a=s.entries(),c=a.next(),d=c.value[1];if(d.dependsOn!==void 0&&d.dependsOn.length>0)return!1;var u=c;for(c=a.next();!c.done;){var m=c.value[1];if(m.dependsOn===void 0||m.dependsOn.length!==1||m.dependsOn[0]!==u.value[1].id)return!1;u=c,c=a.next()}return!0},o=function(s){var a=s.entries(),c=a.next(),d=c.value[1],u;if(d.dependsOn===void 0||d.dependsOn.length===0)u=d.id;else if(d.dependsOn.length===1){var m=d.dependsOn[0];if(m!==d.id&&s.has(m))u=m;else return!1}else return!1;for(c=a.next();!c.done;){var f=c.value[1];if((f.dependsOn===void 0||f.dependsOn.length===0)&&u!==f.id||f.dependsOn!==void 0&&f.dependsOn.length!==0&&(f.dependsOn.length===1&&(f.id===u||f.dependsOn[0]!==u)||f.dependsOn.length>1))return!1;c=a.next()}return!0};if(e.size===0){var i=new Error("Empty requests map, Please provide at least one request.");throw i.name="Empty Requests Error",i}return r(e)||n(e)||o(e)},t.getRequestData=function(e){return Ks.__awaiter(this,void 0,void 0,function(){var r,n,o,i;return Ks.__generator(this,function(s){switch(s.label){case 0:return r={url:""},n=new RegExp("^https?://"),r.url=n.test(e.url)?"/"+e.url.split(/.*?\/\/.*?\//)[1]:e.url,r.method=e.method,o={},e.headers.forEach(function(a,c){o[c]=a}),Object.keys(o).length&&(r.headers=o),e.method===O_.RequestMethod.PATCH||e.method===O_.RequestMethod.POST||e.method===O_.RequestMethod.PUT?(i=r,[4,t.getRequestBody(e)]):[3,2];case 1:i.body=s.sent(),s.label=2;case 2:return[2,r]}})})},t.getRequestBody=function(e){return Ks.__awaiter(this,void 0,void 0,function(){var r,n,o,i,s,a,c,d;return Ks.__generator(this,function(u){switch(u.label){case 0:r=!1,u.label=1;case 1:return u.trys.push([1,3,,4]),o=e.clone(),[4,o.json()];case 2:return n=u.sent(),r=!0,[3,4];case 3:return i=u.sent(),[3,4];case 4:if(r)return[3,12];u.label=5;case 5:return u.trys.push([5,11,,12]),typeof Blob<"u"?[4,e.blob()]:[3,8];case 6:return s=u.sent(),a=new FileReader,[4,new Promise(function(m){a.addEventListener("load",function(){var f=a.result,h=new RegExp("^s*data:(.+?/.+?(;.+?=.+?)*)?(;base64)?,(.*)s*$"),y=h.exec(f);m(y[4])},!1),a.readAsDataURL(s)})];case 7:return n=u.sent(),[3,10];case 8:return typeof Buffer<"u"?[4,e.buffer()]:[3,10];case 9:c=u.sent(),n=c.toString("base64"),u.label=10;case 10:return r=!0,[3,12];case 11:return d=u.sent(),[3,12];case 12:return[2,n]}})})},t.prototype.addRequest=function(e){var r=t.requestLimit;if(e.id===""){var n=new Error("Id for a request is empty, Please provide an unique id");throw n.name="Empty Id For Request",n}if(this.requests.size===r){var n=new Error("Maximum requests limit exceeded, Max allowed number of requests are ".concat(r));throw n.name="Limit Exceeded Error",n}if(this.requests.has(e.id)){var n=new Error("Adding request with duplicate id ".concat(e.id,", Make the id of the requests unique"));throw n.name="Duplicate RequestId Error",n}return this.requests.set(e.id,e),e.id},t.prototype.removeRequest=function(e){for(var r=this.requests.delete(e),n=this.requests.entries(),o=n.next();!o.done;){var i=o.value[1].dependsOn;if(typeof i<"u"){var s=i.indexOf(e);s!==-1&&i.splice(s,1),i.length===0&&delete o.value[1].dependsOn}o=n.next()}return r},t.prototype.getContent=function(){return Ks.__awaiter(this,void 0,void 0,function(){var e,r,n,o,a,a,i,s,a;return Ks.__generator(this,function(c){switch(c.label){case 0:if(e=[],r={requests:e},n=this.requests.entries(),o=n.next(),o.done)throw a=new Error("No requests added yet, Please add at least one request."),a.name="Empty Payload",a;if(!t.validateDependencies(this.requests))throw a=new Error(`Invalid dependency found, Dependency should be:
1. Parallel - no individual request states a dependency in the dependsOn property.
2. Serial - all individual requests depend on the previous individual request.
3. Same - all individual requests that state a dependency in the dependsOn property, state the same dependency.`),a.name="Invalid Dependency",a;c.label=1;case 1:return o.done?[3,3]:(i=o.value[1],[4,t.getRequestData(i.request)]);case 2:if(s=c.sent(),s.body!==void 0&&(s.headers===void 0||s.headers["content-type"]===void 0))throw a=new Error("Content-type header is not mentioned for request #".concat(i.id,", For request having body, Content-type header should be mentioned")),a.name="Invalid Content-type header",a;return s.id=i.id,i.dependsOn!==void 0&&i.dependsOn.length>0&&(s.dependsOn=i.dependsOn),e.push(s),o=n.next(),[3,1];case 3:return r.requests=e,[2,r]}})})},t.prototype.addDependency=function(e,r){if(!this.requests.has(e)){var n=new Error("Dependent ".concat(e," does not exists, Please check the id"));throw n.name="Invalid Dependent",n}if(typeof r<"u"&&!this.requests.has(r)){var n=new Error("Dependency ".concat(r," does not exists, Please check the id"));throw n.name="Invalid Dependency",n}if(typeof r<"u"){var o=this.requests.get(e);if(o.dependsOn===void 0&&(o.dependsOn=[]),o.dependsOn.indexOf(r)!==-1){var n=new Error("Dependency ".concat(r," is already added for the request ").concat(e));throw n.name="Duplicate Dependency",n}o.dependsOn.push(r)}else{for(var i=this.requests.entries(),s=void 0,a=i.next();!a.done&&a.value[1].id!==e;)s=a,a=i.next();if(typeof s<"u"){var c=s.value[0];if(a.value[1].dependsOn===void 0&&(a.value[1].dependsOn=[]),a.value[1].dependsOn.indexOf(c)!==-1){var n=new Error("Dependency ".concat(c," is already added for the request ").concat(e));throw n.name="Duplicate Dependency",n}a.value[1].dependsOn.push(c)}else{var n=new Error("Can't add dependency ".concat(r,", There is only a dependent request in the batch"));throw n.name="Invalid Dependency Addition",n}}},t.prototype.removeDependency=function(e,r){var n=this.requests.get(e);if(typeof n>"u"||n.dependsOn===void 0||n.dependsOn.length===0)return!1;if(typeof r<"u"){var o=n.dependsOn.indexOf(r);return o===-1?!1:(n.dependsOn.splice(o,1),!0)}else return delete n.dependsOn,!0},t.requestLimit=20,t}();Sp.BatchRequestContent=IX});var Bw=g(Tp=>{"use strict";Object.defineProperty(Tp,"__esModule",{value:!0});Tp.BatchResponseContent=void 0;var RX=(_e(),M(ye)),wX=function(){function t(e){this.responses=new Map,this.update(e)}return t.prototype.createResponseObject=function(e){var r=e.body,n={};if(n.status=e.status,e.statusText!==void 0&&(n.statusText=e.statusText),n.headers=e.headers,n.headers!==void 0&&n.headers["Content-Type"]!==void 0&&n.headers["Content-Type"].split(";")[0]==="application/json"){var o=JSON.stringify(r);return new Response(o,n)}return new Response(r,n)},t.prototype.update=function(e){this.nextLink=e["@odata.nextLink"];for(var r=e.responses,n=0,o=r.length;n<o;n++)this.responses.set(r[n].id,this.createResponseObject(r[n]))},t.prototype.getResponseById=function(e){return this.responses.get(e)},t.prototype.getResponses=function(){return this.responses},t.prototype.getResponsesIterator=function(){var e,r;return RX.__generator(this,function(n){switch(n.label){case 0:e=this.responses.entries(),r=e.next(),n.label=1;case 1:return r.done?[3,3]:[4,r.value];case 2:return n.sent(),r=e.next(),[3,1];case 3:return[2]}})},t}();Tp.BatchResponseContent=wX});var x_=g(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});Co.GRAPH_URLS=Co.GRAPH_BASE_URL=Co.GRAPH_API_VERSION=void 0;Co.GRAPH_API_VERSION="v1.0";Co.GRAPH_BASE_URL="https://graph.microsoft.com/";Co.GRAPH_URLS=new Set(["graph.microsoft.com","graph.microsoft.us","dod-graph.microsoft.us","graph.microsoft.de","microsoftgraph.chinacloudapi.cn","canary.graph.microsoft.com"])});var On=g(bp=>{"use strict";Object.defineProperty(bp,"__esModule",{value:!0});bp.GraphClientError=void 0;var PX=(_e(),M(ye)),OX=function(t){PX.__extends(e,t);function e(r){var n=t.call(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return e.setGraphClientError=function(r){var n;return r instanceof Error?n=r:(n=new e,n.customError=r),n},e}(Error);bp.GraphClientError=OX});var Ap=g(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.isCustomHost=pr.isGraphURL=pr.serializeContent=pr.urlJoin=pr.oDataQueryNames=void 0;var xX=x_(),NX=On();pr.oDataQueryNames=["$select","$expand","$orderby","$filter","$top","$skip","$skipToken","$count"];var DX=function(t){var e=function(i){return i.replace(/\/+$/,"")},r=function(i){return i.replace(/^\/+/,"")},n=function(i,s){return[e(i),r(s)].join("/")},o=Array.prototype.slice.call(t);return o.reduce(n)};pr.urlJoin=DX;var kX=function(t){var e=t&&t.constructor&&t.constructor.name;if(e==="Buffer"||e==="Blob"||e==="File"||e==="FormData"||typeof t=="string")return t;if(e==="ArrayBuffer")t=Buffer.from(t);else if(e==="Int8Array"||e==="Int16Array"||e==="Int32Array"||e==="Uint8Array"||e==="Uint16Array"||e==="Uint32Array"||e==="Uint8ClampedArray"||e==="Float32Array"||e==="Float64Array"||e==="DataView")t=Buffer.from(t.buffer);else try{t=JSON.stringify(t)}catch{throw new Error("Unable to stringify the content")}return t};pr.serializeContent=kX;var MX=function(t){return qw(t)};pr.isGraphURL=MX;var LX=function(t,e){return e.forEach(function(r){return UX(r)}),qw(t,e)};pr.isCustomHost=LX;var qw=function(t,e){if(e===void 0&&(e=xX.GRAPH_URLS),t=t.toLowerCase(),t.indexOf("https://")!==-1){t=t.replace("https://","");var r=t.indexOf(":"),n=t.indexOf("/"),o="";if(n!==-1)return r!==-1&&r<n?(o=t.substring(0,r),e.has(o)):(o=t.substring(0,n),e.has(o))}return!1},UX=function(t){if(t.indexOf("/")!==-1)throw new NX.GraphClientError("Please add only hosts or hostnames to the CustomHosts config. If the url is `http://example.com:3000/`, host is `example:3000`")}});var So=g(Ip=>{"use strict";Object.defineProperty(Ip,"__esModule",{value:!0});Ip.MiddlewareControl=void 0;var FX=function(){function t(e){e===void 0&&(e=[]),this.middlewareOptions=new Map;for(var r=0,n=e;r<n.length;r++){var o=n[r],i=o.constructor;this.middlewareOptions.set(i,o)}}return t.prototype.getMiddlewareOptions=function(e){return this.middlewareOptions.get(e)},t.prototype.setMiddlewareOptions=function(e,r){this.middlewareOptions.set(e,r)},t}();Ip.MiddlewareControl=FX});var Ws=g(mr=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});mr.cloneRequestWithNewUrl=mr.appendRequestHeader=mr.setRequestHeader=mr.getRequestHeader=mr.generateUUID=void 0;var Hw=(_e(),M(ye)),BX=function(){for(var t="",e=0;e<32;e++)(e===8||e===12||e===16||e===20)&&(t+="-"),t+=Math.floor(Math.random()*16).toString(16);return t};mr.generateUUID=BX;var qX=function(t,e,r){var n=null;if(typeof Request<"u"&&t instanceof Request)n=t.headers.get(r);else if(typeof e<"u"&&e.headers!==void 0)if(typeof Headers<"u"&&e.headers instanceof Headers)n=e.headers.get(r);else if(e.headers instanceof Array){for(var o=e.headers,i=0,s=o.length;i<s;i++)if(o[i][0]===r){n=o[i][1];break}}else e.headers[r]!==void 0&&(n=e.headers[r]);return n};mr.getRequestHeader=qX;var HX=function(t,e,r,n){var o,i;if(typeof Request<"u"&&t instanceof Request)t.headers.set(r,n);else if(typeof e<"u")if(e.headers===void 0)e.headers=new Headers((o={},o[r]=n,o));else if(typeof Headers<"u"&&e.headers instanceof Headers)e.headers.set(r,n);else if(e.headers instanceof Array){for(var s=0,a=e.headers.length;s<a;s++){var c=e.headers[s];if(c[0]===r){c[1]=n;break}}s===a&&e.headers.push([r,n])}else Object.assign(e.headers,(i={},i[r]=n,i))};mr.setRequestHeader=HX;var jX=function(t,e,r,n){var o,i;typeof Request<"u"&&t instanceof Request?t.headers.append(r,n):typeof e<"u"&&(e.headers===void 0?e.headers=new Headers((o={},o[r]=n,o)):typeof Headers<"u"&&e.headers instanceof Headers?e.headers.append(r,n):e.headers instanceof Array?e.headers.push([r,n]):e.headers===void 0?e.headers=(i={},i[r]=n,i):e.headers[r]===void 0?e.headers[r]=n:e.headers[r]+=", ".concat(n))};mr.appendRequestHeader=jX;var GX=function(t,e){return Hw.__awaiter(void 0,void 0,void 0,function(){var r,n,o,i,s,a,c,d,u,m,f,h,y;return Hw.__generator(this,function(E){switch(E.label){case 0:return e.headers.get("Content-Type")?[4,e.blob()]:[3,2];case 1:return n=E.sent(),[3,4];case 2:return[4,Promise.resolve(void 0)];case 3:n=E.sent(),E.label=4;case 4:return r=n,o=e.method,i=e.headers,s=e.referrer,a=e.referrerPolicy,c=e.mode,d=e.credentials,u=e.cache,m=e.redirect,f=e.integrity,h=e.keepalive,y=e.signal,[2,new Request(t,{method:o,headers:i,body:r,referrer:s,referrerPolicy:a,mode:c,credentials:d,cache:u,redirect:m,integrity:f,keepalive:h,signal:y})]}})})};mr.cloneRequestWithNewUrl=GX});var N_=g(Rp=>{"use strict";Object.defineProperty(Rp,"__esModule",{value:!0});Rp.AuthenticationHandlerOptions=void 0;var $X=function(){function t(e,r){this.authenticationProvider=e,this.authenticationProviderOptions=r}return t}();Rp.AuthenticationHandlerOptions=$X});var Ys=g(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});Qs.TelemetryHandlerOptions=Qs.FeatureUsageFlag=void 0;var jw=So(),D_;(function(t){t[t.NONE=0]="NONE",t[t.REDIRECT_HANDLER_ENABLED=1]="REDIRECT_HANDLER_ENABLED",t[t.RETRY_HANDLER_ENABLED=2]="RETRY_HANDLER_ENABLED",t[t.AUTHENTICATION_HANDLER_ENABLED=4]="AUTHENTICATION_HANDLER_ENABLED"})(D_||(Qs.FeatureUsageFlag=D_={}));var zX=function(){function t(){this.featureUsage=D_.NONE}return t.updateFeatureUsageFlag=function(e,r){var n;e.middlewareControl instanceof jw.MiddlewareControl?n=e.middlewareControl.getMiddlewareOptions(t):e.middlewareControl=new jw.MiddlewareControl,typeof n>"u"&&(n=new t,e.middlewareControl.setMiddlewareOptions(t,n)),n.setFeatureUsage(r)},t.prototype.setFeatureUsage=function(e){this.featureUsage=this.featureUsage|e},t.prototype.getFeatureUsage=function(){return this.featureUsage.toString(16)},t}();Qs.TelemetryHandlerOptions=zX});var Pp=g(wp=>{"use strict";Object.defineProperty(wp,"__esModule",{value:!0});wp.AuthenticationHandler=void 0;var Gw=(_e(),M(ye)),$w=Ap(),VX=So(),KX=Ws(),WX=N_(),zw=Ys(),QX=function(){function t(e){this.authenticationProvider=e}return t.prototype.execute=function(e){return Gw.__awaiter(this,void 0,void 0,function(){var r,n,o,i,s,a;return Gw.__generator(this,function(c){switch(c.label){case 0:return r=typeof e.request=="string"?e.request:e.request.url,(0,$w.isGraphURL)(r)||e.customHosts&&(0,$w.isCustomHost)(r,e.customHosts)?(n=void 0,e.middlewareControl instanceof VX.MiddlewareControl&&(n=e.middlewareControl.getMiddlewareOptions(WX.AuthenticationHandlerOptions)),o=void 0,i=void 0,n&&(o=n.authenticationProvider,i=n.authenticationProviderOptions),o||(o=this.authenticationProvider),[4,o.getAccessToken(i)]):[3,2];case 1:return s=c.sent(),a="Bearer ".concat(s),(0,KX.appendRequestHeader)(e.request,e.options,t.AUTHORIZATION_HEADER,a),zw.TelemetryHandlerOptions.updateFeatureUsageFlag(e,zw.FeatureUsageFlag.AUTHENTICATION_HANDLER_ENABLED),[3,3];case 2:e.options.headers&&delete e.options.headers[t.AUTHORIZATION_HEADER],c.label=3;case 3:return[4,this.nextMiddleware.execute(e)];case 4:return[2,c.sent()]}})})},t.prototype.setNext=function(e){this.nextMiddleware=e},t.AUTHORIZATION_HEADER="Authorization",t}();wp.AuthenticationHandler=QX});var xp=g(Op=>{"use strict";Object.defineProperty(Op,"__esModule",{value:!0});Op.HTTPMessageHandler=void 0;var Vw=(_e(),M(ye)),YX=function(){function t(){}return t.prototype.execute=function(e){return Vw.__awaiter(this,void 0,void 0,function(){var r;return Vw.__generator(this,function(n){switch(n.label){case 0:return r=e,[4,fetch(e.request,e.options)];case 1:return r.response=n.sent(),[2]}})})},t}();Op.HTTPMessageHandler=YX});var Ed=g(Np=>{"use strict";Object.defineProperty(Np,"__esModule",{value:!0});Np.RetryHandlerOptions=void 0;var JX=function(){function t(e,r,n){if(e===void 0&&(e=t.DEFAULT_DELAY),r===void 0&&(r=t.DEFAULT_MAX_RETRIES),n===void 0&&(n=t.defaultShouldRetry),e>t.MAX_DELAY&&r>t.MAX_MAX_RETRIES){var o=new Error("Delay and MaxRetries should not be more than ".concat(t.MAX_DELAY," and ").concat(t.MAX_MAX_RETRIES));throw o.name="MaxLimitExceeded",o}else if(e>t.MAX_DELAY){var o=new Error("Delay should not be more than ".concat(t.MAX_DELAY));throw o.name="MaxLimitExceeded",o}else if(r>t.MAX_MAX_RETRIES){var o=new Error("MaxRetries should not be more than ".concat(t.MAX_MAX_RETRIES));throw o.name="MaxLimitExceeded",o}else if(e<0&&r<0){var o=new Error("Delay and MaxRetries should not be negative");throw o.name="MinExpectationNotMet",o}else if(e<0){var o=new Error("Delay should not be negative");throw o.name="MinExpectationNotMet",o}else if(r<0){var o=new Error("MaxRetries should not be negative");throw o.name="MinExpectationNotMet",o}this.delay=Math.min(e,t.MAX_DELAY),this.maxRetries=Math.min(r,t.MAX_MAX_RETRIES),this.shouldRetry=n}return t.prototype.getMaxDelay=function(){return t.MAX_DELAY},t.DEFAULT_DELAY=3,t.DEFAULT_MAX_RETRIES=3,t.MAX_DELAY=180,t.MAX_MAX_RETRIES=10,t.defaultShouldRetry=function(){return!0},t}();Np.RetryHandlerOptions=JX});var kp=g(Dp=>{"use strict";Object.defineProperty(Dp,"__esModule",{value:!0});Dp.RetryHandler=void 0;var Js=(_e(),M(ye)),k_=vd(),XX=So(),Kw=Ws(),Ww=Ed(),Qw=Ys(),ZX=function(){function t(e){e===void 0&&(e=new Ww.RetryHandlerOptions),this.options=e}return t.prototype.isRetry=function(e){return t.RETRY_STATUS_CODES.indexOf(e.status)!==-1},t.prototype.isBuffered=function(e,r){var n=typeof e=="string"?r.method:e.method,o=n===k_.RequestMethod.PUT||n===k_.RequestMethod.PATCH||n===k_.RequestMethod.POST;if(o){var i=(0,Kw.getRequestHeader)(e,r,"Content-Type")==="application/octet-stream";if(i)return!1}return!0},t.prototype.getDelay=function(e,r,n){var o=function(){return Number(Math.random().toFixed(3))},i=e.headers!==void 0?e.headers.get(t.RETRY_AFTER_HEADER):null,s;return i!==null?Number.isNaN(Number(i))?s=Math.round((new Date(i).getTime()-Date.now())/1e3):s=Number(i):s=r>=2?this.getExponentialBackOffTime(r)+n+o():n+o(),Math.min(s,this.options.getMaxDelay()+o())},t.prototype.getExponentialBackOffTime=function(e){return Math.round(1/2*(Math.pow(2,e)-1))},t.prototype.sleep=function(e){return Js.__awaiter(this,void 0,void 0,function(){var r;return Js.__generator(this,function(n){return r=e*1e3,[2,new Promise(function(o){return setTimeout(o,r)})]})})},t.prototype.getOptions=function(e){var r;return e.middlewareControl instanceof XX.MiddlewareControl&&(r=e.middlewareControl.getMiddlewareOptions(this.options.constructor)),typeof r>"u"&&(r=Object.assign(new Ww.RetryHandlerOptions,this.options)),r},t.prototype.executeWithRetry=function(e,r,n){return Js.__awaiter(this,void 0,void 0,function(){var o;return Js.__generator(this,function(i){switch(i.label){case 0:return[4,this.nextMiddleware.execute(e)];case 1:return i.sent(),r<n.maxRetries&&this.isRetry(e.response)&&this.isBuffered(e.request,e.options)&&n.shouldRetry(n.delay,r,e.request,e.options,e.response)?(++r,(0,Kw.setRequestHeader)(e.request,e.options,t.RETRY_ATTEMPT_HEADER,r.toString()),o=this.getDelay(e.response,r,n.delay),[4,this.sleep(o)]):[3,4];case 2:return i.sent(),[4,this.executeWithRetry(e,r,n)];case 3:return[2,i.sent()];case 4:return[2]}})})},t.prototype.execute=function(e){return Js.__awaiter(this,void 0,void 0,function(){var r,n;return Js.__generator(this,function(o){switch(o.label){case 0:return r=0,n=this.getOptions(e),Qw.TelemetryHandlerOptions.updateFeatureUsageFlag(e,Qw.FeatureUsageFlag.RETRY_HANDLER_ENABLED),[4,this.executeWithRetry(e,r,n)];case 1:return[2,o.sent()]}})})},t.prototype.setNext=function(e){this.nextMiddleware=e},t.RETRY_STATUS_CODES=[429,503,504],t.RETRY_ATTEMPT_HEADER="Retry-Attempt",t.RETRY_AFTER_HEADER="Retry-After",t}();Dp.RetryHandler=ZX});var Cd=g(Mp=>{"use strict";Object.defineProperty(Mp,"__esModule",{value:!0});Mp.RedirectHandlerOptions=void 0;var e9=function(){function t(e,r){if(e===void 0&&(e=t.DEFAULT_MAX_REDIRECTS),r===void 0&&(r=t.defaultShouldRedirect),e>t.MAX_MAX_REDIRECTS){var n=new Error("MaxRedirects should not be more than ".concat(t.MAX_MAX_REDIRECTS));throw n.name="MaxLimitExceeded",n}if(e<0){var n=new Error("MaxRedirects should not be negative");throw n.name="MinExpectationNotMet",n}this.maxRedirects=e,this.shouldRedirect=r}return t.DEFAULT_MAX_REDIRECTS=5,t.MAX_MAX_REDIRECTS=20,t.defaultShouldRedirect=function(){return!0},t}();Mp.RedirectHandlerOptions=e9});var Up=g(Lp=>{"use strict";Object.defineProperty(Lp,"__esModule",{value:!0});Lp.RedirectHandler=void 0;var Xs=(_e(),M(ye)),t9=vd(),r9=So(),n9=Ws(),M_=Cd(),Yw=Ys(),o9=function(){function t(e){e===void 0&&(e=new M_.RedirectHandlerOptions),this.options=e}return t.prototype.isRedirect=function(e){return t.REDIRECT_STATUS_CODES.indexOf(e.status)!==-1},t.prototype.hasLocationHeader=function(e){return e.headers.has(t.LOCATION_HEADER)},t.prototype.getLocationHeader=function(e){return e.headers.get(t.LOCATION_HEADER)},t.prototype.isRelativeURL=function(e){return e.indexOf("://")===-1},t.prototype.shouldDropAuthorizationHeader=function(e,r){var n=/^[A-Za-z].+?:\/\/.+?(?=\/|$)/,o=n.exec(e),i,s;o!==null&&(i=o[0]);var a=n.exec(r);return a!==null&&(s=a[0]),typeof i<"u"&&typeof s<"u"&&i!==s},t.prototype.updateRequestUrl=function(e,r){return Xs.__awaiter(this,void 0,void 0,function(){var n,o;return Xs.__generator(this,function(i){switch(i.label){case 0:return n=r,typeof r.request!="string"?[3,1]:(o=e,[3,3]);case 1:return[4,(0,n9.cloneRequestWithNewUrl)(e,r.request)];case 2:o=i.sent(),i.label=3;case 3:return n.request=o,[2]}})})},t.prototype.getOptions=function(e){var r;return e.middlewareControl instanceof r9.MiddlewareControl&&(r=e.middlewareControl.getMiddlewareOptions(M_.RedirectHandlerOptions)),typeof r>"u"&&(r=Object.assign(new M_.RedirectHandlerOptions,this.options)),r},t.prototype.executeWithRedirect=function(e,r,n){return Xs.__awaiter(this,void 0,void 0,function(){var o,i;return Xs.__generator(this,function(s){switch(s.label){case 0:return[4,this.nextMiddleware.execute(e)];case 1:return s.sent(),o=e.response,r<n.maxRedirects&&this.isRedirect(o)&&this.hasLocationHeader(o)&&n.shouldRedirect(o)?(++r,o.status!==t.STATUS_CODE_SEE_OTHER?[3,2]:(e.options.method=t9.RequestMethod.GET,delete e.options.body,[3,4])):[3,6];case 2:return i=this.getLocationHeader(o),!this.isRelativeURL(i)&&this.shouldDropAuthorizationHeader(o.url,i)&&delete e.options.headers[t.AUTHORIZATION_HEADER],[4,this.updateRequestUrl(i,e)];case 3:s.sent(),s.label=4;case 4:return[4,this.executeWithRedirect(e,r,n)];case 5:return s.sent(),[3,7];case 6:return[2];case 7:return[2]}})})},t.prototype.execute=function(e){return Xs.__awaiter(this,void 0,void 0,function(){var r,n;return Xs.__generator(this,function(o){switch(o.label){case 0:return r=0,n=this.getOptions(e),e.options.redirect=t.MANUAL_REDIRECT,Yw.TelemetryHandlerOptions.updateFeatureUsageFlag(e,Yw.FeatureUsageFlag.REDIRECT_HANDLER_ENABLED),[4,this.executeWithRedirect(e,r,n)];case 1:return[2,o.sent()]}})})},t.prototype.setNext=function(e){this.nextMiddleware=e},t.REDIRECT_STATUS_CODES=[301,302,303,307,308],t.STATUS_CODE_SEE_OTHER=303,t.LOCATION_HEADER="Location",t.AUTHORIZATION_HEADER="Authorization",t.MANUAL_REDIRECT="manual",t}();Lp.RedirectHandler=o9});var Jw=g(Fp=>{"use strict";Object.defineProperty(Fp,"__esModule",{value:!0});Fp.PACKAGE_VERSION=void 0;Fp.PACKAGE_VERSION="3.0.7"});var Hp=g(qp=>{"use strict";Object.defineProperty(qp,"__esModule",{value:!0});qp.TelemetryHandler=void 0;var Xw=(_e(),M(ye)),Zw=Ap(),i9=Jw(),s9=So(),Bp=Ws(),a9=Ys(),c9=function(){function t(){}return t.prototype.execute=function(e){return Xw.__awaiter(this,void 0,void 0,function(){var r,n,o,i,s;return Xw.__generator(this,function(a){switch(a.label){case 0:return r=typeof e.request=="string"?e.request:e.request.url,(0,Zw.isGraphURL)(r)||e.customHosts&&(0,Zw.isCustomHost)(r,e.customHosts)?(n=(0,Bp.getRequestHeader)(e.request,e.options,t.CLIENT_REQUEST_ID_HEADER),n||(n=(0,Bp.generateUUID)(),(0,Bp.setRequestHeader)(e.request,e.options,t.CLIENT_REQUEST_ID_HEADER,n)),o="".concat(t.PRODUCT_NAME,"/").concat(i9.PACKAGE_VERSION),i=void 0,e.middlewareControl instanceof s9.MiddlewareControl&&(i=e.middlewareControl.getMiddlewareOptions(a9.TelemetryHandlerOptions)),i&&(s=i.getFeatureUsage(),o+=" (".concat(t.FEATURE_USAGE_STRING,"=").concat(s,")")),(0,Bp.appendRequestHeader)(e.request,e.options,t.SDK_VERSION_HEADER,o)):(delete e.options.headers[t.CLIENT_REQUEST_ID_HEADER],delete e.options.headers[t.SDK_VERSION_HEADER]),[4,this.nextMiddleware.execute(e)];case 1:return[2,a.sent()]}})})},t.prototype.setNext=function(e){this.nextMiddleware=e},t.CLIENT_REQUEST_ID_HEADER="client-request-id",t.SDK_VERSION_HEADER="SdkVersion",t.PRODUCT_NAME="graph-js",t.FEATURE_USAGE_STRING="featureUsage",t}();qp.TelemetryHandler=c9});var e0=g(jp=>{"use strict";Object.defineProperty(jp,"__esModule",{value:!0});jp.MiddlewareFactory=void 0;var d9=Pp(),l9=xp(),u9=Cd(),p9=Ed(),m9=Up(),h9=kp(),f9=Hp(),g9=function(){return typeof process=="object"&&typeof require=="function"},y9=function(){function t(){}return t.getDefaultMiddlewareChain=function(e){var r=[],n=new d9.AuthenticationHandler(e),o=new h9.RetryHandler(new p9.RetryHandlerOptions),i=new f9.TelemetryHandler,s=new l9.HTTPMessageHandler;if(r.push(n),r.push(o),g9()){var a=new m9.RedirectHandler(new u9.RedirectHandlerOptions);r.push(a)}return r.push(i),r.push(s),r},t}();jp.MiddlewareFactory=y9});var $p=g(Gp=>{"use strict";Object.defineProperty(Gp,"__esModule",{value:!0});Gp.ChaosStrategy=void 0;var t0;(function(t){t[t.MANUAL=0]="MANUAL",t[t.RANDOM=1]="RANDOM"})(t0||(Gp.ChaosStrategy=t0={}))});var L_=g(zp=>{"use strict";Object.defineProperty(zp,"__esModule",{value:!0});zp.ChaosHandlerOptions=void 0;var _9=$p(),v9=function(){function t(e,r,n,o,i,s){if(e===void 0&&(e=_9.ChaosStrategy.RANDOM),r===void 0&&(r="Some error Happened"),this.chaosStrategy=e,this.statusCode=n,this.statusMessage=r,this.chaosPercentage=o!==void 0?o:10,this.responseBody=i,this.headers=s,this.chaosPercentage>100)throw new Error("Error Pecentage can not be more than 100")}return t}();zp.ChaosHandlerOptions=v9});var r0=g(Zs=>{"use strict";Object.defineProperty(Zs,"__esModule",{value:!0});Zs.httpStatusCode=Zs.methodStatusCode=void 0;Zs.methodStatusCode={GET:[429,500,502,503,504],POST:[429,500,502,503,504,507],PUT:[429,500,502,503,504,507],PATCH:[429,500,502,503,504],DELETE:[429,500,502,503,504,507]};Zs.httpStatusCode={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"}});var i0=g(Kp=>{"use strict";Object.defineProperty(Kp,"__esModule",{value:!0});Kp.ChaosHandler=void 0;var Vp=(_e(),M(ye)),E9=So(),C9=Ws(),n0=r0(),U_=L_(),o0=$p(),S9=function(){function t(e,r){e===void 0&&(e=new U_.ChaosHandlerOptions),this.options=e,this.manualMap=r}return t.prototype.createResponseHeaders=function(e,r,n){var o=e.headers?new Headers(e.headers):new Headers;return o.append("Cache-Control","no-store"),o.append("request-id",r),o.append("client-request-id",r),o.append("x-ms-ags-diagnostic",""),o.append("Date",n),o.append("Strict-Transport-Security",""),e.statusCode===429&&o.append("retry-after","3"),o},t.prototype.createResponseBody=function(e,r,n){if(e.responseBody)return e.responseBody;var o;if(e.statusCode>=400){var i=n0.httpStatusCode[e.statusCode],s=e.statusMessage;o={error:{code:i,message:s,innerError:{"request-id":r,date:n}}}}else o={};return o},t.prototype.createResponse=function(e,r){var n=r.request,o=(0,C9.generateUUID)(),i=new Date,s=this.createResponseHeaders(e,o,i.toString()),a=this.createResponseBody(e,o,i.toString()),c={url:n,status:e.statusCode,statusText:e.statusMessage,headers:s};r.response=new Response(typeof a=="string"?a:JSON.stringify(a),c)},t.prototype.sendRequest=function(e,r){return Vp.__awaiter(this,void 0,void 0,function(){return Vp.__generator(this,function(n){switch(n.label){case 0:return this.setStatusCode(e,r.request,r.options.method),e.chaosStrategy===o0.ChaosStrategy.MANUAL&&!this.nextMiddleware||Math.floor(Math.random()*100)<e.chaosPercentage?(this.createResponse(e,r),[3,3]):[3,1];case 1:return this.nextMiddleware?[4,this.nextMiddleware.execute(r)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.getRandomStatusCode=function(e){var r=n0.methodStatusCode[e];return r[Math.floor(Math.random()*r.length)]},t.prototype.getRelativeURL=function(e){var r=/https?:\/\/graph\.microsoft\.com\/[^/]+(.+?)(\?|$)/,n;return r.exec(e)!==null&&(n=r.exec(e)[1]),n},t.prototype.setStatusCode=function(e,r,n){var o=this;if(e.chaosStrategy===o0.ChaosStrategy.MANUAL){if(e.statusCode===void 0){var i=this.getRelativeURL(r);this.manualMap.get(i)!==void 0?this.manualMap.get(i).get(n)!==void 0&&(e.statusCode=this.manualMap.get(i).get(n)):this.manualMap.forEach(function(s,a){var c=new RegExp(a+"$");c.test(i)&&o.manualMap.get(a).get(n)!==void 0&&(e.statusCode=o.manualMap.get(a).get(n))})}}else e.statusCode=this.getRandomStatusCode(n)},t.prototype.getOptions=function(e){var r;return e.middlewareControl instanceof E9.MiddlewareControl&&(r=e.middlewareControl.getMiddlewareOptions(U_.ChaosHandlerOptions)),typeof r>"u"&&(r=Object.assign(new U_.ChaosHandlerOptions,this.options)),r},t.prototype.execute=function(e){return Vp.__awaiter(this,void 0,void 0,function(){var r;return Vp.__generator(this,function(n){switch(n.label){case 0:return r=this.getOptions(e),[4,this.sendRequest(r,e)];case 1:return[2,n.sent()]}})})},t.prototype.setNext=function(e){this.nextMiddleware=e},t}();Kp.ChaosHandler=S9});var Sd=g(Wp=>{"use strict";Object.defineProperty(Wp,"__esModule",{value:!0});Wp.ResponseType=void 0;var s0;(function(t){t.ARRAYBUFFER="arraybuffer",t.BLOB="blob",t.DOCUMENT="document",t.JSON="json",t.RAW="raw",t.STREAM="stream",t.TEXT="text"})(s0||(Wp.ResponseType=s0={}))});var B_=g(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});ea.GraphResponseHandler=ea.DocumentType=void 0;var Qp=(_e(),M(ye)),$i=Sd(),F_;(function(t){t.TEXT_HTML="text/html",t.TEXT_XML="text/xml",t.APPLICATION_XML="application/xml",t.APPLICATION_XHTML="application/xhtml+xml"})(F_||(ea.DocumentType=F_={}));var Yp;(function(t){t.TEXT_PLAIN="text/plain",t.APPLICATION_JSON="application/json"})(Yp||(Yp={}));var Jp;(function(t){t.DOCUMENT="^(text\\/(html|xml))|(application\\/(xml|xhtml\\+xml))$",t.IMAGE="^image\\/.+"})(Jp||(Jp={}));var T9=function(){function t(){}return t.parseDocumentResponse=function(e,r){return typeof DOMParser<"u"?new Promise(function(n,o){e.text().then(function(i){try{var s=new DOMParser,a=s.parseFromString(i,r);n(a)}catch(c){o(c)}})}):Promise.resolve(e.body)},t.convertResponse=function(e,r){return Qp.__awaiter(this,void 0,void 0,function(){var n,o,i,s;return Qp.__generator(this,function(a){switch(a.label){case 0:if(e.status===204)return[2,Promise.resolve()];switch(o=e.headers.get("Content-type"),i=r,i){case $i.ResponseType.ARRAYBUFFER:return[3,1];case $i.ResponseType.BLOB:return[3,3];case $i.ResponseType.DOCUMENT:return[3,5];case $i.ResponseType.JSON:return[3,7];case $i.ResponseType.STREAM:return[3,9];case $i.ResponseType.TEXT:return[3,11]}return[3,13];case 1:return[4,e.arrayBuffer()];case 2:return n=a.sent(),[3,24];case 3:return[4,e.blob()];case 4:return n=a.sent(),[3,24];case 5:return[4,t.parseDocumentResponse(e,F_.TEXT_XML)];case 6:return n=a.sent(),[3,24];case 7:return[4,e.json()];case 8:return n=a.sent(),[3,24];case 9:return[4,Promise.resolve(e.body)];case 10:return n=a.sent(),[3,24];case 11:return[4,e.text()];case 12:return n=a.sent(),[3,24];case 13:return o===null?[3,22]:(s=o.split(";")[0],new RegExp(Jp.DOCUMENT).test(s)?[4,t.parseDocumentResponse(e,s)]:[3,15]);case 14:return n=a.sent(),[3,21];case 15:return new RegExp(Jp.IMAGE).test(s)?(n=e.blob(),[3,21]):[3,16];case 16:return s!==Yp.TEXT_PLAIN?[3,18]:[4,e.text()];case 17:return n=a.sent(),[3,21];case 18:return s!==Yp.APPLICATION_JSON?[3,20]:[4,e.json()];case 19:return n=a.sent(),[3,21];case 20:n=Promise.resolve(e.body),a.label=21;case 21:return[3,23];case 22:n=Promise.resolve(e.body),a.label=23;case 23:return[3,24];case 24:return[2,n]}})})},t.getResponse=function(e,r,n){return Qp.__awaiter(this,void 0,void 0,function(){var o;return Qp.__generator(this,function(i){switch(i.label){case 0:return r!==$i.ResponseType.RAW?[3,1]:[2,Promise.resolve(e)];case 1:return[4,t.convertResponse(e,r)];case 2:if(o=i.sent(),e.ok)if(typeof n=="function")n(null,o);else return[2,o];else throw o;i.label=3;case 3:return[2]}})})},t}();ea.GraphResponseHandler=T9});var q_=g(Xp=>{"use strict";Object.defineProperty(Xp,"__esModule",{value:!0});Xp.Range=void 0;var b9=function(){function t(e,r){e===void 0&&(e=-1),r===void 0&&(r=-1),this.minValue=e,this.maxValue=r}return t}();Xp.Range=b9});var H_=g(Zp=>{"use strict";Object.defineProperty(Zp,"__esModule",{value:!0});Zp.UploadResult=void 0;var A9=function(){function t(e,r){this._location=r,this._responseBody=e}return Object.defineProperty(t.prototype,"location",{get:function(){return this._location},set:function(e){this._location=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"responseBody",{get:function(){return this._responseBody},set:function(e){this._responseBody=e},enumerable:!1,configurable:!0}),t.CreateUploadResult=function(e,r){return new t(e,r.get("location"))},t}();Zp.UploadResult=A9});var G_=g(tm=>{"use strict";Object.defineProperty(tm,"__esModule",{value:!0});tm.LargeFileUploadTask=void 0;var Kt=(_e(),M(ye)),j_=On(),I9=B_(),a0=Sd(),em=q_(),R9=H_(),w9=function(){function t(e,r,n,o){if(o===void 0&&(o={}),this.DEFAULT_FILE_SIZE=5*1024*1024,this.client=e,r.sliceFile)this.file=r;else throw new j_.GraphClientError("Please pass the FileUpload object, StreamUpload object or any custom implementation of the FileObject interface");this.file=r,o.rangeSize||(o.rangeSize=this.DEFAULT_FILE_SIZE),this.options=o,this.uploadSession=n,this.nextRange=new em.Range(0,this.options.rangeSize-1)}return t.createUploadSession=function(e,r,n,o){return o===void 0&&(o={}),Kt.__awaiter(this,void 0,void 0,function(){var i,s;return Kt.__generator(this,function(a){switch(a.label){case 0:return[4,e.api(r).headers(o).post(n)];case 1:return i=a.sent(),s={url:i.uploadUrl,expiry:new Date(i.expirationDateTime),isCancelled:!1},[2,s]}})})},t.prototype.parseRange=function(e){var r=e[0];if(typeof r>"u"||r==="")return new em.Range;var n=r.split("-"),o=parseInt(n[0],10),i=parseInt(n[1],10);return Number.isNaN(i)&&(i=this.file.size-1),new em.Range(o,i)},t.prototype.updateTaskStatus=function(e){this.uploadSession.expiry=new Date(e.expirationDateTime),this.nextRange=this.parseRange(e.nextExpectedRanges)},t.prototype.getNextRange=function(){if(this.nextRange.minValue===-1)return this.nextRange;var e=this.nextRange.minValue,r=e+this.options.rangeSize-1;return r>=this.file.size&&(r=this.file.size-1),new em.Range(e,r)},t.prototype.sliceFile=function(e){if(console.warn("The LargeFileUploadTask.sliceFile() function has been deprecated and moved into the FileObject interface."),this.file.content instanceof ArrayBuffer||this.file.content instanceof Blob||this.file.content instanceof Uint8Array)return this.file.content.slice(e.minValue,e.maxValue+1);throw new j_.GraphClientError("The LargeFileUploadTask.sliceFile() function expects only Blob, ArrayBuffer or Uint8Array file content. Please note that the sliceFile() function is deprecated.")},t.prototype.upload=function(){return Kt.__awaiter(this,void 0,void 0,function(){var e,r,n,o,i,s,a;return Kt.__generator(this,function(c){switch(c.label){case 0:e=this.options&&this.options.uploadEventHandlers,c.label=1;case 1:if(this.uploadSession.isCancelled)return[3,5];if(r=this.getNextRange(),r.maxValue===-1)throw n=new Error("Task with which you are trying to upload is already completed, Please check for your uploaded file"),n.name="Invalid Session",n;return[4,this.file.sliceFile(r)];case 2:return o=c.sent(),[4,this.uploadSliceGetRawResponse(o,r,this.file.size)];case 3:if(i=c.sent(),!i)throw new j_.GraphClientError("Something went wrong! Large file upload slice response is null.");return[4,I9.GraphResponseHandler.getResponse(i)];case 4:return s=c.sent(),i.status===201||i.status===200&&s.id?(this.reportProgress(e,r),[2,R9.UploadResult.CreateUploadResult(s,i.headers)]):(a={expirationDateTime:s.expirationDateTime||s.ExpirationDateTime,nextExpectedRanges:s.NextExpectedRanges||s.nextExpectedRanges},this.updateTaskStatus(a),this.reportProgress(e,r),[3,1]);case 5:return[2]}})})},t.prototype.reportProgress=function(e,r){e&&e.progress&&e.progress(r,e.extraCallbackParam)},t.prototype.uploadSlice=function(e,r,n){return Kt.__awaiter(this,void 0,void 0,function(){return Kt.__generator(this,function(o){switch(o.label){case 0:return[4,this.client.api(this.uploadSession.url).headers({"Content-Length":"".concat(r.maxValue-r.minValue+1),"Content-Range":"bytes ".concat(r.minValue,"-").concat(r.maxValue,"/").concat(n),"Content-Type":"application/octet-stream"}).put(e)];case 1:return[2,o.sent()]}})})},t.prototype.uploadSliceGetRawResponse=function(e,r,n){return Kt.__awaiter(this,void 0,void 0,function(){return Kt.__generator(this,function(o){switch(o.label){case 0:return[4,this.client.api(this.uploadSession.url).headers({"Content-Length":"".concat(r.maxValue-r.minValue+1),"Content-Range":"bytes ".concat(r.minValue,"-").concat(r.maxValue,"/").concat(n),"Content-Type":"application/octet-stream"}).responseType(a0.ResponseType.RAW).put(e)];case 1:return[2,o.sent()]}})})},t.prototype.cancel=function(){return Kt.__awaiter(this,void 0,void 0,function(){var e;return Kt.__generator(this,function(r){switch(r.label){case 0:return[4,this.client.api(this.uploadSession.url).responseType(a0.ResponseType.RAW).delete()];case 1:return e=r.sent(),e.status===204&&(this.uploadSession.isCancelled=!0),[2,e]}})})},t.prototype.getStatus=function(){return Kt.__awaiter(this,void 0,void 0,function(){var e;return Kt.__generator(this,function(r){switch(r.label){case 0:return[4,this.client.api(this.uploadSession.url).get()];case 1:return e=r.sent(),this.updateTaskStatus(e),[2,e]}})})},t.prototype.resume=function(){return Kt.__awaiter(this,void 0,void 0,function(){return Kt.__generator(this,function(e){switch(e.label){case 0:return[4,this.getStatus()];case 1:return e.sent(),[4,this.upload()];case 2:return[2,e.sent()]}})})},t.prototype.getUploadSession=function(){return this.uploadSession},t}();tm.LargeFileUploadTask=w9});var $_=g(rm=>{"use strict";Object.defineProperty(rm,"__esModule",{value:!0});rm.FileUpload=void 0;var P9=On(),O9=function(){function t(e,r,n){if(this.content=e,this.name=r,this.size=n,!e||!r||!n)throw new P9.GraphClientError("Please provide the upload content, name of the file and size of the file")}return t.prototype.sliceFile=function(e){return this.content.slice(e.minValue,e.maxValue+1)},t}();rm.FileUpload=O9});var z_=g(nm=>{"use strict";Object.defineProperty(nm,"__esModule",{value:!0});nm.getValidRangeSize=void 0;var x9=5*1024*1024,N9=function(t){return t>320*1024&&(t=Math.floor(t/(320*1024))*320*1024),t},D9=function(t){t===void 0&&(t=x9);var e=60*1024*1024;return t>e&&(t=e),N9(t)};nm.getValidRangeSize=D9});var d0=g(om=>{"use strict";Object.defineProperty(om,"__esModule",{value:!0});om.OneDriveLargeFileUploadTask=void 0;var xn=(_e(),M(ye)),c0=On(),k9=$_(),M9=G_(),L9=z_(),U9=function(t){xn.__extends(e,t);function e(r,n,o,i){return t.call(this,r,n,o,i)||this}return e.constructCreateSessionUrl=function(r,n){return n===void 0&&(n=e.DEFAULT_UPLOAD_PATH),r=r.trim(),n=n.trim(),n===""&&(n="/"),n[0]!=="/"&&(n="/".concat(n)),n[n.length-1]!=="/"&&(n="".concat(n,"/")),"/me/drive/root:".concat(n.split("/").map(function(o){return encodeURIComponent(o)}).join("/")).concat(encodeURIComponent(r),":/createUploadSession")},e.getFileInfo=function(r,n){var o,i;if(typeof Blob<"u"&&r instanceof Blob)o=new File([r],n),i=o.size;else if(typeof File<"u"&&r instanceof File)o=r,i=o.size;else if(typeof Uint8Array<"u"&&r instanceof Uint8Array){var s=r;i=s.byteLength,o=s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength)}return{content:o,size:i}},e.create=function(r,n,o){return xn.__awaiter(this,void 0,void 0,function(){var i,s,a;return xn.__generator(this,function(c){if(!r||!n||!o)throw new c0.GraphClientError("Please provide the Graph client instance, file object and OneDriveLargeFileUploadOptions value");return i=o.fileName,s=e.getFileInfo(n,i),a=new k9.FileUpload(s.content,i,s.size),[2,this.createTaskWithFileObject(r,a,o)]})})},e.createTaskWithFileObject=function(r,n,o){return xn.__awaiter(this,void 0,void 0,function(){var i,s,a,c;return xn.__generator(this,function(d){switch(d.label){case 0:if(!r||!n||!o)throw new c0.GraphClientError("Please provide the Graph client instance, FileObject interface implementation and OneDriveLargeFileUploadOptions value");return i=o.uploadSessionURL?o.uploadSessionURL:e.constructCreateSessionUrl(o.fileName,o.path),s={fileName:o.fileName,fileDescription:o.fileDescription,conflictBehavior:o.conflictBehavior},[4,e.createUploadSession(r,i,s)];case 1:return a=d.sent(),c=(0,L9.getValidRangeSize)(o.rangeSize),[2,new e(r,n,a,{rangeSize:c,uploadEventHandlers:o.uploadEventHandlers})]}})})},e.createUploadSession=function(r,n,o){return xn.__awaiter(this,void 0,void 0,function(){var i;return xn.__generator(this,function(s){return i={item:{"@microsoft.graph.conflictBehavior":o?.conflictBehavior||"rename",name:o?.fileName,description:o?.fileDescription}},[2,t.createUploadSession.call(this,r,n,i)]})})},e.prototype.commit=function(r,n){return n===void 0&&(n="rename"),xn.__awaiter(this,void 0,void 0,function(){var o;return xn.__generator(this,function(i){switch(i.label){case 0:return o={name:this.file.name,"@microsoft.graph.conflictBehavior":n,"@microsoft.graph.sourceUrl":this.uploadSession.url},[4,this.client.api(r).put(o)];case 1:return[2,i.sent()]}})})},e.DEFAULT_UPLOAD_PATH="/",e}(M9.LargeFileUploadTask);om.OneDriveLargeFileUploadTask=U9});var u0=g(im=>{"use strict";Object.defineProperty(im,"__esModule",{value:!0});im.StreamUpload=void 0;var l0=(_e(),M(ye)),Td=On(),F9=function(){function t(e,r,n){if(this.content=e,this.name=r,this.size=n,!e||!r||!n)throw new Td.GraphClientError("Please provide the Readable Stream content, name of the file and size of the file")}return t.prototype.sliceFile=function(e){return l0.__awaiter(this,void 0,void 0,function(){var r,n,o,i,s,a,c;return l0.__generator(this,function(d){switch(d.label){case 0:if(r=e.maxValue-e.minValue+1,n=[],this.previousSlice){if(e.minValue<this.previousSlice.range.minValue)throw new Td.GraphClientError("An error occurred while uploading the stream. Please restart the stream upload from the first byte of the file.");if(e.minValue<this.previousSlice.range.maxValue){if(o=this.previousSlice.range.minValue,i=this.previousSlice.range.maxValue,e.minValue===o&&e.maxValue===i)return[2,this.previousSlice.fileSlice];if(e.maxValue===i)return[2,this.previousSlice.fileSlice.slice(e.minValue,e.maxValue+1)];n.push(this.previousSlice.fileSlice.slice(e.minValue,i+1)),r=e.maxValue-i}}return this.content&&this.content.readable?this.content.readableLength>=r?(n.push(this.content.read(r)),[3,3]):[3,1]:[3,4];case 1:return a=(s=n).push,[4,this.readNBytesFromStream(r)];case 2:a.apply(s,[d.sent()]),d.label=3;case 3:return[3,5];case 4:throw new Td.GraphClientError("Stream is not readable.");case 5:return c=Buffer.concat(n),this.previousSlice={fileSlice:c,range:e},[2,c]}})})},t.prototype.readNBytesFromStream=function(e){var r=this;return new Promise(function(n,o){var i=[],s=e,a=0;r.content.on("end",function(){if(s>0)return o(new Td.GraphClientError("Stream ended before reading required range size"))}),r.content.on("readable",function(){for(var c;a<e&&(c=r.content.read(s))!==null;)a+=c.length,i.push(c),s>0&&(s=e-a);if(a===e)return n(Buffer.concat(i));if(!r.content||!r.content.readable)return o(new Td.GraphClientError("Error encountered while reading the stream during the upload"))})})},t}();im.StreamUpload=F9});var p0=g(sm=>{"use strict";Object.defineProperty(sm,"__esModule",{value:!0});sm.PageIterator=void 0;var ta=(_e(),M(ye)),B9=function(){function t(e,r,n,o){this.client=e,this.collection=r.value,this.nextLink=r["@odata.nextLink"],this.deltaLink=r["@odata.deltaLink"],this.callback=n,this.cursor=0,this.complete=!1,this.requestOptions=o}return t.prototype.iterationHelper=function(){if(this.collection===void 0)return!1;for(var e=!0;e&&this.cursor<this.collection.length;){var r=this.collection[this.cursor];e=this.callback(r),this.cursor++}return e},t.prototype.fetchAndUpdateNextPageData=function(){return ta.__awaiter(this,void 0,void 0,function(){var e,r;return ta.__generator(this,function(n){switch(n.label){case 0:return e=this.client.api(this.nextLink),this.requestOptions&&(this.requestOptions.headers&&(e=e.headers(this.requestOptions.headers)),this.requestOptions.middlewareOptions&&(e=e.middlewareOptions(this.requestOptions.middlewareOptions)),this.requestOptions.options&&(e=e.options(this.requestOptions.options))),[4,e.get()];case 1:return r=n.sent(),this.collection=r.value,this.cursor=0,this.nextLink=r["@odata.nextLink"],this.deltaLink=r["@odata.deltaLink"],[2]}})})},t.prototype.getDeltaLink=function(){return this.deltaLink},t.prototype.iterate=function(){return ta.__awaiter(this,void 0,void 0,function(){var e;return ta.__generator(this,function(r){switch(r.label){case 0:e=this.iterationHelper(),r.label=1;case 1:return e?this.nextLink===void 0?[3,3]:[4,this.fetchAndUpdateNextPageData()]:[3,5];case 2:return r.sent(),e=this.iterationHelper(),[3,4];case 3:e=!1,r.label=4;case 4:return[3,1];case 5:return this.nextLink===void 0&&this.cursor>=this.collection.length&&(this.complete=!0),[2]}})})},t.prototype.resume=function(){return ta.__awaiter(this,void 0,void 0,function(){return ta.__generator(this,function(e){return[2,this.iterate()]})})},t.prototype.isComplete=function(){return this.complete},t}();sm.PageIterator=B9});var V_=g(cm=>{"use strict";Object.defineProperty(cm,"__esModule",{value:!0});cm.CustomAuthenticationProvider=void 0;var am=(_e(),M(ye)),m0=On(),q9=function(){function t(e){this.provider=e}return t.prototype.getAccessToken=function(){return am.__awaiter(this,void 0,void 0,function(){var e=this;return am.__generator(this,function(r){return[2,new Promise(function(n,o){e.provider(function(i,s){return am.__awaiter(e,void 0,void 0,function(){var a,c;return am.__generator(this,function(d){switch(d.label){case 0:return s?(n(s),[3,3]):[3,1];case 1:return i||(a="Access token is undefined or empty.						Please provide a valid token.						For more help - https://github.com/microsoftgraph/msgraph-sdk-javascript/blob/dev/docs/CustomAuthenticationProvider.md",i=new m0.GraphClientError(a)),[4,m0.GraphClientError.setGraphClientError(i)];case 2:c=d.sent(),o(c),d.label=3;case 3:return[2]}})})})})]})})},t}();cm.CustomAuthenticationProvider=q9});var K_=g(dm=>{"use strict";Object.defineProperty(dm,"__esModule",{value:!0});dm.GraphError=void 0;var H9=(_e(),M(ye)),j9=function(t){H9.__extends(e,t);function e(r,n,o){r===void 0&&(r=-1);var i=t.call(this,n||o&&o.message)||this;return Object.setPrototypeOf(i,e.prototype),i.statusCode=r,i.code=null,i.requestId=null,i.date=new Date,i.body=null,i.stack=o?o.stack:i.stack,i}return e}(Error);dm.GraphError=j9});var f0=g(lm=>{"use strict";Object.defineProperty(lm,"__esModule",{value:!0});lm.GraphErrorHandler=void 0;var h0=(_e(),M(ye)),W_=K_(),G9=function(){function t(){}return t.constructError=function(e,r,n){var o=new W_.GraphError(r,"",e);return e.name!==void 0&&(o.code=e.name),o.body=e.toString(),o.date=new Date,o.headers=n?.headers,o},t.constructErrorFromResponse=function(e,r,n){var o=e.error,i=new W_.GraphError(r,o.message);return i.code=o.code,o.innerError!==void 0&&(i.requestId=o.innerError["request-id"],i.date=new Date(o.innerError.date)),i.body=JSON.stringify(o),i.headers=n?.headers,i},t.getError=function(e,r,n,o){return e===void 0&&(e=null),r===void 0&&(r=-1),h0.__awaiter(this,void 0,void 0,function(){var i;return h0.__generator(this,function(s){if(e&&e.error?i=t.constructErrorFromResponse(e,r,o):e instanceof Error?i=t.constructError(e,r,o):(i=new W_.GraphError(r),i.body=e),typeof n=="function")n(i,null);else return[2,i];return[2]})})},t}();lm.GraphErrorHandler=G9});var Q_=g(um=>{"use strict";Object.defineProperty(um,"__esModule",{value:!0});um.GraphRequest=void 0;var Oe=(_e(),M(ye)),$9=On(),z9=f0(),bd=Ap(),V9=B_(),K9=So(),zi=vd(),W9=Sd(),Q9=function(){function t(e,r,n){var o=this;this.parsePath=function(i){if(i.indexOf("https://")!==-1){i=i.replace("https://","");var s=i.indexOf("/");s!==-1&&(o.urlComponents.host="https://"+i.substring(0,s),i=i.substring(s+1,i.length));var a=i.indexOf("/");a!==-1&&(o.urlComponents.version=i.substring(0,a),i=i.substring(a+1,i.length))}i.charAt(0)==="/"&&(i=i.substr(1));var c=i.indexOf("?");if(c===-1)o.urlComponents.path=i;else{o.urlComponents.path=i.substr(0,c);for(var d=i.substring(c+1,i.length).split("&"),u=0,m=d;u<m.length;u++){var f=m[u];o.parseQueryParameter(f)}}},this.httpClient=e,this.config=r,this.urlComponents={host:this.config.baseUrl,version:this.config.defaultVersion,oDataQueryParams:{},otherURLQueryParams:{},otherURLQueryOptions:[]},this._headers={},this._options={},this._middlewareOptions=[],this.parsePath(n)}return t.prototype.addCsvQueryParameter=function(e,r,n){this.urlComponents.oDataQueryParams[e]=this.urlComponents.oDataQueryParams[e]?this.urlComponents.oDataQueryParams[e]+",":"";var o=[];n.length>1&&typeof r=="string"?o=Array.prototype.slice.call(n):typeof r=="string"?o.push(r):o=o.concat(r),this.urlComponents.oDataQueryParams[e]+=o.join(",")},t.prototype.buildFullUrl=function(){var e=(0,bd.urlJoin)([this.urlComponents.host,this.urlComponents.version,this.urlComponents.path])+this.createQueryString();return this.config.debugLogging&&console.log(e),e},t.prototype.createQueryString=function(){var e=this.urlComponents,r=[];if(Object.keys(e.oDataQueryParams).length!==0)for(var n in e.oDataQueryParams)Object.prototype.hasOwnProperty.call(e.oDataQueryParams,n)&&r.push(n+"="+e.oDataQueryParams[n]);if(Object.keys(e.otherURLQueryParams).length!==0)for(var n in e.otherURLQueryParams)Object.prototype.hasOwnProperty.call(e.otherURLQueryParams,n)&&r.push(n+"="+e.otherURLQueryParams[n]);if(e.otherURLQueryOptions.length!==0)for(var o=0,i=e.otherURLQueryOptions;o<i.length;o++){var s=i[o];r.push(s)}return r.length>0?"?"+r.join("&"):""},t.prototype.parseQueryParameter=function(e){if(typeof e=="string")if(e.charAt(0)==="?"&&(e=e.substring(1)),e.indexOf("&")!==-1)for(var r=e.split("&"),n=0,o=r;n<o.length;n++){var i=o[n];this.parseQueryParamenterString(i)}else this.parseQueryParamenterString(e);else if(e.constructor===Object)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&this.setURLComponentsQueryParamater(s,e[s]);return this},t.prototype.parseQueryParamenterString=function(e){if(this.isValidQueryKeyValuePair(e)){var r=e.indexOf("="),n=e.substring(0,r),o=e.substring(r+1);this.setURLComponentsQueryParamater(n,o)}else this.urlComponents.otherURLQueryOptions.push(e)},t.prototype.setURLComponentsQueryParamater=function(e,r){if(bd.oDataQueryNames.indexOf(e)!==-1){var n=this.urlComponents.oDataQueryParams[e],o=n&&(e==="$expand"||e==="$select"||e==="$orderby");this.urlComponents.oDataQueryParams[e]=o?n+","+r:r}else this.urlComponents.otherURLQueryParams[e]=r},t.prototype.isValidQueryKeyValuePair=function(e){var r=e.indexOf("=");if(r===-1)return!1;var n=e.indexOf("(");return!(n!==-1&&e.indexOf("(")<r)},t.prototype.updateRequestOptions=function(e){var r=Oe.__assign({},e.headers);if(this.config.fetchOptions!==void 0){var n=Oe.__assign({},this.config.fetchOptions);Object.assign(e,n),typeof this.config.fetchOptions.headers!==void 0&&(e.headers=Oe.__assign({},this.config.fetchOptions.headers))}Object.assign(e,this._options),e.headers!==void 0&&Object.assign(r,e.headers),Object.assign(r,this._headers),e.headers=r},t.prototype.send=function(e,r,n){var o;return Oe.__awaiter(this,void 0,void 0,function(){var i,s,a,c,d,u,m,f;return Oe.__generator(this,function(h){switch(h.label){case 0:s=new K9.MiddlewareControl(this._middlewareOptions),this.updateRequestOptions(r),a=(o=this.config)===null||o===void 0?void 0:o.customHosts,h.label=1;case 1:return h.trys.push([1,4,,6]),[4,this.httpClient.sendRequest({request:e,options:r,middlewareControl:s,customHosts:a})];case 2:return c=h.sent(),i=c.response,[4,V9.GraphResponseHandler.getResponse(i,this._responseType,n)];case 3:return d=h.sent(),[2,d];case 4:if(u=h.sent(),u instanceof $9.GraphClientError)throw u;return m=void 0,i&&(m=i.status),[4,z9.GraphErrorHandler.getError(u,m,n,i)];case 5:throw f=h.sent(),f;case 6:return[2]}})})},t.prototype.setHeaderContentType=function(){if(!this._headers){this.header("Content-Type","application/json");return}for(var e=Object.keys(this._headers),r=0,n=e;r<n.length;r++){var o=n[r];if(o.toLowerCase()==="content-type")return}this.header("Content-Type","application/json")},t.prototype.header=function(e,r){return this._headers[e]=r,this},t.prototype.headers=function(e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this._headers[r]=e[r]);return this},t.prototype.option=function(e,r){return this._options[e]=r,this},t.prototype.options=function(e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this._options[r]=e[r]);return this},t.prototype.middlewareOptions=function(e){return this._middlewareOptions=e,this},t.prototype.version=function(e){return this.urlComponents.version=e,this},t.prototype.responseType=function(e){return this._responseType=e,this},t.prototype.select=function(e){return this.addCsvQueryParameter("$select",e,arguments),this},t.prototype.expand=function(e){return this.addCsvQueryParameter("$expand",e,arguments),this},t.prototype.orderby=function(e){return this.addCsvQueryParameter("$orderby",e,arguments),this},t.prototype.filter=function(e){return this.urlComponents.oDataQueryParams.$filter=e,this},t.prototype.search=function(e){return this.urlComponents.oDataQueryParams.$search=e,this},t.prototype.top=function(e){return this.urlComponents.oDataQueryParams.$top=e,this},t.prototype.skip=function(e){return this.urlComponents.oDataQueryParams.$skip=e,this},t.prototype.skipToken=function(e){return this.urlComponents.oDataQueryParams.$skipToken=e,this},t.prototype.count=function(e){return e===void 0&&(e=!0),this.urlComponents.oDataQueryParams.$count=e.toString(),this},t.prototype.query=function(e){return this.parseQueryParameter(e)},t.prototype.get=function(e){return Oe.__awaiter(this,void 0,void 0,function(){var r,n,o;return Oe.__generator(this,function(i){switch(i.label){case 0:return r=this.buildFullUrl(),n={method:zi.RequestMethod.GET},[4,this.send(r,n,e)];case 1:return o=i.sent(),[2,o]}})})},t.prototype.post=function(e,r){return Oe.__awaiter(this,void 0,void 0,function(){var n,o,i;return Oe.__generator(this,function(s){switch(s.label){case 0:return n=this.buildFullUrl(),o={method:zi.RequestMethod.POST,body:(0,bd.serializeContent)(e)},i=e&&e.constructor&&e.constructor.name,i==="FormData"?o.headers={}:(this.setHeaderContentType(),o.headers=this._headers),[4,this.send(n,o,r)];case 1:return[2,s.sent()]}})})},t.prototype.create=function(e,r){return Oe.__awaiter(this,void 0,void 0,function(){return Oe.__generator(this,function(n){switch(n.label){case 0:return[4,this.post(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.put=function(e,r){return Oe.__awaiter(this,void 0,void 0,function(){var n,o;return Oe.__generator(this,function(i){switch(i.label){case 0:return n=this.buildFullUrl(),this.setHeaderContentType(),o={method:zi.RequestMethod.PUT,body:(0,bd.serializeContent)(e)},[4,this.send(n,o,r)];case 1:return[2,i.sent()]}})})},t.prototype.patch=function(e,r){return Oe.__awaiter(this,void 0,void 0,function(){var n,o;return Oe.__generator(this,function(i){switch(i.label){case 0:return n=this.buildFullUrl(),this.setHeaderContentType(),o={method:zi.RequestMethod.PATCH,body:(0,bd.serializeContent)(e)},[4,this.send(n,o,r)];case 1:return[2,i.sent()]}})})},t.prototype.update=function(e,r){return Oe.__awaiter(this,void 0,void 0,function(){return Oe.__generator(this,function(n){switch(n.label){case 0:return[4,this.patch(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.delete=function(e){return Oe.__awaiter(this,void 0,void 0,function(){var r,n;return Oe.__generator(this,function(o){switch(o.label){case 0:return r=this.buildFullUrl(),n={method:zi.RequestMethod.DELETE},[4,this.send(r,n,e)];case 1:return[2,o.sent()]}})})},t.prototype.del=function(e){return Oe.__awaiter(this,void 0,void 0,function(){return Oe.__generator(this,function(r){switch(r.label){case 0:return[4,this.delete(e)];case 1:return[2,r.sent()]}})})},t.prototype.getStream=function(e){return Oe.__awaiter(this,void 0,void 0,function(){var r,n;return Oe.__generator(this,function(o){switch(o.label){case 0:return r=this.buildFullUrl(),n={method:zi.RequestMethod.GET},this.responseType(W9.ResponseType.STREAM),[4,this.send(r,n,e)];case 1:return[2,o.sent()]}})})},t.prototype.putStream=function(e,r){return Oe.__awaiter(this,void 0,void 0,function(){var n,o;return Oe.__generator(this,function(i){switch(i.label){case 0:return n=this.buildFullUrl(),o={method:zi.RequestMethod.PUT,headers:{"Content-Type":"application/octet-stream"},body:e},[4,this.send(n,o,r)];case 1:return[2,i.sent()]}})})},t}();um.GraphRequest=Q9});var Y_=g(pm=>{"use strict";Object.defineProperty(pm,"__esModule",{value:!0});pm.HTTPClient=void 0;var g0=(_e(),M(ye)),Y9=function(){function t(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(!e||!e.length){var n=new Error;throw n.name="InvalidMiddlewareChain",n.message="Please provide a default middleware chain or custom middleware chain",n}this.setMiddleware.apply(this,e)}return t.prototype.setMiddleware=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];e.length>1?this.parseMiddleWareArray(e):this.middleware=e[0]},t.prototype.parseMiddleWareArray=function(e){e.forEach(function(r,n){n<e.length-1&&r.setNext(e[n+1])}),this.middleware=e[0]},t.prototype.sendRequest=function(e){return g0.__awaiter(this,void 0,void 0,function(){var r;return g0.__generator(this,function(n){switch(n.label){case 0:if(typeof e.request=="string"&&e.options===void 0)throw r=new Error,r.name="InvalidRequestOptions",r.message="Unable to execute the middleware, Please provide valid options for a request",r;return[4,this.middleware.execute(e)];case 1:return n.sent(),[2,e]}})})},t}();pm.HTTPClient=Y9});var _0=g(mm=>{"use strict";Object.defineProperty(mm,"__esModule",{value:!0});mm.HTTPClientFactory=void 0;var J9=(_e(),M(ye)),y0=Y_(),X9=Pp(),Z9=xp(),e7=Cd(),t7=Ed(),r7=Up(),n7=kp(),o7=Hp(),i7=function(){return typeof process=="object"&&typeof require=="function"},s7=function(){function t(){}return t.createWithAuthenticationProvider=function(e){var r=new X9.AuthenticationHandler(e),n=new n7.RetryHandler(new t7.RetryHandlerOptions),o=new o7.TelemetryHandler,i=new Z9.HTTPMessageHandler;if(r.setNext(n),i7()){var s=new r7.RedirectHandler(new e7.RedirectHandlerOptions);n.setNext(s),s.setNext(o)}else n.setNext(o);return o.setNext(i),t.createWithMiddleware(r)},t.createWithMiddleware=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return new(y0.HTTPClient.bind.apply(y0.HTTPClient,J9.__spreadArray([void 0],e,!1)))},t}();mm.HTTPClientFactory=s7});var v0=g(hm=>{"use strict";Object.defineProperty(hm,"__esModule",{value:!0});hm.validatePolyFilling=void 0;var a7=function(){if(typeof Promise>"u"&&typeof fetch>"u"){var t=new Error("Library cannot function without Promise and fetch. So, please provide polyfill for them.");throw t.name="PolyFillNotAvailable",t}else if(typeof Promise>"u"){var t=new Error("Library cannot function without Promise. So, please provide polyfill for it.");throw t.name="PolyFillNotAvailable",t}else if(typeof fetch>"u"){var t=new Error("Library cannot function without fetch. So, please provide polyfill for it.");throw t.name="PolyFillNotAvailable",t}return!0};hm.validatePolyFilling=a7});var S0=g(fm=>{"use strict";Object.defineProperty(fm,"__esModule",{value:!0});fm.Client=void 0;var c7=(_e(),M(ye)),E0=x_(),d7=V_(),l7=Q_(),C0=Y_(),u7=_0(),p7=v0(),m7=function(){function t(e){this.config={baseUrl:E0.GRAPH_BASE_URL,debugLogging:!1,defaultVersion:E0.GRAPH_API_VERSION},(0,p7.validatePolyFilling)();for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.config[r]=e[r]);var n;if(e.authProvider!==void 0&&e.middleware!==void 0){var o=new Error;throw o.name="AmbiguityInInitialization",o.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain not both",o}else if(e.authProvider!==void 0)n=u7.HTTPClientFactory.createWithAuthenticationProvider(e.authProvider);else if(e.middleware!==void 0)n=new(C0.HTTPClient.bind.apply(C0.HTTPClient,c7.__spreadArray([void 0],[].concat(e.middleware),!1)));else{var o=new Error;throw o.name="InvalidMiddlewareChain",o.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain",o}this.httpClient=n}return t.init=function(e){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=n==="authProvider"?new d7.CustomAuthenticationProvider(e[n]):e[n]);return t.initWithMiddleware(r)},t.initWithMiddleware=function(e){return new t(e)},t.prototype.api=function(e){return new l7.GraphRequest(this.httpClient,this.config,e)},t}();fm.Client=m7});var b0=g(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.ResponseType=U.GraphRequest=U.GraphClientError=U.GraphError=U.CustomAuthenticationProvider=U.Client=U.PageIterator=U.Range=U.UploadResult=U.FileUpload=U.StreamUpload=U.getValidRangeSize=U.OneDriveLargeFileUploadTask=U.LargeFileUploadTask=U.ChaosHandler=U.ChaosStrategy=U.ChaosHandlerOptions=U.TelemetryHandlerOptions=U.FeatureUsageFlag=U.RedirectHandlerOptions=U.RetryHandlerOptions=U.AuthenticationHandlerOptions=U.MiddlewareFactory=U.TelemetryHandler=U.RedirectHandler=U.RetryHandler=U.HTTPMessageHandler=U.AuthenticationHandler=U.BatchResponseContent=U.BatchRequestContent=void 0;var h7=Fw();Object.defineProperty(U,"BatchRequestContent",{enumerable:!0,get:function(){return h7.BatchRequestContent}});var f7=Bw();Object.defineProperty(U,"BatchResponseContent",{enumerable:!0,get:function(){return f7.BatchResponseContent}});var g7=Pp();Object.defineProperty(U,"AuthenticationHandler",{enumerable:!0,get:function(){return g7.AuthenticationHandler}});var y7=xp();Object.defineProperty(U,"HTTPMessageHandler",{enumerable:!0,get:function(){return y7.HTTPMessageHandler}});var _7=kp();Object.defineProperty(U,"RetryHandler",{enumerable:!0,get:function(){return _7.RetryHandler}});var v7=Up();Object.defineProperty(U,"RedirectHandler",{enumerable:!0,get:function(){return v7.RedirectHandler}});var E7=Hp();Object.defineProperty(U,"TelemetryHandler",{enumerable:!0,get:function(){return E7.TelemetryHandler}});var C7=e0();Object.defineProperty(U,"MiddlewareFactory",{enumerable:!0,get:function(){return C7.MiddlewareFactory}});var S7=N_();Object.defineProperty(U,"AuthenticationHandlerOptions",{enumerable:!0,get:function(){return S7.AuthenticationHandlerOptions}});var T7=Ed();Object.defineProperty(U,"RetryHandlerOptions",{enumerable:!0,get:function(){return T7.RetryHandlerOptions}});var b7=Cd();Object.defineProperty(U,"RedirectHandlerOptions",{enumerable:!0,get:function(){return b7.RedirectHandlerOptions}});var T0=Ys();Object.defineProperty(U,"FeatureUsageFlag",{enumerable:!0,get:function(){return T0.FeatureUsageFlag}});Object.defineProperty(U,"TelemetryHandlerOptions",{enumerable:!0,get:function(){return T0.TelemetryHandlerOptions}});var A7=L_();Object.defineProperty(U,"ChaosHandlerOptions",{enumerable:!0,get:function(){return A7.ChaosHandlerOptions}});var I7=$p();Object.defineProperty(U,"ChaosStrategy",{enumerable:!0,get:function(){return I7.ChaosStrategy}});var R7=i0();Object.defineProperty(U,"ChaosHandler",{enumerable:!0,get:function(){return R7.ChaosHandler}});var w7=G_();Object.defineProperty(U,"LargeFileUploadTask",{enumerable:!0,get:function(){return w7.LargeFileUploadTask}});var P7=d0();Object.defineProperty(U,"OneDriveLargeFileUploadTask",{enumerable:!0,get:function(){return P7.OneDriveLargeFileUploadTask}});var O7=z_();Object.defineProperty(U,"getValidRangeSize",{enumerable:!0,get:function(){return O7.getValidRangeSize}});var x7=u0();Object.defineProperty(U,"StreamUpload",{enumerable:!0,get:function(){return x7.StreamUpload}});var N7=$_();Object.defineProperty(U,"FileUpload",{enumerable:!0,get:function(){return N7.FileUpload}});var D7=H_();Object.defineProperty(U,"UploadResult",{enumerable:!0,get:function(){return D7.UploadResult}});var k7=q_();Object.defineProperty(U,"Range",{enumerable:!0,get:function(){return k7.Range}});var M7=p0();Object.defineProperty(U,"PageIterator",{enumerable:!0,get:function(){return M7.PageIterator}});var L7=S0();Object.defineProperty(U,"Client",{enumerable:!0,get:function(){return L7.Client}});var U7=V_();Object.defineProperty(U,"CustomAuthenticationProvider",{enumerable:!0,get:function(){return U7.CustomAuthenticationProvider}});var F7=K_();Object.defineProperty(U,"GraphError",{enumerable:!0,get:function(){return F7.GraphError}});var B7=On();Object.defineProperty(U,"GraphClientError",{enumerable:!0,get:function(){return B7.GraphClientError}});var q7=Q_();Object.defineProperty(U,"GraphRequest",{enumerable:!0,get:function(){return q7.GraphRequest}});var H7=Sd();Object.defineProperty(U,"ResponseType",{enumerable:!0,get:function(){return H7.ResponseType}})});var I0=g((Gqe,A0)=>{A0.exports=class{constructor({emailUser:e,access_token:r,refresh_token:n,expiry_date:o,token_refresh:i,token_cache:s}){this.PK="TOKEN",this.SK=`MAIL#${e}`,this.emailUser=e,this.access_token=r,this.refresh_token=n||void 0,this.expiry_date=new Date(o).getTime(),this.token_refresh=i||!1,this.created_at=this.updated_at=Date.now().toString(),this.token_cache=s||void 0}}});var j0=g(($qe,H0)=>{"use strict";var ym=Object.defineProperty,j7=Object.getOwnPropertyDescriptor,G7=Object.getOwnPropertyNames,$7=Object.prototype.hasOwnProperty,Ye=(t,e)=>ym(t,"name",{value:e,configurable:!0}),z7=(t,e)=>{for(var r in e)ym(t,r,{get:e[r],enumerable:!0})},V7=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of G7(e))!$7.call(t,o)&&o!==r&&ym(t,o,{get:()=>e[o],enumerable:!(n=j7(e,o))||n.enumerable});return t},K7=t=>V7(ym({},"__esModule",{value:!0}),t),N0={};z7(N0,{NumberValueImpl:()=>_m,convertToAttr:()=>Id,convertToNative:()=>Ad,marshall:()=>q0,unmarshall:()=>Z7});H0.exports=K7(N0);var D0=class k0{constructor(e){typeof e=="object"&&"N"in e?this.value=String(e.N):this.value=String(e);let r=typeof e.valueOf()=="number"?e.valueOf():0;if(r>Number.MAX_SAFE_INTEGER||r<Number.MIN_SAFE_INTEGER||Math.abs(r)===1/0||Number.isNaN(r))throw new Error(`NumberValue should not be initialized with an imprecise number=${r}. Use a string instead.`)}static from(e){return new k0(e)}toAttributeValue(){return{N:this.toString()}}toBigInt(){let e=this.toString();return BigInt(e)}toString(){return String(this.value)}valueOf(){return this.toString()}};Ye(D0,"NumberValue");var _m=D0,Id=Ye((t,e)=>{var r,n,o,i,s,a;if(t===void 0)throw new Error("Pass options.removeUndefinedValues=true to remove undefined values from map/array/set.");if(t===null&&typeof t=="object")return gm();if(Array.isArray(t))return W7(t,e);if(((r=t?.constructor)==null?void 0:r.name)==="Set")return Q7(t,e);if(((n=t?.constructor)==null?void 0:n.name)==="Map")return Y7(t,e);if(((o=t?.constructor)==null?void 0:o.name)==="Object"||!t.constructor&&typeof t=="object")return R0(t,e);if(B0(t))return t.length===0&&e?.convertEmptyValues?gm():M0(t);if(typeof t=="boolean"||((i=t?.constructor)==null?void 0:i.name)==="Boolean")return{BOOL:t.valueOf()};if(typeof t=="number"||((s=t?.constructor)==null?void 0:s.name)==="Number")return F0(t);if(t instanceof _m)return t.toAttributeValue();if(typeof t=="bigint")return U0(t);if(typeof t=="string"||((a=t?.constructor)==null?void 0:a.name)==="String")return t.length===0&&e?.convertEmptyValues?gm():L0(t);if(e?.convertClassInstanceToMap&&typeof t=="object")return R0(t,e);throw new Error(`Unsupported type passed: ${t}. Pass options.convertClassInstanceToMap=true to marshall typeof object as map attribute.`)},"convertToAttr"),W7=Ye((t,e)=>({L:t.filter(r=>typeof r!="function"&&(!e?.removeUndefinedValues||e?.removeUndefinedValues&&r!==void 0)).map(r=>Id(r,e))}),"convertToListAttr"),Q7=Ye((t,e)=>{let r=e?.removeUndefinedValues?new Set([...t].filter(o=>o!==void 0)):t;if(!e?.removeUndefinedValues&&r.has(void 0))throw new Error("Pass options.removeUndefinedValues=true to remove undefined values from map/array/set.");if(r.size===0){if(e?.convertEmptyValues)return gm();throw new Error("Pass a non-empty set, or options.convertEmptyValues=true.")}let n=r.values().next().value;if(n instanceof _m)return{NS:Array.from(r).map(o=>o.toString())};if(typeof n=="number")return{NS:Array.from(r).map(F0).map(o=>o.N)};if(typeof n=="bigint")return{NS:Array.from(r).map(U0).map(o=>o.N)};if(typeof n=="string")return{SS:Array.from(r).map(L0).map(o=>o.S)};if(B0(n))return{BS:Array.from(r).map(M0).map(o=>o.B)};throw new Error("Only Number Set (NS), Binary Set (BS) or String Set (SS) are allowed.")},"convertToSetAttr"),Y7=Ye((t,e)=>({M:(r=>{let n={};for(let[o,i]of r)typeof i!="function"&&(i!==void 0||!e?.removeUndefinedValues)&&(n[o]=Id(i,e));return n})(t)}),"convertToMapAttrFromIterable"),R0=Ye((t,e)=>({M:(r=>{let n={};for(let o in r){let i=r[o];typeof i!="function"&&(i!==void 0||!e?.removeUndefinedValues)&&(n[o]=Id(i,e))}return n})(t)}),"convertToMapAttrFromEnumerableProps"),gm=Ye(()=>({NULL:!0}),"convertToNullAttr"),M0=Ye(t=>({B:t}),"convertToBinaryAttr"),L0=Ye(t=>({S:t.toString()}),"convertToStringAttr"),U0=Ye(t=>({N:t.toString()}),"convertToBigIntAttr"),w0=Ye(t=>{throw new Error(`${t} ${typeof BigInt=="function"?"Use BigInt.":"Pass string value instead."} `)},"validateBigIntAndThrow"),F0=Ye(t=>{if([Number.NaN,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY].map(e=>e.toString()).includes(t.toString()))throw new Error(`Special numeric value ${t.toString()} is not allowed`);return t>Number.MAX_SAFE_INTEGER?w0(`Number ${t.toString()} is greater than Number.MAX_SAFE_INTEGER.`):t<Number.MIN_SAFE_INTEGER&&w0(`Number ${t.toString()} is lesser than Number.MIN_SAFE_INTEGER.`),{N:t.toString()}},"convertToNumberAttr"),B0=Ye(t=>{let e=["ArrayBuffer","Blob","Buffer","DataView","File","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];return t?.constructor?e.includes(t.constructor.name):!1},"isBinary"),Ad=Ye((t,e)=>{for(let[r,n]of Object.entries(t))if(n!==void 0)switch(r){case"NULL":return null;case"BOOL":return!!n;case"N":return P0(n,e);case"B":return x0(n);case"S":return O0(n);case"L":return J7(n,e);case"M":return X7(n,e);case"NS":return new Set(n.map(o=>P0(o,e)));case"BS":return new Set(n.map(x0));case"SS":return new Set(n.map(O0));default:throw new Error(`Unsupported type passed: ${r}`)}throw new Error(`No value defined: ${JSON.stringify(t)}`)},"convertToNative"),P0=Ye((t,e)=>{if(e?.wrapNumbers)return _m.from(t);let r=Number(t),n=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];if((r>Number.MAX_SAFE_INTEGER||r<Number.MIN_SAFE_INTEGER)&&!n.includes(r))if(typeof BigInt=="function")try{return BigInt(t)}catch{throw new Error(`${t} can't be converted to BigInt. Set options.wrapNumbers to get string value.`)}else throw new Error(`${t} is outside SAFE_INTEGER bounds. Set options.wrapNumbers to get string value.`);return r},"convertNumber"),O0=Ye(t=>t,"convertString"),x0=Ye(t=>t,"convertBinary"),J7=Ye((t,e)=>t.map(r=>Ad(r,e)),"convertList"),X7=Ye((t,e)=>Object.entries(t).reduce((r,[n,o])=>(r[n]=Ad(o,e),r),{}),"convertMap");function q0(t,e){let r=Id(t,e),[n,o]=Object.entries(r)[0];switch(n){case"M":case"L":return e?.convertTopLevelContainer?r:o;case"SS":case"NS":case"BS":case"S":case"N":case"B":case"NULL":case"BOOL":case"$unknown":default:return r}}Ye(q0,"marshall");var Z7=Ye((t,e)=>e?.convertWithoutMapWrapper?Ad(t,e):Ad({M:t},e),"unmarshall")});var $0=g((zqe,G0)=>{var eZ=(t,e)=>{let r=[];for(let n=0;n<t.length;n+=e)r.push(t.slice(n,e+n));return r};G0.exports={chunkArray:eZ}});var V0=g((Kqe,z0)=>{z0.exports=class{constructor({id:e,threadId:r,labelIds:n,subject:o,from:i,body:s,createdDateTime:a,lastModifiedDateTime:c,changeKey:d,categories:u,receivedDateTime:m,sentDateTime:f,hasAttachments:h,internetMessageId:y,parentFolderId:E,conversationId:A,conversationIndex:w,isDeliveryReceiptRequested:x,isReadReceiptRequested:K,isRead:W,isDraft:le,webLink:et,inferenceClassification:Nr,replyTo:bt,flag:Ee,toRecipients:Ht,ccRecipients:ds,bccRecipients:bl,attachmentUrls:rc}){this.PK="MESSAGE",this.SK=`MESSAGE#MAIL#${e}`,this.id=e,this.threadId=r||void 0,this.labelIds=n||void 0,this.subject=o||void 0,this.from=i,this.body=s||void 0,this.attachments=rc&&rc.length>0?rc:void 0,this.createdDateTime=a||void 0,this.lastModifiedDateTime=c||void 0,this.changeKey=d||void 0,this.categories=u||void 0,this.receivedDateTime=m||void 0,this.sentDateTime=f||void 0,this.hasAttachments=h||!1,this.internetMessageId=y||void 0,this.parentFolderId=E||void 0,this.conversationId=A||void 0,this.conversationIndex=w||void 0,this.isDeliveryReceiptRequested=x||null,this.isReadReceiptRequested=K||!1,this.isRead=W||!1,this.isDraft=le||!1,this.webLink=et||void 0,this.inferenceClassification=Nr||"other",this.toRecipients=Ht||void 0,this.ccRecipients=ds||void 0,this.bccRecipients=bl||void 0,this.replyTo=bt||void 0,this.flag=Ee||{flagStatus:"notFlagged"}}}});var en=g((Wqe,tP)=>{var vm=Object.defineProperty,tZ=Object.getOwnPropertyDescriptor,rZ=Object.getOwnPropertyNames,nZ=Object.prototype.hasOwnProperty,Em=(t,e)=>vm(t,"name",{value:e,configurable:!0}),oZ=(t,e)=>{for(var r in e)vm(t,r,{get:e[r],enumerable:!0})},iZ=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of rZ(e))!nZ.call(t,o)&&o!==r&&vm(t,o,{get:()=>e[o],enumerable:!(n=tZ(e,o))||n.enumerable});return t},sZ=t=>iZ(vm({},"__esModule",{value:!0}),t),K0={};oZ(K0,{AlgorithmId:()=>J0,EndpointURLScheme:()=>Y0,FieldPosition:()=>X0,HttpApiKeyAuthLocation:()=>Q0,HttpAuthLocation:()=>W0,IniSectionType:()=>Z0,RequestHandlerProtocol:()=>eP,SMITHY_CONTEXT_KEY:()=>uZ,getDefaultClientConfiguration:()=>dZ,resolveDefaultRuntimeConfig:()=>lZ});tP.exports=sZ(K0);var W0=(t=>(t.HEADER="header",t.QUERY="query",t))(W0||{}),Q0=(t=>(t.HEADER="header",t.QUERY="query",t))(Q0||{}),Y0=(t=>(t.HTTP="http",t.HTTPS="https",t))(Y0||{}),J0=(t=>(t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256",t))(J0||{}),aZ=Em(t=>{let e=[];return t.sha256!==void 0&&e.push({algorithmId:()=>"sha256",checksumConstructor:()=>t.sha256}),t.md5!=null&&e.push({algorithmId:()=>"md5",checksumConstructor:()=>t.md5}),{_checksumAlgorithms:e,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},"getChecksumConfiguration"),cZ=Em(t=>{let e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},"resolveChecksumRuntimeConfig"),dZ=Em(t=>({...aZ(t)}),"getDefaultClientConfiguration"),lZ=Em(t=>({...cZ(t)}),"resolveDefaultRuntimeConfig"),X0=(t=>(t[t.HEADER=0]="HEADER",t[t.TRAILER=1]="TRAILER",t))(X0||{}),uZ="__smithy_context",Z0=(t=>(t.PROFILE="profile",t.SSO_SESSION="sso-session",t.SERVICES="services",t))(Z0||{}),eP=(t=>(t.HTTP_0_9="http/0.9",t.HTTP_1_0="http/1.0",t.TDS_8_0="tds/8.0",t))(eP||{})});var De=g((Xqe,lP)=>{var Cm=Object.defineProperty,pZ=Object.getOwnPropertyDescriptor,mZ=Object.getOwnPropertyNames,hZ=Object.prototype.hasOwnProperty,To=(t,e)=>Cm(t,"name",{value:e,configurable:!0}),fZ=(t,e)=>{for(var r in e)Cm(t,r,{get:e[r],enumerable:!0})},gZ=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of mZ(e))!hZ.call(t,o)&&o!==r&&Cm(t,o,{get:()=>e[o],enumerable:!(n=pZ(e,o))||n.enumerable});return t},yZ=t=>gZ(Cm({},"__esModule",{value:!0}),t),rP={};fZ(rP,{Field:()=>EZ,Fields:()=>CZ,HttpRequest:()=>SZ,HttpResponse:()=>TZ,IHttpRequest:()=>nP.HttpRequest,getHttpHandlerExtensionConfiguration:()=>_Z,isValidHostname:()=>dP,resolveHttpHandlerRuntimeConfig:()=>vZ});lP.exports=yZ(rP);var _Z=To(t=>{let e=t.httpHandler;return{setHttpHandler(r){e=r},httpHandler(){return e},updateHttpClientConfig(r,n){e.updateHttpClientConfig(r,n)},httpHandlerConfigs(){return e.httpHandlerConfigs()}}},"getHttpHandlerExtensionConfiguration"),vZ=To(t=>({httpHandler:t.httpHandler()}),"resolveHttpHandlerRuntimeConfig"),nP=en(),oP=class{constructor({name:e,kind:r=nP.FieldPosition.HEADER,values:n=[]}){this.name=e,this.kind=r,this.values=n}add(e){this.values.push(e)}set(e){this.values=e}remove(e){this.values=this.values.filter(r=>r!==e)}toString(){return this.values.map(e=>e.includes(",")||e.includes(" ")?`"${e}"`:e).join(", ")}get(){return this.values}};To(oP,"Field");var EZ=oP,iP=class{constructor({fields:e=[],encoding:r="utf-8"}){this.entries={},e.forEach(this.setField.bind(this)),this.encoding=r}setField(e){this.entries[e.name.toLowerCase()]=e}getField(e){return this.entries[e.toLowerCase()]}removeField(e){delete this.entries[e.toLowerCase()]}getByType(e){return Object.values(this.entries).filter(r=>r.kind===e)}};To(iP,"Fields");var CZ=iP,sP=class J_{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){let r=new J_({...e,headers:{...e.headers}});return r.query&&(r.query=aP(r.query)),r}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return J_.clone(this)}};To(sP,"HttpRequest");var SZ=sP;function aP(t){return Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}To(aP,"cloneQuery");var cP=class{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};To(cP,"HttpResponse");var TZ=cP;function dP(t){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(t)}To(dP,"isValidHostname")});var pP=g((Zqe,uP)=>{function Nn(t){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:t}),this.done=!1}Nn.prototype.next=function(){if(this.done)return{done:!0};var t=this._next();return t.done&&(this.done=!0),t};typeof Symbol<"u"&&(Nn.prototype[Symbol.iterator]=function(){return this});Nn.of=function(){var t=arguments,e=t.length,r=0;return new Nn(function(){return r>=e?{done:!0}:{done:!1,value:t[r++]}})};Nn.empty=function(){var t=new Nn(null);return t.done=!0,t};Nn.is=function(t){return t instanceof Nn?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};uP.exports=Nn});var X_=g((e1e,gP)=>{var mP=typeof ArrayBuffer<"u",hP=typeof Symbol<"u";function fP(t,e){var r,n,o,i,s;if(!t)throw new Error("obliterator/forEach: invalid iterable.");if(typeof e!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(t)||mP&&ArrayBuffer.isView(t)||typeof t=="string"||t.toString()==="[object Arguments]"){for(o=0,i=t.length;o<i;o++)e(t[o],o);return}if(typeof t.forEach=="function"){t.forEach(e);return}if(hP&&Symbol.iterator in t&&typeof t.next!="function"&&(t=t[Symbol.iterator]()),typeof t.next=="function"){for(r=t,o=0;s=r.next(),s.done!==!0;)e(s.value,o),o++;return}for(n in t)t.hasOwnProperty(n)&&e(t[n],n)}fP.forEachWithNullKeys=function(t,e){var r,n,o,i,s;if(!t)throw new Error("obliterator/forEachWithNullKeys: invalid iterable.");if(typeof e!="function")throw new Error("obliterator/forEachWithNullKeys: expecting a callback.");if(Array.isArray(t)||mP&&ArrayBuffer.isView(t)||typeof t=="string"||t.toString()==="[object Arguments]"){for(o=0,i=t.length;o<i;o++)e(t[o],null);return}if(t instanceof Set){t.forEach(function(a){e(a,null)});return}if(typeof t.forEach=="function"){t.forEach(e);return}if(hP&&Symbol.iterator in t&&typeof t.next!="function"&&(t=t[Symbol.iterator]()),typeof t.next=="function"){for(r=t,o=0;s=r.next(),s.done!==!0;)e(s.value,null),o++;return}for(n in t)t.hasOwnProperty(n)&&e(t[n],n)};gP.exports=fP});var Z_=g(tn=>{var bZ=Math.pow(2,8)-1,AZ=Math.pow(2,16)-1,IZ=Math.pow(2,32)-1,RZ=Math.pow(2,7)-1,wZ=Math.pow(2,15)-1,PZ=Math.pow(2,31)-1;tn.getPointerArray=function(t){var e=t-1;return e<=bZ?Uint8Array:e<=AZ?Uint16Array:e<=IZ?Uint32Array:Float64Array};tn.getSignedPointerArray=function(t){var e=t-1;return e<=RZ?Int8Array:e<=wZ?Int16Array:e<=PZ?Int32Array:Float64Array};tn.getNumberType=function(t){return t===(t|0)?Math.sign(t)===-1?t<=127&&t>=-128?Int8Array:t<=32767&&t>=-32768?Int16Array:Int32Array:t<=255?Uint8Array:t<=65535?Uint16Array:Uint32Array:Float64Array};var OZ={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};tn.getMinimalRepresentation=function(t,e){var r=null,n=0,o,i,s,a,c;for(a=0,c=t.length;a<c;a++)s=e?e(t[a]):t[a],i=tn.getNumberType(s),o=OZ[i.name],o>n&&(n=o,r=i);return r};tn.isTypedArray=function(t){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(t)};tn.concat=function(){var t=0,e,r,n;for(e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=new arguments[0].constructor(t);for(e=0,r=0;e<n;e++)o.set(arguments[e],r),r+=arguments[e].length;return o};tn.indices=function(t){for(var e=tn.getPointerArray(t),r=new e(t),n=0;n<t;n++)r[n]=n;return r}});var vP=g(Rd=>{var yP=X_(),_P=Z_();function xZ(t){return Array.isArray(t)||_P.isTypedArray(t)}function ev(t){if(typeof t.length=="number")return t.length;if(typeof t.size=="number")return t.size}function NZ(t){var e=ev(t),r=typeof e=="number"?new Array(e):[],n=0;return yP(t,function(o){r[n++]=o}),r}function DZ(t){var e=ev(t),r=typeof e=="number"?_P.getPointerArray(e):Array,n=typeof e=="number"?new Array(e):[],o=typeof e=="number"?new r(e):[],i=0;return yP(t,function(s){n[i]=s,o[i]=i++}),[n,o]}Rd.isArrayLike=xZ;Rd.guessLength=ev;Rd.toArray=NZ;Rd.toArrayWithIndices=DZ});var CP=g((n1e,EP)=>{var tv=pP(),kZ=X_(),MZ=Z_(),LZ=vP();function it(t,e,r){if(arguments.length<2&&(r=t,t=null,e=null),this.capacity=r,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-cache: capacity should be positive number.");var n=MZ.getPointerArray(r);this.forward=new n(r),this.backward=new n(r),this.K=typeof t=="function"?new t(r):new Array(r),this.V=typeof e=="function"?new e(r):new Array(r),this.size=0,this.head=0,this.tail=0,this.items={}}it.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items={}};it.prototype.splayOnTop=function(t){var e=this.head;if(this.head===t)return this;var r=this.backward[t],n=this.forward[t];return this.tail===t?this.tail=r:this.backward[n]=r,this.forward[r]=n,this.backward[e]=t,this.head=t,this.forward[t]=e,this};it.prototype.set=function(t,e){var r=this.items[t];if(typeof r<"u"){this.splayOnTop(r),this.V[r]=e;return}this.size<this.capacity?r=this.size++:(r=this.tail,this.tail=this.backward[r],delete this.items[this.K[r]]),this.items[t]=r,this.K[r]=t,this.V[r]=e,this.forward[r]=this.head,this.backward[this.head]=r,this.head=r};it.prototype.setpop=function(t,e){var r=null,n=null,o=this.items[t];return typeof o<"u"?(this.splayOnTop(o),r=this.V[o],this.V[o]=e,{evicted:!1,key:t,value:r}):(this.size<this.capacity?o=this.size++:(o=this.tail,this.tail=this.backward[o],r=this.V[o],n=this.K[o],delete this.items[this.K[o]]),this.items[t]=o,this.K[o]=t,this.V[o]=e,this.forward[o]=this.head,this.backward[this.head]=o,this.head=o,n?{evicted:!0,key:n,value:r}:null)};it.prototype.has=function(t){return t in this.items};it.prototype.get=function(t){var e=this.items[t];if(!(typeof e>"u"))return this.splayOnTop(e),this.V[e]};it.prototype.peek=function(t){var e=this.items[t];if(!(typeof e>"u"))return this.V[e]};it.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var r=0,n=this.size,o=this.head,i=this.K,s=this.V,a=this.forward;r<n;)t.call(e,s[o],i[o],this),o=a[o],r++};it.prototype.keys=function(){var t=0,e=this.size,r=this.head,n=this.K,o=this.forward;return new tv(function(){if(t>=e)return{done:!0};var i=n[r];return t++,t<e&&(r=o[r]),{done:!1,value:i}})};it.prototype.values=function(){var t=0,e=this.size,r=this.head,n=this.V,o=this.forward;return new tv(function(){if(t>=e)return{done:!0};var i=n[r];return t++,t<e&&(r=o[r]),{done:!1,value:i}})};it.prototype.entries=function(){var t=0,e=this.size,r=this.head,n=this.K,o=this.V,i=this.forward;return new tv(function(){if(t>=e)return{done:!0};var s=n[r],a=o[r];return t++,t<e&&(r=i[r]),{done:!1,value:[s,a]}})};typeof Symbol<"u"&&(it.prototype[Symbol.iterator]=it.prototype.entries);it.prototype.inspect=function(){for(var t=new Map,e=this.entries(),r;r=e.next(),!r.done;)t.set(r.value[0],r.value[1]);return Object.defineProperty(t,"constructor",{value:it,enumerable:!1}),t};typeof Symbol<"u"&&(it.prototype[Symbol.for("nodejs.util.inspect.custom")]=it.prototype.inspect);it.from=function(t,e,r,n){if(arguments.length<2){if(n=LZ.guessLength(t),typeof n!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(n=e,e=null,r=null);var o=new it(e,r,n);return kZ(t,function(i,s){o.set(s,i)}),o};EP.exports=it});var IP=g((i1e,AP)=>{"use strict";var UZ=Object.create,wd=Object.defineProperty,FZ=Object.getOwnPropertyDescriptor,BZ=Object.getOwnPropertyNames,qZ=Object.getPrototypeOf,HZ=Object.prototype.hasOwnProperty,jZ=(t,e)=>wd(t,"name",{value:e,configurable:!0}),GZ=(t,e)=>{for(var r in e)wd(t,r,{get:e[r],enumerable:!0})},SP=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of BZ(e))!HZ.call(t,o)&&o!==r&&wd(t,o,{get:()=>e[o],enumerable:!(n=FZ(e,o))||n.enumerable});return t},$Z=(t,e,r)=>(r=t!=null?UZ(qZ(t)):{},SP(e||!t||!t.__esModule?wd(r,"default",{value:t,enumerable:!0}):r,t)),zZ=t=>SP(wd({},"__esModule",{value:!0}),t),TP={};GZ(TP,{EndpointCache:()=>KZ});AP.exports=zZ(TP);var VZ=$Z(CP()),bP=class{constructor(e){this.cache=new VZ.default(e)}getEndpoint(e){let r=this.get(e);if(!r||r.length===0)return;let n=r.map(o=>o.Address);return n[Math.floor(Math.random()*n.length)]}get(e){if(!this.has(e))return;let r=this.cache.get(e);if(!r)return;let n=Date.now(),o=r.filter(i=>n<i.Expires);if(o.length===0){this.delete(e);return}return o}set(e,r){let n=Date.now();this.cache.set(e,r.map(({Address:o,CachePeriodInMinutes:i})=>({Address:o,Expires:n+i*60*1e3})))}delete(e){this.cache.set(e,[])}has(e){if(!this.cache.has(e))return!1;let r=this.cache.peek(e);return r?r.length>0:!1}clear(){this.cache.clear()}};jZ(bP,"EndpointCache");var KZ=bP});var ov=g((s1e,xP)=>{"use strict";var Sm=Object.defineProperty,WZ=Object.getOwnPropertyDescriptor,QZ=Object.getOwnPropertyNames,YZ=Object.prototype.hasOwnProperty,bo=(t,e)=>Sm(t,"name",{value:e,configurable:!0}),JZ=(t,e)=>{for(var r in e)Sm(t,r,{get:e[r],enumerable:!0})},XZ=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of QZ(e))!YZ.call(t,o)&&o!==r&&Sm(t,o,{get:()=>e[o],enumerable:!(n=WZ(e,o))||n.enumerable});return t},ZZ=t=>XZ(Sm({},"__esModule",{value:!0}),t),OP={};JZ(OP,{NODE_ENDPOINT_DISCOVERY_CONFIG_OPTIONS:()=>eee,endpointDiscoveryMiddlewareOptions:()=>Tm,getEndpointDiscoveryOptionalPlugin:()=>iee,getEndpointDiscoveryPlugin:()=>nee,getEndpointDiscoveryRequiredPlugin:()=>oee,resolveEndpointDiscoveryConfig:()=>aee});xP.exports=ZZ(OP);var RP=["AWS_ENABLE_ENDPOINT_DISCOVERY","AWS_ENDPOINT_DISCOVERY_ENABLED"],rv="endpoint_discovery_enabled",wP=bo(t=>["false","0"].indexOf(t)>=0,"isFalsy"),eee={environmentVariableSelector:t=>{for(let e=0;e<RP.length;e++){let r=RP[e];if(r in t){let n=t[r];if(n==="")throw Error(`Environment variable ${r} can't be empty of undefined, got "${n}"`);return!wP(n)}}},configFileSelector:t=>{if(rv in t){let e=t[rv];if(e===void 0)throw Error(`Shared config entry ${rv} can't be undefined, got "${e}"`);return!wP(e)}},default:void 0},tee=De(),ree=bo(async(t,e,r)=>{let{accessKeyId:n}=await e.credentials(),{identifiers:o}=r;return JSON.stringify({...n&&{accessKeyId:n},...o&&{commandName:t,identifiers:Object.entries(o).sort().reduce((i,[s,a])=>({...i,[s]:a}),{})}})},"getCacheKey"),Dn={},PP=bo(async(t,e)=>new Promise((r,n)=>{let{endpointCache:o}=t,{cacheKey:i,commandName:s,identifiers:a}=e,c=o.get(i);if(c&&c.length===1&&c[0].Address==="")e.isDiscoveredEndpointRequired?(Dn[i]||(Dn[i]=[]),Dn[i].push({resolve:r,reject:n})):r();else if(c&&c.length>0)r();else{let d=[{Address:"",CachePeriodInMinutes:1}];o.set(i,d);let u=new e.endpointDiscoveryCommandCtor({Operation:s.slice(0,-7),Identifiers:a});u.resolveMiddleware(e.clientStack,t,e.options)(u).then(f=>{o.set(i,f.output.Endpoints),Dn[i]&&(Dn[i].forEach(({resolve:h})=>{h()}),delete Dn[i]),r()}).catch(f=>{o.delete(i);let h=Object.assign(new Error("The operation to discover endpoint failed. Please retry, or provide a custom endpoint and disable endpoint discovery to proceed."),{reason:f});Dn[i]&&(Dn[i].forEach(({reject:y})=>{y(h)}),delete Dn[i]),e.isDiscoveredEndpointRequired?n(h):(o.set(i,d),r())})}}),"updateDiscoveredEndpointInCache"),nv=bo((t,e)=>(r,n)=>async o=>{if(t.isCustomEndpoint){if(t.isClientEndpointDiscoveryEnabled)throw new Error("Custom endpoint is supplied; endpointDiscoveryEnabled must not be true.");return r(o)}let{endpointDiscoveryCommandCtor:i}=t,{isDiscoveredEndpointRequired:s,identifiers:a}=e,c=n.clientName,d=n.commandName,u=await t.endpointDiscoveryEnabled(),m=await ree(d,t,{identifiers:a});if(s){if(u===!1)throw new Error(`Endpoint Discovery is disabled but ${d} on ${c} requires it. Please check your configurations.`);await PP(t,{...e,commandName:d,cacheKey:m,endpointDiscoveryCommandCtor:i})}else u&&PP(t,{...e,commandName:d,cacheKey:m,endpointDiscoveryCommandCtor:i});let{request:f}=o;if(m&&tee.HttpRequest.isInstance(f)){let h=t.endpointCache.getEndpoint(m);h&&(f.hostname=h)}return r(o)},"endpointDiscoveryMiddleware"),Tm={name:"endpointDiscoveryMiddleware",step:"build",tags:["ENDPOINT_DISCOVERY"],override:!0},nee=bo((t,e)=>({applyToStack:r=>{r.add(nv(t,e),Tm)}}),"getEndpointDiscoveryPlugin"),oee=bo((t,e)=>({applyToStack:r=>{r.add(nv(t,{...e,isDiscoveredEndpointRequired:!0}),Tm)}}),"getEndpointDiscoveryRequiredPlugin"),iee=bo((t,e)=>({applyToStack:r=>{r.add(nv(t,{...e,isDiscoveredEndpointRequired:!1}),Tm)}}),"getEndpointDiscoveryOptionalPlugin"),see=IP(),aee=bo((t,{endpointDiscoveryCommandCtor:e})=>({...t,endpointDiscoveryCommandCtor:e,endpointCache:new see.EndpointCache(t.endpointCacheSize??1e3),endpointDiscoveryEnabled:t.endpointDiscoveryEnabled!==void 0?()=>Promise.resolve(t.endpointDiscoveryEnabled):t.endpointDiscoveryEnabledProvider,isClientEndpointDiscoveryEnabled:t.endpointDiscoveryEnabled!==void 0}),"resolveEndpointDiscoveryConfig")});var ra=g((a1e,LP)=>{"use strict";var bm=Object.defineProperty,cee=Object.getOwnPropertyDescriptor,dee=Object.getOwnPropertyNames,lee=Object.prototype.hasOwnProperty,iv=(t,e)=>bm(t,"name",{value:e,configurable:!0}),uee=(t,e)=>{for(var r in e)bm(t,r,{get:e[r],enumerable:!0})},pee=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of dee(e))!lee.call(t,o)&&o!==r&&bm(t,o,{get:()=>e[o],enumerable:!(n=cee(e,o))||n.enumerable});return t},mee=t=>pee(bm({},"__esModule",{value:!0}),t),NP={};uee(NP,{getHostHeaderPlugin:()=>fee,hostHeaderMiddleware:()=>kP,hostHeaderMiddlewareOptions:()=>MP,resolveHostHeaderConfig:()=>DP});LP.exports=mee(NP);var hee=De();function DP(t){return t}iv(DP,"resolveHostHeaderConfig");var kP=iv(t=>e=>async r=>{if(!hee.HttpRequest.isInstance(r.request))return e(r);let{request:n}=r,{handlerProtocol:o=""}=t.requestHandler.metadata||{};if(o.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let i=n.hostname;n.port!=null&&(i+=`:${n.port}`),n.headers.host=i}return e(r)},"hostHeaderMiddleware"),MP={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},fee=iv(t=>({applyToStack:e=>{e.add(kP(t),MP)}}),"getHostHeaderPlugin")});var na=g((c1e,HP)=>{"use strict";var Am=Object.defineProperty,gee=Object.getOwnPropertyDescriptor,yee=Object.getOwnPropertyNames,_ee=Object.prototype.hasOwnProperty,UP=(t,e)=>Am(t,"name",{value:e,configurable:!0}),vee=(t,e)=>{for(var r in e)Am(t,r,{get:e[r],enumerable:!0})},Eee=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of yee(e))!_ee.call(t,o)&&o!==r&&Am(t,o,{get:()=>e[o],enumerable:!(n=gee(e,o))||n.enumerable});return t},Cee=t=>Eee(Am({},"__esModule",{value:!0}),t),FP={};vee(FP,{getLoggerPlugin:()=>See,loggerMiddleware:()=>BP,loggerMiddlewareOptions:()=>qP});HP.exports=Cee(FP);var BP=UP(()=>(t,e)=>async r=>{var n,o;try{let i=await t(r),{clientName:s,commandName:a,logger:c,dynamoDbDocumentClientOptions:d={}}=e,{overrideInputFilterSensitiveLog:u,overrideOutputFilterSensitiveLog:m}=d,f=u??e.inputFilterSensitiveLog,h=m??e.outputFilterSensitiveLog,{$metadata:y,...E}=i.output;return(n=c?.info)==null||n.call(c,{clientName:s,commandName:a,input:f(r.input),output:h(E),metadata:y}),i}catch(i){let{clientName:s,commandName:a,logger:c,dynamoDbDocumentClientOptions:d={}}=e,{overrideInputFilterSensitiveLog:u}=d,m=u??e.inputFilterSensitiveLog;throw(o=c?.error)==null||o.call(c,{clientName:s,commandName:a,input:m(r.input),error:i,metadata:i.$metadata}),i}},"loggerMiddleware"),qP={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},See=UP(t=>({applyToStack:e=>{e.add(BP(),qP)}}),"getLoggerPlugin")});var oa=g((d1e,VP)=>{"use strict";var Im=Object.defineProperty,Tee=Object.getOwnPropertyDescriptor,bee=Object.getOwnPropertyNames,Aee=Object.prototype.hasOwnProperty,sv=(t,e)=>Im(t,"name",{value:e,configurable:!0}),Iee=(t,e)=>{for(var r in e)Im(t,r,{get:e[r],enumerable:!0})},Ree=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of bee(e))!Aee.call(t,o)&&o!==r&&Im(t,o,{get:()=>e[o],enumerable:!(n=Tee(e,o))||n.enumerable});return t},wee=t=>Ree(Im({},"__esModule",{value:!0}),t),GP={};Iee(GP,{addRecursionDetectionMiddlewareOptions:()=>zP,getRecursionDetectionPlugin:()=>Nee,recursionDetectionMiddleware:()=>$P});VP.exports=wee(GP);var Pee=De(),jP="X-Amzn-Trace-Id",Oee="AWS_LAMBDA_FUNCTION_NAME",xee="_X_AMZN_TRACE_ID",$P=sv(t=>e=>async r=>{let{request:n}=r;if(!Pee.HttpRequest.isInstance(n)||t.runtime!=="node"||n.headers.hasOwnProperty(jP))return e(r);let o=process.env[Oee],i=process.env[xee],s=sv(a=>typeof a=="string"&&a.length>0,"nonEmptyString");return s(o)&&s(i)&&(n.headers[jP]=i),e({...r,request:n})},"recursionDetectionMiddleware"),zP={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Nee=sv(t=>({applyToStack:e=>{e.add($P(t),zP)}}),"getRecursionDetectionPlugin")});var Vi=g((p1e,nO)=>{var Rm=Object.defineProperty,Dee=Object.getOwnPropertyDescriptor,kee=Object.getOwnPropertyNames,Mee=Object.prototype.hasOwnProperty,ve=(t,e)=>Rm(t,"name",{value:e,configurable:!0}),Lee=(t,e)=>{for(var r in e)Rm(t,r,{get:e[r],enumerable:!0})},Uee=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of kee(e))!Mee.call(t,o)&&o!==r&&Rm(t,o,{get:()=>e[o],enumerable:!(n=Dee(e,o))||n.enumerable});return t},Fee=t=>Uee(Rm({},"__esModule",{value:!0}),t),KP={};Lee(KP,{EndpointCache:()=>Bee,EndpointError:()=>Wt,customEndpointFunctions:()=>cv,isIpAddress:()=>QP,isValidHostLabel:()=>lv,resolveEndpoint:()=>ote});nO.exports=Fee(KP);var WP=class{constructor({size:e,params:r}){this.data=new Map,this.parameters=[],this.capacity=e??50,r&&(this.parameters=r)}get(e,r){let n=this.hash(e);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let o=this.data.keys(),i=0;for(;;){let{value:s,done:a}=o.next();if(this.data.delete(s),a||++i>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(e){let r="",{parameters:n}=this;if(n.length===0)return!1;for(let o of n){let i=String(e[o]??"");if(i.includes("|;"))return!1;r+=i+"|;"}return r}};ve(WP,"EndpointCache");var Bee=WP,qee=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),QP=ve(t=>qee.test(t)||t.startsWith("[")&&t.endsWith("]"),"isIpAddress"),Hee=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),lv=ve((t,e=!1)=>{if(!e)return Hee.test(t);let r=t.split(".");for(let n of r)if(!lv(n))return!1;return!0},"isValidHostLabel"),cv={},Pd="endpoints";function kn(t){return typeof t!="object"||t==null?t:"ref"in t?`$${kn(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(kn).join(", ")})`:JSON.stringify(t,null,2)}ve(kn,"toDebugString");var YP=class extends Error{constructor(e){super(e),this.name="EndpointError"}};ve(YP,"EndpointError");var Wt=YP,jee=ve((t,e)=>t===e,"booleanEquals"),Gee=ve(t=>{let e=t.split("."),r=[];for(let n of e){let o=n.indexOf("[");if(o!==-1){if(n.indexOf("]")!==n.length-1)throw new Wt(`Path: '${t}' does not end with ']'`);let i=n.slice(o+1,-1);if(Number.isNaN(parseInt(i)))throw new Wt(`Invalid array index: '${i}' in path: '${t}'`);o!==0&&r.push(n.slice(0,o)),r.push(i)}else r.push(n)}return r},"getAttrPathList"),JP=ve((t,e)=>Gee(e).reduce((r,n)=>{if(typeof r!="object")throw new Wt(`Index '${n}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},t),"getAttr"),$ee=ve(t=>t!=null,"isSet"),zee=ve(t=>!t,"not"),dv=en(),av={[dv.EndpointURLScheme.HTTP]:80,[dv.EndpointURLScheme.HTTPS]:443},Vee=ve(t=>{let e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){let{hostname:f,port:h,protocol:y="",path:E="",query:A={}}=t,w=new URL(`${y}//${f}${h?`:${h}`:""}${E}`);return w.search=Object.entries(A).map(([x,K])=>`${x}=${K}`).join("&"),w}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;let r=e.href,{host:n,hostname:o,pathname:i,protocol:s,search:a}=e;if(a)return null;let c=s.slice(0,-1);if(!Object.values(dv.EndpointURLScheme).includes(c))return null;let d=QP(o),u=r.includes(`${n}:${av[c]}`)||typeof t=="string"&&t.includes(`${n}:${av[c]}`),m=`${n}${u?`:${av[c]}`:""}`;return{scheme:c,authority:m,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:d}},"parseURL"),Kee=ve((t,e)=>t===e,"stringEquals"),Wee=ve((t,e,r,n)=>e>=r||t.length<r?null:n?t.substring(t.length-r,t.length-e):t.substring(e,r),"substring"),Qee=ve(t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),"uriEncode"),Yee={booleanEquals:jee,getAttr:JP,isSet:$ee,isValidHostLabel:lv,not:zee,parseURL:Vee,stringEquals:Kee,substring:Wee,uriEncode:Qee},XP=ve((t,e)=>{let r=[],n={...e.endpointParams,...e.referenceRecord},o=0;for(;o<t.length;){let i=t.indexOf("{",o);if(i===-1){r.push(t.slice(o));break}r.push(t.slice(o,i));let s=t.indexOf("}",i);if(s===-1){r.push(t.slice(i));break}t[i+1]==="{"&&t[s+1]==="}"&&(r.push(t.slice(i+1,s)),o=s+2);let a=t.substring(i+1,s);if(a.includes("#")){let[c,d]=a.split("#");r.push(JP(n[c],d))}else r.push(n[a]);o=s+1}return r.join("")},"evaluateTemplate"),Jee=ve(({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],"getReferenceValue"),wm=ve((t,e,r)=>{if(typeof t=="string")return XP(t,r);if(t.fn)return ZP(t,r);if(t.ref)return Jee(t,r);throw new Wt(`'${e}': ${String(t)} is not a string, function or reference.`)},"evaluateExpression"),ZP=ve(({fn:t,argv:e},r)=>{let n=e.map(i=>["boolean","number"].includes(typeof i)?i:wm(i,"arg",r)),o=t.split(".");return o[0]in cv&&o[1]!=null?cv[o[0]][o[1]](...n):Yee[t](...n)},"callFunction"),Xee=ve(({assign:t,...e},r)=>{var n,o;if(t&&t in r.referenceRecord)throw new Wt(`'${t}' is already defined in Reference Record.`);let i=ZP(e,r);return(o=(n=r.logger)==null?void 0:n.debug)==null||o.call(n,`${Pd} evaluateCondition: ${kn(e)} = ${kn(i)}`),{result:i===""?!0:!!i,...t!=null&&{toAssign:{name:t,value:i}}}},"evaluateCondition"),uv=ve((t=[],e)=>{var r,n;let o={};for(let i of t){let{result:s,toAssign:a}=Xee(i,{...e,referenceRecord:{...e.referenceRecord,...o}});if(!s)return{result:s};a&&(o[a.name]=a.value,(n=(r=e.logger)==null?void 0:r.debug)==null||n.call(r,`${Pd} assign: ${a.name} := ${kn(a.value)}`))}return{result:!0,referenceRecord:o}},"evaluateConditions"),Zee=ve((t,e)=>Object.entries(t).reduce((r,[n,o])=>({...r,[n]:o.map(i=>{let s=wm(i,"Header value entry",e);if(typeof s!="string")throw new Wt(`Header '${n}' value '${s}' is not a string`);return s})}),{}),"getEndpointHeaders"),eO=ve((t,e)=>{if(Array.isArray(t))return t.map(r=>eO(r,e));switch(typeof t){case"string":return XP(t,e);case"object":if(t===null)throw new Wt(`Unexpected endpoint property: ${t}`);return tO(t,e);case"boolean":return t;default:throw new Wt(`Unexpected endpoint property type: ${typeof t}`)}},"getEndpointProperty"),tO=ve((t,e)=>Object.entries(t).reduce((r,[n,o])=>({...r,[n]:eO(o,e)}),{}),"getEndpointProperties"),ete=ve((t,e)=>{let r=wm(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new Wt(`Endpoint URL must be a string, got ${typeof r}`)},"getEndpointUrl"),tte=ve((t,e)=>{var r,n;let{conditions:o,endpoint:i}=t,{result:s,referenceRecord:a}=uv(o,e);if(!s)return;let c={...e,referenceRecord:{...e.referenceRecord,...a}},{url:d,properties:u,headers:m}=i;return(n=(r=e.logger)==null?void 0:r.debug)==null||n.call(r,`${Pd} Resolving endpoint from template: ${kn(i)}`),{...m!=null&&{headers:Zee(m,c)},...u!=null&&{properties:tO(u,c)},url:ete(d,c)}},"evaluateEndpointRule"),rte=ve((t,e)=>{let{conditions:r,error:n}=t,{result:o,referenceRecord:i}=uv(r,e);if(o)throw new Wt(wm(n,"Error",{...e,referenceRecord:{...e.referenceRecord,...i}}))},"evaluateErrorRule"),nte=ve((t,e)=>{let{conditions:r,rules:n}=t,{result:o,referenceRecord:i}=uv(r,e);if(o)return rO(n,{...e,referenceRecord:{...e.referenceRecord,...i}})},"evaluateTreeRule"),rO=ve((t,e)=>{for(let r of t)if(r.type==="endpoint"){let n=tte(r,e);if(n)return n}else if(r.type==="error")rte(r,e);else if(r.type==="tree"){let n=nte(r,e);if(n)return n}else throw new Wt(`Unknown endpoint rule: ${r}`);throw new Wt("Rules evaluation failed")},"evaluateRules"),ote=ve((t,e)=>{var r,n,o,i;let{endpointParams:s,logger:a}=e,{parameters:c,rules:d}=t;(n=(r=e.logger)==null?void 0:r.debug)==null||n.call(r,`${Pd} Initial EndpointParams: ${kn(s)}`);let u=Object.entries(c).filter(([,h])=>h.default!=null).map(([h,y])=>[h,y.default]);if(u.length>0)for(let[h,y]of u)s[h]=s[h]??y;let m=Object.entries(c).filter(([,h])=>h.required).map(([h])=>h);for(let h of m)if(s[h]==null)throw new Wt(`Missing required parameter: '${h}'`);let f=rO(d,{endpointParams:s,logger:a,referenceRecord:{}});return(i=(o=e.logger)==null?void 0:o.debug)==null||i.call(o,`${Pd} Resolved endpoint: ${kn(f)}`),f},"resolveEndpoint")});var Ki=g((m1e,mO)=>{"use strict";var Pm=Object.defineProperty,ite=Object.getOwnPropertyDescriptor,ste=Object.getOwnPropertyNames,ate=Object.prototype.hasOwnProperty,ia=(t,e)=>Pm(t,"name",{value:e,configurable:!0}),cte=(t,e)=>{for(var r in e)Pm(t,r,{get:e[r],enumerable:!0})},dte=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of ste(e))!ate.call(t,o)&&o!==r&&Pm(t,o,{get:()=>e[o],enumerable:!(n=ite(e,o))||n.enumerable});return t},lte=t=>dte(Pm({},"__esModule",{value:!0}),t),iO={};cte(iO,{ConditionObject:()=>be.ConditionObject,DeprecatedObject:()=>be.DeprecatedObject,EndpointError:()=>be.EndpointError,EndpointObject:()=>be.EndpointObject,EndpointObjectHeaders:()=>be.EndpointObjectHeaders,EndpointObjectProperties:()=>be.EndpointObjectProperties,EndpointParams:()=>be.EndpointParams,EndpointResolverOptions:()=>be.EndpointResolverOptions,EndpointRuleObject:()=>be.EndpointRuleObject,ErrorRuleObject:()=>be.ErrorRuleObject,EvaluateOptions:()=>be.EvaluateOptions,Expression:()=>be.Expression,FunctionArgv:()=>be.FunctionArgv,FunctionObject:()=>be.FunctionObject,FunctionReturn:()=>be.FunctionReturn,ParameterObject:()=>be.ParameterObject,ReferenceObject:()=>be.ReferenceObject,ReferenceRecord:()=>be.ReferenceRecord,RuleSetObject:()=>be.RuleSetObject,RuleSetRules:()=>be.RuleSetRules,TreeRuleObject:()=>be.TreeRuleObject,awsEndpointFunctions:()=>pO,getUserAgentPrefix:()=>hte,isIpAddress:()=>be.isIpAddress,partition:()=>lO,resolveEndpoint:()=>be.resolveEndpoint,setPartitionInfo:()=>uO,useDefaultPartitionInfo:()=>mte});mO.exports=lte(iO);var be=Vi(),sO=ia((t,e=!1)=>{if(e){for(let r of t.split("."))if(!sO(r))return!1;return!0}return!(!(0,be.isValidHostLabel)(t)||t.length<3||t.length>63||t!==t.toLowerCase()||(0,be.isIpAddress)(t))},"isVirtualHostableS3Bucket"),oO=":",ute="/",pte=ia(t=>{let e=t.split(oO);if(e.length<6)return null;let[r,n,o,i,s,...a]=e;if(r!=="arn"||n===""||o===""||a.join(oO)==="")return null;let c=a.map(d=>d.split(ute)).flat();return{partition:n,service:o,region:i,accountId:s,resourceId:c}},"parseArn"),aO={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],version:"1.1"},cO=aO,dO="",lO=ia(t=>{let{partitions:e}=cO;for(let n of e){let{regions:o,outputs:i}=n;for(let[s,a]of Object.entries(o))if(s===t)return{...i,...a}}for(let n of e){let{regionRegex:o,outputs:i}=n;if(new RegExp(o).test(t))return{...i}}let r=e.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},"partition"),uO=ia((t,e="")=>{cO=t,dO=e},"setPartitionInfo"),mte=ia(()=>{uO(aO,"")},"useDefaultPartitionInfo"),hte=ia(()=>dO,"getUserAgentPrefix"),pO={isVirtualHostableS3Bucket:sO,parseArn:pte,partition:lO};be.customEndpointFunctions.aws=pO});var sa=g((h1e,CO)=>{"use strict";var Om=Object.defineProperty,fte=Object.getOwnPropertyDescriptor,gte=Object.getOwnPropertyNames,yte=Object.prototype.hasOwnProperty,xm=(t,e)=>Om(t,"name",{value:e,configurable:!0}),_te=(t,e)=>{for(var r in e)Om(t,r,{get:e[r],enumerable:!0})},vte=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of gte(e))!yte.call(t,o)&&o!==r&&Om(t,o,{get:()=>e[o],enumerable:!(n=fte(e,o))||n.enumerable});return t},Ete=t=>vte(Om({},"__esModule",{value:!0}),t),yO={};_te(yO,{getUserAgentMiddlewareOptions:()=>EO,getUserAgentPlugin:()=>Ate,resolveUserAgentConfig:()=>_O,userAgentMiddleware:()=>vO});CO.exports=Ete(yO);function _O(t){return{...t,customUserAgent:typeof t.customUserAgent=="string"?[[t.customUserAgent]]:t.customUserAgent}}xm(_O,"resolveUserAgentConfig");var Cte=Ki(),Ste=De(),hO="user-agent",pv="x-amz-user-agent",fO=" ",mv="/",Tte=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,bte=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,gO="-",vO=xm(t=>(e,r)=>async n=>{var o,i;let{request:s}=n;if(!Ste.HttpRequest.isInstance(s))return e(n);let{headers:a}=s,c=((o=r?.userAgent)==null?void 0:o.map(hv))||[],d=(await t.defaultUserAgentProvider()).map(hv),u=((i=t?.customUserAgent)==null?void 0:i.map(hv))||[],m=(0,Cte.getUserAgentPrefix)(),f=(m?[m]:[]).concat([...d,...c,...u]).join(fO),h=[...d.filter(y=>y.startsWith("aws-sdk-")),...u].join(fO);return t.runtime!=="browser"?(h&&(a[pv]=a[pv]?`${a[hO]} ${h}`:h),a[hO]=f):a[pv]=f,e({...n,request:s})},"userAgentMiddleware"),hv=xm(t=>{var e;let r=t[0].split(mv).map(a=>a.replace(Tte,gO)).join(mv),n=(e=t[1])==null?void 0:e.replace(bte,gO),o=r.indexOf(mv),i=r.substring(0,o),s=r.substring(o+1);return i==="api"&&(s=s.toLowerCase()),[i,s,n].filter(a=>a&&a.length>0).reduce((a,c,d)=>{switch(d){case 0:return c;case 1:return`${a}/${c}`;default:return`${a}#${c}`}},"")},"escapeUserAgent"),EO={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Ate=xm(t=>({applyToStack:e=>{e.add(vO(t),EO)}}),"getUserAgentPlugin")});var IO=g((f1e,AO)=>{var Nm=Object.defineProperty,Ite=Object.getOwnPropertyDescriptor,Rte=Object.getOwnPropertyNames,wte=Object.prototype.hasOwnProperty,SO=(t,e)=>Nm(t,"name",{value:e,configurable:!0}),Pte=(t,e)=>{for(var r in e)Nm(t,r,{get:e[r],enumerable:!0})},Ote=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Rte(e))!wte.call(t,o)&&o!==r&&Nm(t,o,{get:()=>e[o],enumerable:!(n=Ite(e,o))||n.enumerable});return t},xte=t=>Ote(Nm({},"__esModule",{value:!0}),t),TO={};Pte(TO,{SelectorType:()=>bO,booleanSelector:()=>Nte,numberSelector:()=>Dte});AO.exports=xte(TO);var Nte=SO((t,e,r)=>{if(e in t){if(t[e]==="true")return!0;if(t[e]==="false")return!1;throw new Error(`Cannot load ${r} "${e}". Expected "true" or "false", got ${t[e]}.`)}},"booleanSelector"),Dte=SO((t,e,r)=>{if(!(e in t))return;let n=parseInt(t[e],10);if(Number.isNaN(n))throw new TypeError(`Cannot load ${r} '${e}'. Expected number, got '${t[e]}'.`);return n},"numberSelector"),bO=(t=>(t.ENV="env",t.CONFIG="shared config entry",t))(bO||{})});var hr=g((g1e,OO)=>{var Dm=Object.defineProperty,kte=Object.getOwnPropertyDescriptor,Mte=Object.getOwnPropertyNames,Lte=Object.prototype.hasOwnProperty,wO=(t,e)=>Dm(t,"name",{value:e,configurable:!0}),Ute=(t,e)=>{for(var r in e)Dm(t,r,{get:e[r],enumerable:!0})},Fte=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Mte(e))!Lte.call(t,o)&&o!==r&&Dm(t,o,{get:()=>e[o],enumerable:!(n=kte(e,o))||n.enumerable});return t},Bte=t=>Fte(Dm({},"__esModule",{value:!0}),t),PO={};Ute(PO,{getSmithyContext:()=>qte,normalizeProvider:()=>Hte});OO.exports=Bte(PO);var RO=en(),qte=wO(t=>t[RO.SMITHY_CONTEXT_KEY]||(t[RO.SMITHY_CONTEXT_KEY]={}),"getSmithyContext"),Hte=wO(t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e},"normalizeProvider")});var fr=g((y1e,HO)=>{var Mm=Object.defineProperty,jte=Object.getOwnPropertyDescriptor,Gte=Object.getOwnPropertyNames,$te=Object.prototype.hasOwnProperty,Lr=(t,e)=>Mm(t,"name",{value:e,configurable:!0}),zte=(t,e)=>{for(var r in e)Mm(t,r,{get:e[r],enumerable:!0})},Vte=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Gte(e))!$te.call(t,o)&&o!==r&&Mm(t,o,{get:()=>e[o],enumerable:!(n=jte(e,o))||n.enumerable});return t},Kte=t=>Vte(Mm({},"__esModule",{value:!0}),t),DO={};zte(DO,{CONFIG_USE_DUALSTACK_ENDPOINT:()=>MO,CONFIG_USE_FIPS_ENDPOINT:()=>UO,DEFAULT_USE_DUALSTACK_ENDPOINT:()=>Wte,DEFAULT_USE_FIPS_ENDPOINT:()=>Yte,ENV_USE_DUALSTACK_ENDPOINT:()=>kO,ENV_USE_FIPS_ENDPOINT:()=>LO,NODE_REGION_CONFIG_FILE_OPTIONS:()=>rre,NODE_REGION_CONFIG_OPTIONS:()=>tre,NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS:()=>Qte,NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS:()=>Jte,REGION_ENV_NAME:()=>FO,REGION_INI_NAME:()=>BO,getRegionInfo:()=>are,resolveCustomEndpointsConfig:()=>Xte,resolveEndpointsConfig:()=>ere,resolveRegionConfig:()=>nre});HO.exports=Kte(DO);var Ao=IO(),kO="AWS_USE_DUALSTACK_ENDPOINT",MO="use_dualstack_endpoint",Wte=!1,Qte={environmentVariableSelector:t=>(0,Ao.booleanSelector)(t,kO,Ao.SelectorType.ENV),configFileSelector:t=>(0,Ao.booleanSelector)(t,MO,Ao.SelectorType.CONFIG),default:!1},LO="AWS_USE_FIPS_ENDPOINT",UO="use_fips_endpoint",Yte=!1,Jte={environmentVariableSelector:t=>(0,Ao.booleanSelector)(t,LO,Ao.SelectorType.ENV),configFileSelector:t=>(0,Ao.booleanSelector)(t,UO,Ao.SelectorType.CONFIG),default:!1},km=hr(),Xte=Lr(t=>{let{endpoint:e,urlParser:r}=t;return{...t,tls:t.tls??!0,endpoint:(0,km.normalizeProvider)(typeof e=="string"?r(e):e),isCustomEndpoint:!0,useDualstackEndpoint:(0,km.normalizeProvider)(t.useDualstackEndpoint??!1)}},"resolveCustomEndpointsConfig"),Zte=Lr(async t=>{let{tls:e=!0}=t,r=await t.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");let o=await t.useDualstackEndpoint(),i=await t.useFipsEndpoint(),{hostname:s}=await t.regionInfoProvider(r,{useDualstackEndpoint:o,useFipsEndpoint:i})??{};if(!s)throw new Error("Cannot resolve hostname from client config");return t.urlParser(`${e?"https:":"http:"}//${s}`)},"getEndpointFromRegion"),ere=Lr(t=>{let e=(0,km.normalizeProvider)(t.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:n,urlParser:o}=t;return{...t,tls:t.tls??!0,endpoint:r?(0,km.normalizeProvider)(typeof r=="string"?o(r):r):()=>Zte({...t,useDualstackEndpoint:e,useFipsEndpoint:n}),isCustomEndpoint:!!r,useDualstackEndpoint:e}},"resolveEndpointsConfig"),FO="AWS_REGION",BO="region",tre={environmentVariableSelector:t=>t[FO],configFileSelector:t=>t[BO],default:()=>{throw new Error("Region is missing")}},rre={preferredFile:"credentials"},qO=Lr(t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),"isFipsRegion"),xO=Lr(t=>qO(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,"getRealRegion"),nre=Lr(t=>{let{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return{...t,region:async()=>{if(typeof e=="string")return xO(e);let n=await e();return xO(n)},useFipsEndpoint:async()=>{let n=typeof e=="string"?e:await e();return qO(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}},"resolveRegionConfig"),NO=Lr((t=[],{useFipsEndpoint:e,useDualstackEndpoint:r})=>{var n;return(n=t.find(({tags:o})=>e===o.includes("fips")&&r===o.includes("dualstack")))==null?void 0:n.hostname},"getHostnameFromVariants"),ore=Lr((t,{regionHostname:e,partitionHostname:r})=>e||(r?r.replace("{region}",t):void 0),"getResolvedHostname"),ire=Lr((t,{partitionHash:e})=>Object.keys(e||{}).find(r=>e[r].regions.includes(t))??"aws","getResolvedPartition"),sre=Lr((t,{signingRegion:e,regionRegex:r,useFipsEndpoint:n})=>{if(e)return e;if(n){let o=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),i=t.match(o);if(i)return i[0].slice(1,-1)}},"getResolvedSigningRegion"),are=Lr((t,{useFipsEndpoint:e=!1,useDualstackEndpoint:r=!1,signingService:n,regionHash:o,partitionHash:i})=>{var s,a,c,d,u;let m=ire(t,{partitionHash:i}),f=t in o?t:((s=i[m])==null?void 0:s.endpoint)??t,h={useFipsEndpoint:e,useDualstackEndpoint:r},y=NO((a=o[f])==null?void 0:a.variants,h),E=NO((c=i[m])==null?void 0:c.variants,h),A=ore(f,{regionHostname:y,partitionHostname:E});if(A===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:f,useFipsEndpoint:e,useDualstackEndpoint:r}}`);let w=sre(A,{signingRegion:(d=o[f])==null?void 0:d.signingRegion,regionRegex:i[m].regionRegex,useFipsEndpoint:e});return{partition:m,signingService:n,hostname:A,...w&&{signingRegion:w},...((u=o[f])==null?void 0:u.signingService)&&{signingService:o[f].signingService}}},"getRegionInfo")});function cre(t){let e=new Map;for(let r of t)e.set(r.schemeId,r);return e}var _1e,jO,Od,Lm=v(()=>{_1e=ae(en()),jO=ae(hr());Od=(t,e)=>(r,n)=>async o=>{let i=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,n,o.input)),s=cre(t.httpAuthSchemes),a=(0,jO.getSmithyContext)(n),c=[];for(let d of i){let u=s.get(d.schemeId);if(!u){c.push(`HttpAuthScheme \`${d.schemeId}\` was not enabled for this service.`);continue}let m=u.identityProvider(await e.identityProviderConfigProvider(t));if(!m){c.push(`HttpAuthScheme \`${d.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:f={},signingProperties:h={}}=d.propertiesExtractor?.(t,n)||{};d.identityProperties=Object.assign(d.identityProperties||{},f),d.signingProperties=Object.assign(d.signingProperties||{},h),a.selectedHttpAuthScheme={httpAuthOption:d,identity:await m(d.identityProperties),signer:u.signer};break}if(!a.selectedHttpAuthScheme)throw new Error(c.join(`
`));return r(o)}});var Lt=g((C1e,YO)=>{var Um=Object.defineProperty,dre=Object.getOwnPropertyDescriptor,lre=Object.getOwnPropertyNames,ure=Object.prototype.hasOwnProperty,Wi=(t,e)=>Um(t,"name",{value:e,configurable:!0}),pre=(t,e)=>{for(var r in e)Um(t,r,{get:e[r],enumerable:!0})},mre=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of lre(e))!ure.call(t,o)&&o!==r&&Um(t,o,{get:()=>e[o],enumerable:!(n=dre(e,o))||n.enumerable});return t},hre=t=>mre(Um({},"__esModule",{value:!0}),t),GO={};pre(GO,{CredentialsProviderError:()=>fre,ProviderError:()=>Fm,TokenProviderError:()=>gre,chain:()=>yre,fromStatic:()=>_re,memoize:()=>vre});YO.exports=hre(GO);var $O=class zO extends Error{constructor(e,r=!0){var n;let o,i=!0;typeof r=="boolean"?(o=void 0,i=r):r!=null&&typeof r=="object"&&(o=r.logger,i=r.tryNextLink??!0),super(e),this.name="ProviderError",this.tryNextLink=i,Object.setPrototypeOf(this,zO.prototype),(n=o?.debug)==null||n.call(o,`@smithy/property-provider ${i?"->":"(!)"} ${e}`)}static from(e,r=!0){return Object.assign(new this(e.message,r),e)}};Wi($O,"ProviderError");var Fm=$O,VO=class KO extends Fm{constructor(e,r=!0){super(e,r),this.name="CredentialsProviderError",Object.setPrototypeOf(this,KO.prototype)}};Wi(VO,"CredentialsProviderError");var fre=VO,WO=class QO extends Fm{constructor(e,r=!0){super(e,r),this.name="TokenProviderError",Object.setPrototypeOf(this,QO.prototype)}};Wi(WO,"TokenProviderError");var gre=WO,yre=Wi((...t)=>async()=>{if(t.length===0)throw new Fm("No providers in chain");let e;for(let r of t)try{return await r()}catch(n){if(e=n,n?.tryNextLink)continue;throw n}throw e},"chain"),_re=Wi(t=>()=>Promise.resolve(t),"fromStatic"),vre=Wi((t,e,r)=>{let n,o,i,s=!1,a=Wi(async()=>{o||(o=t());try{n=await o,i=!0,s=!1}finally{o=void 0}return n},"coalesceProvider");return e===void 0?async c=>((!i||c?.forceRefresh)&&(n=await a()),n):async c=>((!i||c?.forceRefresh)&&(n=await a()),s?n:r&&!r(n)?(s=!0,n):(e(n)&&await a(),n))},"memoize")});var aa=g(Bm=>{"use strict";Object.defineProperty(Bm,"__esModule",{value:!0});Bm.getHomeDir=void 0;var Ere=require("os"),Cre=require("path"),fv={},Sre=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",Tre=()=>{let{HOME:t,USERPROFILE:e,HOMEPATH:r,HOMEDRIVE:n=`C:${Cre.sep}`}=process.env;if(t)return t;if(e)return e;if(r)return`${n}${r}`;let o=Sre();return fv[o]||(fv[o]=(0,Ere.homedir)()),fv[o]};Bm.getHomeDir=Tre});var gv=g(qm=>{"use strict";Object.defineProperty(qm,"__esModule",{value:!0});qm.getSSOTokenFilepath=void 0;var bre=require("crypto"),Are=require("path"),Ire=aa(),Rre=t=>{let r=(0,bre.createHash)("sha1").update(t).digest("hex");return(0,Are.join)((0,Ire.getHomeDir)(),".aws","sso","cache",`${r}.json`)};qm.getSSOTokenFilepath=Rre});var JO=g(Hm=>{"use strict";Object.defineProperty(Hm,"__esModule",{value:!0});Hm.getSSOTokenFromFile=void 0;var wre=require("fs"),Pre=gv(),{readFile:Ore}=wre.promises,xre=async t=>{let e=(0,Pre.getSSOTokenFilepath)(t),r=await Ore(e,"utf8");return JSON.parse(r)};Hm.getSSOTokenFromFile=xre});var _v=g(jm=>{"use strict";Object.defineProperty(jm,"__esModule",{value:!0});jm.slurpFile=void 0;var Nre=require("fs"),{readFile:Dre}=Nre.promises,yv={},kre=(t,e)=>((!yv[t]||e?.ignoreCache)&&(yv[t]=Dre(t,"utf8")),yv[t]);jm.slurpFile=kre});var Io=g((I1e,Nd)=>{var zm=Object.defineProperty,Mre=Object.getOwnPropertyDescriptor,Lre=Object.getOwnPropertyNames,Ure=Object.prototype.hasOwnProperty,gr=(t,e)=>zm(t,"name",{value:e,configurable:!0}),Fre=(t,e)=>{for(var r in e)zm(t,r,{get:e[r],enumerable:!0})},vv=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Lre(e))!Ure.call(t,o)&&o!==r&&zm(t,o,{get:()=>e[o],enumerable:!(n=Mre(e,o))||n.enumerable});return t},Cv=(t,e,r)=>(vv(t,e,"default"),r&&vv(r,e,"default")),Bre=t=>vv(zm({},"__esModule",{value:!0}),t),xd={};Fre(xd,{CONFIG_PREFIX_SEPARATOR:()=>Qi,DEFAULT_PROFILE:()=>tx,ENV_PROFILE:()=>ex,getProfileName:()=>qre,loadSharedConfigFiles:()=>nx,loadSsoSessionData:()=>Zre,parseKnownFiles:()=>tne});Nd.exports=Bre(xd);Cv(xd,aa(),Nd.exports);var ex="AWS_PROFILE",tx="default",qre=gr(t=>t.profile||process.env[ex]||tx,"getProfileName");Cv(xd,gv(),Nd.exports);Cv(xd,JO(),Nd.exports);var Gm=en(),Hre=gr(t=>Object.entries(t).filter(([e])=>{let r=e.indexOf(Qi);return r===-1?!1:Object.values(Gm.IniSectionType).includes(e.substring(0,r))}).reduce((e,[r,n])=>{let o=r.indexOf(Qi),i=r.substring(0,o)===Gm.IniSectionType.PROFILE?r.substring(o+1):r;return e[i]=n,e},{...t.default&&{default:t.default}}),"getConfigData"),$m=require("path"),jre=aa(),Gre="AWS_CONFIG_FILE",rx=gr(()=>process.env[Gre]||(0,$m.join)((0,jre.getHomeDir)(),".aws","config"),"getConfigFilepath"),$re=aa(),zre="AWS_SHARED_CREDENTIALS_FILE",Vre=gr(()=>process.env[zre]||(0,$m.join)((0,$re.getHomeDir)(),".aws","credentials"),"getCredentialsFilepath"),Kre=aa(),Wre=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,Qre=["__proto__","profile __proto__"],Ev=gr(t=>{let e={},r,n;for(let o of t.split(/\r?\n/)){let i=o.split(/(^|\s)[;#]/)[0].trim();if(i[0]==="["&&i[i.length-1]==="]"){r=void 0,n=void 0;let a=i.substring(1,i.length-1),c=Wre.exec(a);if(c){let[,d,,u]=c;Object.values(Gm.IniSectionType).includes(d)&&(r=[d,u].join(Qi))}else r=a;if(Qre.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=i.indexOf("=");if(![0,-1].includes(a)){let[c,d]=[i.substring(0,a).trim(),i.substring(a+1).trim()];if(d==="")n=c;else{n&&o.trimStart()===o&&(n=void 0),e[r]=e[r]||{};let u=n?[n,c].join(Qi):c;e[r][u]=d}}}}return e},"parseIni"),XO=_v(),ZO=gr(()=>({}),"swallowError"),Qi=".",nx=gr(async(t={})=>{let{filepath:e=Vre(),configFilepath:r=rx()}=t,n=(0,Kre.getHomeDir)(),o="~/",i=e;e.startsWith(o)&&(i=(0,$m.join)(n,e.slice(2)));let s=r;r.startsWith(o)&&(s=(0,$m.join)(n,r.slice(2)));let a=await Promise.all([(0,XO.slurpFile)(s,{ignoreCache:t.ignoreCache}).then(Ev).then(Hre).catch(ZO),(0,XO.slurpFile)(i,{ignoreCache:t.ignoreCache}).then(Ev).catch(ZO)]);return{configFile:a[0],credentialsFile:a[1]}},"loadSharedConfigFiles"),Yre=gr(t=>Object.entries(t).filter(([e])=>e.startsWith(Gm.IniSectionType.SSO_SESSION+Qi)).reduce((e,[r,n])=>({...e,[r.substring(r.indexOf(Qi)+1)]:n}),{}),"getSsoSessionData"),Jre=_v(),Xre=gr(()=>({}),"swallowError"),Zre=gr(async(t={})=>(0,Jre.slurpFile)(t.configFilepath??rx()).then(Ev).then(Yre).catch(Xre),"loadSsoSessionData"),ene=gr((...t)=>{let e={};for(let r of t)for(let[n,o]of Object.entries(r))e[n]!==void 0?Object.assign(e[n],o):e[n]=o;return e},"mergeConfigFiles"),tne=gr(async t=>{let e=await nx(t);return ene(e.configFile,e.credentialsFile)},"parseKnownFiles")});var rn=g((R1e,sx)=>{var Vm=Object.defineProperty,rne=Object.getOwnPropertyDescriptor,nne=Object.getOwnPropertyNames,one=Object.prototype.hasOwnProperty,ca=(t,e)=>Vm(t,"name",{value:e,configurable:!0}),ine=(t,e)=>{for(var r in e)Vm(t,r,{get:e[r],enumerable:!0})},sne=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of nne(e))!one.call(t,o)&&o!==r&&Vm(t,o,{get:()=>e[o],enumerable:!(n=rne(e,o))||n.enumerable});return t},ane=t=>sne(Vm({},"__esModule",{value:!0}),t),ix={};ine(ix,{loadConfig:()=>pne});sx.exports=ane(ix);var Dd=Lt();function Sv(t){try{let e=new Set(Array.from(t.match(/([A-Z_]){3,}/g)??[]));return e.delete("CONFIG"),e.delete("CONFIG_PREFIX_SEPARATOR"),e.delete("ENV"),[...e].join(", ")}catch{return t}}ca(Sv,"getSelectorName");var cne=ca((t,e)=>async()=>{try{let r=t(process.env);if(r===void 0)throw new Error;return r}catch(r){throw new Dd.CredentialsProviderError(r.message||`Not found in ENV: ${Sv(t.toString())}`,{logger:e})}},"fromEnv"),ox=Io(),dne=ca((t,{preferredFile:e="config",...r}={})=>async()=>{let n=(0,ox.getProfileName)(r),{configFile:o,credentialsFile:i}=await(0,ox.loadSharedConfigFiles)(r),s=i[n]||{},a=o[n]||{},c=e==="config"?{...s,...a}:{...a,...s};try{let u=t(c,e==="config"?o:i);if(u===void 0)throw new Error;return u}catch(d){throw new Dd.CredentialsProviderError(d.message||`Not found in config files w/ profile [${n}]: ${Sv(t.toString())}`,{logger:r.logger})}},"fromSharedConfigFiles"),lne=ca(t=>typeof t=="function","isFunction"),une=ca(t=>lne(t)?async()=>await t():(0,Dd.fromStatic)(t),"fromStatic"),pne=ca(({environmentVariableSelector:t,configFileSelector:e,default:r},n={})=>(0,Dd.memoize)((0,Dd.chain)(cne(t),dne(e,n),une(r))),"loadConfig")});var lx=g(Km=>{"use strict";Object.defineProperty(Km,"__esModule",{value:!0});Km.getEndpointUrlConfig=void 0;var ax=Io(),cx="AWS_ENDPOINT_URL",dx="endpoint_url",mne=t=>({environmentVariableSelector:e=>{let r=t.split(" ").map(i=>i.toUpperCase()),n=e[[cx,...r].join("_")];if(n)return n;let o=e[cx];if(o)return o},configFileSelector:(e,r)=>{if(r&&e.services){let o=r[["services",e.services].join(ax.CONFIG_PREFIX_SEPARATOR)];if(o){let i=t.split(" ").map(a=>a.toLowerCase()),s=o[[i.join("_"),dx].join(ax.CONFIG_PREFIX_SEPARATOR)];if(s)return s}}let n=e[dx];if(n)return n},default:void 0});Km.getEndpointUrlConfig=mne});var Tv=g(Wm=>{"use strict";Object.defineProperty(Wm,"__esModule",{value:!0});Wm.getEndpointFromConfig=void 0;var hne=rn(),fne=lx(),gne=async t=>(0,hne.loadConfig)((0,fne.getEndpointUrlConfig)(t??""))();Wm.getEndpointFromConfig=gne});var hx=g((O1e,mx)=>{var Qm=Object.defineProperty,yne=Object.getOwnPropertyDescriptor,_ne=Object.getOwnPropertyNames,vne=Object.prototype.hasOwnProperty,Ene=(t,e)=>Qm(t,"name",{value:e,configurable:!0}),Cne=(t,e)=>{for(var r in e)Qm(t,r,{get:e[r],enumerable:!0})},Sne=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of _ne(e))!vne.call(t,o)&&o!==r&&Qm(t,o,{get:()=>e[o],enumerable:!(n=yne(e,o))||n.enumerable});return t},Tne=t=>Sne(Qm({},"__esModule",{value:!0}),t),ux={};Cne(ux,{parseQueryString:()=>px});mx.exports=Tne(ux);function px(t){let e={};if(t=t.replace(/^\?/,""),t)for(let r of t.split("&")){let[n,o=null]=r.split("=");n=decodeURIComponent(n),o&&(o=decodeURIComponent(o)),n in e?Array.isArray(e[n])?e[n].push(o):e[n]=[e[n],o]:e[n]=o}return e}Ene(px,"parseQueryString")});var Ro=g((x1e,yx)=>{var Ym=Object.defineProperty,bne=Object.getOwnPropertyDescriptor,Ane=Object.getOwnPropertyNames,Ine=Object.prototype.hasOwnProperty,Rne=(t,e)=>Ym(t,"name",{value:e,configurable:!0}),wne=(t,e)=>{for(var r in e)Ym(t,r,{get:e[r],enumerable:!0})},Pne=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Ane(e))!Ine.call(t,o)&&o!==r&&Ym(t,o,{get:()=>e[o],enumerable:!(n=bne(e,o))||n.enumerable});return t},One=t=>Pne(Ym({},"__esModule",{value:!0}),t),fx={};wne(fx,{parseUrl:()=>gx});yx.exports=One(fx);var xne=hx(),gx=Rne(t=>{if(typeof t=="string")return gx(new URL(t));let{hostname:e,pathname:r,port:n,protocol:o,search:i}=t,s;return i&&(s=(0,xne.parseQueryString)(i)),{hostname:e,port:n?parseInt(n):void 0,protocol:o,path:r,query:s}},"parseUrl")});var wo=g((N1e,bx)=>{var Jm=Object.defineProperty,Nne=Object.getOwnPropertyDescriptor,Dne=Object.getOwnPropertyNames,kne=Object.prototype.hasOwnProperty,bv=(t,e)=>Jm(t,"name",{value:e,configurable:!0}),Mne=(t,e)=>{for(var r in e)Jm(t,r,{get:e[r],enumerable:!0})},Lne=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Dne(e))!kne.call(t,o)&&o!==r&&Jm(t,o,{get:()=>e[o],enumerable:!(n=Nne(e,o))||n.enumerable});return t},Une=t=>Lne(Jm({},"__esModule",{value:!0}),t),_x={};Mne(_x,{deserializerMiddleware:()=>vx,deserializerMiddlewareOption:()=>Cx,getSerdePlugin:()=>Tx,serializerMiddleware:()=>Ex,serializerMiddlewareOption:()=>Sx});bx.exports=Une(_x);var vx=bv((t,e)=>r=>async n=>{let{response:o}=await r(n);try{let i=await e(o,t);return{response:o,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:o}),!("$metadata"in i)){let s="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";i.message+=`
  `+s,typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText)}throw i}},"deserializerMiddleware"),Ex=bv((t,e)=>(r,n)=>async o=>{var i;let s=(i=n.endpointV2)!=null&&i.url&&t.urlParser?async()=>t.urlParser(n.endpointV2.url):t.endpoint;if(!s)throw new Error("No valid endpoint provider available.");let a=await e(o.input,{...t,endpoint:s});return r({...o,request:a})},"serializerMiddleware"),Cx={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Sx={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Tx(t,e,r){return{applyToStack:n=>{n.add(vx(t,r),Cx),n.add(Ex(t,e),Sx)}}}bv(Tx,"getSerdePlugin")});var Po=g((D1e,xx)=>{var Zm=Object.defineProperty,Fne=Object.getOwnPropertyDescriptor,Bne=Object.getOwnPropertyNames,qne=Object.prototype.hasOwnProperty,Ur=(t,e)=>Zm(t,"name",{value:e,configurable:!0}),Hne=(t,e)=>{for(var r in e)Zm(t,r,{get:e[r],enumerable:!0})},jne=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Bne(e))!qne.call(t,o)&&o!==r&&Zm(t,o,{get:()=>e[o],enumerable:!(n=Fne(e,o))||n.enumerable});return t},Gne=t=>jne(Zm({},"__esModule",{value:!0}),t),Ix={};Hne(Ix,{endpointMiddleware:()=>Px,endpointMiddlewareOptions:()=>Ox,getEndpointFromInstructions:()=>Rx,getEndpointPlugin:()=>Zne,resolveEndpointConfig:()=>toe,resolveParams:()=>wx,toEndpointV1:()=>Av});xx.exports=Gne(Ix);var $ne=Ur(async t=>{let e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Qne(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Wne(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},"resolveParamsForS3"),zne=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Vne=/(\d+\.){3}\d+/,Kne=/\.\./,Wne=Ur(t=>zne.test(t)&&!Vne.test(t)&&!Kne.test(t),"isDnsCompatibleBucketName"),Qne=Ur(t=>{let[e,r,n,,,o]=t.split(":"),i=e==="arn"&&t.split(":").length>=6,s=!!(i&&r&&n&&o);if(i&&!s)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return s},"isArnBucketName"),Yne=Ur((t,e,r)=>{let n=Ur(async()=>{let o=r[t]??r[e];return typeof o=="function"?o():o},"configProvider");return t==="credentialScope"||e==="CredentialScope"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.credentialScope??o?.CredentialScope}:t==="accountId"||e==="AccountId"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.accountId??o?.AccountId}:t==="endpoint"||e==="endpoint"?async()=>{let o=await n();if(o&&typeof o=="object"){if("url"in o)return o.url.href;if("hostname"in o){let{protocol:i,hostname:s,port:a,path:c}=o;return`${i}//${s}${a?":"+a:""}${c}`}}return o}:n},"createConfigValueProvider"),Jne=Tv(),Ax=Ro(),Av=Ur(t=>typeof t=="object"?"url"in t?(0,Ax.parseUrl)(t.url):t:(0,Ax.parseUrl)(t),"toEndpointV1"),Rx=Ur(async(t,e,r,n)=>{if(!r.endpoint){let s;r.serviceConfiguredEndpoint?s=await r.serviceConfiguredEndpoint():s=await(0,Jne.getEndpointFromConfig)(r.serviceId),s&&(r.endpoint=()=>Promise.resolve(Av(s)))}let o=await wx(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(o,n)},"getEndpointFromInstructions"),wx=Ur(async(t,e,r)=>{var n;let o={},i=((n=e?.getEndpointParameterInstructions)==null?void 0:n.call(e))||{};for(let[s,a]of Object.entries(i))switch(a.type){case"staticContextParams":o[s]=a.value;break;case"contextParams":o[s]=t[a.name];break;case"clientContextParams":case"builtInParams":o[s]=await Yne(a.name,s,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(i).length===0&&Object.assign(o,r),String(r.serviceId).toLowerCase()==="s3"&&await $ne(o),o},"resolveParams"),Xm=hr(),Px=Ur(({config:t,instructions:e})=>(r,n)=>async o=>{var i,s,a;let c=await Rx(o.input,{getEndpointParameterInstructions(){return e}},{...t},n);n.endpointV2=c,n.authSchemes=(i=c.properties)==null?void 0:i.authSchemes;let d=(s=n.authSchemes)==null?void 0:s[0];if(d){n.signing_region=d.signingRegion,n.signing_service=d.signingName;let u=(0,Xm.getSmithyContext)(n),m=(a=u?.selectedHttpAuthScheme)==null?void 0:a.httpAuthOption;m&&(m.signingProperties=Object.assign(m.signingProperties||{},{signing_region:d.signingRegion,signingRegion:d.signingRegion,signing_service:d.signingName,signingName:d.signingName,signingRegionSet:d.signingRegionSet},d.properties))}return r({...o})},"endpointMiddleware"),Xne=wo(),Ox={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Xne.serializerMiddlewareOption.name},Zne=Ur((t,e)=>({applyToStack:r=>{r.addRelativeTo(Px({config:t,instructions:e}),Ox)}}),"getEndpointPlugin"),eoe=Tv(),toe=Ur(t=>{let e=t.tls??!0,{endpoint:r}=t,n=r!=null?async()=>Av(await(0,Xm.normalizeProvider)(r)()):void 0,i={...t,endpoint:n,tls:e,isCustomEndpoint:!!r,useDualstackEndpoint:(0,Xm.normalizeProvider)(t.useDualstackEndpoint??!1),useFipsEndpoint:(0,Xm.normalizeProvider)(t.useFipsEndpoint??!1)},s;return i.serviceConfiguredEndpoint=async()=>(t.serviceId&&!s&&(s=(0,eoe.getEndpointFromConfig)(t.serviceId)),s),i},"resolveEndpointConfig")});var Nx,Dx,roe,kx=v(()=>{Nx=ae(Po());Lm();Dx={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:Nx.endpointMiddlewareOptions.name},roe=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Od(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),Dx)}})});var Mx,Lx,noe,Ux=v(()=>{Mx=ae(wo());Lm();Lx={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:Mx.serializerMiddlewareOption.name},noe=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Od(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),Lx)}})});var Fx=v(()=>{Lm();kx();Ux()});var Bx,j1e,qx,ooe,ioe,Iv,Rv=v(()=>{Bx=ae(De()),j1e=ae(en()),qx=ae(hr()),ooe=t=>e=>{throw e},ioe=(t,e)=>{},Iv=t=>(e,r)=>async n=>{if(!Bx.HttpRequest.isInstance(n.request))return e(n);let i=(0,qx.getSmithyContext)(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:s={}},identity:a,signer:c}=i,d=await e({...n,request:await c.sign(n.request,a,s)}).catch((c.errorHandler||ooe)(s));return(c.successHandler||ioe)(d.response,s),d}});function kd(){return eh>th.length-16&&(Hx.default.randomFillSync(th),eh=0),th.slice(eh,eh+=16)}var Hx,th,eh,wv=v(()=>{Hx=ae(require("crypto")),th=new Uint8Array(256),eh=th.length});var jx,Gx=v(()=>{jx=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function soe(t){return typeof t=="string"&&jx.test(t)}var Oo,Md=v(()=>{Gx();Oo=soe});function Yi(t,e=0){return Et[t[e+0]]+Et[t[e+1]]+Et[t[e+2]]+Et[t[e+3]]+"-"+Et[t[e+4]]+Et[t[e+5]]+"-"+Et[t[e+6]]+Et[t[e+7]]+"-"+Et[t[e+8]]+Et[t[e+9]]+"-"+Et[t[e+10]]+Et[t[e+11]]+Et[t[e+12]]+Et[t[e+13]]+Et[t[e+14]]+Et[t[e+15]]}function aoe(t,e=0){let r=Yi(t,e);if(!Oo(r))throw TypeError("Stringified UUID is invalid");return r}var Et,$x,Ld=v(()=>{Md();Et=[];for(let t=0;t<256;++t)Et.push((t+256).toString(16).slice(1));$x=aoe});function coe(t,e,r){let n=e&&r||0,o=e||new Array(16);t=t||{};let i=t.node||zx,s=t.clockseq!==void 0?t.clockseq:Pv;if(i==null||s==null){let f=t.random||(t.rng||kd)();i==null&&(i=zx=[f[0]|1,f[1],f[2],f[3],f[4],f[5]]),s==null&&(s=Pv=(f[6]<<8|f[7])&16383)}let a=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:xv+1,d=a-Ov+(c-xv)/1e4;if(d<0&&t.clockseq===void 0&&(s=s+1&16383),(d<0||a>Ov)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ov=a,xv=c,Pv=s,a+=122192928e5;let u=((a&268435455)*1e4+c)%4294967296;o[n++]=u>>>24&255,o[n++]=u>>>16&255,o[n++]=u>>>8&255,o[n++]=u&255;let m=a/4294967296*1e4&268435455;o[n++]=m>>>8&255,o[n++]=m&255,o[n++]=m>>>24&15|16,o[n++]=m>>>16&255,o[n++]=s>>>8|128,o[n++]=s&255;for(let f=0;f<6;++f)o[n+f]=i[f];return e||Yi(o)}var zx,Pv,Ov,xv,Vx,Kx=v(()=>{wv();Ld();Ov=0,xv=0;Vx=coe});function doe(t){if(!Oo(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var rh,Nv=v(()=>{Md();rh=doe});function loe(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}function Ud(t,e,r){function n(o,i,s,a){var c;if(typeof o=="string"&&(o=loe(o)),typeof i=="string"&&(i=rh(i)),((c=i)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let d=new Uint8Array(16+o.length);if(d.set(i),d.set(o,i.length),d=r(d),d[6]=d[6]&15|e,d[8]=d[8]&63|128,s){a=a||0;for(let u=0;u<16;++u)s[a+u]=d[u];return s}return Yi(d)}try{n.name=t}catch{}return n.DNS=uoe,n.URL=poe,n}var uoe,poe,Dv=v(()=>{Ld();Nv();uoe="6ba7b810-9dad-11d1-80b4-00c04fd430c8",poe="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function moe(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),Wx.default.createHash("md5").update(t).digest()}var Wx,Qx,Yx=v(()=>{Wx=ae(require("crypto"));Qx=moe});var hoe,Jx,Xx=v(()=>{Dv();Yx();hoe=Ud("v3",48,Qx),Jx=hoe});var Zx,kv,eN=v(()=>{Zx=ae(require("crypto")),kv={randomUUID:Zx.default.randomUUID}});function foe(t,e,r){if(kv.randomUUID&&!e&&!t)return kv.randomUUID();t=t||{};let n=t.random||(t.rng||kd)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let o=0;o<16;++o)e[r+o]=n[o];return e}return Yi(n)}var tN,rN=v(()=>{eN();wv();Ld();tN=foe});function goe(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),nN.default.createHash("sha1").update(t).digest()}var nN,oN,iN=v(()=>{nN=ae(require("crypto"));oN=goe});var yoe,sN,aN=v(()=>{Dv();iN();yoe=Ud("v5",80,oN),sN=yoe});var cN,dN=v(()=>{cN="00000000-0000-0000-0000-000000000000"});function _oe(t){if(!Oo(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var lN,uN=v(()=>{Md();lN=_oe});var Mv={};gt(Mv,{NIL:()=>cN,parse:()=>rh,stringify:()=>$x,v1:()=>Vx,v3:()=>Jx,v4:()=>tN,v5:()=>sN,validate:()=>Oo,version:()=>lN});var Lv=v(()=>{Kx();Xx();rN();aN();dN();uN();Md();Ld();Nv()});var Uv=g((OHe,fN)=>{var nh=Object.defineProperty,voe=Object.getOwnPropertyDescriptor,Eoe=Object.getOwnPropertyNames,Coe=Object.prototype.hasOwnProperty,da=(t,e)=>nh(t,"name",{value:e,configurable:!0}),Soe=(t,e)=>{for(var r in e)nh(t,r,{get:e[r],enumerable:!0})},Toe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Eoe(e))!Coe.call(t,o)&&o!==r&&nh(t,o,{get:()=>e[o],enumerable:!(n=voe(e,o))||n.enumerable});return t},boe=t=>Toe(nh({},"__esModule",{value:!0}),t),pN={};Soe(pN,{isClockSkewCorrectedError:()=>mN,isClockSkewError:()=>xoe,isRetryableByTrait:()=>Ooe,isServerError:()=>Doe,isThrottlingError:()=>Noe,isTransientError:()=>hN});fN.exports=boe(pN);var Aoe=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],Ioe=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Roe=["TimeoutError","RequestTimeout","RequestTimeoutException"],woe=[500,502,503,504],Poe=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],Ooe=da(t=>t.$retryable!==void 0,"isRetryableByTrait"),xoe=da(t=>Aoe.includes(t.name),"isClockSkewError"),mN=da(t=>{var e;return(e=t.$metadata)==null?void 0:e.clockSkewCorrected},"isClockSkewCorrectedError"),Noe=da(t=>{var e,r;return((e=t.$metadata)==null?void 0:e.httpStatusCode)===429||Ioe.includes(t.name)||((r=t.$retryable)==null?void 0:r.throttling)==!0},"isThrottlingError"),hN=da(t=>{var e;return mN(t)||Roe.includes(t.name)||Poe.includes(t?.code||"")||woe.includes(((e=t.$metadata)==null?void 0:e.httpStatusCode)||0)},"isTransientError"),Doe=da(t=>{var e;if(((e=t.$metadata)==null?void 0:e.httpStatusCode)!==void 0){let r=t.$metadata.httpStatusCode;return 500<=r&&r<=599&&!hN(t)}return!1},"isServerError")});var Ji=g((MHe,wN)=>{var oh=Object.defineProperty,koe=Object.getOwnPropertyDescriptor,Moe=Object.getOwnPropertyNames,Loe=Object.prototype.hasOwnProperty,Fr=(t,e)=>oh(t,"name",{value:e,configurable:!0}),Uoe=(t,e)=>{for(var r in e)oh(t,r,{get:e[r],enumerable:!0})},Foe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Moe(e))!Loe.call(t,o)&&o!==r&&oh(t,o,{get:()=>e[o],enumerable:!(n=koe(e,o))||n.enumerable});return t},Boe=t=>Foe(oh({},"__esModule",{value:!0}),t),yN={};Uoe(yN,{AdaptiveRetryStrategy:()=>zoe,ConfiguredRetryStrategy:()=>Voe,DEFAULT_MAX_ATTEMPTS:()=>Fv,DEFAULT_RETRY_DELAY_BASE:()=>Fd,DEFAULT_RETRY_MODE:()=>qoe,DefaultRateLimiter:()=>EN,INITIAL_RETRY_TOKENS:()=>Bv,INVOCATION_ID_HEADER:()=>joe,MAXIMUM_RETRY_DELAY:()=>qv,NO_RETRY_INCREMENT:()=>bN,REQUEST_HEADER:()=>Goe,RETRY_COST:()=>SN,RETRY_MODES:()=>_N,StandardRetryStrategy:()=>Hv,THROTTLING_RETRY_DELAY_BASE:()=>CN,TIMEOUT_RETRY_COST:()=>TN});wN.exports=Boe(yN);var _N=(t=>(t.STANDARD="standard",t.ADAPTIVE="adaptive",t))(_N||{}),Fv=3,qoe="standard",Hoe=Uv(),vN=class{constructor(e){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){let r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),(0,Hoe.isThrottlingError)(e)){let o=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=o,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(o),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}};Fr(vN,"DefaultRateLimiter");var EN=vN,Fd=100,qv=20*1e3,CN=500,Bv=500,SN=5,TN=10,bN=1,joe="amz-sdk-invocation-id",Goe="amz-sdk-request",$oe=Fr(()=>{let t=Fd;return{computeNextBackoffDelay:Fr(n=>Math.floor(Math.min(qv,Math.random()*2**n*t)),"computeNextBackoffDelay"),setDelayBase:Fr(n=>{t=n},"setDelayBase")}},"getDefaultRetryBackoffStrategy"),gN=Fr(({retryDelay:t,retryCount:e,retryCost:r})=>({getRetryCount:Fr(()=>e,"getRetryCount"),getRetryDelay:Fr(()=>Math.min(qv,t),"getRetryDelay"),getRetryCost:Fr(()=>r,"getRetryCost")}),"createDefaultRetryToken"),AN=class{constructor(e){this.maxAttempts=e,this.mode="standard",this.capacity=Bv,this.retryBackoffStrategy=$oe(),this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return gN({retryDelay:Fd,retryCount:0})}async refreshRetryTokenForRetry(e,r){let n=await this.getMaxAttempts();if(this.shouldRetry(e,r,n)){let o=r.errorType;this.retryBackoffStrategy.setDelayBase(o==="THROTTLING"?CN:Fd);let i=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),s=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,i):i,a=this.getCapacityCost(o);return this.capacity-=a,gN({retryDelay:s,retryCount:e.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(Bv,this.capacity+(e.getRetryCost()??bN))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Fv}`),Fv}}shouldRetry(e,r,n){return e.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(e){return e==="TRANSIENT"?TN:SN}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}};Fr(AN,"StandardRetryStrategy");var Hv=AN,IN=class{constructor(e,r){this.maxAttemptsProvider=e,this.mode="adaptive";let{rateLimiter:n}=r??{};this.rateLimiter=n??new EN,this.standardRetryStrategy=new Hv(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}};Fr(IN,"AdaptiveRetryStrategy");var zoe=IN,RN=class extends Hv{constructor(e,r=Fd){super(typeof e=="function"?e:async()=>e),typeof r=="number"?this.computeNextBackoffDelay=()=>r:this.computeNextBackoffDelay=r}async refreshRetryTokenForRetry(e,r){let n=await super.refreshRetryTokenForRetry(e,r);return n.getRetryDelay=()=>this.computeNextBackoffDelay(n.getRetryCount()),n}};Fr(RN,"ConfiguredRetryStrategy");var Voe=RN});var DN=g((LHe,NN)=>{var ih=Object.defineProperty,Koe=Object.getOwnPropertyDescriptor,Woe=Object.getOwnPropertyNames,Qoe=Object.prototype.hasOwnProperty,yr=(t,e)=>ih(t,"name",{value:e,configurable:!0}),Yoe=(t,e)=>{for(var r in e)ih(t,r,{get:e[r],enumerable:!0})},Joe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Woe(e))!Qoe.call(t,o)&&o!==r&&ih(t,o,{get:()=>e[o],enumerable:!(n=Koe(e,o))||n.enumerable});return t},Xoe=t=>Joe(ih({},"__esModule",{value:!0}),t),xN={};Yoe(xN,{constructStack:()=>jv});NN.exports=Xoe(xN);var Xi=yr((t,e)=>{let r=[];if(t&&r.push(t),e)for(let n of e)r.push(n);return r},"getAllAliases"),xo=yr((t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,"getMiddlewareNameWithAliases"),jv=yr(()=>{let t=[],e=[],r=!1,n=new Set,o=yr(m=>m.sort((f,h)=>PN[h.step]-PN[f.step]||ON[h.priority||"normal"]-ON[f.priority||"normal"]),"sort"),i=yr(m=>{let f=!1,h=yr(y=>{let E=Xi(y.name,y.aliases);if(E.includes(m)){f=!0;for(let A of E)n.delete(A);return!1}return!0},"filterCb");return t=t.filter(h),e=e.filter(h),f},"removeByName"),s=yr(m=>{let f=!1,h=yr(y=>{if(y.middleware===m){f=!0;for(let E of Xi(y.name,y.aliases))n.delete(E);return!1}return!0},"filterCb");return t=t.filter(h),e=e.filter(h),f},"removeByReference"),a=yr(m=>{var f;return t.forEach(h=>{m.add(h.middleware,{...h})}),e.forEach(h=>{m.addRelativeTo(h.middleware,{...h})}),(f=m.identifyOnResolve)==null||f.call(m,u.identifyOnResolve()),m},"cloneTo"),c=yr(m=>{let f=[];return m.before.forEach(h=>{h.before.length===0&&h.after.length===0?f.push(h):f.push(...c(h))}),f.push(m),m.after.reverse().forEach(h=>{h.before.length===0&&h.after.length===0?f.push(h):f.push(...c(h))}),f},"expandRelativeMiddlewareList"),d=yr((m=!1)=>{let f=[],h=[],y={};return t.forEach(A=>{let w={...A,before:[],after:[]};for(let x of Xi(w.name,w.aliases))y[x]=w;f.push(w)}),e.forEach(A=>{let w={...A,before:[],after:[]};for(let x of Xi(w.name,w.aliases))y[x]=w;h.push(w)}),h.forEach(A=>{if(A.toMiddleware){let w=y[A.toMiddleware];if(w===void 0){if(m)return;throw new Error(`${A.toMiddleware} is not found when adding ${xo(A.name,A.aliases)} middleware ${A.relation} ${A.toMiddleware}`)}A.relation==="after"&&w.after.push(A),A.relation==="before"&&w.before.push(A)}}),o(f).map(c).reduce((A,w)=>(A.push(...w),A),[])},"getMiddlewareList"),u={add:(m,f={})=>{let{name:h,override:y,aliases:E}=f,A={step:"initialize",priority:"normal",middleware:m,...f},w=Xi(h,E);if(w.length>0){if(w.some(x=>n.has(x))){if(!y)throw new Error(`Duplicate middleware name '${xo(h,E)}'`);for(let x of w){let K=t.findIndex(le=>{var et;return le.name===x||((et=le.aliases)==null?void 0:et.some(Nr=>Nr===x))});if(K===-1)continue;let W=t[K];if(W.step!==A.step||A.priority!==W.priority)throw new Error(`"${xo(W.name,W.aliases)}" middleware with ${W.priority} priority in ${W.step} step cannot be overridden by "${xo(h,E)}" middleware with ${A.priority} priority in ${A.step} step.`);t.splice(K,1)}}for(let x of w)n.add(x)}t.push(A)},addRelativeTo:(m,f)=>{let{name:h,override:y,aliases:E}=f,A={middleware:m,...f},w=Xi(h,E);if(w.length>0){if(w.some(x=>n.has(x))){if(!y)throw new Error(`Duplicate middleware name '${xo(h,E)}'`);for(let x of w){let K=e.findIndex(le=>{var et;return le.name===x||((et=le.aliases)==null?void 0:et.some(Nr=>Nr===x))});if(K===-1)continue;let W=e[K];if(W.toMiddleware!==A.toMiddleware||W.relation!==A.relation)throw new Error(`"${xo(W.name,W.aliases)}" middleware ${W.relation} "${W.toMiddleware}" middleware cannot be overridden by "${xo(h,E)}" middleware ${A.relation} "${A.toMiddleware}" middleware.`);e.splice(K,1)}}for(let x of w)n.add(x)}e.push(A)},clone:()=>a(jv()),use:m=>{m.applyToStack(u)},remove:m=>typeof m=="string"?i(m):s(m),removeByTag:m=>{let f=!1,h=yr(y=>{let{tags:E,name:A,aliases:w}=y;if(E&&E.includes(m)){let x=Xi(A,w);for(let K of x)n.delete(K);return f=!0,!1}return!0},"filterCb");return t=t.filter(h),e=e.filter(h),f},concat:m=>{var f;let h=a(jv());return h.use(m),h.identifyOnResolve(r||h.identifyOnResolve()||(((f=m.identifyOnResolve)==null?void 0:f.call(m))??!1)),h},applyToStack:a,identify:()=>d(!0).map(m=>{let f=m.step??m.relation+" "+m.toMiddleware;return xo(m.name,m.aliases)+" - "+f}),identifyOnResolve(m){return typeof m=="boolean"&&(r=m),r},resolve:(m,f)=>{for(let h of d().map(y=>y.middleware).reverse())m=h(m,f);return r&&console.log(u.identify()),m}};return u},"constructStack"),PN={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},ON={high:3,normal:2,low:1}});var Gv=g((UHe,MN)=>{var sh=Object.defineProperty,Zoe=Object.getOwnPropertyDescriptor,eie=Object.getOwnPropertyNames,tie=Object.prototype.hasOwnProperty,rie=(t,e)=>sh(t,"name",{value:e,configurable:!0}),nie=(t,e)=>{for(var r in e)sh(t,r,{get:e[r],enumerable:!0})},oie=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of eie(e))!tie.call(t,o)&&o!==r&&sh(t,o,{get:()=>e[o],enumerable:!(n=Zoe(e,o))||n.enumerable});return t},iie=t=>oie(sh({},"__esModule",{value:!0}),t),kN={};nie(kN,{isArrayBuffer:()=>sie});MN.exports=iie(kN);var sie=rie(t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]","isArrayBuffer")});var la=g((FHe,FN)=>{var ah=Object.defineProperty,aie=Object.getOwnPropertyDescriptor,cie=Object.getOwnPropertyNames,die=Object.prototype.hasOwnProperty,LN=(t,e)=>ah(t,"name",{value:e,configurable:!0}),lie=(t,e)=>{for(var r in e)ah(t,r,{get:e[r],enumerable:!0})},uie=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of cie(e))!die.call(t,o)&&o!==r&&ah(t,o,{get:()=>e[o],enumerable:!(n=aie(e,o))||n.enumerable});return t},pie=t=>uie(ah({},"__esModule",{value:!0}),t),UN={};lie(UN,{fromArrayBuffer:()=>hie,fromString:()=>fie});FN.exports=pie(UN);var mie=Gv(),$v=require("buffer"),hie=LN((t,e=0,r=t.byteLength-e)=>{if(!(0,mie.isArrayBuffer)(t))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof t} (${t})`);return $v.Buffer.from(t,e,r)},"fromArrayBuffer"),fie=LN((t,e)=>{if(typeof t!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof t} (${t})`);return e?$v.Buffer.from(t,e):$v.Buffer.from(t)},"fromString")});var BN=g(ch=>{"use strict";Object.defineProperty(ch,"__esModule",{value:!0});ch.fromBase64=void 0;var gie=la(),yie=/^[A-Za-z0-9+/]*={0,2}$/,_ie=t=>{if(t.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!yie.exec(t))throw new TypeError("Invalid base64 string.");let e=(0,gie.fromString)(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)};ch.fromBase64=_ie});var Ct=g((qHe,GN)=>{var dh=Object.defineProperty,vie=Object.getOwnPropertyDescriptor,Eie=Object.getOwnPropertyNames,Cie=Object.prototype.hasOwnProperty,zv=(t,e)=>dh(t,"name",{value:e,configurable:!0}),Sie=(t,e)=>{for(var r in e)dh(t,r,{get:e[r],enumerable:!0})},Tie=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Eie(e))!Cie.call(t,o)&&o!==r&&dh(t,o,{get:()=>e[o],enumerable:!(n=vie(e,o))||n.enumerable});return t},bie=t=>Tie(dh({},"__esModule",{value:!0}),t),qN={};Sie(qN,{fromUtf8:()=>jN,toUint8Array:()=>Aie,toUtf8:()=>Iie});GN.exports=bie(qN);var HN=la(),jN=zv(t=>{let e=(0,HN.fromString)(t,"utf8");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)},"fromUtf8"),Aie=zv(t=>typeof t=="string"?jN(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),"toUint8Array"),Iie=zv(t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,HN.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("utf8")},"toUtf8")});var $N=g(lh=>{"use strict";Object.defineProperty(lh,"__esModule",{value:!0});lh.toBase64=void 0;var Rie=la(),wie=Ct(),Pie=t=>{let e;if(typeof t=="string"?e=(0,wie.fromUtf8)(t):e=t,typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,Rie.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("base64")};lh.toBase64=Pie});var Mn=g((jHe,uh)=>{var zN=Object.defineProperty,Oie=Object.getOwnPropertyDescriptor,xie=Object.getOwnPropertyNames,Nie=Object.prototype.hasOwnProperty,Vv=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of xie(e))!Nie.call(t,o)&&o!==r&&zN(t,o,{get:()=>e[o],enumerable:!(n=Oie(e,o))||n.enumerable});return t},VN=(t,e,r)=>(Vv(t,e,"default"),r&&Vv(r,e,"default")),Die=t=>Vv(zN({},"__esModule",{value:!0}),t),Kv={};uh.exports=Die(Kv);VN(Kv,BN(),uh.exports);VN(Kv,$N(),uh.exports)});var KN=g(ph=>{"use strict";Object.defineProperty(ph,"__esModule",{value:!0});ph.getAwsChunkedEncodingStream=void 0;var kie=require("stream"),Mie=(t,e)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:o,checksumLocationName:i,streamHasher:s}=e,a=r!==void 0&&o!==void 0&&i!==void 0&&s!==void 0,c=a?s(o,t):void 0,d=new kie.Readable({read:()=>{}});return t.on("data",u=>{let m=n(u)||0;d.push(`${m.toString(16)}\r
`),d.push(u),d.push(`\r
`)}),t.on("end",async()=>{if(d.push(`0\r
`),a){let u=r(await c);d.push(`${i}:${u}\r
`),d.push(`\r
`)}d.push(null)}),d};ph.getAwsChunkedEncodingStream=Mie});var Qv=g(($He,YN)=>{var mh=Object.defineProperty,Lie=Object.getOwnPropertyDescriptor,Uie=Object.getOwnPropertyNames,Fie=Object.prototype.hasOwnProperty,Wv=(t,e)=>mh(t,"name",{value:e,configurable:!0}),Bie=(t,e)=>{for(var r in e)mh(t,r,{get:e[r],enumerable:!0})},qie=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Uie(e))!Fie.call(t,o)&&o!==r&&mh(t,o,{get:()=>e[o],enumerable:!(n=Lie(e,o))||n.enumerable});return t},Hie=t=>qie(mh({},"__esModule",{value:!0}),t),WN={};Bie(WN,{escapeUri:()=>QN,escapeUriPath:()=>Gie});YN.exports=Hie(WN);var QN=Wv(t=>encodeURIComponent(t).replace(/[!'()*]/g,jie),"escapeUri"),jie=Wv(t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`,"hexEncode"),Gie=Wv(t=>t.split("/").map(QN).join("/"),"escapeUriPath")});var Jv=g((zHe,ZN)=>{var hh=Object.defineProperty,$ie=Object.getOwnPropertyDescriptor,zie=Object.getOwnPropertyNames,Vie=Object.prototype.hasOwnProperty,Kie=(t,e)=>hh(t,"name",{value:e,configurable:!0}),Wie=(t,e)=>{for(var r in e)hh(t,r,{get:e[r],enumerable:!0})},Qie=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of zie(e))!Vie.call(t,o)&&o!==r&&hh(t,o,{get:()=>e[o],enumerable:!(n=$ie(e,o))||n.enumerable});return t},Yie=t=>Qie(hh({},"__esModule",{value:!0}),t),JN={};Wie(JN,{buildQueryString:()=>XN});ZN.exports=Yie(JN);var Yv=Qv();function XN(t){let e=[];for(let r of Object.keys(t).sort()){let n=t[r];if(r=(0,Yv.escapeUri)(r),Array.isArray(n))for(let o=0,i=n.length;o<i;o++)e.push(`${r}=${(0,Yv.escapeUri)(n[o])}`);else{let o=r;(n||typeof n=="string")&&(o+=`=${(0,Yv.escapeUri)(n)}`),e.push(o)}}return e.join("&")}Kie(XN,"buildQueryString")});var No=g((QHe,_D)=>{var Jie=Object.create,Bd=Object.defineProperty,Xie=Object.getOwnPropertyDescriptor,Zie=Object.getOwnPropertyNames,ese=Object.getPrototypeOf,tse=Object.prototype.hasOwnProperty,Ae=(t,e)=>Bd(t,"name",{value:e,configurable:!0}),rse=(t,e)=>{for(var r in e)Bd(t,r,{get:e[r],enumerable:!0})},oD=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Zie(e))!tse.call(t,o)&&o!==r&&Bd(t,o,{get:()=>e[o],enumerable:!(n=Xie(e,o))||n.enumerable});return t},nse=(t,e,r)=>(r=t!=null?Jie(ese(t)):{},oD(e||!t||!t.__esModule?Bd(r,"default",{value:t,enumerable:!0}):r,t)),ose=t=>oD(Bd({},"__esModule",{value:!0}),t),iD={};rse(iD,{DEFAULT_REQUEST_TIMEOUT:()=>lse,NodeHttp2Handler:()=>fse,NodeHttpHandler:()=>use,streamCollector:()=>yse});_D.exports=ose(iD);var sD=De(),aD=Jv(),Xv=require("http"),Zv=require("https"),ise=["ECONNRESET","EPIPE","ETIMEDOUT"],cD=Ae(t=>{let e={};for(let r of Object.keys(t)){let n=t[r];e[r]=Array.isArray(n)?n.join(","):n}return e},"getTransformedHeaders"),eD=1e3,sse=Ae((t,e,r=0)=>{if(!r)return-1;let n=Ae(o=>{let i=setTimeout(()=>{t.destroy(),e(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r-o),s=Ae(a=>{a?.connecting?a.on("connect",()=>{clearTimeout(i)}):clearTimeout(i)},"doWithSocket");t.socket?s(t.socket):t.on("socket",s)},"registerTimeout");return r<2e3?(n(0),0):setTimeout(n.bind(null,eD),eD)},"setConnectionTimeout"),ase=3e3,cse=Ae((t,{keepAlive:e,keepAliveMsecs:r},n=ase)=>{if(e!==!0)return-1;let o=Ae(()=>{t.socket?t.socket.setKeepAlive(e,r||0):t.on("socket",i=>{i.setKeepAlive(e,r||0)})},"registerListener");return n===0?(o(),0):setTimeout(o,n)},"setSocketKeepAlive"),tD=3e3,dse=Ae((t,e,r=0)=>{let n=Ae(o=>{t.setTimeout(r-o,()=>{t.destroy(),e(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))})},"registerTimeout");return 0<r&&r<6e3?(n(0),0):setTimeout(n.bind(null,r===0?0:tD),tD)},"setSocketTimeout"),dD=require("stream"),rD=1e3;async function tE(t,e,r=rD){let n=e.headers??{},o=n.Expect||n.expect,i=-1,s=!1;o==="100-continue"&&await Promise.race([new Promise(a=>{i=Number(setTimeout(a,Math.max(rD,r)))}),new Promise(a=>{t.on("continue",()=>{clearTimeout(i),a()}),t.on("error",()=>{s=!0,clearTimeout(i),a()})})]),s||lD(t,e.body)}Ae(tE,"writeRequestBody");function lD(t,e){if(e instanceof dD.Readable){e.pipe(t);return}if(e){if(Buffer.isBuffer(e)||typeof e=="string"){t.end(e);return}let r=e;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){t.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}t.end(Buffer.from(e));return}t.end()}Ae(lD,"writeBody");var lse=0,uD=class eE{constructor(e){this.socketWarningTimestamp=0,this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((r,n)=>{typeof e=="function"?e().then(o=>{r(this.resolveDefaultConfig(o))}).catch(n):r(this.resolveDefaultConfig(e))})}static create(e){return typeof e?.handle=="function"?e:new eE(e)}static checkSocketUsage(e,r,n=console){var o,i,s;let{sockets:a,requests:c,maxSockets:d}=e;if(typeof d!="number"||d===1/0||Date.now()-15e3<r)return r;if(a&&c)for(let m in a){let f=((o=a[m])==null?void 0:o.length)??0,h=((i=c[m])==null?void 0:i.length)??0;if(f>=d&&h>=2*d)return(s=n?.warn)==null||s.call(n,`@smithy/node-http-handler:WARN - socket usage at capacity=${f} and ${h} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}resolveDefaultConfig(e){let{requestTimeout:r,connectionTimeout:n,socketTimeout:o,httpAgent:i,httpsAgent:s}=e||{},a=!0,c=50;return{connectionTimeout:n,requestTimeout:r??o,httpAgent:i instanceof Xv.Agent||typeof i?.destroy=="function"?i:new Xv.Agent({keepAlive:a,maxSockets:c,...i}),httpsAgent:s instanceof Zv.Agent||typeof s?.destroy=="function"?s:new Zv.Agent({keepAlive:a,maxSockets:c,...s}),logger:console}}destroy(){var e,r,n,o;(r=(e=this.config)==null?void 0:e.httpAgent)==null||r.destroy(),(o=(n=this.config)==null?void 0:n.httpsAgent)==null||o.destroy()}async handle(e,{abortSignal:r}={}){return this.config||(this.config=await this.configProvider),new Promise((n,o)=>{let i,s=[],a=Ae(async x=>{await i,s.forEach(clearTimeout),n(x)},"resolve"),c=Ae(async x=>{await i,s.forEach(clearTimeout),o(x)},"reject");if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r?.aborted){let x=new Error("Request aborted");x.name="AbortError",c(x);return}let d=e.protocol==="https:",u=d?this.config.httpsAgent:this.config.httpAgent;s.push(setTimeout(()=>{this.socketWarningTimestamp=eE.checkSocketUsage(u,this.socketWarningTimestamp,this.config.logger)},this.config.socketAcquisitionWarningTimeout??(this.config.requestTimeout??2e3)+(this.config.connectionTimeout??1e3)));let m=(0,aD.buildQueryString)(e.query||{}),f;if(e.username!=null||e.password!=null){let x=e.username??"",K=e.password??"";f=`${x}:${K}`}let h=e.path;m&&(h+=`?${m}`),e.fragment&&(h+=`#${e.fragment}`);let y={headers:e.headers,host:e.hostname,method:e.method,path:h,port:e.port,agent:u,auth:f},A=(d?Zv.request:Xv.request)(y,x=>{let K=new sD.HttpResponse({statusCode:x.statusCode||-1,reason:x.statusMessage,headers:cD(x.headers),body:x});a({response:K})});if(A.on("error",x=>{ise.includes(x.code)?c(Object.assign(x,{name:"TimeoutError"})):c(x)}),r){let x=Ae(()=>{A.destroy();let K=new Error("Request aborted");K.name="AbortError",c(K)},"onAbort");if(typeof r.addEventListener=="function"){let K=r;K.addEventListener("abort",x,{once:!0}),A.once("close",()=>K.removeEventListener("abort",x))}else r.onabort=x}s.push(sse(A,c,this.config.connectionTimeout)),s.push(dse(A,c,this.config.requestTimeout));let w=y.agent;typeof w=="object"&&"keepAlive"in w&&s.push(cse(A,{keepAlive:w.keepAlive,keepAliveMsecs:w.keepAliveMsecs})),i=tE(A,e,this.config.requestTimeout).catch(x=>(s.forEach(clearTimeout),o(x)))})}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:r}))}httpHandlerConfigs(){return this.config??{}}};Ae(uD,"NodeHttpHandler");var use=uD,nD=require("http2"),pse=nse(require("http2")),pD=class{constructor(e){this.sessions=[],this.sessions=e??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(e){this.sessions.push(e)}contains(e){return this.sessions.includes(e)}remove(e){this.sessions=this.sessions.filter(r=>r!==e)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(e){for(let r of this.sessions)r===e&&(r.destroyed||r.destroy())}};Ae(pD,"NodeHttp2ConnectionPool");var mse=pD,mD=class{constructor(e){if(this.sessionCache=new Map,this.config=e,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}lease(e,r){let n=this.getUrlString(e),o=this.sessionCache.get(n);if(o){let c=o.poll();if(c&&!this.config.disableConcurrency)return c}let i=pse.default.connect(n);this.config.maxConcurrency&&i.settings({maxConcurrentStreams:this.config.maxConcurrency},c=>{if(c)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+e.destination.toString())}),i.unref();let s=Ae(()=>{i.destroy(),this.deleteSession(n,i)},"destroySessionCb");i.on("goaway",s),i.on("error",s),i.on("frameError",s),i.on("close",()=>this.deleteSession(n,i)),r.requestTimeout&&i.setTimeout(r.requestTimeout,s);let a=this.sessionCache.get(n)||new mse;return a.offerLast(i),this.sessionCache.set(n,a),i}deleteSession(e,r){let n=this.sessionCache.get(e);n&&n.contains(r)&&(n.remove(r),this.sessionCache.set(e,n))}release(e,r){var n;let o=this.getUrlString(e);(n=this.sessionCache.get(o))==null||n.offerLast(r)}destroy(){for(let[e,r]of this.sessionCache){for(let n of r)n.destroyed||n.destroy(),r.remove(n);this.sessionCache.delete(e)}}setMaxConcurrentStreams(e){if(this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=e}setDisableConcurrentStreams(e){this.config.disableConcurrency=e}getUrlString(e){return e.destination.toString()}};Ae(mD,"NodeHttp2ConnectionManager");var hse=mD,hD=class fD{constructor(e){this.metadata={handlerProtocol:"h2"},this.connectionManager=new hse({}),this.configProvider=new Promise((r,n)=>{typeof e=="function"?e().then(o=>{r(o||{})}).catch(n):r(e||{})})}static create(e){return typeof e?.handle=="function"?e:new fD(e)}destroy(){this.connectionManager.destroy()}async handle(e,{abortSignal:r}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:n,disableConcurrentStreams:o}=this.config;return new Promise((i,s)=>{var a;let c=!1,d,u=Ae(async Ee=>{await d,i(Ee)},"resolve"),m=Ae(async Ee=>{await d,s(Ee)},"reject");if(r?.aborted){c=!0;let Ee=new Error("Request aborted");Ee.name="AbortError",m(Ee);return}let{hostname:f,method:h,port:y,protocol:E,query:A}=e,w="";if(e.username!=null||e.password!=null){let Ee=e.username??"",Ht=e.password??"";w=`${Ee}:${Ht}@`}let x=`${E}//${w}${f}${y?`:${y}`:""}`,K={destination:new URL(x)},W=this.connectionManager.lease(K,{requestTimeout:(a=this.config)==null?void 0:a.sessionTimeout,disableConcurrentStreams:o||!1}),le=Ae(Ee=>{o&&this.destroySession(W),c=!0,m(Ee)},"rejectWithDestroy"),et=(0,aD.buildQueryString)(A||{}),Nr=e.path;et&&(Nr+=`?${et}`),e.fragment&&(Nr+=`#${e.fragment}`);let bt=W.request({...e.headers,[nD.constants.HTTP2_HEADER_PATH]:Nr,[nD.constants.HTTP2_HEADER_METHOD]:h});if(W.ref(),bt.on("response",Ee=>{let Ht=new sD.HttpResponse({statusCode:Ee[":status"]||-1,headers:cD(Ee),body:bt});c=!0,u({response:Ht}),o&&(W.close(),this.connectionManager.deleteSession(x,W))}),n&&bt.setTimeout(n,()=>{bt.close();let Ee=new Error(`Stream timed out because of no activity for ${n} ms`);Ee.name="TimeoutError",le(Ee)}),r){let Ee=Ae(()=>{bt.close();let Ht=new Error("Request aborted");Ht.name="AbortError",le(Ht)},"onAbort");if(typeof r.addEventListener=="function"){let Ht=r;Ht.addEventListener("abort",Ee,{once:!0}),bt.once("close",()=>Ht.removeEventListener("abort",Ee))}else r.onabort=Ee}bt.on("frameError",(Ee,Ht,ds)=>{le(new Error(`Frame type id ${Ee} in stream id ${ds} has failed with code ${Ht}.`))}),bt.on("error",le),bt.on("aborted",()=>{le(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${bt.rstCode}.`))}),bt.on("close",()=>{W.unref(),o&&W.destroy(),c||le(new Error("Unexpected error: http2 request did not get a response"))}),d=tE(bt,e,n)})}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(e){e.destroyed||e.destroy()}};Ae(hD,"NodeHttp2Handler");var fse=hD,gD=class extends dD.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(e,r,n){this.bufferedBytes.push(e),n()}};Ae(gD,"Collector");var gse=gD,yse=Ae(t=>_se(t)?yD(t):new Promise((e,r)=>{let n=new gse;t.pipe(n),t.on("error",o=>{n.end(),r(o)}),n.on("error",r),n.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.bufferedBytes));e(o)})}),"streamCollector"),_se=Ae(t=>typeof ReadableStream=="function"&&t instanceof ReadableStream,"isReadableStreamInstance");async function yD(t){let e=[],r=t.getReader(),n=!1,o=0;for(;!n;){let{done:a,value:c}=await r.read();c&&(e.push(c),o+=c.length),n=a}let i=new Uint8Array(o),s=0;for(let a of e)i.set(a,s),s+=a.length;return i}Ae(yD,"collectReadableStream")});var wD=g((YHe,RD)=>{var gh=Object.defineProperty,vse=Object.getOwnPropertyDescriptor,Ese=Object.getOwnPropertyNames,Cse=Object.prototype.hasOwnProperty,Ln=(t,e)=>gh(t,"name",{value:e,configurable:!0}),Sse=(t,e)=>{for(var r in e)gh(t,r,{get:e[r],enumerable:!0})},Tse=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Ese(e))!Cse.call(t,o)&&o!==r&&gh(t,o,{get:()=>e[o],enumerable:!(n=vse(e,o))||n.enumerable});return t},bse=t=>Tse(gh({},"__esModule",{value:!0}),t),ED={};Sse(ED,{FetchHttpHandler:()=>Ise,keepAliveSupport:()=>fh,streamCollector:()=>wse});RD.exports=bse(ED);var vD=De(),Ase=Jv();function CD(t=0){return new Promise((e,r)=>{t&&setTimeout(()=>{let n=new Error(`Request did not complete within ${t} ms`);n.name="TimeoutError",r(n)},t)})}Ln(CD,"requestTimeout");var fh={supported:void 0},SD=class TD{static create(e){return typeof e?.handle=="function"?e:new TD(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(r=>r||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),fh.supported===void 0&&(fh.supported=typeof Request<"u"&&"keepalive"in new Request("https://[::1]"))}destroy(){}async handle(e,{abortSignal:r}={}){this.config||(this.config=await this.configProvider);let n=this.config.requestTimeout,o=this.config.keepAlive===!0,i=this.config.credentials;if(r?.aborted){let w=new Error("Request aborted");return w.name="AbortError",Promise.reject(w)}let s=e.path,a=(0,Ase.buildQueryString)(e.query||{});a&&(s+=`?${a}`),e.fragment&&(s+=`#${e.fragment}`);let c="";if(e.username!=null||e.password!=null){let w=e.username??"",x=e.password??"";c=`${w}:${x}@`}let{port:d,method:u}=e,m=`${e.protocol}//${c}${e.hostname}${d?`:${d}`:""}${s}`,f=u==="GET"||u==="HEAD"?void 0:e.body,h={body:f,headers:new Headers(e.headers),method:u,credentials:i,cache:this.config.cache??"default"};f&&(h.duplex="half"),typeof AbortController<"u"&&(h.signal=r),fh.supported&&(h.keepalive=o),typeof this.config.requestInit=="function"&&Object.assign(h,this.config.requestInit(e));let y=Ln(()=>{},"removeSignalEventListener"),E=new Request(m,h),A=[fetch(E).then(w=>{let x=w.headers,K={};for(let le of x.entries())K[le[0]]=le[1];return w.body!=null?{response:new vD.HttpResponse({headers:K,reason:w.statusText,statusCode:w.status,body:w.body})}:w.blob().then(le=>({response:new vD.HttpResponse({headers:K,reason:w.statusText,statusCode:w.status,body:le})}))}),CD(n)];return r&&A.push(new Promise((w,x)=>{let K=Ln(()=>{let W=new Error("Request aborted");W.name="AbortError",x(W)},"onAbort");if(typeof r.addEventListener=="function"){let W=r;W.addEventListener("abort",K,{once:!0}),y=Ln(()=>W.removeEventListener("abort",K),"removeSignalEventListener")}else r.onabort=K})),Promise.race(A).finally(y)}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[e]=r,n))}httpHandlerConfigs(){return this.config??{}}};Ln(SD,"FetchHttpHandler");var Ise=SD,Rse=Mn(),wse=Ln(t=>typeof Blob=="function"&&t instanceof Blob?bD(t):AD(t),"streamCollector");async function bD(t){let e=await ID(t),r=(0,Rse.fromBase64)(e);return new Uint8Array(r)}Ln(bD,"collectBlob");async function AD(t){let e=[],r=t.getReader(),n=!1,o=0;for(;!n;){let{done:a,value:c}=await r.read();c&&(e.push(c),o+=c.length),n=a}let i=new Uint8Array(o),s=0;for(let a of e)i.set(a,s),s+=a.length;return i}Ln(AD,"collectStream");function ID(t){return new Promise((e,r)=>{let n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));let o=n.result??"",i=o.indexOf(","),s=i>-1?i+1:o.length;e(o.substring(s))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(t)})}Ln(ID,"readToBase64")});var _h=g((JHe,kD)=>{var yh=Object.defineProperty,Pse=Object.getOwnPropertyDescriptor,Ose=Object.getOwnPropertyNames,xse=Object.prototype.hasOwnProperty,PD=(t,e)=>yh(t,"name",{value:e,configurable:!0}),Nse=(t,e)=>{for(var r in e)yh(t,r,{get:e[r],enumerable:!0})},Dse=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Ose(e))!xse.call(t,o)&&o!==r&&yh(t,o,{get:()=>e[o],enumerable:!(n=Pse(e,o))||n.enumerable});return t},kse=t=>Dse(yh({},"__esModule",{value:!0}),t),OD={};Nse(OD,{fromHex:()=>ND,toHex:()=>DD});kD.exports=kse(OD);var xD={},rE={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),xD[t]=e,rE[e]=t}function ND(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){let n=t.slice(r,r+2).toLowerCase();if(n in rE)e[r/2]=rE[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return e}PD(ND,"fromHex");function DD(t){let e="";for(let r=0;r<t.byteLength;r++)e+=xD[t[r]];return e}PD(DD,"toHex")});var qd=g(vh=>{"use strict";Object.defineProperty(vh,"__esModule",{value:!0});vh.isReadableStream=void 0;var Mse=t=>{var e;return typeof ReadableStream=="function"&&(((e=t?.constructor)===null||e===void 0?void 0:e.name)===ReadableStream.name||t instanceof ReadableStream)};vh.isReadableStream=Mse});var FD=g(Eh=>{"use strict";Object.defineProperty(Eh,"__esModule",{value:!0});Eh.sdkStreamMixin=void 0;var Lse=wD(),Use=Mn(),Fse=_h(),Bse=Ct(),MD=qd(),LD="The stream has already been transformed.",qse=t=>{var e,r;if(!UD(t)&&!(0,MD.isReadableStream)(t)){let s=((r=(e=t?.__proto__)===null||e===void 0?void 0:e.constructor)===null||r===void 0?void 0:r.name)||t;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${s}`)}let n=!1,o=async()=>{if(n)throw new Error(LD);return n=!0,await(0,Lse.streamCollector)(t)},i=s=>{if(typeof s.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return s.stream()};return Object.assign(t,{transformToByteArray:o,transformToString:async s=>{let a=await o();if(s==="base64")return(0,Use.toBase64)(a);if(s==="hex")return(0,Fse.toHex)(a);if(s===void 0||s==="utf8"||s==="utf-8")return(0,Bse.toUtf8)(a);if(typeof TextDecoder=="function")return new TextDecoder(s).decode(a);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(n)throw new Error(LD);if(n=!0,UD(t))return i(t);if((0,MD.isReadableStream)(t))return t;throw new Error(`Cannot transform payload to web stream, got ${t}`)}})};Eh.sdkStreamMixin=qse;var UD=t=>typeof Blob=="function"&&t instanceof Blob});var qD=g(Ch=>{"use strict";Object.defineProperty(Ch,"__esModule",{value:!0});Ch.sdkStreamMixin=void 0;var Hse=No(),jse=la(),nE=require("stream"),Gse=require("util"),$se=FD(),BD="The stream has already been transformed.",zse=t=>{var e,r;if(!(t instanceof nE.Readable))try{return(0,$se.sdkStreamMixin)(t)}catch{let s=((r=(e=t?.__proto__)===null||e===void 0?void 0:e.constructor)===null||r===void 0?void 0:r.name)||t;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${s}`)}let n=!1,o=async()=>{if(n)throw new Error(BD);return n=!0,await(0,Hse.streamCollector)(t)};return Object.assign(t,{transformToByteArray:o,transformToString:async i=>{let s=await o();return i===void 0||Buffer.isEncoding(i)?(0,jse.fromArrayBuffer)(s.buffer,s.byteOffset,s.byteLength).toString(i):new Gse.TextDecoder(i).decode(s)},transformToWebStream:()=>{if(n)throw new Error(BD);if(t.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof nE.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please make sure you are using Node.js >= 17.0.0, or polyfill is available.");return n=!0,nE.Readable.toWeb(t)}})};Ch.sdkStreamMixin=zse});var HD=g(Sh=>{"use strict";Object.defineProperty(Sh,"__esModule",{value:!0});Sh.splitStream=void 0;async function Vse(t){return typeof t.stream=="function"&&(t=t.stream()),t.tee()}Sh.splitStream=Vse});var GD=g(Th=>{"use strict";Object.defineProperty(Th,"__esModule",{value:!0});Th.splitStream=void 0;var jD=require("stream"),Kse=HD(),Wse=qd();async function Qse(t){if((0,Wse.isReadableStream)(t))return(0,Kse.splitStream)(t);let e=new jD.PassThrough,r=new jD.PassThrough;return t.pipe(e),t.pipe(r),[e,r]}Th.splitStream=Qse});var $D=g(bh=>{"use strict";Object.defineProperty(bh,"__esModule",{value:!0});bh.headStream=void 0;async function Yse(t,e){var r;let n=0,o=[],i=t.getReader(),s=!1;for(;!s;){let{done:d,value:u}=await i.read();if(u&&(o.push(u),n+=(r=u?.byteLength)!==null&&r!==void 0?r:0),n>=e)break;s=d}i.releaseLock();let a=new Uint8Array(Math.min(e,n)),c=0;for(let d of o){if(d.byteLength>a.byteLength-c){a.set(d.subarray(0,a.byteLength-c),c);break}else a.set(d,c);c+=d.length}return a}bh.headStream=Yse});var zD=g(Ah=>{"use strict";Object.defineProperty(Ah,"__esModule",{value:!0});Ah.headStream=void 0;var Jse=require("stream"),Xse=$D(),Zse=qd(),eae=(t,e)=>(0,Zse.isReadableStream)(t)?(0,Xse.headStream)(t,e):new Promise((r,n)=>{let o=new oE;o.limit=e,t.pipe(o),t.on("error",i=>{o.end(),n(i)}),o.on("error",n),o.on("finish",function(){let i=new Uint8Array(Buffer.concat(this.buffers));r(i)})});Ah.headStream=eae;var oE=class extends Jse.Writable{constructor(){super(...arguments),this.buffers=[],this.limit=1/0,this.bytesBuffered=0}_write(e,r,n){var o;if(this.buffers.push(e),this.bytesBuffered+=(o=e.byteLength)!==null&&o!==void 0?o:0,this.bytesBuffered>=this.limit){let i=this.bytesBuffered-this.limit,s=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=s.subarray(0,s.byteLength-i),this.emit("finish")}n()}}});var cE=g((ije,es)=>{var Ih=Object.defineProperty,tae=Object.getOwnPropertyDescriptor,rae=Object.getOwnPropertyNames,nae=Object.prototype.hasOwnProperty,aE=(t,e)=>Ih(t,"name",{value:e,configurable:!0}),oae=(t,e)=>{for(var r in e)Ih(t,r,{get:e[r],enumerable:!0})},iE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of rae(e))!nae.call(t,o)&&o!==r&&Ih(t,o,{get:()=>e[o],enumerable:!(n=tae(e,o))||n.enumerable});return t},Hd=(t,e,r)=>(iE(t,e,"default"),r&&iE(r,e,"default")),iae=t=>iE(Ih({},"__esModule",{value:!0}),t),Zi={};oae(Zi,{Uint8ArrayBlobAdapter:()=>sE});es.exports=iae(Zi);var VD=Mn(),KD=Ct();function WD(t,e="utf-8"){return e==="base64"?(0,VD.toBase64)(t):(0,KD.toUtf8)(t)}aE(WD,"transformToString");function QD(t,e){return e==="base64"?sE.mutate((0,VD.fromBase64)(t)):sE.mutate((0,KD.fromUtf8)(t))}aE(QD,"transformFromString");var YD=class JD extends Uint8Array{static fromString(e,r="utf-8"){switch(typeof e){case"string":return QD(e,r);default:throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}}static mutate(e){return Object.setPrototypeOf(e,JD.prototype),e}transformToString(e="utf-8"){return WD(this,e)}};aE(YD,"Uint8ArrayBlobAdapter");var sE=YD;Hd(Zi,KN(),es.exports);Hd(Zi,qD(),es.exports);Hd(Zi,GD(),es.exports);Hd(Zi,zD(),es.exports);Hd(Zi,qd(),es.exports)});var fe=g((lje,Ck)=>{var xh=Object.defineProperty,sae=Object.getOwnPropertyDescriptor,aae=Object.getOwnPropertyNames,cae=Object.prototype.hasOwnProperty,N=(t,e)=>xh(t,"name",{value:e,configurable:!0}),dae=(t,e)=>{for(var r in e)xh(t,r,{get:e[r],enumerable:!0})},lae=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of aae(e))!cae.call(t,o)&&o!==r&&xh(t,o,{get:()=>e[o],enumerable:!(n=sae(e,o))||n.enumerable});return t},uae=t=>lae(xh({},"__esModule",{value:!0}),t),ZD={};dae(ZD,{Client:()=>mae,Command:()=>ok,LazyJsonString:()=>dce,NoOpLogger:()=>pae,SENSITIVE_STRING:()=>gae,ServiceException:()=>Jae,StringWrapper:()=>Vd,_json:()=>fE,collectBody:()=>hae,convertMap:()=>lce,createAggregatedClient:()=>yae,dateToUtcString:()=>uk,decorateServiceException:()=>hk,emitWarningIfUnsupportedVersion:()=>tce,expectBoolean:()=>vae,expectByte:()=>hE,expectFloat32:()=>wh,expectInt:()=>Cae,expectInt32:()=>pE,expectLong:()=>$d,expectNonNull:()=>Tae,expectNumber:()=>Gd,expectObject:()=>sk,expectShort:()=>mE,expectString:()=>bae,expectUnion:()=>Aae,extendedEncodeURIComponent:()=>Oh,getArrayIfSingleItem:()=>cce,getDefaultClientConfiguration:()=>sce,getDefaultExtensionConfiguration:()=>gk,getValueFromTextNode:()=>yk,handleFloat:()=>wae,limitedParseDouble:()=>_E,limitedParseFloat:()=>Pae,limitedParseFloat32:()=>Oae,loadConfigsForDefaultMode:()=>ece,logger:()=>zd,map:()=>EE,parseBoolean:()=>_ae,parseEpochTimestamp:()=>jae,parseRfc3339DateTime:()=>Mae,parseRfc3339DateTimeWithOffset:()=>Uae,parseRfc7231DateTime:()=>Hae,resolveDefaultRuntimeConfig:()=>ace,resolvedPath:()=>fce,serializeDateTime:()=>yce,serializeFloat:()=>gce,splitEvery:()=>Ek,strictParseByte:()=>lk,strictParseDouble:()=>yE,strictParseFloat:()=>Iae,strictParseFloat32:()=>ak,strictParseInt:()=>xae,strictParseInt32:()=>Nae,strictParseLong:()=>dk,strictParseShort:()=>ua,take:()=>uce,throwDefaultError:()=>fk,withBaseException:()=>Xae});Ck.exports=uae(ZD);var ek=class{trace(){}debug(){}info(){}warn(){}error(){}};N(ek,"NoOpLogger");var pae=ek,tk=DN(),rk=class{constructor(e){this.config=e,this.middlewareStack=(0,tk.constructStack)()}send(e,r,n){let o=typeof r!="function"?r:void 0,i=typeof r=="function"?r:n,s=o===void 0&&this.config.cacheMiddleware===!0,a;if(s){this.handlers||(this.handlers=new WeakMap);let c=this.handlers;c.has(e.constructor)?a=c.get(e.constructor):(a=e.resolveMiddleware(this.middlewareStack,this.config,o),c.set(e.constructor,a))}else delete this.handlers,a=e.resolveMiddleware(this.middlewareStack,this.config,o);if(i)a(e).then(c=>i(null,c.output),c=>i(c)).catch(()=>{});else return a(e).then(c=>c.output)}destroy(){var e,r,n;(n=(r=(e=this.config)==null?void 0:e.requestHandler)==null?void 0:r.destroy)==null||n.call(r),delete this.handlers}};N(rk,"Client");var mae=rk,dE=cE(),hae=N(async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return dE.Uint8ArrayBlobAdapter.mutate(t);if(!t)return dE.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=e.streamCollector(t);return dE.Uint8ArrayBlobAdapter.mutate(await r)},"collectBody"),uE=en(),nk=class{constructor(){this.middlewareStack=(0,tk.constructStack)()}static classBuilder(){return new fae}resolveMiddlewareWithContext(e,r,n,{middlewareFn:o,clientName:i,commandName:s,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:d,additionalContext:u,CommandCtor:m}){for(let A of o.bind(this)(m,e,r,n))this.middlewareStack.use(A);let f=e.concat(this.middlewareStack),{logger:h}=r,y={logger:h,clientName:i,commandName:s,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[uE.SMITHY_CONTEXT_KEY]:{commandInstance:this,...d},...u},{requestHandler:E}=r;return f.resolve(A=>E.handle(A.request,n||{}),y)}};N(nk,"Command");var ok=nk,ik=class{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=e=>e,this._outputFilterSensitiveLog=e=>e,this._serializer=null,this._deserializer=null}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,r,n={}){return this._smithyContext={service:e,operation:r,...n},this}c(e={}){return this._additionalContext=e,this}n(e,r){return this._clientName=e,this._commandName=r,this}f(e=n=>n,r=n=>n){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=r,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}build(){var e;let r=this,n;return n=(e=class extends ok{constructor(...[o]){super(),this.serialize=r._serializer,this.deserialize=r._deserializer,this.input=o??{},r._init(this)}static getEndpointParameterInstructions(){return r._ep}resolveMiddleware(o,i,s){return this.resolveMiddlewareWithContext(o,i,s,{CommandCtor:n,middlewareFn:r._middlewareFn,clientName:r._clientName,commandName:r._commandName,inputFilterSensitiveLog:r._inputFilterSensitiveLog,outputFilterSensitiveLog:r._outputFilterSensitiveLog,smithyContext:r._smithyContext,additionalContext:r._additionalContext})}},N(e,"CommandRef"),e)}};N(ik,"ClassBuilder");var fae=ik,gae="***SensitiveInformation***",yae=N((t,e)=>{for(let r of Object.keys(t)){let n=t[r],o=N(async function(s,a,c){let d=new n(s);if(typeof a=="function")this.send(d,a);else if(typeof c=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(d,a||{},c)}else return this.send(d,a)},"methodImpl"),i=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");e.prototype[i]=o}},"createAggregatedClient"),_ae=N(t=>{switch(t){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${t}"`)}},"parseBoolean"),vae=N(t=>{if(t!=null){if(typeof t=="number"){if((t===0||t===1)&&zd.warn(Ph(`Expected boolean, got ${typeof t}: ${t}`)),t===0)return!1;if(t===1)return!0}if(typeof t=="string"){let e=t.toLowerCase();if((e==="false"||e==="true")&&zd.warn(Ph(`Expected boolean, got ${typeof t}: ${t}`)),e==="false")return!1;if(e==="true")return!0}if(typeof t=="boolean")return t;throw new TypeError(`Expected boolean, got ${typeof t}: ${t}`)}},"expectBoolean"),Gd=N(t=>{if(t!=null){if(typeof t=="string"){let e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&zd.warn(Ph(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},"expectNumber"),Eae=Math.ceil(2**127*(2-2**-23)),wh=N(t=>{let e=Gd(t);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>Eae)throw new TypeError(`Expected 32-bit float, got ${t}`);return e},"expectFloat32"),$d=N(t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},"expectLong"),Cae=$d,pE=N(t=>gE(t,32),"expectInt32"),mE=N(t=>gE(t,16),"expectShort"),hE=N(t=>gE(t,8),"expectByte"),gE=N((t,e)=>{let r=$d(t);if(r!==void 0&&Sae(r,e)!==r)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return r},"expectSizedInt"),Sae=N((t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},"castInt"),Tae=N((t,e)=>{if(t==null)throw e?new TypeError(`Expected a non-null value for ${e}`):new TypeError("Expected a non-null value");return t},"expectNonNull"),sk=N(t=>{if(t==null)return;if(typeof t=="object"&&!Array.isArray(t))return t;let e=Array.isArray(t)?"array":typeof t;throw new TypeError(`Expected object, got ${e}: ${t}`)},"expectObject"),bae=N(t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return zd.warn(Ph(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}},"expectString"),Aae=N(t=>{if(t==null)return;let e=sk(t),r=Object.entries(e).filter(([,n])=>n!=null).map(([n])=>n);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return e},"expectUnion"),yE=N(t=>Gd(typeof t=="string"?ma(t):t),"strictParseDouble"),Iae=yE,ak=N(t=>wh(typeof t=="string"?ma(t):t),"strictParseFloat32"),Rae=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,ma=N(t=>{let e=t.match(Rae);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)},"parseNumber"),_E=N(t=>typeof t=="string"?ck(t):Gd(t),"limitedParseDouble"),wae=_E,Pae=_E,Oae=N(t=>typeof t=="string"?ck(t):wh(t),"limitedParseFloat32"),ck=N(t=>{switch(t){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${t}`)}},"parseFloatString"),dk=N(t=>$d(typeof t=="string"?ma(t):t),"strictParseLong"),xae=dk,Nae=N(t=>pE(typeof t=="string"?ma(t):t),"strictParseInt32"),ua=N(t=>mE(typeof t=="string"?ma(t):t),"strictParseShort"),lk=N(t=>hE(typeof t=="string"?ma(t):t),"strictParseByte"),Ph=N(t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),"stackTraceWarning"),zd={warn:console.warn},Dae=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],vE=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function uk(t){let e=t.getUTCFullYear(),r=t.getUTCMonth(),n=t.getUTCDay(),o=t.getUTCDate(),i=t.getUTCHours(),s=t.getUTCMinutes(),a=t.getUTCSeconds(),c=o<10?`0${o}`:`${o}`,d=i<10?`0${i}`:`${i}`,u=s<10?`0${s}`:`${s}`,m=a<10?`0${a}`:`${a}`;return`${Dae[n]}, ${c} ${vE[r]} ${e} ${d}:${u}:${m} GMT`}N(uk,"dateToUtcString");var kae=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),Mae=N(t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=kae.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,i,s,a,c,d]=e,u=ua(pa(n)),m=nn(o,"month",1,12),f=nn(i,"day",1,31);return jd(u,m,f,{hours:s,minutes:a,seconds:c,fractionalMilliseconds:d})},"parseRfc3339DateTime"),Lae=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Uae=N(t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=Lae.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,i,s,a,c,d,u]=e,m=ua(pa(n)),f=nn(o,"month",1,12),h=nn(i,"day",1,31),y=jd(m,f,h,{hours:s,minutes:a,seconds:c,fractionalMilliseconds:d});return u.toUpperCase()!="Z"&&y.setTime(y.getTime()-Yae(u)),y},"parseRfc3339DateTimeWithOffset"),Fae=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Bae=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),qae=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),Hae=N(t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let e=Fae.exec(t);if(e){let[r,n,o,i,s,a,c,d]=e;return jd(ua(pa(i)),lE(o),nn(n,"day",1,31),{hours:s,minutes:a,seconds:c,fractionalMilliseconds:d})}if(e=Bae.exec(t),e){let[r,n,o,i,s,a,c,d]=e;return zae(jd(Gae(i),lE(o),nn(n,"day",1,31),{hours:s,minutes:a,seconds:c,fractionalMilliseconds:d}))}if(e=qae.exec(t),e){let[r,n,o,i,s,a,c,d]=e;return jd(ua(pa(d)),lE(n),nn(o.trimLeft(),"day",1,31),{hours:i,minutes:s,seconds:a,fractionalMilliseconds:c})}throw new TypeError("Invalid RFC-7231 date-time value")},"parseRfc7231DateTime"),jae=N(t=>{if(t==null)return;let e;if(typeof t=="number")e=t;else if(typeof t=="string")e=yE(t);else if(typeof t=="object"&&t.tag===1)e=t.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(e)||e===1/0||e===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(e*1e3))},"parseEpochTimestamp"),jd=N((t,e,r,n)=>{let o=e-1;return Kae(t,o,r),new Date(Date.UTC(t,o,r,nn(n.hours,"hour",0,23),nn(n.minutes,"minute",0,59),nn(n.seconds,"seconds",0,60),Qae(n.fractionalMilliseconds)))},"buildDate"),Gae=N(t=>{let e=new Date().getUTCFullYear(),r=Math.floor(e/100)*100+ua(pa(t));return r<e?r+100:r},"parseTwoDigitYear"),$ae=50*365*24*60*60*1e3,zae=N(t=>t.getTime()-new Date().getTime()>$ae?new Date(Date.UTC(t.getUTCFullYear()-100,t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())):t,"adjustRfc850Year"),lE=N(t=>{let e=vE.indexOf(t);if(e<0)throw new TypeError(`Invalid month: ${t}`);return e+1},"parseMonthByShortName"),Vae=[31,28,31,30,31,30,31,31,30,31,30,31],Kae=N((t,e,r)=>{let n=Vae[e];if(e===1&&Wae(t)&&(n=29),r>n)throw new TypeError(`Invalid day for ${vE[e]} in ${t}: ${r}`)},"validateDayOfMonth"),Wae=N(t=>t%4===0&&(t%100!==0||t%400===0),"isLeapYear"),nn=N((t,e,r,n)=>{let o=lk(pa(t));if(o<r||o>n)throw new TypeError(`${e} must be between ${r} and ${n}, inclusive`);return o},"parseDateValue"),Qae=N(t=>t==null?0:ak("0."+t)*1e3,"parseMilliseconds"),Yae=N(t=>{let e=t[0],r=1;if(e=="+")r=1;else if(e=="-")r=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);let n=Number(t.substring(1,3)),o=Number(t.substring(4,6));return r*(n*60+o)*60*1e3},"parseOffsetToMilliseconds"),pa=N(t=>{let e=0;for(;e<t.length-1&&t.charAt(e)==="0";)e++;return e===0?t:t.slice(e)},"stripLeadingZeroes"),pk=class mk extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,mk.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}};N(pk,"ServiceException");var Jae=pk,hk=N((t,e={})=>{Object.entries(e).filter(([,n])=>n!==void 0).forEach(([n,o])=>{(t[n]==null||t[n]==="")&&(t[n]=o)});let r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t},"decorateServiceException"),fk=N(({output:t,parsedBody:e,exceptionCtor:r,errorCode:n})=>{let o=Zae(t),i=o.httpStatusCode?o.httpStatusCode+"":void 0,s=new r({name:e?.code||e?.Code||n||i||"UnknownError",$fault:"client",$metadata:o});throw hk(s,e)},"throwDefaultError"),Xae=N(t=>({output:e,parsedBody:r,errorCode:n})=>{fk({output:e,parsedBody:r,exceptionCtor:t,errorCode:n})},"withBaseException"),Zae=N(t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),"deserializeMetadata"),ece=N(t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},"loadConfigsForDefaultMode"),XD=!1,tce=N(t=>{t&&!XD&&parseInt(t.substring(1,t.indexOf(".")))<16&&(XD=!0)},"emitWarningIfUnsupportedVersion"),rce=N(t=>{let e=[];for(let r in uE.AlgorithmId){let n=uE.AlgorithmId[r];t[n]!==void 0&&e.push({algorithmId:()=>n,checksumConstructor:()=>t[n]})}return{_checksumAlgorithms:e,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},"getChecksumConfiguration"),nce=N(t=>{let e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},"resolveChecksumRuntimeConfig"),oce=N(t=>{let e=t.retryStrategy;return{setRetryStrategy(r){e=r},retryStrategy(){return e}}},"getRetryConfiguration"),ice=N(t=>{let e={};return e.retryStrategy=t.retryStrategy(),e},"resolveRetryRuntimeConfig"),gk=N(t=>({...rce(t),...oce(t)}),"getDefaultExtensionConfiguration"),sce=gk,ace=N(t=>({...nce(t),...ice(t)}),"resolveDefaultRuntimeConfig");function Oh(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}N(Oh,"extendedEncodeURIComponent");var cce=N(t=>Array.isArray(t)?t:[t],"getArrayIfSingleItem"),yk=N(t=>{let e="#text";for(let r in t)t.hasOwnProperty(r)&&t[r][e]!==void 0?t[r]=t[r][e]:typeof t[r]=="object"&&t[r]!==null&&(t[r]=yk(t[r]));return t},"getValueFromTextNode"),Vd=N(function(){let t=Object.getPrototypeOf(this).constructor,e=Function.bind.apply(String,[null,...arguments]),r=new e;return Object.setPrototypeOf(r,t.prototype),r},"StringWrapper");Vd.prototype=Object.create(String.prototype,{constructor:{value:Vd,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(Vd,String);var _k=class Rh extends Vd{deserializeJSON(){return JSON.parse(super.toString())}toJSON(){return super.toString()}static fromObject(e){return e instanceof Rh?e:e instanceof String||typeof e=="string"?new Rh(e):new Rh(JSON.stringify(e))}};N(_k,"LazyJsonString");var dce=_k;function EE(t,e,r){let n,o,i;if(typeof e>"u"&&typeof r>"u")n={},i=t;else{if(n=t,typeof e=="function")return o=e,i=r,pce(n,o,i);i=e}for(let s of Object.keys(i)){if(!Array.isArray(i[s])){n[s]=i[s];continue}vk(n,null,i,s)}return n}N(EE,"map");var lce=N(t=>{let e={};for(let[r,n]of Object.entries(t||{}))e[r]=[,n];return e},"convertMap"),uce=N((t,e)=>{let r={};for(let n in e)vk(r,t,e,n);return r},"take"),pce=N((t,e,r)=>EE(t,Object.entries(r).reduce((n,[o,i])=>(Array.isArray(i)?n[o]=i:typeof i=="function"?n[o]=[e,i()]:n[o]=[e,i],n),{})),"mapWithFilter"),vk=N((t,e,r,n)=>{if(e!==null){let s=r[n];typeof s=="function"&&(s=[,s]);let[a=mce,c=hce,d=n]=s;(typeof a=="function"&&a(e[d])||typeof a!="function"&&a)&&(t[n]=c(e[d]));return}let[o,i]=r[n];if(typeof i=="function"){let s,a=o===void 0&&(s=i())!=null,c=typeof o=="function"&&!!o(void 0)||typeof o!="function"&&!!o;a?t[n]=s:c&&(t[n]=i())}else{let s=o===void 0&&i!=null,a=typeof o=="function"&&!!o(i)||typeof o!="function"&&!!o;(s||a)&&(t[n]=i)}},"applyInstruction"),mce=N(t=>t!=null,"nonNullish"),hce=N(t=>t,"pass"),fce=N((t,e,r,n,o,i)=>{if(e!=null&&e[r]!==void 0){let s=n();if(s.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");t=t.replace(o,i?s.split("/").map(a=>Oh(a)).join("/"):Oh(s))}else throw new Error("No value provided for input HTTP label: "+r+".");return t},"resolvedPath"),gce=N(t=>{if(t!==t)return"NaN";switch(t){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return t}},"serializeFloat"),yce=N(t=>t.toISOString().replace(".000Z","Z"),"serializeDateTime"),fE=N(t=>{if(t==null)return{};if(Array.isArray(t))return t.filter(e=>e!=null).map(fE);if(typeof t=="object"){let e={};for(let r of Object.keys(t))t[r]!=null&&(e[r]=fE(t[r]));return e}return t},"_json");function Ek(t,e,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let n=t.split(e);if(r===1)return n;let o=[],i="";for(let s=0;s<n.length;s++)i===""?i=n[s]:i+=e+n[s],(s+1)%r===0&&(o.push(i),i="");return i!==""&&o.push(i),o}N(Ek,"splitEvery")});var Sk=g(Nh=>{"use strict";Object.defineProperty(Nh,"__esModule",{value:!0});Nh.isStreamingPayload=void 0;var _ce=require("stream"),vce=t=>t?.body instanceof _ce.Readable||typeof ReadableStream<"u"&&t?.body instanceof ReadableStream;Nh.isStreamingPayload=vce});var _r=g((fje,Bk)=>{var Dh=Object.defineProperty,Ece=Object.getOwnPropertyDescriptor,Cce=Object.getOwnPropertyNames,Sce=Object.prototype.hasOwnProperty,st=(t,e)=>Dh(t,"name",{value:e,configurable:!0}),Tce=(t,e)=>{for(var r in e)Dh(t,r,{get:e[r],enumerable:!0})},bce=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Cce(e))!Sce.call(t,o)&&o!==r&&Dh(t,o,{get:()=>e[o],enumerable:!(n=Ece(e,o))||n.enumerable});return t},Ace=t=>bce(Dh({},"__esModule",{value:!0}),t),bk={};Tce(bk,{AdaptiveRetryStrategy:()=>wce,CONFIG_MAX_ATTEMPTS:()=>SE,CONFIG_RETRY_MODE:()=>Dk,ENV_MAX_ATTEMPTS:()=>CE,ENV_RETRY_MODE:()=>Nk,NODE_MAX_ATTEMPT_CONFIG_OPTIONS:()=>Pce,NODE_RETRY_MODE_CONFIG_OPTIONS:()=>xce,StandardRetryStrategy:()=>Ok,defaultDelayDecider:()=>Ik,defaultRetryDecider:()=>Rk,getOmitRetryHeadersPlugin:()=>Nce,getRetryAfterHint:()=>Fk,getRetryPlugin:()=>Fce,omitRetryHeadersMiddleware:()=>kk,omitRetryHeadersMiddlewareOptions:()=>Mk,resolveRetryConfig:()=>Oce,retryMiddleware:()=>Lk,retryMiddlewareOptions:()=>Uk});Bk.exports=Ace(bk);var ha=De(),Ak=(Lv(),M(Mv)),je=Ji(),Ice=st((t,e)=>{let r=t,n=e?.noRetryIncrement??je.NO_RETRY_INCREMENT,o=e?.retryCost??je.RETRY_COST,i=e?.timeoutRetryCost??je.TIMEOUT_RETRY_COST,s=t,a=st(m=>m.name==="TimeoutError"?i:o,"getCapacityAmount"),c=st(m=>a(m)<=s,"hasRetryTokens");return Object.freeze({hasRetryTokens:c,retrieveRetryTokens:st(m=>{if(!c(m))throw new Error("No retry token available");let f=a(m);return s-=f,f},"retrieveRetryTokens"),releaseRetryTokens:st(m=>{s+=m??n,s=Math.min(s,r)},"releaseRetryTokens")})},"getDefaultRetryQuota"),Ik=st((t,e)=>Math.floor(Math.min(je.MAXIMUM_RETRY_DELAY,Math.random()*2**e*t)),"defaultDelayDecider"),Do=Uv(),Rk=st(t=>t?(0,Do.isRetryableByTrait)(t)||(0,Do.isClockSkewError)(t)||(0,Do.isThrottlingError)(t)||(0,Do.isTransientError)(t):!1,"defaultRetryDecider"),wk=st(t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),"asSdkError"),Pk=class{constructor(e,r){this.maxAttemptsProvider=e,this.mode=je.RETRY_MODES.STANDARD,this.retryDecider=r?.retryDecider??Rk,this.delayDecider=r?.delayDecider??Ik,this.retryQuota=r?.retryQuota??Ice(je.INITIAL_RETRY_TOKENS)}shouldRetry(e,r,n){return r<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)}async getMaxAttempts(){let e;try{e=await this.maxAttemptsProvider()}catch{e=je.DEFAULT_MAX_ATTEMPTS}return e}async retry(e,r,n){let o,i=0,s=0,a=await this.getMaxAttempts(),{request:c}=r;for(ha.HttpRequest.isInstance(c)&&(c.headers[je.INVOCATION_ID_HEADER]=(0,Ak.v4)());;)try{ha.HttpRequest.isInstance(c)&&(c.headers[je.REQUEST_HEADER]=`attempt=${i+1}; max=${a}`),n?.beforeRequest&&await n.beforeRequest();let{response:d,output:u}=await e(r);return n?.afterRequest&&n.afterRequest(d),this.retryQuota.releaseRetryTokens(o),u.$metadata.attempts=i+1,u.$metadata.totalRetryDelay=s,{response:d,output:u}}catch(d){let u=wk(d);if(i++,this.shouldRetry(u,i,a)){o=this.retryQuota.retrieveRetryTokens(u);let m=this.delayDecider((0,Do.isThrottlingError)(u)?je.THROTTLING_RETRY_DELAY_BASE:je.DEFAULT_RETRY_DELAY_BASE,i),f=Rce(u.$response),h=Math.max(f||0,m);s+=h,await new Promise(y=>setTimeout(y,h));continue}throw u.$metadata||(u.$metadata={}),u.$metadata.attempts=i,u.$metadata.totalRetryDelay=s,u}}};st(Pk,"StandardRetryStrategy");var Ok=Pk,Rce=st(t=>{if(!ha.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r).getTime()-Date.now():n*1e3},"getDelayFromRetryAfterHeader"),xk=class extends Ok{constructor(e,r){let{rateLimiter:n,...o}=r??{};super(e,o),this.rateLimiter=n??new je.DefaultRateLimiter,this.mode=je.RETRY_MODES.ADAPTIVE}async retry(e,r){return super.retry(e,r,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:n=>{this.rateLimiter.updateClientSendingRate(n)}})}};st(xk,"AdaptiveRetryStrategy");var wce=xk,Tk=hr(),CE="AWS_MAX_ATTEMPTS",SE="max_attempts",Pce={environmentVariableSelector:t=>{let e=t[CE];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Environment variable ${CE} mast be a number, got "${e}"`);return r},configFileSelector:t=>{let e=t[SE];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Shared config file entry ${SE} mast be a number, got "${e}"`);return r},default:je.DEFAULT_MAX_ATTEMPTS},Oce=st(t=>{let{retryStrategy:e}=t,r=(0,Tk.normalizeProvider)(t.maxAttempts??je.DEFAULT_MAX_ATTEMPTS);return{...t,maxAttempts:r,retryStrategy:async()=>e||(await(0,Tk.normalizeProvider)(t.retryMode)()===je.RETRY_MODES.ADAPTIVE?new je.AdaptiveRetryStrategy(r):new je.StandardRetryStrategy(r))}},"resolveRetryConfig"),Nk="AWS_RETRY_MODE",Dk="retry_mode",xce={environmentVariableSelector:t=>t[Nk],configFileSelector:t=>t[Dk],default:je.DEFAULT_RETRY_MODE},kk=st(()=>t=>async e=>{let{request:r}=e;return ha.HttpRequest.isInstance(r)&&(delete r.headers[je.INVOCATION_ID_HEADER],delete r.headers[je.REQUEST_HEADER]),t(e)},"omitRetryHeadersMiddleware"),Mk={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},Nce=st(t=>({applyToStack:e=>{e.addRelativeTo(kk(),Mk)}}),"getOmitRetryHeadersPlugin"),Dce=fe(),kce=Sk(),Lk=st(t=>(e,r)=>async n=>{var o;let i=await t.retryStrategy(),s=await t.maxAttempts();if(Mce(i)){i=i;let a=await i.acquireInitialRetryToken(r.partition_id),c=new Error,d=0,u=0,{request:m}=n,f=ha.HttpRequest.isInstance(m);for(f&&(m.headers[je.INVOCATION_ID_HEADER]=(0,Ak.v4)());;)try{f&&(m.headers[je.REQUEST_HEADER]=`attempt=${d+1}; max=${s}`);let{response:h,output:y}=await e(n);return i.recordSuccess(a),y.$metadata.attempts=d+1,y.$metadata.totalRetryDelay=u,{response:h,output:y}}catch(h){let y=Lce(h);if(c=wk(h),f&&(0,kce.isStreamingPayload)(m))throw(o=r.logger instanceof Dce.NoOpLogger?console:r.logger)==null||o.warn("An error was encountered in a non-retryable streaming request."),c;try{a=await i.refreshRetryTokenForRetry(a,y)}catch{throw c.$metadata||(c.$metadata={}),c.$metadata.attempts=d+1,c.$metadata.totalRetryDelay=u,c}d=a.getRetryCount();let E=a.getRetryDelay();u+=E,await new Promise(A=>setTimeout(A,E))}}else return i=i,i?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",i.mode]]),i.retry(e,n)},"retryMiddleware"),Mce=st(t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u","isRetryStrategyV2"),Lce=st(t=>{let e={error:t,errorType:Uce(t)},r=Fk(t.$response);return r&&(e.retryAfterHint=r),e},"getRetryErrorInfo"),Uce=st(t=>(0,Do.isThrottlingError)(t)?"THROTTLING":(0,Do.isTransientError)(t)?"TRANSIENT":(0,Do.isServerError)(t)?"SERVER_ERROR":"CLIENT_ERROR","getRetryErrorType"),Uk={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Fce=st(t=>({applyToStack:e=>{e.add(Lk(t),Uk)}}),"getRetryPlugin"),Fk=st(t=>{if(!ha.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)},"getRetryAfterHint")});var qk,Hk,Bce,jk=v(()=>{qk=ae(_r());Rv();Hk={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:qk.retryMiddlewareOptions.name},Bce=t=>({applyToStack:e=>{e.addRelativeTo(Iv(t),Hk)}})});var Gk=v(()=>{Rv();jk()});var TE,$k=v(()=>{TE=class{constructor(e){this.authSchemes=new Map;for(let[r,n]of Object.entries(e))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(e){return this.authSchemes.get(e)}}});var zk,bE,AE,Vk=v(()=>{zk=ae(De()),bE=ae(en()),AE=class{async sign(e,r,n){if(!n)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!n.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!n.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!r.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let o=zk.HttpRequest.clone(e);if(n.in===bE.HttpApiKeyAuthLocation.QUERY)o.query[n.name]=r.apiKey;else if(n.in===bE.HttpApiKeyAuthLocation.HEADER)o.headers[n.name]=n.scheme?`${n.scheme} ${r.apiKey}`:r.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+n.in+"`");return o}}});var Kk,IE,Wk=v(()=>{Kk=ae(De()),IE=class{async sign(e,r,n){let o=Kk.HttpRequest.clone(e);if(!r.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return o.headers.Authorization=`Bearer ${r.token}`,o}}});var RE,Qk=v(()=>{RE=class{async sign(e,r,n){return e}}});var Yk=v(()=>{Vk();Wk();Qk()});var Jk,qce,wE,kh,PE,Xk=v(()=>{Jk=t=>e=>kh(e)&&e.expiration.getTime()-Date.now()<t,qce=3e5,wE=Jk(3e5),kh=t=>t.expiration!==void 0,PE=(t,e,r)=>{if(t===void 0)return;let n=typeof t!="function"?async()=>Promise.resolve(t):t,o,i,s,a=!1,c=async d=>{i||(i=n(d));try{o=await i,s=!0,a=!1}finally{i=void 0}return o};return e===void 0?async d=>((!s||d?.forceRefresh)&&(o=await c(d)),o):async d=>((!s||d?.forceRefresh)&&(o=await c(d)),a?o:r(o)?(e(o)&&await c(d),o):(a=!0,o))}});var Zk=v(()=>{$k();Yk();Xk()});var OE,Hce,eM=v(()=>{OE=ae(en()),Hce=t=>t[OE.SMITHY_CONTEXT_KEY]||(t[OE.SMITHY_CONTEXT_KEY]={})});var ko,tM=v(()=>{ko=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e}});function jce(t,e){return new Mh(t,e)}var rM,nM,Mh,oM=v(()=>{rM=ae(De()),nM=ae(fe());Mh=class{constructor(e,r){this.input=e,this.context=r,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){let{hostname:e,protocol:r="https",port:n,path:o}=await this.context.endpoint();this.path=o;for(let i of this.resolvePathStack)i(this.path);return new rM.HttpRequest({protocol:r,hostname:this.hostname||e,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+e}),this}p(e,r,n,o){return this.resolvePathStack.push(i=>{this.path=(0,nM.resolvedPath)(i,this.input,e,r,n,o)}),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}}});function iM(t,e,r,n,o){return async function*(s,a,...c){let d=s.startingToken||void 0,u=!0,m;for(;u;){if(a[r]=d,o&&(a[o]=a[o]??s.pageSize),s.client instanceof t)m=await Gce(e,s.client,a,...c);else throw new Error(`Invalid client, expected instance of ${t.name}`);yield m;let f=d;d=$ce(m,n),u=!!(d&&(!s.stopOnSameToken||d!==f))}return void 0}}var Gce,$ce,sM=v(()=>{Gce=async(t,e,r,...n)=>await e.send(new t(r),...n);$ce=(t,e)=>{let r=t,n=e.split(".");for(let o of n){if(!r||typeof r!="object")return;r=r[o]}return r}});var It={};gt(It,{DefaultIdentityProviderConfig:()=>TE,EXPIRATION_MS:()=>qce,HttpApiKeyAuthSigner:()=>AE,HttpBearerAuthSigner:()=>IE,NoAuthSigner:()=>RE,RequestBuilder:()=>Mh,createIsIdentityExpiredFunction:()=>Jk,createPaginator:()=>iM,doesIdentityRequireRefresh:()=>kh,getHttpAuthSchemeEndpointRuleSetPlugin:()=>roe,getHttpAuthSchemePlugin:()=>noe,getHttpSigningPlugin:()=>Bce,getSmithyContext:()=>Hce,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>Dx,httpAuthSchemeMiddleware:()=>Od,httpAuthSchemeMiddlewareOptions:()=>Lx,httpSigningMiddleware:()=>Iv,httpSigningMiddlewareOptions:()=>Hk,isIdentityExpired:()=>wE,memoizeIdentityProvider:()=>PE,normalizeProvider:()=>ko,requestBuilder:()=>jce});var mt=v(()=>{Fx();Gk();Zk();eM();tM();oM();sM()});var fa=g((zje,uM)=>{var Lh=Object.defineProperty,zce=Object.getOwnPropertyDescriptor,Vce=Object.getOwnPropertyNames,Kce=Object.prototype.hasOwnProperty,cM=(t,e)=>Lh(t,"name",{value:e,configurable:!0}),Wce=(t,e)=>{for(var r in e)Lh(t,r,{get:e[r],enumerable:!0})},Qce=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Vce(e))!Kce.call(t,o)&&o!==r&&Lh(t,o,{get:()=>e[o],enumerable:!(n=zce(e,o))||n.enumerable});return t},Yce=t=>Qce(Lh({},"__esModule",{value:!0}),t),dM={};Wce(dM,{contentLengthMiddleware:()=>xE,contentLengthMiddlewareOptions:()=>lM,getContentLengthPlugin:()=>Xce});uM.exports=Yce(dM);var Jce=De(),aM="content-length";function xE(t){return e=>async r=>{let n=r.request;if(Jce.HttpRequest.isInstance(n)){let{body:o,headers:i}=n;if(o&&Object.keys(i).map(s=>s.toLowerCase()).indexOf(aM)===-1)try{let s=t(o);n.headers={...n.headers,[aM]:String(s)}}catch{}}return e({...r,request:n})}}cM(xE,"contentLengthMiddleware");var lM={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Xce=cM(t=>({applyToStack:e=>{e.add(xE(t.bodyLengthChecker),lM)}}),"getContentLengthPlugin")});var pM,Zce,mM=v(()=>{pM=!1,Zce=t=>{t&&!pM&&parseInt(t.substring(1,t.indexOf(".")))<18&&(pM=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))}});var hM=v(()=>{mM()});var fM,NE,gM=v(()=>{fM=ae(De()),NE=t=>fM.HttpResponse.isInstance(t)?t.headers?.date??t.headers?.Date:void 0});var ga,DE=v(()=>{ga=t=>new Date(Date.now()+t)});var yM,_M=v(()=>{DE();yM=(t,e)=>Math.abs(ga(e).getTime()-t)>=3e5});var kE,vM=v(()=>{_M();kE=(t,e)=>{let r=Date.parse(t);return yM(r,e)?r-Date.now():e}});var ME=v(()=>{gM();DE();vM()});var EM,Kd,Wd,ts,CM,LE=v(()=>{EM=ae(De());ME();Kd=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},Wd=async t=>{let e=Kd("context",t.context),r=Kd("config",t.config),n=e.endpointV2?.properties?.authSchemes?.[0],i=await Kd("signer",r.signer)(n),s=t?.signingRegion,a=t?.signingRegionSet,c=t?.signingName;return{config:r,signer:i,signingRegion:s,signingRegionSet:a,signingName:c}},ts=class{async sign(e,r,n){if(!EM.HttpRequest.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let o=await Wd(n),{config:i,signer:s}=o,{signingRegion:a,signingName:c}=o,d=n.context;if(d?.authSchemes?.length??!1){let[m,f]=d.authSchemes;m?.name==="sigv4a"&&f?.name==="sigv4"&&(a=f?.signingRegion??a,c=f?.signingName??c)}return await s.sign(e,{signingDate:ga(i.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(e){return r=>{let n=r.ServerTime??NE(r.$response);if(n){let o=Kd("config",e.config),i=o.systemClockOffset;o.systemClockOffset=kE(n,o.systemClockOffset),o.systemClockOffset!==i&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(e,r){let n=NE(e);if(n){let o=Kd("config",r.config);o.systemClockOffset=kE(n,o.systemClockOffset)}}},CM=ts});var SM,Uh,TM=v(()=>{SM=ae(De());ME();LE();Uh=class extends ts{async sign(e,r,n){if(!SM.HttpRequest.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:o,signer:i,signingRegion:s,signingRegionSet:a,signingName:c}=await Wd(n),u=(await o.sigv4aSigningRegionSet?.()??a??[s]).join(",");return await i.sign(e,{signingDate:ga(o.systemClockOffset),signingRegion:u,signingService:c})}}});var UE,ede,tde,bM=v(()=>{mt();UE=ae(Lt()),ede=t=>(t.sigv4aSigningRegionSet=ko(t.sigv4aSigningRegionSet),t),tde={environmentVariableSelector(t){if(t.AWS_SIGV4A_SIGNING_REGION_SET)return t.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(e=>e.trim());throw new UE.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(t){if(t.sigv4a_signing_region_set)return(t.sigv4a_signing_region_set??"").split(",").map(e=>e.trim());throw new UE.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});var zM=g((hGe,$M)=>{var jh=Object.defineProperty,rde=Object.getOwnPropertyDescriptor,nde=Object.getOwnPropertyNames,ode=Object.prototype.hasOwnProperty,ht=(t,e)=>jh(t,"name",{value:e,configurable:!0}),ide=(t,e)=>{for(var r in e)jh(t,r,{get:e[r],enumerable:!0})},sde=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of nde(e))!ode.call(t,o)&&o!==r&&jh(t,o,{get:()=>e[o],enumerable:!(n=rde(e,o))||n.enumerable});return t},ade=t=>sde(jh({},"__esModule",{value:!0}),t),PM={};ide(PM,{SignatureV4:()=>Dde,clearCredentialCache:()=>bde,createScope:()=>qh,getCanonicalHeaders:()=>HE,getCanonicalQuery:()=>UM,getPayloadHash:()=>Hh,getSigningKey:()=>LM,moveHeadersToQuery:()=>jM,prepareRequest:()=>GE});$M.exports=ade(PM);var AM=hr(),FE=Ct(),cde="X-Amz-Algorithm",dde="X-Amz-Credential",OM="X-Amz-Date",lde="X-Amz-SignedHeaders",ude="X-Amz-Expires",xM="X-Amz-Signature",NM="X-Amz-Security-Token",DM="authorization",kM=OM.toLowerCase(),pde="date",mde=[DM,kM,pde],hde=xM.toLowerCase(),qE="x-amz-content-sha256",fde=NM.toLowerCase(),gde={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},yde=/^proxy-/,_de=/^sec-/,BE="AWS4-HMAC-SHA256",vde="AWS4-HMAC-SHA256-PAYLOAD",Ede="UNSIGNED-PAYLOAD",Cde=50,MM="aws4_request",Sde=60*60*24*7,Mo=_h(),Tde=Ct(),ya={},Bh=[],qh=ht((t,e,r)=>`${t}/${e}/${r}/${MM}`,"createScope"),LM=ht(async(t,e,r,n,o)=>{let i=await IM(t,e.secretAccessKey,e.accessKeyId),s=`${r}:${n}:${o}:${(0,Mo.toHex)(i)}:${e.sessionToken}`;if(s in ya)return ya[s];for(Bh.push(s);Bh.length>Cde;)delete ya[Bh.shift()];let a=`AWS4${e.secretAccessKey}`;for(let c of[r,n,o,MM])a=await IM(t,a,c);return ya[s]=a},"getSigningKey"),bde=ht(()=>{Bh.length=0,Object.keys(ya).forEach(t=>{delete ya[t]})},"clearCredentialCache"),IM=ht((t,e,r)=>{let n=new t(e);return n.update((0,Tde.toUint8Array)(r)),n.digest()},"hmac"),HE=ht(({headers:t},e,r)=>{let n={};for(let o of Object.keys(t).sort()){if(t[o]==null)continue;let i=o.toLowerCase();(i in gde||e?.has(i)||yde.test(i)||_de.test(i))&&(!r||r&&!r.has(i))||(n[i]=t[o].trim().replace(/\s+/g," "))}return n},"getCanonicalHeaders"),Qd=Qv(),UM=ht(({query:t={}})=>{let e=[],r={};for(let n of Object.keys(t).sort()){if(n.toLowerCase()===hde)continue;e.push(n);let o=t[n];typeof o=="string"?r[n]=`${(0,Qd.escapeUri)(n)}=${(0,Qd.escapeUri)(o)}`:Array.isArray(o)&&(r[n]=o.slice(0).reduce((i,s)=>i.concat([`${(0,Qd.escapeUri)(n)}=${(0,Qd.escapeUri)(s)}`]),[]).sort().join("&"))}return e.map(n=>r[n]).filter(n=>n).join("&")},"getCanonicalQuery"),Ade=Gv(),Ide=Ct(),Hh=ht(async({headers:t,body:e},r)=>{for(let n of Object.keys(t))if(n.toLowerCase()===qE)return t[n];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||(0,Ade.isArrayBuffer)(e)){let n=new r;return n.update((0,Ide.toUint8Array)(e)),(0,Mo.toHex)(await n.digest())}return Ede},"getPayloadHash"),RM=Ct(),FM=class{format(e){let r=[];for(let i of Object.keys(e)){let s=(0,RM.fromUtf8)(i);r.push(Uint8Array.from([s.byteLength]),s,this.formatHeaderValue(e[i]))}let n=new Uint8Array(r.reduce((i,s)=>i+s.byteLength,0)),o=0;for(let i of r)n.set(i,o),o+=i.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(e.value.bytes,1),o;case"binary":let i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);let s=new Uint8Array(i.buffer);return s.set(e.value,3),s;case"string":let a=(0,RM.fromUtf8)(e.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let d=new Uint8Array(c.buffer);return d.set(a,3),d;case"timestamp":let u=new Uint8Array(9);return u[0]=8,u.set(Pde.fromNumber(e.value.valueOf()).bytes,1),u;case"uuid":if(!wde.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);let m=new Uint8Array(17);return m[0]=9,m.set((0,Mo.fromHex)(e.value.replace(/\-/g,"")),1),m}}};ht(FM,"HeaderFormatter");var Rde=FM,wde=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,BM=class qM{constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(e));n>-1&&o>0;n--,o/=256)r[n]=o;return e<0&&jE(r),new qM(r)}valueOf(){let e=this.bytes.slice(0),r=e[0]&128;return r&&jE(e),parseInt((0,Mo.toHex)(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}};ht(BM,"Int64");var Pde=BM;function jE(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}ht(jE,"negate");var Ode=ht((t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1},"hasHeader"),HM=De(),jM=ht((t,e={})=>{var r;let{headers:n,query:o={}}=HM.HttpRequest.clone(t);for(let i of Object.keys(n)){let s=i.toLowerCase();s.slice(0,6)==="x-amz-"&&!((r=e.unhoistableHeaders)!=null&&r.has(s))&&(o[i]=n[i],delete n[i])}return{...t,headers:n,query:o}},"moveHeadersToQuery"),GE=ht(t=>{t=HM.HttpRequest.clone(t);for(let e of Object.keys(t.headers))mde.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},"prepareRequest"),xde=ht(t=>Nde(t).toISOString().replace(/\.\d{3}Z$/,"Z"),"iso8601"),Nde=ht(t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t,"toDate"),GM=class{constructor({applyChecksum:e,credentials:r,region:n,service:o,sha256:i,uriEscapePath:s=!0}){this.headerFormatter=new Rde,this.service=o,this.sha256=i,this.uriEscapePath=s,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=(0,AM.normalizeProvider)(n),this.credentialProvider=(0,AM.normalizeProvider)(r)}async presign(e,r={}){let{signingDate:n=new Date,expiresIn:o=3600,unsignableHeaders:i,unhoistableHeaders:s,signableHeaders:a,signingRegion:c,signingService:d}=r,u=await this.credentialProvider();this.validateResolvedCredentials(u);let m=c??await this.regionProvider(),{longDate:f,shortDate:h}=Fh(n);if(o>Sde)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let y=qh(h,m,d??this.service),E=jM(GE(e),{unhoistableHeaders:s});u.sessionToken&&(E.query[NM]=u.sessionToken),E.query[cde]=BE,E.query[dde]=`${u.accessKeyId}/${y}`,E.query[OM]=f,E.query[ude]=o.toString(10);let A=HE(E,i,a);return E.query[lde]=wM(A),E.query[xM]=await this.getSignature(f,y,this.getSigningKey(u,m,h,d),this.createCanonicalRequest(E,A,await Hh(e,this.sha256))),E}async sign(e,r){return typeof e=="string"?this.signString(e,r):e.headers&&e.payload?this.signEvent(e,r):e.message?this.signMessage(e,r):this.signRequest(e,r)}async signEvent({headers:e,payload:r},{signingDate:n=new Date,priorSignature:o,signingRegion:i,signingService:s}){let a=i??await this.regionProvider(),{shortDate:c,longDate:d}=Fh(n),u=qh(c,a,s??this.service),m=await Hh({headers:{},body:r},this.sha256),f=new this.sha256;f.update(e);let h=(0,Mo.toHex)(await f.digest()),y=[vde,d,u,o,h,m].join(`
`);return this.signString(y,{signingDate:n,signingRegion:a,signingService:s})}async signMessage(e,{signingDate:r=new Date,signingRegion:n,signingService:o}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:r,signingRegion:n,signingService:o,priorSignature:e.priorSignature}).then(s=>({message:e.message,signature:s}))}async signString(e,{signingDate:r=new Date,signingRegion:n,signingService:o}={}){let i=await this.credentialProvider();this.validateResolvedCredentials(i);let s=n??await this.regionProvider(),{shortDate:a}=Fh(r),c=new this.sha256(await this.getSigningKey(i,s,a,o));return c.update((0,FE.toUint8Array)(e)),(0,Mo.toHex)(await c.digest())}async signRequest(e,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:o,signingRegion:i,signingService:s}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let c=i??await this.regionProvider(),d=GE(e),{longDate:u,shortDate:m}=Fh(r),f=qh(m,c,s??this.service);d.headers[kM]=u,a.sessionToken&&(d.headers[fde]=a.sessionToken);let h=await Hh(d,this.sha256);!Ode(qE,d.headers)&&this.applyChecksum&&(d.headers[qE]=h);let y=HE(d,o,n),E=await this.getSignature(u,f,this.getSigningKey(a,c,m,s),this.createCanonicalRequest(d,y,h));return d.headers[DM]=`${BE} Credential=${a.accessKeyId}/${f}, SignedHeaders=${wM(y)}, Signature=${E}`,d}createCanonicalRequest(e,r,n){let o=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${UM(e)}
${o.map(i=>`${i}:${r[i]}`).join(`
`)}

${o.join(";")}
${n}`}async createStringToSign(e,r,n){let o=new this.sha256;o.update((0,FE.toUint8Array)(n));let i=await o.digest();return`${BE}
${e}
${r}
${(0,Mo.toHex)(i)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let r=[];for(let i of e.split("/"))i?.length!==0&&i!=="."&&(i===".."?r.pop():r.push(i));let n=`${e?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&e?.endsWith("/")?"/":""}`;return(0,Qd.escapeUri)(n).replace(/%2F/g,"/")}return e}async getSignature(e,r,n,o){let i=await this.createStringToSign(e,r,o),s=new this.sha256(await n);return s.update((0,FE.toUint8Array)(i)),(0,Mo.toHex)(await s.digest())}getSigningKey(e,r,n,o){return LM(this.sha256,e,n,r,o||this.service)}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}};ht(GM,"SignatureV4");var Dde=GM,Fh=ht(t=>{let e=xde(t).replace(/[\-:]/g,"");return{longDate:e,shortDate:e.slice(0,8)}},"formatDate"),wM=ht(t=>Object.keys(t).sort().join(";"),"getCanonicalHeaderList")});var $E,VM,kde,KM=v(()=>{mt();$E=ae(zM()),VM=t=>{let e;t.credentials&&(e=PE(t.credentials,wE,kh)),e||(t.credentialDefaultProvider?e=ko(t.credentialDefaultProvider(Object.assign({},t,{parentClientConfig:t}))):e=async()=>{throw new Error("`credentials` is missing")});let{signingEscapePath:r=!0,systemClockOffset:n=t.systemClockOffset||0,sha256:o}=t,i;return t.signer?i=ko(t.signer):t.regionInfoProvider?i=()=>ko(t.region)().then(async s=>[await t.regionInfoProvider(s,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},s]).then(([s,a])=>{let{signingRegion:c,signingService:d}=s;t.signingRegion=t.signingRegion||c||a,t.signingName=t.signingName||d||t.serviceId;let u={...t,credentials:e,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:r},m=t.signerConstructor||$E.SignatureV4;return new m(u)}):i=async s=>{s=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await ko(t.region)(),properties:{}},s);let a=s.signingRegion,c=s.signingName;t.signingRegion=t.signingRegion||a,t.signingName=t.signingName||c||t.serviceId;let d={...t,credentials:e,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:r},u=t.signerConstructor||$E.SignatureV4;return new u(d)},{...t,systemClockOffset:n,signingEscapePath:r,credentials:e,signer:i}},kde=VM});var WM=v(()=>{LE();TM();bM();KM()});var QM=v(()=>{WM()});var Mde,Lde,Ude,YM=v(()=>{Mde=t=>{if(t==null)return t;if(typeof t=="number"||typeof t=="bigint"){let e=new Error(`Received number ${t} where a string was expected.`);return e.name="Warning",console.warn(e),String(t)}if(typeof t=="boolean"){let e=new Error(`Received boolean ${t} where a string was expected.`);return e.name="Warning",console.warn(e),String(t)}return t},Lde=t=>{if(t==null)return t;if(typeof t=="string"){let e=t.toLowerCase();if(t!==""&&e!=="false"&&e!=="true"){let r=new Error(`Received string "${t}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return t!==""&&e!=="false"}return t},Ude=t=>{if(t==null)return t;if(typeof t=="string"){let e=Number(t);if(e.toString()!==t){let r=new Error(`Received string "${t}" where a number was expected.`);return r.name="Warning",console.warn(r),t}return e}return t}});var JM,Fde,XM=v(()=>{JM=ae(fe()),Fde=t=>{if(t!=null)return typeof t=="object"&&"__type"in t&&delete t.__type,(0,JM.expectUnion)(t)}});var ZM,Gh,zE=v(()=>{ZM=ae(fe()),Gh=(t,e)=>(0,ZM.collectBody)(t,e).then(r=>e.utf8Encoder(r))});var eL,Bde,qde,tL=v(()=>{zE();eL=(t,e)=>Gh(t,e).then(r=>{if(r.length)try{return JSON.parse(r)}catch(n){throw n?.name==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:r}),n}return{}}),Bde=async(t,e)=>{let r=await eL(t,e);return r.message=r.message??r.Message,r},qde=(t,e)=>{let r=(i,s)=>Object.keys(i).find(a=>a.toLowerCase()===s.toLowerCase()),n=i=>{let s=i;return typeof s=="number"&&(s=s.toString()),s.indexOf(",")>=0&&(s=s.split(",")[0]),s.indexOf(":")>=0&&(s=s.split(":")[0]),s.indexOf("#")>=0&&(s=s.split("#")[1]),s},o=r(t.headers,"x-amzn-errortype");if(o!==void 0)return n(t.headers[o]);if(e.code!==void 0)return n(e.code);if(e.__type!==void 0)return n(e.__type)}});var $h=g(Un=>{"use strict";var rL=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Hde=rL+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",nL="["+rL+"]["+Hde+"]*",jde=new RegExp("^"+nL+"$"),Gde=function(t,e){let r=[],n=e.exec(t);for(;n;){let o=[];o.startIndex=e.lastIndex-n[0].length;let i=n.length;for(let s=0;s<i;s++)o.push(n[s]);r.push(o),n=e.exec(t)}return r},$de=function(t){let e=jde.exec(t);return!(e===null||typeof e>"u")};Un.isExist=function(t){return typeof t<"u"};Un.isEmptyObject=function(t){return Object.keys(t).length===0};Un.merge=function(t,e,r){if(e){let n=Object.keys(e),o=n.length;for(let i=0;i<o;i++)r==="strict"?t[n[i]]=[e[n[i]]]:t[n[i]]=e[n[i]]}};Un.getValue=function(t){return Un.isExist(t)?t:""};Un.isName=$de;Un.getAllMatches=Gde;Un.nameRegexp=nL});var KE=g(cL=>{"use strict";var VE=$h(),zde={allowBooleanAttributes:!1,unpairedTags:[]};cL.validate=function(t,e){e=Object.assign({},zde,e);let r=[],n=!1,o=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let i=0;i<t.length;i++)if(t[i]==="<"&&t[i+1]==="?"){if(i+=2,i=iL(t,i),i.err)return i}else if(t[i]==="<"){let s=i;if(i++,t[i]==="!"){i=sL(t,i);continue}else{let a=!1;t[i]==="/"&&(a=!0,i++);let c="";for(;i<t.length&&t[i]!==">"&&t[i]!==" "&&t[i]!=="	"&&t[i]!==`
`&&t[i]!=="\r";i++)c+=t[i];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),i--),!Zde(c)){let m;return c.trim().length===0?m="Invalid space after '<'.":m="Tag '"+c+"' is an invalid name.",Je("InvalidTag",m,Ut(t,i))}let d=Wde(t,i);if(d===!1)return Je("InvalidAttr","Attributes for '"+c+"' have open quote.",Ut(t,i));let u=d.value;if(i=d.index,u[u.length-1]==="/"){let m=i-u.length;u=u.substring(0,u.length-1);let f=aL(u,e);if(f===!0)n=!0;else return Je(f.err.code,f.err.msg,Ut(t,m+f.err.line))}else if(a)if(d.tagClosed){if(u.trim().length>0)return Je("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",Ut(t,s));if(r.length===0)return Je("InvalidTag","Closing tag '"+c+"' has not been opened.",Ut(t,s));{let m=r.pop();if(c!==m.tagName){let f=Ut(t,m.tagStartPos);return Je("InvalidTag","Expected closing tag '"+m.tagName+"' (opened in line "+f.line+", col "+f.col+") instead of closing tag '"+c+"'.",Ut(t,s))}r.length==0&&(o=!0)}}else return Je("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",Ut(t,i));else{let m=aL(u,e);if(m!==!0)return Je(m.err.code,m.err.msg,Ut(t,i-u.length+m.err.line));if(o===!0)return Je("InvalidXml","Multiple possible root nodes found.",Ut(t,i));e.unpairedTags.indexOf(c)!==-1||r.push({tagName:c,tagStartPos:s}),n=!0}for(i++;i<t.length;i++)if(t[i]==="<")if(t[i+1]==="!"){i++,i=sL(t,i);continue}else if(t[i+1]==="?"){if(i=iL(t,++i),i.err)return i}else break;else if(t[i]==="&"){let m=Jde(t,i);if(m==-1)return Je("InvalidChar","char '&' is not expected.",Ut(t,i));i=m}else if(o===!0&&!oL(t[i]))return Je("InvalidXml","Extra text at the end",Ut(t,i));t[i]==="<"&&i--}}else{if(oL(t[i]))continue;return Je("InvalidChar","char '"+t[i]+"' is not expected.",Ut(t,i))}if(n){if(r.length==1)return Je("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",Ut(t,r[0].tagStartPos));if(r.length>0)return Je("InvalidXml","Invalid '"+JSON.stringify(r.map(i=>i.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Je("InvalidXml","Start tag expected.",1);return!0};function oL(t){return t===" "||t==="	"||t===`
`||t==="\r"}function iL(t,e){let r=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){let n=t.substr(r,e-r);if(e>5&&n==="xml")return Je("InvalidXml","XML declaration allowed only at the start of the document.",Ut(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function sL(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let r=1;for(e+=8;e<t.length;e++)if(t[e]==="<")r++;else if(t[e]===">"&&(r--,r===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}var Vde='"',Kde="'";function Wde(t,e){let r="",n="",o=!1;for(;e<t.length;e++){if(t[e]===Vde||t[e]===Kde)n===""?n=t[e]:n!==t[e]||(n="");else if(t[e]===">"&&n===""){o=!0;break}r+=t[e]}return n!==""?!1:{value:r,index:e,tagClosed:o}}var Qde=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function aL(t,e){let r=VE.getAllMatches(t,Qde),n={};for(let o=0;o<r.length;o++){if(r[o][1].length===0)return Je("InvalidAttr","Attribute '"+r[o][2]+"' has no space in starting.",Yd(r[o]));if(r[o][3]!==void 0&&r[o][4]===void 0)return Je("InvalidAttr","Attribute '"+r[o][2]+"' is without value.",Yd(r[o]));if(r[o][3]===void 0&&!e.allowBooleanAttributes)return Je("InvalidAttr","boolean attribute '"+r[o][2]+"' is not allowed.",Yd(r[o]));let i=r[o][2];if(!Xde(i))return Je("InvalidAttr","Attribute '"+i+"' is an invalid name.",Yd(r[o]));if(!n.hasOwnProperty(i))n[i]=1;else return Je("InvalidAttr","Attribute '"+i+"' is repeated.",Yd(r[o]))}return!0}function Yde(t,e){let r=/\d/;for(t[e]==="x"&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(r))break}return-1}function Jde(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,Yde(t,e);let r=0;for(;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(t[e]===";")break;return-1}return e}function Je(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}function Xde(t){return VE.isName(t)}function Zde(t){return VE.isName(t)}function Ut(t,e){let r=t.substring(0,e).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function Yd(t){return t.startIndex+t[1].length}});var lL=g(WE=>{var dL={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,r){return t}},ele=function(t){return Object.assign({},dL,t)};WE.buildOptions=ele;WE.defaultOptions=dL});var pL=g((NGe,uL)=>{"use strict";var QE=class{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,r){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:r})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}};uL.exports=QE});var hL=g((DGe,mL)=>{var tle=$h();function rle(t,e){let r={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let n=1,o=!1,i=!1,s="";for(;e<t.length;e++)if(t[e]==="<"&&!i){if(o&&ile(t,e))e+=7,[entityName,val,e]=nle(t,e+1),val.indexOf("&")===-1&&(r[dle(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(o&&sle(t,e))e+=8;else if(o&&ale(t,e))e+=8;else if(o&&cle(t,e))e+=9;else if(ole)i=!0;else throw new Error("Invalid DOCTYPE");n++,s=""}else if(t[e]===">"){if(i?t[e-1]==="-"&&t[e-2]==="-"&&(i=!1,n--):n--,n===0)break}else t[e]==="["?o=!0:s+=t[e];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:e}}function nle(t,e){let r="";for(;e<t.length&&t[e]!=="'"&&t[e]!=='"';e++)r+=t[e];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");let n=t[e++],o="";for(;e<t.length&&t[e]!==n;e++)o+=t[e];return[r,o,e]}function ole(t,e){return t[e+1]==="!"&&t[e+2]==="-"&&t[e+3]==="-"}function ile(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="N"&&t[e+4]==="T"&&t[e+5]==="I"&&t[e+6]==="T"&&t[e+7]==="Y"}function sle(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="L"&&t[e+4]==="E"&&t[e+5]==="M"&&t[e+6]==="E"&&t[e+7]==="N"&&t[e+8]==="T"}function ale(t,e){return t[e+1]==="!"&&t[e+2]==="A"&&t[e+3]==="T"&&t[e+4]==="T"&&t[e+5]==="L"&&t[e+6]==="I"&&t[e+7]==="S"&&t[e+8]==="T"}function cle(t,e){return t[e+1]==="!"&&t[e+2]==="N"&&t[e+3]==="O"&&t[e+4]==="T"&&t[e+5]==="A"&&t[e+6]==="T"&&t[e+7]==="I"&&t[e+8]==="O"&&t[e+9]==="N"}function dle(t){if(tle.isName(t))return t;throw new Error(`Invalid entity name ${t}`)}mL.exports=rle});var gL=g((kGe,fL)=>{var lle=/^[-+]?0x[a-fA-F0-9]+$/,ule=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var ple={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function mle(t,e={}){if(e=Object.assign({},ple,e),!t||typeof t!="string")return t;let r=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(r))return t;if(e.hex&&lle.test(r))return Number.parseInt(r,16);{let n=ule.exec(r);if(n){let o=n[1],i=n[2],s=hle(n[3]),a=n[4]||n[6];if(!e.leadingZeros&&i.length>0&&o&&r[2]!==".")return t;if(!e.leadingZeros&&i.length>0&&!o&&r[1]!==".")return t;{let c=Number(r),d=""+c;return d.search(/[eE]/)!==-1||a?e.eNotation?c:t:r.indexOf(".")!==-1?d==="0"&&s===""||d===s||o&&d==="-"+s?c:t:i?s===d||o+s===d?c:t:r===d||r===o+d?c:t}}else return t}}function hle(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substr(0,t.length-1))),t}fL.exports=mle});var vL=g((MGe,_L)=>{"use strict";var yL=$h(),Jd=pL(),fle=hL(),gle=gL(),YE=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(r,n)=>String.fromCharCode(Number.parseInt(n,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(r,n)=>String.fromCharCode(Number.parseInt(n,16))}},this.addExternalEntities=yle,this.parseXml=Sle,this.parseTextData=_le,this.resolveNameSpace=vle,this.buildAttributesMap=Cle,this.isItStopNode=Ile,this.replaceEntitiesValue=ble,this.readStopNodeData=wle,this.saveTextToParentTag=Ale,this.addChild=Tle}};function yle(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let n=e[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:t[n]}}}function _le(t,e,r,n,o,i,s){if(t!==void 0&&(this.options.trimValues&&!n&&(t=t.trim()),t.length>0)){s||(t=this.replaceEntitiesValue(t));let a=this.options.tagValueProcessor(e,t,r,o,i);return a==null?t:typeof a!=typeof t||a!==t?a:this.options.trimValues?XE(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?XE(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function vle(t){if(this.options.removeNSPrefix){let e=t.split(":"),r=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=r+e[1])}return t}var Ele=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Cle(t,e,r){if(!this.options.ignoreAttributes&&typeof t=="string"){let n=yL.getAllMatches(t,Ele),o=n.length,i={};for(let s=0;s<o;s++){let a=this.resolveNameSpace(n[s][1]),c=n[s][4],d=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(d=this.options.transformAttributeName(d)),d==="__proto__"&&(d="#__proto__"),c!==void 0){this.options.trimValues&&(c=c.trim()),c=this.replaceEntitiesValue(c);let u=this.options.attributeValueProcessor(a,c,e);u==null?i[d]=c:typeof u!=typeof c||u!==c?i[d]=u:i[d]=XE(c,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[d]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){let s={};return s[this.options.attributesGroupName]=i,s}return i}}var Sle=function(t){t=t.replace(/\r\n?/g,`
`);let e=new Jd("!xml"),r=e,n="",o="";for(let i=0;i<t.length;i++)if(t[i]==="<")if(t[i+1]==="/"){let a=rs(t,">",i,"Closing Tag is not closed."),c=t.substring(i+2,a).trim();if(this.options.removeNSPrefix){let m=c.indexOf(":");m!==-1&&(c=c.substr(m+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&(n=this.saveTextToParentTag(n,r,o));let d=o.substring(o.lastIndexOf(".")+1);if(c&&this.options.unpairedTags.indexOf(c)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${c}>`);let u=0;d&&this.options.unpairedTags.indexOf(d)!==-1?(u=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):u=o.lastIndexOf("."),o=o.substring(0,u),r=this.tagsNodeStack.pop(),n="",i=a}else if(t[i+1]==="?"){let a=JE(t,i,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,o),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){let c=new Jd(a.tagName);c.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(c[":@"]=this.buildAttributesMap(a.tagExp,o,a.tagName)),this.addChild(r,c,o)}i=a.closeIndex+1}else if(t.substr(i+1,3)==="!--"){let a=rs(t,"-->",i+4,"Comment is not closed.");if(this.options.commentPropName){let c=t.substring(i+4,a-2);n=this.saveTextToParentTag(n,r,o),r.add(this.options.commentPropName,[{[this.options.textNodeName]:c}])}i=a}else if(t.substr(i+1,2)==="!D"){let a=fle(t,i);this.docTypeEntities=a.entities,i=a.i}else if(t.substr(i+1,2)==="!["){let a=rs(t,"]]>",i,"CDATA is not closed.")-2,c=t.substring(i+9,a);n=this.saveTextToParentTag(n,r,o);let d=this.parseTextData(c,r.tagname,o,!0,!1,!0,!0);d==null&&(d=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[{[this.options.textNodeName]:c}]):r.add(this.options.textNodeName,d),i=a+2}else{let a=JE(t,i,this.options.removeNSPrefix),c=a.tagName,d=a.rawTagName,u=a.tagExp,m=a.attrExpPresent,f=a.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,o,!1));let h=r;if(h&&this.options.unpairedTags.indexOf(h.tagname)!==-1&&(r=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),c!==e.tagname&&(o+=o?"."+c:c),this.isItStopNode(this.options.stopNodes,o,c)){let y="";if(u.length>0&&u.lastIndexOf("/")===u.length-1)c[c.length-1]==="/"?(c=c.substr(0,c.length-1),o=o.substr(0,o.length-1),u=c):u=u.substr(0,u.length-1),i=a.closeIndex;else if(this.options.unpairedTags.indexOf(c)!==-1)i=a.closeIndex;else{let A=this.readStopNodeData(t,d,f+1);if(!A)throw new Error(`Unexpected end of ${d}`);i=A.i,y=A.tagContent}let E=new Jd(c);c!==u&&m&&(E[":@"]=this.buildAttributesMap(u,o,c)),y&&(y=this.parseTextData(y,c,o,!0,m,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),E.add(this.options.textNodeName,y),this.addChild(r,E,o)}else{if(u.length>0&&u.lastIndexOf("/")===u.length-1){c[c.length-1]==="/"?(c=c.substr(0,c.length-1),o=o.substr(0,o.length-1),u=c):u=u.substr(0,u.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));let y=new Jd(c);c!==u&&m&&(y[":@"]=this.buildAttributesMap(u,o,c)),this.addChild(r,y,o),o=o.substr(0,o.lastIndexOf("."))}else{let y=new Jd(c);this.tagsNodeStack.push(r),c!==u&&m&&(y[":@"]=this.buildAttributesMap(u,o,c)),this.addChild(r,y,o),r=y}n="",i=f}}else n+=t[i];return e.child};function Tle(t,e,r){let n=this.options.updateTag(e.tagname,r,e[":@"]);n===!1||(typeof n=="string"&&(e.tagname=n),t.addChild(e))}var ble=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){let r=this.docTypeEntities[e];t=t.replace(r.regx,r.val)}for(let e in this.lastEntities){let r=this.lastEntities[e];t=t.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){let r=this.htmlEntities[e];t=t.replace(r.regex,r.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function Ale(t,e,r,n){return t&&(n===void 0&&(n=Object.keys(e.child).length===0),t=this.parseTextData(t,e.tagname,r,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,n),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}function Ile(t,e,r){let n="*."+r;for(let o in t){let i=t[o];if(n===i||e===i)return!0}return!1}function Rle(t,e,r=">"){let n,o="";for(let i=e;i<t.length;i++){let s=t[i];if(n)s===n&&(n="");else if(s==='"'||s==="'")n=s;else if(s===r[0])if(r[1]){if(t[i+1]===r[1])return{data:o,index:i}}else return{data:o,index:i};else s==="	"&&(s=" ");o+=s}}function rs(t,e,r,n){let o=t.indexOf(e,r);if(o===-1)throw new Error(n);return o+e.length-1}function JE(t,e,r,n=">"){let o=Rle(t,e+1,n);if(!o)return;let i=o.data,s=o.index,a=i.search(/\s/),c=i,d=!0;a!==-1&&(c=i.substring(0,a),i=i.substring(a+1).trimStart());let u=c;if(r){let m=c.indexOf(":");m!==-1&&(c=c.substr(m+1),d=c!==o.data.substr(m+1))}return{tagName:c,tagExp:i,closeIndex:s,attrExpPresent:d,rawTagName:u}}function wle(t,e,r){let n=r,o=1;for(;r<t.length;r++)if(t[r]==="<")if(t[r+1]==="/"){let i=rs(t,">",r,`${e} is not closed`);if(t.substring(r+2,i).trim()===e&&(o--,o===0))return{tagContent:t.substring(n,r),i};r=i}else if(t[r+1]==="?")r=rs(t,"?>",r+1,"StopNode is not closed.");else if(t.substr(r+1,3)==="!--")r=rs(t,"-->",r+3,"StopNode is not closed.");else if(t.substr(r+1,2)==="![")r=rs(t,"]]>",r,"StopNode is not closed.")-2;else{let i=JE(t,r,">");i&&((i&&i.tagName)===e&&i.tagExp[i.tagExp.length-1]!=="/"&&o++,r=i.closeIndex)}}function XE(t,e,r){if(e&&typeof t=="string"){let n=t.trim();return n==="true"?!0:n==="false"?!1:gle(t,r)}else return yL.isExist(t)?t:""}_L.exports=YE});var SL=g(CL=>{"use strict";function Ple(t,e){return EL(t,e)}function EL(t,e,r){let n,o={};for(let i=0;i<t.length;i++){let s=t[i],a=Ole(s),c="";if(r===void 0?c=a:c=r+"."+a,a===e.textNodeName)n===void 0?n=s[a]:n+=""+s[a];else{if(a===void 0)continue;if(s[a]){let d=EL(s[a],e,c),u=Nle(d,e);s[":@"]?xle(d,s[":@"],c,e):Object.keys(d).length===1&&d[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?d=d[e.textNodeName]:Object.keys(d).length===0&&(e.alwaysCreateTextNode?d[e.textNodeName]="":d=""),o[a]!==void 0&&o.hasOwnProperty(a)?(Array.isArray(o[a])||(o[a]=[o[a]]),o[a].push(d)):e.isArray(a,c,u)?o[a]=[d]:o[a]=d}}}return typeof n=="string"?n.length>0&&(o[e.textNodeName]=n):n!==void 0&&(o[e.textNodeName]=n),o}function Ole(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let n=e[r];if(n!==":@")return n}}function xle(t,e,r,n){if(e){let o=Object.keys(e),i=o.length;for(let s=0;s<i;s++){let a=o[s];n.isArray(a,r+"."+a,!0,!0)?t[a]=[e[a]]:t[a]=e[a]}}}function Nle(t,e){let{textNodeName:r}=e,n=Object.keys(t).length;return!!(n===0||n===1&&(t[r]||typeof t[r]=="boolean"||t[r]===0))}CL.prettify=Ple});var bL=g((UGe,TL)=>{var{buildOptions:Dle}=lL(),kle=vL(),{prettify:Mle}=SL(),Lle=KE(),ZE=class{constructor(e){this.externalEntities={},this.options=Dle(e)}parse(e,r){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let i=Lle.validate(e,r);if(i!==!0)throw Error(`${i.err.msg}:${i.err.line}:${i.err.col}`)}let n=new kle(this.options);n.addExternalEntities(this.externalEntities);let o=n.parseXml(e);return this.options.preserveOrder||o===void 0?o:Mle(o,this.options)}addEntity(e,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=r}};TL.exports=ZE});var PL=g((FGe,wL)=>{var Ule=`
`;function Fle(t,e){let r="";return e.format&&e.indentBy.length>0&&(r=Ule),IL(t,e,"",r)}function IL(t,e,r,n){let o="",i=!1;for(let s=0;s<t.length;s++){let a=t[s],c=Ble(a);if(c===void 0)continue;let d="";if(r.length===0?d=c:d=`${r}.${c}`,c===e.textNodeName){let y=a[c];qle(d,e)||(y=e.tagValueProcessor(c,y),y=RL(y,e)),i&&(o+=n),o+=y,i=!1;continue}else if(c===e.cdataPropName){i&&(o+=n),o+=`<![CDATA[${a[c][0][e.textNodeName]}]]>`,i=!1;continue}else if(c===e.commentPropName){o+=n+`<!--${a[c][0][e.textNodeName]}-->`,i=!0;continue}else if(c[0]==="?"){let y=AL(a[":@"],e),E=c==="?xml"?"":n,A=a[c][0][e.textNodeName];A=A.length!==0?" "+A:"",o+=E+`<${c}${A}${y}?>`,i=!0;continue}let u=n;u!==""&&(u+=e.indentBy);let m=AL(a[":@"],e),f=n+`<${c}${m}`,h=IL(a[c],e,d,u);e.unpairedTags.indexOf(c)!==-1?e.suppressUnpairedNode?o+=f+">":o+=f+"/>":(!h||h.length===0)&&e.suppressEmptyNode?o+=f+"/>":h&&h.endsWith(">")?o+=f+`>${h}${n}</${c}>`:(o+=f+">",h&&n!==""&&(h.includes("/>")||h.includes("</"))?o+=n+e.indentBy+h+n:o+=h,o+=`</${c}>`),i=!0}return o}function Ble(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let n=e[r];if(t.hasOwnProperty(n)&&n!==":@")return n}}function AL(t,e){let r="";if(t&&!e.ignoreAttributes)for(let n in t){if(!t.hasOwnProperty(n))continue;let o=e.attributeValueProcessor(n,t[n]);o=RL(o,e),o===!0&&e.suppressBooleanAttributes?r+=` ${n.substr(e.attributeNamePrefix.length)}`:r+=` ${n.substr(e.attributeNamePrefix.length)}="${o}"`}return r}function qle(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let r=t.substr(t.lastIndexOf(".")+1);for(let n in e.stopNodes)if(e.stopNodes[n]===t||e.stopNodes[n]==="*."+r)return!0;return!1}function RL(t,e){if(t&&t.length>0&&e.processEntities)for(let r=0;r<e.entities.length;r++){let n=e.entities[r];t=t.replace(n.regex,n.val)}return t}wL.exports=Fle});var xL=g((BGe,OL)=>{"use strict";var Hle=PL(),jle={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Lo(t){this.options=Object.assign({},jle,t),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=zle),this.processTextOrObjNode=Gle,this.options.format?(this.indentate=$le,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Lo.prototype.build=function(t){return this.options.preserveOrder?Hle(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0).val)};Lo.prototype.j2x=function(t,e){let r="",n="";for(let o in t)if(Object.prototype.hasOwnProperty.call(t,o))if(typeof t[o]>"u")this.isAttribute(o)&&(n+="");else if(t[o]===null)this.isAttribute(o)?n+="":o[0]==="?"?n+=this.indentate(e)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(e)+"<"+o+"/"+this.tagEndChar;else if(t[o]instanceof Date)n+=this.buildTextValNode(t[o],o,"",e);else if(typeof t[o]!="object"){let i=this.isAttribute(o);if(i)r+=this.buildAttrPairStr(i,""+t[o]);else if(o===this.options.textNodeName){let s=this.options.tagValueProcessor(o,""+t[o]);n+=this.replaceEntitiesValue(s)}else n+=this.buildTextValNode(t[o],o,"",e)}else if(Array.isArray(t[o])){let i=t[o].length,s="",a="";for(let c=0;c<i;c++){let d=t[o][c];if(!(typeof d>"u"))if(d===null)o[0]==="?"?n+=this.indentate(e)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(e)+"<"+o+"/"+this.tagEndChar;else if(typeof d=="object")if(this.options.oneListGroup){let u=this.j2x(d,e+1);s+=u.val,this.options.attributesGroupName&&d.hasOwnProperty(this.options.attributesGroupName)&&(a+=u.attrStr)}else s+=this.processTextOrObjNode(d,o,e);else if(this.options.oneListGroup){let u=this.options.tagValueProcessor(o,d);u=this.replaceEntitiesValue(u),s+=u}else s+=this.buildTextValNode(d,o,"",e)}this.options.oneListGroup&&(s=this.buildObjectNode(s,o,a,e)),n+=s}else if(this.options.attributesGroupName&&o===this.options.attributesGroupName){let i=Object.keys(t[o]),s=i.length;for(let a=0;a<s;a++)r+=this.buildAttrPairStr(i[a],""+t[o][i[a]])}else n+=this.processTextOrObjNode(t[o],o,e);return{attrStr:r,val:n}};Lo.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'};function Gle(t,e,r){let n=this.j2x(t,r+1);return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],e,n.attrStr,r):this.buildObjectNode(n.val,e,n.attrStr,r)}Lo.prototype.buildObjectNode=function(t,e,r,n){if(t==="")return e[0]==="?"?this.indentate(n)+"<"+e+r+"?"+this.tagEndChar:this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar;{let o="</"+e+this.tagEndChar,i="";return e[0]==="?"&&(i="?",o=""),(r||r==="")&&t.indexOf("<")===-1?this.indentate(n)+"<"+e+r+i+">"+t+o:this.options.commentPropName!==!1&&e===this.options.commentPropName&&i.length===0?this.indentate(n)+`<!--${t}-->`+this.newLine:this.indentate(n)+"<"+e+r+i+this.tagEndChar+t+this.indentate(n)+o}};Lo.prototype.closeTag=function(t){let e="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${t}`,e};Lo.prototype.buildTextValNode=function(t,e,r,n){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(n)+`<!--${t}-->`+this.newLine;if(e[0]==="?")return this.indentate(n)+"<"+e+r+"?"+this.tagEndChar;{let o=this.options.tagValueProcessor(e,t);return o=this.replaceEntitiesValue(o),o===""?this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar:this.indentate(n)+"<"+e+r+">"+o+"</"+e+this.tagEndChar}};Lo.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){let r=this.options.entities[e];t=t.replace(r.regex,r.val)}return t};function $le(t){return this.options.indentBy.repeat(t)}function zle(t){return t.startsWith(this.options.attributeNamePrefix)&&t!==this.options.textNodeName?t.substr(this.attrPrefixLen):!1}OL.exports=Lo});var DL=g((qGe,NL)=>{"use strict";var Vle=KE(),Kle=bL(),Wle=xL();NL.exports={XMLParser:Kle,XMLValidator:Vle,XMLBuilder:Wle}});var kL,ML,LL,Qle,Yle,UL=v(()=>{kL=ae(fe()),ML=ae(DL());zE();LL=(t,e)=>Gh(t,e).then(r=>{if(r.length){let n=new ML.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o;try{o=n.parse(r,!0)}catch(c){throw c&&typeof c=="object"&&Object.defineProperty(c,"$responseBodyText",{value:r}),c}let i="#text",s=Object.keys(o)[0],a=o[s];return a[i]&&(a[s]=a[i],delete a[i]),(0,kL.getValueFromTextNode)(a)}return{}}),Qle=async(t,e)=>{let r=await LL(t,e);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},Yle=(t,e)=>{if(e?.Error?.Code!==void 0)return e.Error.Code;if(e?.Code!==void 0)return e.Code;if(t.statusCode==404)return"NotFound"}});var FL=v(()=>{YM();XM();tL();UL()});var Xe={};gt(Xe,{AWSSDKSigV4Signer:()=>CM,AwsSdkSigV4ASigner:()=>Uh,AwsSdkSigV4Signer:()=>ts,NODE_SIGV4A_CONFIG_OPTIONS:()=>tde,_toBool:()=>Lde,_toNum:()=>Ude,_toStr:()=>Mde,awsExpectUnion:()=>Fde,emitWarningIfUnsupportedVersion:()=>Zce,loadRestJsonErrorCode:()=>qde,loadRestXmlErrorCode:()=>Yle,parseJsonBody:()=>eL,parseJsonErrorBody:()=>Bde,parseXmlBody:()=>LL,parseXmlErrorBody:()=>Qle,resolveAWSSDKSigV4Config:()=>kde,resolveAwsSdkSigV4AConfig:()=>ede,resolveAwsSdkSigV4Config:()=>VM,validateSigningProperties:()=>Wd});var Ze=v(()=>{hM();QM();FL()});var eC=g(Uo=>{"use strict";Object.defineProperty(Uo,"__esModule",{value:!0});Uo.resolveHttpAuthSchemeConfig=Uo.defaultDynamoDBHttpAuthSchemeProvider=Uo.defaultDynamoDBHttpAuthSchemeParametersProvider=void 0;var Jle=(Ze(),M(Xe)),BL=hr(),Xle=async(t,e,r)=>({operation:(0,BL.getSmithyContext)(e).operation,region:await(0,BL.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Uo.defaultDynamoDBHttpAuthSchemeParametersProvider=Xle;function Zle(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"dynamodb",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}var eue=t=>{let e=[];switch(t.operation){default:e.push(Zle(t))}return e};Uo.defaultDynamoDBHttpAuthSchemeProvider=eue;var tue=t=>({...(0,Jle.resolveAwsSdkSigV4Config)(t)});Uo.resolveHttpAuthSchemeConfig=tue});var qL=g((XGe,rue)=>{rue.exports={name:"@aws-sdk/client-dynamodb",description:"AWS SDK for JavaScript Dynamodb Client for Node.js, Browser and React Native",version:"3.645.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-dynamodb","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo dynamodb"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/client-sso-oidc":"3.645.0","@aws-sdk/client-sts":"3.645.0","@aws-sdk/core":"3.635.0","@aws-sdk/credential-provider-node":"3.645.0","@aws-sdk/middleware-endpoint-discovery":"3.620.0","@aws-sdk/middleware-host-header":"3.620.0","@aws-sdk/middleware-logger":"3.609.0","@aws-sdk/middleware-recursion-detection":"3.620.0","@aws-sdk/middleware-user-agent":"3.645.0","@aws-sdk/region-config-resolver":"3.614.0","@aws-sdk/types":"3.609.0","@aws-sdk/util-endpoints":"3.645.0","@aws-sdk/util-user-agent-browser":"3.609.0","@aws-sdk/util-user-agent-node":"3.614.0","@smithy/config-resolver":"^3.0.5","@smithy/core":"^2.4.0","@smithy/fetch-http-handler":"^3.2.4","@smithy/hash-node":"^3.0.3","@smithy/invalid-dependency":"^3.0.3","@smithy/middleware-content-length":"^3.0.5","@smithy/middleware-endpoint":"^3.1.0","@smithy/middleware-retry":"^3.0.15","@smithy/middleware-serde":"^3.0.3","@smithy/middleware-stack":"^3.0.3","@smithy/node-config-provider":"^3.1.4","@smithy/node-http-handler":"^3.1.4","@smithy/protocol-http":"^4.1.0","@smithy/smithy-client":"^3.2.0","@smithy/types":"^3.3.0","@smithy/url-parser":"^3.0.3","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.15","@smithy/util-defaults-mode-node":"^3.0.15","@smithy/util-endpoints":"^2.0.5","@smithy/util-middleware":"^3.0.3","@smithy/util-retry":"^3.0.3","@smithy/util-utf8":"^3.0.0","@smithy/util-waiter":"^3.1.2",tslib:"^2.6.2",uuid:"^9.0.1"},devDependencies:{"@tsconfig/node16":"16.1.3","@types/node":"^16.18.96","@types/uuid":"^9.0.4",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=16.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-dynamodb",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-dynamodb"}}});var tC=g((ZGe,WL)=>{"use strict";var zh=Object.defineProperty,nue=Object.getOwnPropertyDescriptor,oue=Object.getOwnPropertyNames,iue=Object.prototype.hasOwnProperty,sue=(t,e)=>zh(t,"name",{value:e,configurable:!0}),aue=(t,e)=>{for(var r in e)zh(t,r,{get:e[r],enumerable:!0})},cue=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of oue(e))!iue.call(t,o)&&o!==r&&zh(t,o,{get:()=>e[o],enumerable:!(n=nue(e,o))||n.enumerable});return t},due=t=>cue(zh({},"__esModule",{value:!0}),t),HL={};aue(HL,{ENV_ACCOUNT_ID:()=>KL,ENV_CREDENTIAL_SCOPE:()=>VL,ENV_EXPIRATION:()=>zL,ENV_KEY:()=>jL,ENV_SECRET:()=>GL,ENV_SESSION:()=>$L,fromEnv:()=>uue});WL.exports=due(HL);var lue=Lt(),jL="AWS_ACCESS_KEY_ID",GL="AWS_SECRET_ACCESS_KEY",$L="AWS_SESSION_TOKEN",zL="AWS_CREDENTIAL_EXPIRATION",VL="AWS_CREDENTIAL_SCOPE",KL="AWS_ACCOUNT_ID",uue=sue(t=>async()=>{var e;(e=t?.logger)==null||e.debug("@aws-sdk/credential-provider-env - fromEnv");let r=process.env[jL],n=process.env[GL],o=process.env[$L],i=process.env[zL],s=process.env[VL],a=process.env[KL];if(r&&n)return{accessKeyId:r,secretAccessKey:n,...o&&{sessionToken:o},...i&&{expiration:new Date(i)},...s&&{credentialScope:s},...a&&{accountId:a}};throw new lue.CredentialsProviderError("Unable to find environment variable credentials.",{logger:t?.logger})},"fromEnv")});var Xd=g((e$e,dU)=>{var Wh=Object.defineProperty,pue=Object.getOwnPropertyDescriptor,mue=Object.getOwnPropertyNames,hue=Object.prototype.hasOwnProperty,at=(t,e)=>Wh(t,"name",{value:e,configurable:!0}),fue=(t,e)=>{for(var r in e)Wh(t,r,{get:e[r],enumerable:!0})},gue=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of mue(e))!hue.call(t,o)&&o!==r&&Wh(t,o,{get:()=>e[o],enumerable:!(n=pue(e,o))||n.enumerable});return t},yue=t=>gue(Wh({},"__esModule",{value:!0}),t),XL={};fue(XL,{DEFAULT_MAX_RETRIES:()=>rU,DEFAULT_TIMEOUT:()=>tU,ENV_CMDS_AUTH_TOKEN:()=>oC,ENV_CMDS_FULL_URI:()=>Vh,ENV_CMDS_RELATIVE_URI:()=>Kh,Endpoint:()=>iU,fromContainerMetadata:()=>Cue,fromInstanceMetadata:()=>jue,getInstanceMetadataEndpoint:()=>aU,httpRequest:()=>_a,providerConfigFromInit:()=>iC});dU.exports=yue(XL);var _ue=require("url"),on=Lt(),vue=require("buffer"),Eue=require("http");function _a(t){return new Promise((e,r)=>{var n;let o=(0,Eue.request)({method:"GET",...t,hostname:(n=t.hostname)==null?void 0:n.replace(/^\[(.+)\]$/,"$1")});o.on("error",i=>{r(Object.assign(new on.ProviderError("Unable to connect to instance metadata service"),i)),o.destroy()}),o.on("timeout",()=>{r(new on.ProviderError("TimeoutError from instance metadata service")),o.destroy()}),o.on("response",i=>{let{statusCode:s=400}=i;(s<200||300<=s)&&(r(Object.assign(new on.ProviderError("Error response received from instance metadata service"),{statusCode:s})),o.destroy());let a=[];i.on("data",c=>{a.push(c)}),i.on("end",()=>{e(vue.Buffer.concat(a)),o.destroy()})}),o.end()})}at(_a,"httpRequest");var ZL=at(t=>!!t&&typeof t=="object"&&typeof t.AccessKeyId=="string"&&typeof t.SecretAccessKey=="string"&&typeof t.Token=="string"&&typeof t.Expiration=="string","isImdsCredentials"),eU=at(t=>({accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,sessionToken:t.Token,expiration:new Date(t.Expiration),...t.AccountId&&{accountId:t.AccountId}}),"fromImdsCredentials"),tU=1e3,rU=0,iC=at(({maxRetries:t=rU,timeout:e=tU})=>({maxRetries:t,timeout:e}),"providerConfigFromInit"),nC=at((t,e)=>{let r=t();for(let n=0;n<e;n++)r=r.catch(t);return r},"retry"),Vh="AWS_CONTAINER_CREDENTIALS_FULL_URI",Kh="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",oC="AWS_CONTAINER_AUTHORIZATION_TOKEN",Cue=at((t={})=>{let{timeout:e,maxRetries:r}=iC(t);return()=>nC(async()=>{let n=await Iue({logger:t.logger}),o=JSON.parse(await Sue(e,n));if(!ZL(o))throw new on.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:t.logger});return eU(o)},r)},"fromContainerMetadata"),Sue=at(async(t,e)=>(process.env[oC]&&(e.headers={...e.headers,Authorization:process.env[oC]}),(await _a({...e,timeout:t})).toString()),"requestFromEcsImds"),Tue="169.254.170.2",bue={localhost:!0,"127.0.0.1":!0},Aue={"http:":!0,"https:":!0},Iue=at(async({logger:t})=>{if(process.env[Kh])return{hostname:Tue,path:process.env[Kh]};if(process.env[Vh]){let e=(0,_ue.parse)(process.env[Vh]);if(!e.hostname||!(e.hostname in bue))throw new on.CredentialsProviderError(`${e.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:t});if(!e.protocol||!(e.protocol in Aue))throw new on.CredentialsProviderError(`${e.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:t});return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new on.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${Kh} or ${Vh} environment variable is set`,{tryNextLink:!1,logger:t})},"getCmdsUri"),nU=class oU extends on.CredentialsProviderError{constructor(e,r=!0){super(e,r),this.tryNextLink=r,this.name="InstanceMetadataV1FallbackError",Object.setPrototypeOf(this,oU.prototype)}};at(nU,"InstanceMetadataV1FallbackError");var Rue=nU,sC=rn(),wue=Ro(),iU=(t=>(t.IPv4="http://169.254.169.254",t.IPv6="http://[fd00:ec2::254]",t))(iU||{}),Pue="AWS_EC2_METADATA_SERVICE_ENDPOINT",Oue="ec2_metadata_service_endpoint",xue={environmentVariableSelector:t=>t[Pue],configFileSelector:t=>t[Oue],default:void 0},sU=(t=>(t.IPv4="IPv4",t.IPv6="IPv6",t))(sU||{}),Nue="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",Due="ec2_metadata_service_endpoint_mode",kue={environmentVariableSelector:t=>t[Nue],configFileSelector:t=>t[Due],default:"IPv4"},aU=at(async()=>(0,wue.parseUrl)(await Mue()||await Lue()),"getInstanceMetadataEndpoint"),Mue=at(async()=>(0,sC.loadConfig)(xue)(),"getFromEndpointConfig"),Lue=at(async()=>{let t=await(0,sC.loadConfig)(kue)();switch(t){case"IPv4":return"http://169.254.169.254";case"IPv6":return"http://[fd00:ec2::254]";default:throw new Error(`Unsupported endpoint mode: ${t}. Select from ${Object.values(sU)}`)}},"getFromEndpointModeConfig"),Uue=5*60,Fue=5*60,Bue="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",QL=at((t,e)=>{let r=Uue+Math.floor(Math.random()*Fue),n=new Date(Date.now()+r*1e3);e.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(n)}.
For more information, please visit: `+Bue);let o=t.originalExpiration??t.expiration;return{...t,...o?{originalExpiration:o}:{},expiration:n}},"getExtendedInstanceMetadataCredentials"),que=at((t,e={})=>{let r=e?.logger||console,n;return async()=>{let o;try{o=await t(),o.expiration&&o.expiration.getTime()<Date.now()&&(o=QL(o,r))}catch(i){if(n)r.warn("Credential renew failed: ",i),o=QL(n,r);else throw i}return n=o,o}},"staticStabilityProvider"),cU="/latest/meta-data/iam/security-credentials/",Hue="/latest/api/token",rC="AWS_EC2_METADATA_V1_DISABLED",YL="ec2_metadata_v1_disabled",JL="x-aws-ec2-metadata-token",jue=at((t={})=>que(Gue(t),{logger:t.logger}),"fromInstanceMetadata"),Gue=at((t={})=>{let e=!1,{logger:r,profile:n}=t,{timeout:o,maxRetries:i}=iC(t),s=at(async(a,c)=>{var d;if(e||((d=c.headers)==null?void 0:d[JL])==null){let f=!1,h=!1,y=await(0,sC.loadConfig)({environmentVariableSelector:E=>{let A=E[rC];if(h=!!A&&A!=="false",A===void 0)throw new on.CredentialsProviderError(`${rC} not set in env, checking config file next.`,{logger:t.logger});return h},configFileSelector:E=>{let A=E[YL];return f=!!A&&A!=="false",f},default:!1},{profile:n})();if(t.ec2MetadataV1Disabled||y){let E=[];throw t.ec2MetadataV1Disabled&&E.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),f&&E.push(`config file profile (${YL})`),h&&E.push(`process environment variable (${rC})`),new Rue(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${E.join(", ")}].`)}}let m=(await nC(async()=>{let f;try{f=await zue(c)}catch(h){throw h.statusCode===401&&(e=!1),h}return f},a)).trim();return nC(async()=>{let f;try{f=await Vue(m,c,t)}catch(h){throw h.statusCode===401&&(e=!1),h}return f},a)},"getCredentials");return async()=>{let a=await aU();if(e)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),s(i,{...a,timeout:o});{let c;try{c=(await $ue({...a,timeout:o})).toString()}catch(d){if(d?.statusCode===400)throw Object.assign(d,{message:"EC2 Metadata token request returned error"});return(d.message==="TimeoutError"||[403,404,405].includes(d.statusCode))&&(e=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),s(i,{...a,timeout:o})}return s(i,{...a,headers:{[JL]:c},timeout:o})}}},"getInstanceMetadataProvider"),$ue=at(async t=>_a({...t,path:Hue,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),"getMetadataToken"),zue=at(async t=>(await _a({...t,path:cU})).toString(),"getProfile"),Vue=at(async(t,e,r)=>{let n=JSON.parse((await _a({...e,path:cU+t})).toString());if(!ZL(n))throw new on.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:r.logger});return eU(n)},"getCredentialsFromProfile")});var lU=g(Qh=>{"use strict";Object.defineProperty(Qh,"__esModule",{value:!0});Qh.checkUrl=void 0;var Kue=Lt(),Wue="169.254.170.2",Que="169.254.170.23",Yue="[fd00:ec2::23]",Jue=(t,e)=>{if(t.protocol!=="https:"&&!(t.hostname===Wue||t.hostname===Que||t.hostname===Yue)){if(t.hostname.includes("[")){if(t.hostname==="[::1]"||t.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(t.hostname==="localhost")return;let r=t.hostname.split("."),n=o=>{let i=parseInt(o,10);return 0<=i&&i<=255};if(r[0]==="127"&&n(r[1])&&n(r[2])&&n(r[3])&&r.length===4)return}throw new Kue.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:e})}};Qh.checkUrl=Jue});var uU=g(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});va.getCredentials=va.createGetRequest=void 0;var aC=Lt(),Xue=De(),Zue=fe(),epe=cE();function tpe(t){return new Xue.HttpRequest({protocol:t.protocol,hostname:t.hostname,port:Number(t.port),path:t.pathname,query:Array.from(t.searchParams.entries()).reduce((e,[r,n])=>(e[r]=n,e),{}),fragment:t.hash})}va.createGetRequest=tpe;async function rpe(t,e){let n=await(0,epe.sdkStreamMixin)(t.body).transformToString();if(t.statusCode===200){let o=JSON.parse(n);if(typeof o.AccessKeyId!="string"||typeof o.SecretAccessKey!="string"||typeof o.Token!="string"||typeof o.Expiration!="string")throw new aC.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:e});return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.Token,expiration:(0,Zue.parseRfc3339DateTime)(o.Expiration)}}if(t.statusCode>=400&&t.statusCode<500){let o={};try{o=JSON.parse(n)}catch{}throw Object.assign(new aC.CredentialsProviderError(`Server responded with status: ${t.statusCode}`,{logger:e}),{Code:o.Code,Message:o.Message})}throw new aC.CredentialsProviderError(`Server responded with status: ${t.statusCode}`,{logger:e})}va.getCredentials=rpe});var pU=g(Yh=>{"use strict";Object.defineProperty(Yh,"__esModule",{value:!0});Yh.retryWrapper=void 0;var npe=(t,e,r)=>async()=>{for(let n=0;n<e;++n)try{return await t()}catch{await new Promise(i=>setTimeout(i,r))}return await t()};Yh.retryWrapper=npe});var fU=g(Jh=>{"use strict";Object.defineProperty(Jh,"__esModule",{value:!0});Jh.fromHttp=void 0;var ope=(_e(),M(ye)),ipe=No(),mU=Lt(),spe=ope.__importDefault(require("fs/promises")),ape=lU(),hU=uU(),cpe=pU(),dpe="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",lpe="http://169.254.170.2",upe="AWS_CONTAINER_CREDENTIALS_FULL_URI",ppe="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",mpe="AWS_CONTAINER_AUTHORIZATION_TOKEN",hpe=(t={})=>{t.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let e,r=t.awsContainerCredentialsRelativeUri??process.env[dpe],n=t.awsContainerCredentialsFullUri??process.env[upe],o=t.awsContainerAuthorizationToken??process.env[mpe],i=t.awsContainerAuthorizationTokenFile??process.env[ppe],s=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?console.warn:t.logger.warn;if(r&&n&&(s("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),s("awsContainerCredentialsFullUri will take precedence.")),o&&i&&(s("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),s("awsContainerAuthorizationToken will take precedence.")),n)e=n;else if(r)e=`${lpe}${r}`;else throw new mU.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:t.logger});let a=new URL(e);(0,ape.checkUrl)(a,t.logger);let c=new ipe.NodeHttpHandler({requestTimeout:t.timeout??1e3,connectionTimeout:t.timeout??1e3});return(0,cpe.retryWrapper)(async()=>{let d=(0,hU.createGetRequest)(a);o?d.headers.Authorization=o:i&&(d.headers.Authorization=(await spe.default.readFile(i)).toString());try{let u=await c.handle(d);return(0,hU.getCredentials)(u.response)}catch(u){throw new mU.CredentialsProviderError(String(u),{logger:t.logger})}},t.maxRetries??3,t.timeout??1e3)};Jh.fromHttp=hpe});var cC=g(Xh=>{"use strict";Object.defineProperty(Xh,"__esModule",{value:!0});Xh.fromHttp=void 0;var fpe=fU();Object.defineProperty(Xh,"fromHttp",{enumerable:!0,get:function(){return fpe.fromHttp}})});var dC=g(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});Fo.resolveHttpAuthSchemeConfig=Fo.defaultSSOHttpAuthSchemeProvider=Fo.defaultSSOHttpAuthSchemeParametersProvider=void 0;var gpe=(Ze(),M(Xe)),gU=hr(),ype=async(t,e,r)=>({operation:(0,gU.getSmithyContext)(e).operation,region:await(0,gU.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Fo.defaultSSOHttpAuthSchemeParametersProvider=ype;function _pe(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function Zh(t){return{schemeId:"smithy.api#noAuth"}}var vpe=t=>{let e=[];switch(t.operation){case"GetRoleCredentials":{e.push(Zh(t));break}case"ListAccountRoles":{e.push(Zh(t));break}case"ListAccounts":{e.push(Zh(t));break}case"Logout":{e.push(Zh(t));break}default:e.push(_pe(t))}return e};Fo.defaultSSOHttpAuthSchemeProvider=vpe;var Epe=t=>({...(0,gpe.resolveAwsSdkSigV4Config)(t)});Fo.resolveHttpAuthSchemeConfig=Epe});var yU=g((a$e,Cpe)=>{Cpe.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.645.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.635.0","@aws-sdk/middleware-host-header":"3.620.0","@aws-sdk/middleware-logger":"3.609.0","@aws-sdk/middleware-recursion-detection":"3.620.0","@aws-sdk/middleware-user-agent":"3.645.0","@aws-sdk/region-config-resolver":"3.614.0","@aws-sdk/types":"3.609.0","@aws-sdk/util-endpoints":"3.645.0","@aws-sdk/util-user-agent-browser":"3.609.0","@aws-sdk/util-user-agent-node":"3.614.0","@smithy/config-resolver":"^3.0.5","@smithy/core":"^2.4.0","@smithy/fetch-http-handler":"^3.2.4","@smithy/hash-node":"^3.0.3","@smithy/invalid-dependency":"^3.0.3","@smithy/middleware-content-length":"^3.0.5","@smithy/middleware-endpoint":"^3.1.0","@smithy/middleware-retry":"^3.0.15","@smithy/middleware-serde":"^3.0.3","@smithy/middleware-stack":"^3.0.3","@smithy/node-config-provider":"^3.1.4","@smithy/node-http-handler":"^3.1.4","@smithy/protocol-http":"^4.1.0","@smithy/smithy-client":"^3.2.0","@smithy/types":"^3.3.0","@smithy/url-parser":"^3.0.3","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.15","@smithy/util-defaults-mode-node":"^3.0.15","@smithy/util-endpoints":"^2.0.5","@smithy/util-middleware":"^3.0.3","@smithy/util-retry":"^3.0.3","@smithy/util-utf8":"^3.0.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node16":"16.1.3","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=16.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var Ea=g((c$e,bU)=>{"use strict";var ef=Object.defineProperty,Spe=Object.getOwnPropertyDescriptor,Tpe=Object.getOwnPropertyNames,bpe=Object.prototype.hasOwnProperty,vU=(t,e)=>ef(t,"name",{value:e,configurable:!0}),Ape=(t,e)=>{for(var r in e)ef(t,r,{get:e[r],enumerable:!0})},Ipe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Tpe(e))!bpe.call(t,o)&&o!==r&&ef(t,o,{get:()=>e[o],enumerable:!(n=Spe(e,o))||n.enumerable});return t},Rpe=t=>Ipe(ef({},"__esModule",{value:!0}),t),EU={};Ape(EU,{UA_APP_ID_ENV_NAME:()=>SU,UA_APP_ID_INI_NAME:()=>TU,crtAvailability:()=>CU,defaultUserAgent:()=>Ope});bU.exports=Rpe(EU);var wpe=rn(),_U=require("os"),lC=require("process"),CU={isCrtAvailable:!1},Ppe=vU(()=>CU.isCrtAvailable?["md/crt-avail"]:null,"isCrtAvailable"),SU="AWS_SDK_UA_APP_ID",TU="sdk-ua-app-id",Ope=vU(({serviceId:t,clientVersion:e})=>{let r=[["aws-sdk-js",e],["ua","2.0"],[`os/${(0,_U.platform)()}`,(0,_U.release)()],["lang/js"],["md/nodejs",`${lC.versions.node}`]],n=Ppe();n&&r.push(n),t&&r.push([`api/${t}`,e]),lC.env.AWS_EXECUTION_ENV&&r.push([`exec-env/${lC.env.AWS_EXECUTION_ENV}`]);let o=(0,wpe.loadConfig)({environmentVariableSelector:s=>s[SU],configFileSelector:s=>s[TU],default:void 0})(),i;return async()=>{if(!i){let s=await o;i=s?[...r,[`app/${s}`]]:[...r]}return i}},"defaultUserAgent")});var Ca=g((l$e,PU)=>{var tf=Object.defineProperty,xpe=Object.getOwnPropertyDescriptor,Npe=Object.getOwnPropertyNames,Dpe=Object.prototype.hasOwnProperty,IU=(t,e)=>tf(t,"name",{value:e,configurable:!0}),kpe=(t,e)=>{for(var r in e)tf(t,r,{get:e[r],enumerable:!0})},Mpe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Npe(e))!Dpe.call(t,o)&&o!==r&&tf(t,o,{get:()=>e[o],enumerable:!(n=xpe(e,o))||n.enumerable});return t},Lpe=t=>Mpe(tf({},"__esModule",{value:!0}),t),RU={};kpe(RU,{Hash:()=>Bpe});PU.exports=Lpe(RU);var uC=la(),Upe=Ct(),Fpe=require("buffer"),AU=require("crypto"),wU=class{constructor(e,r){this.algorithmIdentifier=e,this.secret=r,this.reset()}update(e,r){this.hash.update((0,Upe.toUint8Array)(pC(e,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,AU.createHmac)(this.algorithmIdentifier,pC(this.secret)):(0,AU.createHash)(this.algorithmIdentifier)}};IU(wU,"Hash");var Bpe=wU;function pC(t,e){return Fpe.Buffer.isBuffer(t)?t:typeof t=="string"?(0,uC.fromString)(t,e):ArrayBuffer.isView(t)?(0,uC.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength):(0,uC.fromArrayBuffer)(t)}IU(pC,"castSourceData")});var Sa=g((u$e,NU)=>{var rf=Object.defineProperty,qpe=Object.getOwnPropertyDescriptor,Hpe=Object.getOwnPropertyNames,jpe=Object.prototype.hasOwnProperty,Gpe=(t,e)=>rf(t,"name",{value:e,configurable:!0}),$pe=(t,e)=>{for(var r in e)rf(t,r,{get:e[r],enumerable:!0})},zpe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Hpe(e))!jpe.call(t,o)&&o!==r&&rf(t,o,{get:()=>e[o],enumerable:!(n=qpe(e,o))||n.enumerable});return t},Vpe=t=>zpe(rf({},"__esModule",{value:!0}),t),xU={};$pe(xU,{calculateBodyLength:()=>Kpe});NU.exports=Vpe(xU);var OU=require("fs"),Kpe=Gpe(t=>{if(!t)return 0;if(typeof t=="string")return Buffer.byteLength(t);if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size;if(typeof t.start=="number"&&typeof t.end=="number")return t.end+1-t.start;if(typeof t.path=="string"||Buffer.isBuffer(t.path))return(0,OU.lstatSync)(t.path).size;if(typeof t.fd=="number")return(0,OU.fstatSync)(t.fd).size;throw new Error(`Body Length computation failed for ${t}`)},"calculateBodyLength")});var KU=g(nf=>{"use strict";Object.defineProperty(nf,"__esModule",{value:!0});nf.ruleSet=void 0;var GU="required",Er="fn",Cr="argv",Aa="ref",DU=!0,kU="isSet",Zd="booleanEquals",Ta="error",ba="endpoint",Fn="tree",mC="PartitionResult",hC="getAttr",MU={[GU]:!1,type:"String"},LU={[GU]:!0,default:!1,type:"Boolean"},UU={[Aa]:"Endpoint"},$U={[Er]:Zd,[Cr]:[{[Aa]:"UseFIPS"},!0]},zU={[Er]:Zd,[Cr]:[{[Aa]:"UseDualStack"},!0]},vr={},FU={[Er]:hC,[Cr]:[{[Aa]:mC},"supportsFIPS"]},VU={[Aa]:mC},BU={[Er]:Zd,[Cr]:[!0,{[Er]:hC,[Cr]:[VU,"supportsDualStack"]}]},qU=[$U],HU=[zU],jU=[{[Aa]:"Region"}],Wpe={version:"1.0",parameters:{Region:MU,UseDualStack:LU,UseFIPS:LU,Endpoint:MU},rules:[{conditions:[{[Er]:kU,[Cr]:[UU]}],rules:[{conditions:qU,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ta},{conditions:HU,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ta},{endpoint:{url:UU,properties:vr,headers:vr},type:ba}],type:Fn},{conditions:[{[Er]:kU,[Cr]:jU}],rules:[{conditions:[{[Er]:"aws.partition",[Cr]:jU,assign:mC}],rules:[{conditions:[$U,zU],rules:[{conditions:[{[Er]:Zd,[Cr]:[DU,FU]},BU],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:vr,headers:vr},type:ba}],type:Fn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ta}],type:Fn},{conditions:qU,rules:[{conditions:[{[Er]:Zd,[Cr]:[FU,DU]}],rules:[{conditions:[{[Er]:"stringEquals",[Cr]:[{[Er]:hC,[Cr]:[VU,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:vr,headers:vr},type:ba},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:vr,headers:vr},type:ba}],type:Fn},{error:"FIPS is enabled but this partition does not support FIPS",type:Ta}],type:Fn},{conditions:HU,rules:[{conditions:[BU],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:vr,headers:vr},type:ba}],type:Fn},{error:"DualStack is enabled but this partition does not support DualStack",type:Ta}],type:Fn},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:vr,headers:vr},type:ba}],type:Fn}],type:Fn},{error:"Invalid Configuration: Missing Region",type:Ta}]};nf.ruleSet=Wpe});var QU=g(of=>{"use strict";Object.defineProperty(of,"__esModule",{value:!0});of.defaultEndpointResolver=void 0;var Qpe=Ki(),WU=Vi(),Ype=KU(),Jpe=(t,e={})=>(0,WU.resolveEndpoint)(Ype.ruleSet,{endpointParams:t,logger:e.logger});of.defaultEndpointResolver=Jpe;WU.customEndpointFunctions.aws=Qpe.awsEndpointFunctions});var XU=g(sf=>{"use strict";Object.defineProperty(sf,"__esModule",{value:!0});sf.getRuntimeConfig=void 0;var Xpe=(Ze(),M(Xe)),Zpe=(mt(),M(It)),eme=fe(),tme=Ro(),YU=Mn(),JU=Ct(),rme=dC(),nme=QU(),ome=t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??YU.fromBase64,base64Encoder:t?.base64Encoder??YU.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??nme.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??rme.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new Xpe.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Zpe.NoAuthSigner}],logger:t?.logger??new eme.NoOpLogger,serviceId:t?.serviceId??"SSO",urlParser:t?.urlParser??tme.parseUrl,utf8Decoder:t?.utf8Decoder??JU.fromUtf8,utf8Encoder:t?.utf8Encoder??JU.toUtf8});sf.getRuntimeConfig=ome});var Ia=g((f$e,oF)=>{var ime=Object.create,el=Object.defineProperty,sme=Object.getOwnPropertyDescriptor,ame=Object.getOwnPropertyNames,cme=Object.getPrototypeOf,dme=Object.prototype.hasOwnProperty,fC=(t,e)=>el(t,"name",{value:e,configurable:!0}),lme=(t,e)=>{for(var r in e)el(t,r,{get:e[r],enumerable:!0})},rF=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of ame(e))!dme.call(t,o)&&o!==r&&el(t,o,{get:()=>e[o],enumerable:!(n=sme(e,o))||n.enumerable});return t},ume=(t,e,r)=>(r=t!=null?ime(cme(t)):{},rF(e||!t||!t.__esModule?el(r,"default",{value:t,enumerable:!0}):r,t)),pme=t=>rF(el({},"__esModule",{value:!0}),t),nF={};lme(nF,{resolveDefaultsModeConfig:()=>Sme});oF.exports=pme(nF);var mme=fr(),ZU=rn(),hme=Lt(),fme="AWS_EXECUTION_ENV",eF="AWS_REGION",tF="AWS_DEFAULT_REGION",gme="AWS_EC2_METADATA_DISABLED",yme=["in-region","cross-region","mobile","standard","legacy"],_me="/latest/meta-data/placement/region",vme="AWS_DEFAULTS_MODE",Eme="defaults_mode",Cme={environmentVariableSelector:t=>t[vme],configFileSelector:t=>t[Eme],default:"legacy"},Sme=fC(({region:t=(0,ZU.loadConfig)(mme.NODE_REGION_CONFIG_OPTIONS),defaultsMode:e=(0,ZU.loadConfig)(Cme)}={})=>(0,hme.memoize)(async()=>{let r=typeof e=="function"?await e():e;switch(r?.toLowerCase()){case"auto":return Tme(t);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${yme.join(", ")}, got ${r}`)}}),"resolveDefaultsModeConfig"),Tme=fC(async t=>{if(t){let e=typeof t=="function"?await t():t,r=await bme();return r?e===r?"in-region":"cross-region":"standard"}return"standard"},"resolveNodeDefaultsModeAuto"),bme=fC(async()=>{if(process.env[fme]&&(process.env[eF]||process.env[tF]))return process.env[eF]??process.env[tF];if(!process.env[gme])try{let{getInstanceMetadataEndpoint:t,httpRequest:e}=await Promise.resolve().then(()=>ume(Xd())),r=await t();return(await e({...r,path:_me})).toString()}catch{}},"inferPhysicalRegion")});var aF=g(cf=>{"use strict";Object.defineProperty(cf,"__esModule",{value:!0});cf.getRuntimeConfig=void 0;var Ame=(_e(),M(ye)),Ime=Ame.__importDefault(yU()),Rme=(Ze(),M(Xe)),wme=Ea(),af=fr(),Pme=Ca(),iF=_r(),tl=rn(),sF=No(),Ome=Sa(),xme=Ji(),Nme=XU(),Dme=fe(),kme=Ia(),Mme=fe(),Lme=t=>{(0,Mme.emitWarningIfUnsupportedVersion)(process.version);let e=(0,kme.resolveDefaultsModeConfig)(t),r=()=>e().then(Dme.loadConfigsForDefaultMode),n=(0,Nme.getRuntimeConfig)(t);return(0,Rme.emitWarningIfUnsupportedVersion)(process.version),{...n,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??Ome.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,wme.defaultUserAgent)({serviceId:n.serviceId,clientVersion:Ime.default.version}),maxAttempts:t?.maxAttempts??(0,tl.loadConfig)(iF.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:t?.region??(0,tl.loadConfig)(af.NODE_REGION_CONFIG_OPTIONS,af.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:sF.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,tl.loadConfig)({...iF.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||xme.DEFAULT_RETRY_MODE}),sha256:t?.sha256??Pme.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??sF.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,tl.loadConfig)(af.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:t?.useFipsEndpoint??(0,tl.loadConfig)(af.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}};cf.getRuntimeConfig=Lme});var wa=g((y$e,mF)=>{"use strict";var df=Object.defineProperty,Ume=Object.getOwnPropertyDescriptor,Fme=Object.getOwnPropertyNames,Bme=Object.prototype.hasOwnProperty,Ra=(t,e)=>df(t,"name",{value:e,configurable:!0}),qme=(t,e)=>{for(var r in e)df(t,r,{get:e[r],enumerable:!0})},Hme=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Fme(e))!Bme.call(t,o)&&o!==r&&df(t,o,{get:()=>e[o],enumerable:!(n=Ume(e,o))||n.enumerable});return t},jme=t=>Hme(df({},"__esModule",{value:!0}),t),dF={};qme(dF,{NODE_REGION_CONFIG_FILE_OPTIONS:()=>Vme,NODE_REGION_CONFIG_OPTIONS:()=>zme,REGION_ENV_NAME:()=>lF,REGION_INI_NAME:()=>uF,getAwsRegionExtensionConfiguration:()=>Gme,resolveAwsRegionExtensionConfiguration:()=>$me,resolveRegionConfig:()=>Kme});mF.exports=jme(dF);var Gme=Ra(t=>{let e=Ra(async()=>{if(t.region===void 0)throw new Error("Region is missing from runtimeConfig");let r=t.region;return typeof r=="string"?r:r()},"runtimeConfigRegion");return{setRegion(r){e=r},region(){return e}}},"getAwsRegionExtensionConfiguration"),$me=Ra(t=>({region:t.region()}),"resolveAwsRegionExtensionConfiguration"),lF="AWS_REGION",uF="region",zme={environmentVariableSelector:t=>t[lF],configFileSelector:t=>t[uF],default:()=>{throw new Error("Region is missing")}},Vme={preferredFile:"credentials"},pF=Ra(t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),"isFipsRegion"),cF=Ra(t=>pF(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,"getRealRegion"),Kme=Ra(t=>{let{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return{...t,region:async()=>{if(typeof e=="string")return cF(e);let n=await e();return cF(n)},useFipsEndpoint:async()=>{let n=typeof e=="string"?e:await e();return pF(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}},"resolveRegionConfig")});var nB=g((b$e,rB)=>{"use strict";var uf=Object.defineProperty,Wme=Object.getOwnPropertyDescriptor,Qme=Object.getOwnPropertyNames,Yme=Object.prototype.hasOwnProperty,oe=(t,e)=>uf(t,"name",{value:e,configurable:!0}),Jme=(t,e)=>{for(var r in e)uf(t,r,{get:e[r],enumerable:!0})},Xme=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Qme(e))!Yme.call(t,o)&&o!==r&&uf(t,o,{get:()=>e[o],enumerable:!(n=Wme(e,o))||n.enumerable});return t},Zme=t=>Xme(uf({},"__esModule",{value:!0}),t),EF={};Jme(EF,{GetRoleCredentialsCommand:()=>QF,GetRoleCredentialsRequestFilterSensitiveLog:()=>LF,GetRoleCredentialsResponseFilterSensitiveLog:()=>FF,InvalidRequestException:()=>IF,ListAccountRolesCommand:()=>gC,ListAccountRolesRequestFilterSensitiveLog:()=>BF,ListAccountsCommand:()=>yC,ListAccountsRequestFilterSensitiveLog:()=>qF,LogoutCommand:()=>ZF,LogoutRequestFilterSensitiveLog:()=>HF,ResourceNotFoundException:()=>PF,RoleCredentialsFilterSensitiveLog:()=>UF,SSO:()=>tB,SSOClient:()=>mf,SSOServiceException:()=>Pa,TooManyRequestsException:()=>NF,UnauthorizedException:()=>MF,__Client:()=>F.Client,paginateListAccountRoles:()=>Ahe,paginateListAccounts:()=>Ihe});rB.exports=Zme(EF);var hF=ra(),ehe=na(),the=oa(),fF=sa(),rhe=fr(),Bn=(mt(),M(It)),nhe=fa(),nl=Po(),gF=_r(),yF=dC(),ohe=oe(t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),"resolveClientEndpointParameters"),pf={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},ihe=aF(),_F=wa(),vF=De(),F=fe(),she=oe(t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(o){let i=e.findIndex(s=>s.schemeId===o.schemeId);i===-1?e.push(o):e.splice(i,1,o)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},"getHttpAuthExtensionConfiguration"),ahe=oe(t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),"resolveHttpAuthRuntimeConfig"),lf=oe(t=>t,"asPartial"),che=oe((t,e)=>{let r={...lf((0,_F.getAwsRegionExtensionConfiguration)(t)),...lf((0,F.getDefaultExtensionConfiguration)(t)),...lf((0,vF.getHttpHandlerExtensionConfiguration)(t)),...lf(she(t))};return e.forEach(n=>n.configure(r)),{...t,...(0,_F.resolveAwsRegionExtensionConfiguration)(r),...(0,F.resolveDefaultRuntimeConfig)(r),...(0,vF.resolveHttpHandlerRuntimeConfig)(r),...ahe(r)}},"resolveRuntimeExtensions"),CF=class extends F.Client{constructor(...[e]){let r=(0,ihe.getRuntimeConfig)(e||{}),n=ohe(r),o=(0,fF.resolveUserAgentConfig)(n),i=(0,gF.resolveRetryConfig)(o),s=(0,rhe.resolveRegionConfig)(i),a=(0,hF.resolveHostHeaderConfig)(s),c=(0,nl.resolveEndpointConfig)(a),d=(0,yF.resolveHttpAuthSchemeConfig)(c),u=che(d,e?.extensions||[]);super(u),this.config=u,this.middlewareStack.use((0,fF.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,gF.getRetryPlugin)(this.config)),this.middlewareStack.use((0,nhe.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,hF.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,ehe.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,the.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,Bn.getHttpAuthSchemeEndpointRuleSetPlugin)(this.config,{httpAuthSchemeParametersProvider:yF.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async m=>new Bn.DefaultIdentityProviderConfig({"aws.auth#sigv4":m.credentials})})),this.middlewareStack.use((0,Bn.getHttpSigningPlugin)(this.config))}destroy(){super.destroy()}};oe(CF,"SSOClient");var mf=CF,hf=wo(),SF=class TF extends F.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,TF.prototype)}};oe(SF,"SSOServiceException");var Pa=SF,bF=class AF extends Pa{constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,AF.prototype)}};oe(bF,"InvalidRequestException");var IF=bF,RF=class wF extends Pa{constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,wF.prototype)}};oe(RF,"ResourceNotFoundException");var PF=RF,OF=class xF extends Pa{constructor(e){super({name:"TooManyRequestsException",$fault:"client",...e}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,xF.prototype)}};oe(OF,"TooManyRequestsException");var NF=OF,DF=class kF extends Pa{constructor(e){super({name:"UnauthorizedException",$fault:"client",...e}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,kF.prototype)}};oe(DF,"UnauthorizedException");var MF=DF,LF=oe(t=>({...t,...t.accessToken&&{accessToken:F.SENSITIVE_STRING}}),"GetRoleCredentialsRequestFilterSensitiveLog"),UF=oe(t=>({...t,...t.secretAccessKey&&{secretAccessKey:F.SENSITIVE_STRING},...t.sessionToken&&{sessionToken:F.SENSITIVE_STRING}}),"RoleCredentialsFilterSensitiveLog"),FF=oe(t=>({...t,...t.roleCredentials&&{roleCredentials:UF(t.roleCredentials)}}),"GetRoleCredentialsResponseFilterSensitiveLog"),BF=oe(t=>({...t,...t.accessToken&&{accessToken:F.SENSITIVE_STRING}}),"ListAccountRolesRequestFilterSensitiveLog"),qF=oe(t=>({...t,...t.accessToken&&{accessToken:F.SENSITIVE_STRING}}),"ListAccountsRequestFilterSensitiveLog"),HF=oe(t=>({...t,...t.accessToken&&{accessToken:F.SENSITIVE_STRING}}),"LogoutRequestFilterSensitiveLog"),rl=(Ze(),M(Xe)),dhe=oe(async(t,e)=>{let r=(0,Bn.requestBuilder)(t,e),n=(0,F.map)({},gf,{[_f]:t[yf]});r.bp("/federation/credentials");let o=(0,F.map)({[The]:[,(0,F.expectNonNull)(t[She],"roleName")],[GF]:[,(0,F.expectNonNull)(t[jF],"accountId")]});return r.m("GET").h(n).q(o).b(void 0),r.build()},"se_GetRoleCredentialsCommand"),lhe=oe(async(t,e)=>{let r=(0,Bn.requestBuilder)(t,e),n=(0,F.map)({},gf,{[_f]:t[yf]});r.bp("/assignment/roles");let o=(0,F.map)({[KF]:[,t[VF]],[zF]:[()=>t.maxResults!==void 0,()=>t[$F].toString()],[GF]:[,(0,F.expectNonNull)(t[jF],"accountId")]});return r.m("GET").h(n).q(o).b(void 0),r.build()},"se_ListAccountRolesCommand"),uhe=oe(async(t,e)=>{let r=(0,Bn.requestBuilder)(t,e),n=(0,F.map)({},gf,{[_f]:t[yf]});r.bp("/assignment/accounts");let o=(0,F.map)({[KF]:[,t[VF]],[zF]:[()=>t.maxResults!==void 0,()=>t[$F].toString()]});return r.m("GET").h(n).q(o).b(void 0),r.build()},"se_ListAccountsCommand"),phe=oe(async(t,e)=>{let r=(0,Bn.requestBuilder)(t,e),n=(0,F.map)({},gf,{[_f]:t[yf]});return r.bp("/logout"),r.m("POST").h(n).b(void 0),r.build()},"se_LogoutCommand"),mhe=oe(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return ff(t,e);let r=(0,F.map)({$metadata:Bo(t)}),n=(0,F.expectNonNull)((0,F.expectObject)(await(0,rl.parseJsonBody)(t.body,e)),"body"),o=(0,F.take)(n,{roleCredentials:F._json});return Object.assign(r,o),r},"de_GetRoleCredentialsCommand"),hhe=oe(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return ff(t,e);let r=(0,F.map)({$metadata:Bo(t)}),n=(0,F.expectNonNull)((0,F.expectObject)(await(0,rl.parseJsonBody)(t.body,e)),"body"),o=(0,F.take)(n,{nextToken:F.expectString,roleList:F._json});return Object.assign(r,o),r},"de_ListAccountRolesCommand"),fhe=oe(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return ff(t,e);let r=(0,F.map)({$metadata:Bo(t)}),n=(0,F.expectNonNull)((0,F.expectObject)(await(0,rl.parseJsonBody)(t.body,e)),"body"),o=(0,F.take)(n,{accountList:F._json,nextToken:F.expectString});return Object.assign(r,o),r},"de_ListAccountsCommand"),ghe=oe(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return ff(t,e);let r=(0,F.map)({$metadata:Bo(t)});return await(0,F.collectBody)(t.body,e),r},"de_LogoutCommand"),ff=oe(async(t,e)=>{let r={...t,body:await(0,rl.parseJsonErrorBody)(t.body,e)},n=(0,rl.loadRestJsonErrorCode)(t,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await _he(r,e);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await vhe(r,e);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await Ehe(r,e);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await Che(r,e);default:let o=r.body;return yhe({output:t,parsedBody:o,errorCode:n})}},"de_CommandError"),yhe=(0,F.withBaseException)(Pa),_he=oe(async(t,e)=>{let r=(0,F.map)({}),n=t.body,o=(0,F.take)(n,{message:F.expectString});Object.assign(r,o);let i=new IF({$metadata:Bo(t),...r});return(0,F.decorateServiceException)(i,t.body)},"de_InvalidRequestExceptionRes"),vhe=oe(async(t,e)=>{let r=(0,F.map)({}),n=t.body,o=(0,F.take)(n,{message:F.expectString});Object.assign(r,o);let i=new PF({$metadata:Bo(t),...r});return(0,F.decorateServiceException)(i,t.body)},"de_ResourceNotFoundExceptionRes"),Ehe=oe(async(t,e)=>{let r=(0,F.map)({}),n=t.body,o=(0,F.take)(n,{message:F.expectString});Object.assign(r,o);let i=new NF({$metadata:Bo(t),...r});return(0,F.decorateServiceException)(i,t.body)},"de_TooManyRequestsExceptionRes"),Che=oe(async(t,e)=>{let r=(0,F.map)({}),n=t.body,o=(0,F.take)(n,{message:F.expectString});Object.assign(r,o);let i=new MF({$metadata:Bo(t),...r});return(0,F.decorateServiceException)(i,t.body)},"de_UnauthorizedExceptionRes"),Bo=oe(t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),"deserializeMetadata"),gf=oe(t=>t!=null&&t!==""&&(!Object.getOwnPropertyNames(t).includes("length")||t.length!=0)&&(!Object.getOwnPropertyNames(t).includes("size")||t.size!=0),"isSerializableHeaderValue"),jF="accountId",yf="accessToken",GF="account_id",$F="maxResults",zF="max_result",VF="nextToken",KF="next_token",She="roleName",The="role_name",_f="x-amz-sso_bearer_token",WF=class extends F.Command.classBuilder().ep({...pf}).m(function(e,r,n,o){return[(0,hf.getSerdePlugin)(n,this.serialize,this.deserialize),(0,nl.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(LF,FF).ser(dhe).de(mhe).build(){};oe(WF,"GetRoleCredentialsCommand");var QF=WF,YF=class extends F.Command.classBuilder().ep({...pf}).m(function(e,r,n,o){return[(0,hf.getSerdePlugin)(n,this.serialize,this.deserialize),(0,nl.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").f(BF,void 0).ser(lhe).de(hhe).build(){};oe(YF,"ListAccountRolesCommand");var gC=YF,JF=class extends F.Command.classBuilder().ep({...pf}).m(function(e,r,n,o){return[(0,hf.getSerdePlugin)(n,this.serialize,this.deserialize),(0,nl.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").f(qF,void 0).ser(uhe).de(fhe).build(){};oe(JF,"ListAccountsCommand");var yC=JF,XF=class extends F.Command.classBuilder().ep({...pf}).m(function(e,r,n,o){return[(0,hf.getSerdePlugin)(n,this.serialize,this.deserialize),(0,nl.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").f(HF,void 0).ser(phe).de(ghe).build(){};oe(XF,"LogoutCommand");var ZF=XF,bhe={GetRoleCredentialsCommand:QF,ListAccountRolesCommand:gC,ListAccountsCommand:yC,LogoutCommand:ZF},eB=class extends mf{};oe(eB,"SSO");var tB=eB;(0,F.createAggregatedClient)(bhe,tB);var Ahe=(0,Bn.createPaginator)(mf,gC,"nextToken","nextToken","maxResults"),Ihe=(0,Bn.createPaginator)(mf,yC,"nextToken","nextToken","maxResults")});var vC=g(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});qo.resolveHttpAuthSchemeConfig=qo.defaultSSOOIDCHttpAuthSchemeProvider=qo.defaultSSOOIDCHttpAuthSchemeParametersProvider=void 0;var Rhe=(Ze(),M(Xe)),oB=hr(),whe=async(t,e,r)=>({operation:(0,oB.getSmithyContext)(e).operation,region:await(0,oB.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});qo.defaultSSOOIDCHttpAuthSchemeParametersProvider=whe;function Phe(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function _C(t){return{schemeId:"smithy.api#noAuth"}}var Ohe=t=>{let e=[];switch(t.operation){case"CreateToken":{e.push(_C(t));break}case"RegisterClient":{e.push(_C(t));break}case"StartDeviceAuthorization":{e.push(_C(t));break}default:e.push(Phe(t))}return e};qo.defaultSSOOIDCHttpAuthSchemeProvider=Ohe;var xhe=t=>({...(0,Rhe.resolveAwsSdkSigV4Config)(t)});qo.resolveHttpAuthSchemeConfig=xhe});var iB=g((I$e,Nhe)=>{Nhe.exports={name:"@aws-sdk/client-sso-oidc",description:"AWS SDK for JavaScript Sso Oidc Client for Node.js, Browser and React Native",version:"3.645.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso-oidc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso-oidc"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.635.0","@aws-sdk/credential-provider-node":"3.645.0","@aws-sdk/middleware-host-header":"3.620.0","@aws-sdk/middleware-logger":"3.609.0","@aws-sdk/middleware-recursion-detection":"3.620.0","@aws-sdk/middleware-user-agent":"3.645.0","@aws-sdk/region-config-resolver":"3.614.0","@aws-sdk/types":"3.609.0","@aws-sdk/util-endpoints":"3.645.0","@aws-sdk/util-user-agent-browser":"3.609.0","@aws-sdk/util-user-agent-node":"3.614.0","@smithy/config-resolver":"^3.0.5","@smithy/core":"^2.4.0","@smithy/fetch-http-handler":"^3.2.4","@smithy/hash-node":"^3.0.3","@smithy/invalid-dependency":"^3.0.3","@smithy/middleware-content-length":"^3.0.5","@smithy/middleware-endpoint":"^3.1.0","@smithy/middleware-retry":"^3.0.15","@smithy/middleware-serde":"^3.0.3","@smithy/middleware-stack":"^3.0.3","@smithy/node-config-provider":"^3.1.4","@smithy/node-http-handler":"^3.1.4","@smithy/protocol-http":"^4.1.0","@smithy/smithy-client":"^3.2.0","@smithy/types":"^3.3.0","@smithy/url-parser":"^3.0.3","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.15","@smithy/util-defaults-mode-node":"^3.0.15","@smithy/util-endpoints":"^2.0.5","@smithy/util-middleware":"^3.0.3","@smithy/util-retry":"^3.0.3","@smithy/util-utf8":"^3.0.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node16":"16.1.3","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=16.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",peerDependencies:{"@aws-sdk/client-sts":"^3.645.0"},browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso-oidc",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso-oidc"}}});var EB=g(vf=>{"use strict";Object.defineProperty(vf,"__esModule",{value:!0});vf.ruleSet=void 0;var gB="required",Tr="fn",br="argv",Na="ref",sB=!0,aB="isSet",ol="booleanEquals",Oa="error",xa="endpoint",qn="tree",EC="PartitionResult",CC="getAttr",cB={[gB]:!1,type:"String"},dB={[gB]:!0,default:!1,type:"Boolean"},lB={[Na]:"Endpoint"},yB={[Tr]:ol,[br]:[{[Na]:"UseFIPS"},!0]},_B={[Tr]:ol,[br]:[{[Na]:"UseDualStack"},!0]},Sr={},uB={[Tr]:CC,[br]:[{[Na]:EC},"supportsFIPS"]},vB={[Na]:EC},pB={[Tr]:ol,[br]:[!0,{[Tr]:CC,[br]:[vB,"supportsDualStack"]}]},mB=[yB],hB=[_B],fB=[{[Na]:"Region"}],Dhe={version:"1.0",parameters:{Region:cB,UseDualStack:dB,UseFIPS:dB,Endpoint:cB},rules:[{conditions:[{[Tr]:aB,[br]:[lB]}],rules:[{conditions:mB,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Oa},{conditions:hB,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Oa},{endpoint:{url:lB,properties:Sr,headers:Sr},type:xa}],type:qn},{conditions:[{[Tr]:aB,[br]:fB}],rules:[{conditions:[{[Tr]:"aws.partition",[br]:fB,assign:EC}],rules:[{conditions:[yB,_B],rules:[{conditions:[{[Tr]:ol,[br]:[sB,uB]},pB],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Sr,headers:Sr},type:xa}],type:qn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Oa}],type:qn},{conditions:mB,rules:[{conditions:[{[Tr]:ol,[br]:[uB,sB]}],rules:[{conditions:[{[Tr]:"stringEquals",[br]:[{[Tr]:CC,[br]:[vB,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:Sr,headers:Sr},type:xa},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Sr,headers:Sr},type:xa}],type:qn},{error:"FIPS is enabled but this partition does not support FIPS",type:Oa}],type:qn},{conditions:hB,rules:[{conditions:[pB],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Sr,headers:Sr},type:xa}],type:qn},{error:"DualStack is enabled but this partition does not support DualStack",type:Oa}],type:qn},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Sr,headers:Sr},type:xa}],type:qn}],type:qn},{error:"Invalid Configuration: Missing Region",type:Oa}]};vf.ruleSet=Dhe});var SB=g(Ef=>{"use strict";Object.defineProperty(Ef,"__esModule",{value:!0});Ef.defaultEndpointResolver=void 0;var khe=Ki(),CB=Vi(),Mhe=EB(),Lhe=(t,e={})=>(0,CB.resolveEndpoint)(Mhe.ruleSet,{endpointParams:t,logger:e.logger});Ef.defaultEndpointResolver=Lhe;CB.customEndpointFunctions.aws=khe.awsEndpointFunctions});var AB=g(Cf=>{"use strict";Object.defineProperty(Cf,"__esModule",{value:!0});Cf.getRuntimeConfig=void 0;var Uhe=(Ze(),M(Xe)),Fhe=(mt(),M(It)),Bhe=fe(),qhe=Ro(),TB=Mn(),bB=Ct(),Hhe=vC(),jhe=SB(),Ghe=t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??TB.fromBase64,base64Encoder:t?.base64Encoder??TB.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??jhe.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??Hhe.defaultSSOOIDCHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new Uhe.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Fhe.NoAuthSigner}],logger:t?.logger??new Bhe.NoOpLogger,serviceId:t?.serviceId??"SSO OIDC",urlParser:t?.urlParser??qhe.parseUrl,utf8Decoder:t?.utf8Decoder??bB.fromUtf8,utf8Encoder:t?.utf8Encoder??bB.toUtf8});Cf.getRuntimeConfig=Ghe});var wB=g(Tf=>{"use strict";Object.defineProperty(Tf,"__esModule",{value:!0});Tf.getRuntimeConfig=void 0;var $he=(_e(),M(ye)),zhe=$he.__importDefault(iB()),Vhe=(Ze(),M(Xe)),Khe=sl(),Whe=Ea(),Sf=fr(),Qhe=Ca(),IB=_r(),il=rn(),RB=No(),Yhe=Sa(),Jhe=Ji(),Xhe=AB(),Zhe=fe(),efe=Ia(),tfe=fe(),rfe=t=>{(0,tfe.emitWarningIfUnsupportedVersion)(process.version);let e=(0,efe.resolveDefaultsModeConfig)(t),r=()=>e().then(Zhe.loadConfigsForDefaultMode),n=(0,Xhe.getRuntimeConfig)(t);return(0,Vhe.emitWarningIfUnsupportedVersion)(process.version),{...n,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??Yhe.calculateBodyLength,credentialDefaultProvider:t?.credentialDefaultProvider??Khe.defaultProvider,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,Whe.defaultUserAgent)({serviceId:n.serviceId,clientVersion:zhe.default.version}),maxAttempts:t?.maxAttempts??(0,il.loadConfig)(IB.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:t?.region??(0,il.loadConfig)(Sf.NODE_REGION_CONFIG_OPTIONS,Sf.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:RB.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,il.loadConfig)({...IB.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||Jhe.DEFAULT_RETRY_MODE}),sha256:t?.sha256??Qhe.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??RB.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,il.loadConfig)(Sf.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:t?.useFipsEndpoint??(0,il.loadConfig)(Sf.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}};Tf.getRuntimeConfig=rfe});var SC=g((U$e,$q)=>{"use strict";var Af=Object.defineProperty,nfe=Object.getOwnPropertyDescriptor,ofe=Object.getOwnPropertyNames,ife=Object.prototype.hasOwnProperty,V=(t,e)=>Af(t,"name",{value:e,configurable:!0}),sfe=(t,e)=>{for(var r in e)Af(t,r,{get:e[r],enumerable:!0})},afe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of ofe(e))!ife.call(t,o)&&o!==r&&Af(t,o,{get:()=>e[o],enumerable:!(n=nfe(e,o))||n.enumerable});return t},cfe=t=>afe(Af({},"__esModule",{value:!0}),t),MB={};sfe(MB,{AccessDeniedException:()=>jB,AuthorizationPendingException:()=>zB,CreateTokenCommand:()=>Mq,CreateTokenRequestFilterSensitiveLog:()=>wq,CreateTokenResponseFilterSensitiveLog:()=>Pq,CreateTokenWithIAMCommand:()=>Uq,CreateTokenWithIAMRequestFilterSensitiveLog:()=>Oq,CreateTokenWithIAMResponseFilterSensitiveLog:()=>xq,ExpiredTokenException:()=>WB,InternalServerException:()=>JB,InvalidClientException:()=>eq,InvalidClientMetadataException:()=>bq,InvalidGrantException:()=>nq,InvalidRedirectUriException:()=>Rq,InvalidRequestException:()=>sq,InvalidRequestRegionException:()=>Cq,InvalidScopeException:()=>dq,RegisterClientCommand:()=>Bq,RegisterClientResponseFilterSensitiveLog:()=>Nq,SSOOIDC:()=>Gq,SSOOIDCClient:()=>UB,SSOOIDCServiceException:()=>Rt,SlowDownException:()=>pq,StartDeviceAuthorizationCommand:()=>Hq,StartDeviceAuthorizationRequestFilterSensitiveLog:()=>Dq,UnauthorizedClientException:()=>fq,UnsupportedGrantTypeException:()=>_q,__Client:()=>S.Client});$q.exports=cfe(MB);var PB=ra(),dfe=na(),lfe=oa(),OB=sa(),ufe=fr(),ns=(mt(),M(It)),pfe=fa(),al=Po(),xB=_r(),NB=vC(),mfe=V(t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),"resolveClientEndpointParameters"),If={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},hfe=wB(),DB=wa(),kB=De(),S=fe(),ffe=V(t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(o){let i=e.findIndex(s=>s.schemeId===o.schemeId);i===-1?e.push(o):e.splice(i,1,o)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},"getHttpAuthExtensionConfiguration"),gfe=V(t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),"resolveHttpAuthRuntimeConfig"),bf=V(t=>t,"asPartial"),yfe=V((t,e)=>{let r={...bf((0,DB.getAwsRegionExtensionConfiguration)(t)),...bf((0,S.getDefaultExtensionConfiguration)(t)),...bf((0,kB.getHttpHandlerExtensionConfiguration)(t)),...bf(ffe(t))};return e.forEach(n=>n.configure(r)),{...t,...(0,DB.resolveAwsRegionExtensionConfiguration)(r),...(0,S.resolveDefaultRuntimeConfig)(r),...(0,kB.resolveHttpHandlerRuntimeConfig)(r),...gfe(r)}},"resolveRuntimeExtensions"),LB=class extends S.Client{constructor(...[e]){let r=(0,hfe.getRuntimeConfig)(e||{}),n=mfe(r),o=(0,OB.resolveUserAgentConfig)(n),i=(0,xB.resolveRetryConfig)(o),s=(0,ufe.resolveRegionConfig)(i),a=(0,PB.resolveHostHeaderConfig)(s),c=(0,al.resolveEndpointConfig)(a),d=(0,NB.resolveHttpAuthSchemeConfig)(c),u=yfe(d,e?.extensions||[]);super(u),this.config=u,this.middlewareStack.use((0,OB.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,xB.getRetryPlugin)(this.config)),this.middlewareStack.use((0,pfe.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,PB.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,dfe.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,lfe.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,ns.getHttpAuthSchemeEndpointRuleSetPlugin)(this.config,{httpAuthSchemeParametersProvider:NB.defaultSSOOIDCHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async m=>new ns.DefaultIdentityProviderConfig({"aws.auth#sigv4":m.credentials})})),this.middlewareStack.use((0,ns.getHttpSigningPlugin)(this.config))}destroy(){super.destroy()}};V(LB,"SSOOIDCClient");var UB=LB,Rf=wo(),FB=class BB extends S.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,BB.prototype)}};V(FB,"SSOOIDCServiceException");var Rt=FB,qB=class HB extends Rt{constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,HB.prototype),this.error=e.error,this.error_description=e.error_description}};V(qB,"AccessDeniedException");var jB=qB,GB=class $B extends Rt{constructor(e){super({name:"AuthorizationPendingException",$fault:"client",...e}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,$B.prototype),this.error=e.error,this.error_description=e.error_description}};V(GB,"AuthorizationPendingException");var zB=GB,VB=class KB extends Rt{constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,KB.prototype),this.error=e.error,this.error_description=e.error_description}};V(VB,"ExpiredTokenException");var WB=VB,QB=class YB extends Rt{constructor(e){super({name:"InternalServerException",$fault:"server",...e}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,YB.prototype),this.error=e.error,this.error_description=e.error_description}};V(QB,"InternalServerException");var JB=QB,XB=class ZB extends Rt{constructor(e){super({name:"InvalidClientException",$fault:"client",...e}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,ZB.prototype),this.error=e.error,this.error_description=e.error_description}};V(XB,"InvalidClientException");var eq=XB,tq=class rq extends Rt{constructor(e){super({name:"InvalidGrantException",$fault:"client",...e}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,rq.prototype),this.error=e.error,this.error_description=e.error_description}};V(tq,"InvalidGrantException");var nq=tq,oq=class iq extends Rt{constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,iq.prototype),this.error=e.error,this.error_description=e.error_description}};V(oq,"InvalidRequestException");var sq=oq,aq=class cq extends Rt{constructor(e){super({name:"InvalidScopeException",$fault:"client",...e}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,cq.prototype),this.error=e.error,this.error_description=e.error_description}};V(aq,"InvalidScopeException");var dq=aq,lq=class uq extends Rt{constructor(e){super({name:"SlowDownException",$fault:"client",...e}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,uq.prototype),this.error=e.error,this.error_description=e.error_description}};V(lq,"SlowDownException");var pq=lq,mq=class hq extends Rt{constructor(e){super({name:"UnauthorizedClientException",$fault:"client",...e}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,hq.prototype),this.error=e.error,this.error_description=e.error_description}};V(mq,"UnauthorizedClientException");var fq=mq,gq=class yq extends Rt{constructor(e){super({name:"UnsupportedGrantTypeException",$fault:"client",...e}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,yq.prototype),this.error=e.error,this.error_description=e.error_description}};V(gq,"UnsupportedGrantTypeException");var _q=gq,vq=class Eq extends Rt{constructor(e){super({name:"InvalidRequestRegionException",$fault:"client",...e}),this.name="InvalidRequestRegionException",this.$fault="client",Object.setPrototypeOf(this,Eq.prototype),this.error=e.error,this.error_description=e.error_description,this.endpoint=e.endpoint,this.region=e.region}};V(vq,"InvalidRequestRegionException");var Cq=vq,Sq=class Tq extends Rt{constructor(e){super({name:"InvalidClientMetadataException",$fault:"client",...e}),this.name="InvalidClientMetadataException",this.$fault="client",Object.setPrototypeOf(this,Tq.prototype),this.error=e.error,this.error_description=e.error_description}};V(Sq,"InvalidClientMetadataException");var bq=Sq,Aq=class Iq extends Rt{constructor(e){super({name:"InvalidRedirectUriException",$fault:"client",...e}),this.name="InvalidRedirectUriException",this.$fault="client",Object.setPrototypeOf(this,Iq.prototype),this.error=e.error,this.error_description=e.error_description}};V(Aq,"InvalidRedirectUriException");var Rq=Aq,wq=V(t=>({...t,...t.clientSecret&&{clientSecret:S.SENSITIVE_STRING},...t.refreshToken&&{refreshToken:S.SENSITIVE_STRING},...t.codeVerifier&&{codeVerifier:S.SENSITIVE_STRING}}),"CreateTokenRequestFilterSensitiveLog"),Pq=V(t=>({...t,...t.accessToken&&{accessToken:S.SENSITIVE_STRING},...t.refreshToken&&{refreshToken:S.SENSITIVE_STRING},...t.idToken&&{idToken:S.SENSITIVE_STRING}}),"CreateTokenResponseFilterSensitiveLog"),Oq=V(t=>({...t,...t.refreshToken&&{refreshToken:S.SENSITIVE_STRING},...t.assertion&&{assertion:S.SENSITIVE_STRING},...t.subjectToken&&{subjectToken:S.SENSITIVE_STRING},...t.codeVerifier&&{codeVerifier:S.SENSITIVE_STRING}}),"CreateTokenWithIAMRequestFilterSensitiveLog"),xq=V(t=>({...t,...t.accessToken&&{accessToken:S.SENSITIVE_STRING},...t.refreshToken&&{refreshToken:S.SENSITIVE_STRING},...t.idToken&&{idToken:S.SENSITIVE_STRING}}),"CreateTokenWithIAMResponseFilterSensitiveLog"),Nq=V(t=>({...t,...t.clientSecret&&{clientSecret:S.SENSITIVE_STRING}}),"RegisterClientResponseFilterSensitiveLog"),Dq=V(t=>({...t,...t.clientSecret&&{clientSecret:S.SENSITIVE_STRING}}),"StartDeviceAuthorizationRequestFilterSensitiveLog"),Da=(Ze(),M(Xe)),_fe=V(async(t,e)=>{let r=(0,ns.requestBuilder)(t,e),n={"content-type":"application/json"};r.bp("/token");let o;return o=JSON.stringify((0,S.take)(t,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:i=>(0,S._json)(i)})),r.m("POST").h(n).b(o),r.build()},"se_CreateTokenCommand"),vfe=V(async(t,e)=>{let r=(0,ns.requestBuilder)(t,e),n={"content-type":"application/json"};r.bp("/token");let o=(0,S.map)({[Hfe]:[,"t"]}),i;return i=JSON.stringify((0,S.take)(t,{assertion:[],clientId:[],code:[],codeVerifier:[],grantType:[],redirectUri:[],refreshToken:[],requestedTokenType:[],scope:s=>(0,S._json)(s),subjectToken:[],subjectTokenType:[]})),r.m("POST").h(n).q(o).b(i),r.build()},"se_CreateTokenWithIAMCommand"),Efe=V(async(t,e)=>{let r=(0,ns.requestBuilder)(t,e),n={"content-type":"application/json"};r.bp("/client/register");let o;return o=JSON.stringify((0,S.take)(t,{clientName:[],clientType:[],entitledApplicationArn:[],grantTypes:i=>(0,S._json)(i),issuerUrl:[],redirectUris:i=>(0,S._json)(i),scopes:i=>(0,S._json)(i)})),r.m("POST").h(n).b(o),r.build()},"se_RegisterClientCommand"),Cfe=V(async(t,e)=>{let r=(0,ns.requestBuilder)(t,e),n={"content-type":"application/json"};r.bp("/device_authorization");let o;return o=JSON.stringify((0,S.take)(t,{clientId:[],clientSecret:[],startUrl:[]})),r.m("POST").h(n).b(o),r.build()},"se_StartDeviceAuthorizationCommand"),Sfe=V(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return wf(t,e);let r=(0,S.map)({$metadata:ft(t)}),n=(0,S.expectNonNull)((0,S.expectObject)(await(0,Da.parseJsonBody)(t.body,e)),"body"),o=(0,S.take)(n,{accessToken:S.expectString,expiresIn:S.expectInt32,idToken:S.expectString,refreshToken:S.expectString,tokenType:S.expectString});return Object.assign(r,o),r},"de_CreateTokenCommand"),Tfe=V(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return wf(t,e);let r=(0,S.map)({$metadata:ft(t)}),n=(0,S.expectNonNull)((0,S.expectObject)(await(0,Da.parseJsonBody)(t.body,e)),"body"),o=(0,S.take)(n,{accessToken:S.expectString,expiresIn:S.expectInt32,idToken:S.expectString,issuedTokenType:S.expectString,refreshToken:S.expectString,scope:S._json,tokenType:S.expectString});return Object.assign(r,o),r},"de_CreateTokenWithIAMCommand"),bfe=V(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return wf(t,e);let r=(0,S.map)({$metadata:ft(t)}),n=(0,S.expectNonNull)((0,S.expectObject)(await(0,Da.parseJsonBody)(t.body,e)),"body"),o=(0,S.take)(n,{authorizationEndpoint:S.expectString,clientId:S.expectString,clientIdIssuedAt:S.expectLong,clientSecret:S.expectString,clientSecretExpiresAt:S.expectLong,tokenEndpoint:S.expectString});return Object.assign(r,o),r},"de_RegisterClientCommand"),Afe=V(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return wf(t,e);let r=(0,S.map)({$metadata:ft(t)}),n=(0,S.expectNonNull)((0,S.expectObject)(await(0,Da.parseJsonBody)(t.body,e)),"body"),o=(0,S.take)(n,{deviceCode:S.expectString,expiresIn:S.expectInt32,interval:S.expectInt32,userCode:S.expectString,verificationUri:S.expectString,verificationUriComplete:S.expectString});return Object.assign(r,o),r},"de_StartDeviceAuthorizationCommand"),wf=V(async(t,e)=>{let r={...t,body:await(0,Da.parseJsonErrorBody)(t.body,e)},n=(0,Da.loadRestJsonErrorCode)(t,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await Rfe(r,e);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await wfe(r,e);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await Pfe(r,e);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await Ofe(r,e);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await xfe(r,e);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await Dfe(r,e);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await Mfe(r,e);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await Ufe(r,e);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await Ffe(r,e);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await Bfe(r,e);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await qfe(r,e);case"InvalidRequestRegionException":case"com.amazonaws.ssooidc#InvalidRequestRegionException":throw await Lfe(r,e);case"InvalidClientMetadataException":case"com.amazonaws.ssooidc#InvalidClientMetadataException":throw await Nfe(r,e);case"InvalidRedirectUriException":case"com.amazonaws.ssooidc#InvalidRedirectUriException":throw await kfe(r,e);default:let o=r.body;return Ife({output:t,parsedBody:o,errorCode:n})}},"de_CommandError"),Ife=(0,S.withBaseException)(Rt),Rfe=V(async(t,e)=>{let r=(0,S.map)({}),n=t.body,o=(0,S.take)(n,{error:S.expectString,error_description:S.expectString});Object.assign(r,o);let i=new jB({$metadata:ft(t),...r});return(0,S.decorateServiceException)(i,t.body)},"de_AccessDeniedExceptionRes"),wfe=V(async(t,e)=>{let r=(0,S.map)({}),n=t.body,o=(0,S.take)(n,{error:S.expectString,error_description:S.expectString});Object.assign(r,o);let i=new zB({$metadata:ft(t),...r});return(0,S.decorateServiceException)(i,t.body)},"de_AuthorizationPendingExceptionRes"),Pfe=V(async(t,e)=>{let r=(0,S.map)({}),n=t.body,o=(0,S.take)(n,{error:S.expectString,error_description:S.expectString});Object.assign(r,o);let i=new WB({$metadata:ft(t),...r});return(0,S.decorateServiceException)(i,t.body)},"de_ExpiredTokenExceptionRes"),Ofe=V(async(t,e)=>{let r=(0,S.map)({}),n=t.body,o=(0,S.take)(n,{error:S.expectString,error_description:S.expectString});Object.assign(r,o);let i=new JB({$metadata:ft(t),...r});return(0,S.decorateServiceException)(i,t.body)},"de_InternalServerExceptionRes"),xfe=V(async(t,e)=>{let r=(0,S.map)({}),n=t.body,o=(0,S.take)(n,{error:S.expectString,error_description:S.expectString});Object.assign(r,o);let i=new eq({$metadata:ft(t),...r});return(0,S.decorateServiceException)(i,t.body)},"de_InvalidClientExceptionRes"),Nfe=V(async(t,e)=>{let r=(0,S.map)({}),n=t.body,o=(0,S.take)(n,{error:S.expectString,error_description:S.expectString});Object.assign(r,o);let i=new bq({$metadata:ft(t),...r});return(0,S.decorateServiceException)(i,t.body)},"de_InvalidClientMetadataExceptionRes"),Dfe=V(async(t,e)=>{let r=(0,S.map)({}),n=t.body,o=(0,S.take)(n,{error:S.expectString,error_description:S.expectString});Object.assign(r,o);let i=new nq({$metadata:ft(t),...r});return(0,S.decorateServiceException)(i,t.body)},"de_InvalidGrantExceptionRes"),kfe=V(async(t,e)=>{let r=(0,S.map)({}),n=t.body,o=(0,S.take)(n,{error:S.expectString,error_description:S.expectString});Object.assign(r,o);let i=new Rq({$metadata:ft(t),...r});return(0,S.decorateServiceException)(i,t.body)},"de_InvalidRedirectUriExceptionRes"),Mfe=V(async(t,e)=>{let r=(0,S.map)({}),n=t.body,o=(0,S.take)(n,{error:S.expectString,error_description:S.expectString});Object.assign(r,o);let i=new sq({$metadata:ft(t),...r});return(0,S.decorateServiceException)(i,t.body)},"de_InvalidRequestExceptionRes"),Lfe=V(async(t,e)=>{let r=(0,S.map)({}),n=t.body,o=(0,S.take)(n,{endpoint:S.expectString,error:S.expectString,error_description:S.expectString,region:S.expectString});Object.assign(r,o);let i=new Cq({$metadata:ft(t),...r});return(0,S.decorateServiceException)(i,t.body)},"de_InvalidRequestRegionExceptionRes"),Ufe=V(async(t,e)=>{let r=(0,S.map)({}),n=t.body,o=(0,S.take)(n,{error:S.expectString,error_description:S.expectString});Object.assign(r,o);let i=new dq({$metadata:ft(t),...r});return(0,S.decorateServiceException)(i,t.body)},"de_InvalidScopeExceptionRes"),Ffe=V(async(t,e)=>{let r=(0,S.map)({}),n=t.body,o=(0,S.take)(n,{error:S.expectString,error_description:S.expectString});Object.assign(r,o);let i=new pq({$metadata:ft(t),...r});return(0,S.decorateServiceException)(i,t.body)},"de_SlowDownExceptionRes"),Bfe=V(async(t,e)=>{let r=(0,S.map)({}),n=t.body,o=(0,S.take)(n,{error:S.expectString,error_description:S.expectString});Object.assign(r,o);let i=new fq({$metadata:ft(t),...r});return(0,S.decorateServiceException)(i,t.body)},"de_UnauthorizedClientExceptionRes"),qfe=V(async(t,e)=>{let r=(0,S.map)({}),n=t.body,o=(0,S.take)(n,{error:S.expectString,error_description:S.expectString});Object.assign(r,o);let i=new _q({$metadata:ft(t),...r});return(0,S.decorateServiceException)(i,t.body)},"de_UnsupportedGrantTypeExceptionRes"),ft=V(t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),"deserializeMetadata"),Hfe="aws_iam",kq=class extends S.Command.classBuilder().ep({...If}).m(function(e,r,n,o){return[(0,Rf.getSerdePlugin)(n,this.serialize,this.deserialize),(0,al.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(wq,Pq).ser(_fe).de(Sfe).build(){};V(kq,"CreateTokenCommand");var Mq=kq,Lq=class extends S.Command.classBuilder().ep({...If}).m(function(e,r,n,o){return[(0,Rf.getSerdePlugin)(n,this.serialize,this.deserialize),(0,al.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateTokenWithIAM",{}).n("SSOOIDCClient","CreateTokenWithIAMCommand").f(Oq,xq).ser(vfe).de(Tfe).build(){};V(Lq,"CreateTokenWithIAMCommand");var Uq=Lq,Fq=class extends S.Command.classBuilder().ep({...If}).m(function(e,r,n,o){return[(0,Rf.getSerdePlugin)(n,this.serialize,this.deserialize),(0,al.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","RegisterClient",{}).n("SSOOIDCClient","RegisterClientCommand").f(void 0,Nq).ser(Efe).de(bfe).build(){};V(Fq,"RegisterClientCommand");var Bq=Fq,qq=class extends S.Command.classBuilder().ep({...If}).m(function(e,r,n,o){return[(0,Rf.getSerdePlugin)(n,this.serialize,this.deserialize),(0,al.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","StartDeviceAuthorization",{}).n("SSOOIDCClient","StartDeviceAuthorizationCommand").f(Dq,void 0).ser(Cfe).de(Afe).build(){};V(qq,"StartDeviceAuthorizationCommand");var Hq=qq,jfe={CreateTokenCommand:Mq,CreateTokenWithIAMCommand:Uq,RegisterClientCommand:Bq,StartDeviceAuthorizationCommand:Hq},jq=class extends UB{};V(jq,"SSOOIDC");var Gq=jq;(0,S.createAggregatedClient)(jfe,Gq)});var Xq=g((F$e,Jq)=>{"use strict";var Gfe=Object.create,dl=Object.defineProperty,$fe=Object.getOwnPropertyDescriptor,zfe=Object.getOwnPropertyNames,Vfe=Object.getPrototypeOf,Kfe=Object.prototype.hasOwnProperty,Ho=(t,e)=>dl(t,"name",{value:e,configurable:!0}),Wfe=(t,e)=>{for(var r in e)dl(t,r,{get:e[r],enumerable:!0})},Kq=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of zfe(e))!Kfe.call(t,o)&&o!==r&&dl(t,o,{get:()=>e[o],enumerable:!(n=$fe(e,o))||n.enumerable});return t},Wq=(t,e,r)=>(r=t!=null?Gfe(Vfe(t)):{},Kq(e||!t||!t.__esModule?dl(r,"default",{value:t,enumerable:!0}):r,t)),Qfe=t=>Kq(dl({},"__esModule",{value:!0}),t),Qq={};Wfe(Qq,{fromSso:()=>Yq,fromStatic:()=>rge,nodeProvider:()=>nge});Jq.exports=Qfe(Qq);var Yfe=5*60*1e3,bC="To refresh this SSO session run 'aws sso login' with the corresponding profile.",TC={},Jfe=Ho(async t=>{let{SSOOIDCClient:e}=await Promise.resolve().then(()=>Wq(SC()));if(TC[t])return TC[t];let r=new e({region:t});return TC[t]=r,r},"getSsoOidcClient"),Xfe=Ho(async(t,e)=>{let{CreateTokenCommand:r}=await Promise.resolve().then(()=>Wq(SC()));return(await Jfe(e)).send(new r({clientId:t.clientId,clientSecret:t.clientSecret,refreshToken:t.refreshToken,grantType:"refresh_token"}))},"getNewSsoOidcToken"),Br=Lt(),zq=Ho(t=>{if(t.expiration&&t.expiration.getTime()<Date.now())throw new Br.TokenProviderError(`Token is expired. ${bC}`,!1)},"validateTokenExpiry"),os=Ho((t,e,r=!1)=>{if(typeof e>"u")throw new Br.TokenProviderError(`Value not present for '${t}' in SSO Token${r?". Cannot refresh":""}. ${bC}`,!1)},"validateTokenKey"),cl=Io(),Zfe=require("fs"),{writeFile:ege}=Zfe.promises,tge=Ho((t,e)=>{let r=(0,cl.getSSOTokenFilepath)(t),n=JSON.stringify(e,null,2);return ege(r,n)},"writeSSOTokenToFile"),Vq=new Date(0),Yq=Ho((t={})=>async()=>{var e;(e=t.logger)==null||e.debug("@aws-sdk/token-providers - fromSso");let r=await(0,cl.parseKnownFiles)(t),n=(0,cl.getProfileName)(t),o=r[n];if(o){if(!o.sso_session)throw new Br.TokenProviderError(`Profile '${n}' is missing required property 'sso_session'.`)}else throw new Br.TokenProviderError(`Profile '${n}' could not be found in shared credentials file.`,!1);let i=o.sso_session,a=(await(0,cl.loadSsoSessionData)(t))[i];if(!a)throw new Br.TokenProviderError(`Sso session '${i}' could not be found in shared credentials file.`,!1);for(let y of["sso_start_url","sso_region"])if(!a[y])throw new Br.TokenProviderError(`Sso session '${i}' is missing required property '${y}'.`,!1);let c=a.sso_start_url,d=a.sso_region,u;try{u=await(0,cl.getSSOTokenFromFile)(i)}catch{throw new Br.TokenProviderError(`The SSO session token associated with profile=${n} was not found or is invalid. ${bC}`,!1)}os("accessToken",u.accessToken),os("expiresAt",u.expiresAt);let{accessToken:m,expiresAt:f}=u,h={token:m,expiration:new Date(f)};if(h.expiration.getTime()-Date.now()>Yfe)return h;if(Date.now()-Vq.getTime()<30*1e3)return zq(h),h;os("clientId",u.clientId,!0),os("clientSecret",u.clientSecret,!0),os("refreshToken",u.refreshToken,!0);try{Vq.setTime(Date.now());let y=await Xfe(u,d);os("accessToken",y.accessToken),os("expiresIn",y.expiresIn);let E=new Date(Date.now()+y.expiresIn*1e3);try{await tge(i,{...u,accessToken:y.accessToken,expiresAt:E.toISOString(),refreshToken:y.refreshToken})}catch{}return{token:y.accessToken,expiration:E}}catch{return zq(h),h}},"fromSso"),rge=Ho(({token:t,logger:e})=>async()=>{if(e?.debug("@aws-sdk/token-providers - fromStatic"),!t||!t.token)throw new Br.TokenProviderError("Please pass a valid token to fromStatic",!1);return t},"fromStatic"),nge=Ho((t={})=>(0,Br.memoize)((0,Br.chain)(Yq(t),async()=>{throw new Br.TokenProviderError("Could not load token from any providers",!1)}),e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,e=>e.expiration!==void 0),"nodeProvider")});var IC=g((B$e,s1)=>{"use strict";var Of=Object.defineProperty,oge=Object.getOwnPropertyDescriptor,e1=Object.getOwnPropertyNames,ige=Object.prototype.hasOwnProperty,xf=(t,e)=>Of(t,"name",{value:e,configurable:!0}),sge=(t,e)=>function(){return t&&(e=(0,t[e1(t)[0]])(t=0)),e},t1=(t,e)=>{for(var r in e)Of(t,r,{get:e[r],enumerable:!0})},age=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of e1(e))!ige.call(t,o)&&o!==r&&Of(t,o,{get:()=>e[o],enumerable:!(n=oge(e,o))||n.enumerable});return t},cge=t=>age(Of({},"__esModule",{value:!0}),t),r1={};t1(r1,{GetRoleCredentialsCommand:()=>AC.GetRoleCredentialsCommand,SSOClient:()=>AC.SSOClient});var AC,dge=sge({"src/loadSso.ts"(){"use strict";AC=nB()}}),n1={};t1(n1,{fromSSO:()=>uge,isSsoProfile:()=>o1,validateSsoProfile:()=>i1});s1.exports=cge(n1);var o1=xf(t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string"),"isSsoProfile"),lge=Xq(),qr=Lt(),Pf=Io(),ll=!1,Zq=xf(async({ssoStartUrl:t,ssoSession:e,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:i,clientConfig:s,profile:a,logger:c})=>{let d,u="To refresh this SSO session run aws sso login with the corresponding profile.";if(e)try{let et=await(0,lge.fromSso)({profile:a})();d={accessToken:et.token,expiresAt:new Date(et.expiration).toISOString()}}catch(et){throw new qr.CredentialsProviderError(et.message,{tryNextLink:ll,logger:c})}else try{d=await(0,Pf.getSSOTokenFromFile)(t)}catch{throw new qr.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${u}`,{tryNextLink:ll,logger:c})}if(new Date(d.expiresAt).getTime()-Date.now()<=0)throw new qr.CredentialsProviderError(`The SSO session associated with this profile has expired. ${u}`,{tryNextLink:ll,logger:c});let{accessToken:m}=d,{SSOClient:f,GetRoleCredentialsCommand:h}=await Promise.resolve().then(()=>(dge(),r1)),y=i||new f(Object.assign({},s??{},{region:s?.region??n})),E;try{E=await y.send(new h({accountId:r,roleName:o,accessToken:m}))}catch(et){throw new qr.CredentialsProviderError(et,{tryNextLink:ll,logger:c})}let{roleCredentials:{accessKeyId:A,secretAccessKey:w,sessionToken:x,expiration:K,credentialScope:W,accountId:le}={}}=E;if(!A||!w||!x||!K)throw new qr.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:ll,logger:c});return{accessKeyId:A,secretAccessKey:w,sessionToken:x,expiration:new Date(K),...W&&{credentialScope:W},...le&&{accountId:le}}},"resolveSSOCredentials"),i1=xf((t,e)=>{let{sso_start_url:r,sso_account_id:n,sso_region:o,sso_role_name:i}=t;if(!r||!n||!o||!i)throw new qr.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(t).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:e});return t},"validateSsoProfile"),uge=xf((t={})=>async()=>{var e;(e=t.logger)==null||e.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:o,ssoRoleName:i,ssoSession:s}=t,{ssoClient:a}=t,c=(0,Pf.getProfileName)(t);if(!r&&!n&&!o&&!i&&!s){let u=(await(0,Pf.parseKnownFiles)(t))[c];if(!u)throw new qr.CredentialsProviderError(`Profile ${c} was not found.`,{logger:t.logger});if(!o1(u))throw new qr.CredentialsProviderError(`Profile ${c} is not configured with SSO credentials.`,{logger:t.logger});if(u?.sso_session){let w=(await(0,Pf.loadSsoSessionData)(t))[u.sso_session],x=` configurations in profile ${c} and sso-session ${u.sso_session}`;if(o&&o!==w.sso_region)throw new qr.CredentialsProviderError("Conflicting SSO region"+x,{tryNextLink:!1,logger:t.logger});if(r&&r!==w.sso_start_url)throw new qr.CredentialsProviderError("Conflicting SSO start_url"+x,{tryNextLink:!1,logger:t.logger});u.sso_region=w.sso_region,u.sso_start_url=w.sso_start_url}let{sso_start_url:m,sso_account_id:f,sso_region:h,sso_role_name:y,sso_session:E}=i1(u,t.logger);return Zq({ssoStartUrl:m,ssoSession:E,ssoAccountId:f,ssoRegion:h,ssoRoleName:y,ssoClient:a,clientConfig:t.clientConfig,profile:c})}else{if(!r||!n||!o||!i)throw new qr.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:t.logger});return Zq({ssoStartUrl:r,ssoSession:s,ssoAccountId:n,ssoRegion:o,ssoRoleName:i,ssoClient:a,clientConfig:t.clientConfig,profile:c})}},"fromSSO")});var RC=g(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.resolveHttpAuthSchemeConfig=Hr.resolveStsAuthConfig=Hr.defaultSTSHttpAuthSchemeProvider=Hr.defaultSTSHttpAuthSchemeParametersProvider=void 0;var pge=(Ze(),M(Xe)),a1=hr(),mge=ul(),hge=async(t,e,r)=>({operation:(0,a1.getSmithyContext)(e).operation,region:await(0,a1.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Hr.defaultSTSHttpAuthSchemeParametersProvider=hge;function fge(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function c1(t){return{schemeId:"smithy.api#noAuth"}}var gge=t=>{let e=[];switch(t.operation){case"AssumeRoleWithSAML":{e.push(c1(t));break}case"AssumeRoleWithWebIdentity":{e.push(c1(t));break}default:e.push(fge(t))}return e};Hr.defaultSTSHttpAuthSchemeProvider=gge;var yge=t=>({...t,stsClientCtor:mge.STSClient});Hr.resolveStsAuthConfig=yge;var _ge=t=>{let e=(0,Hr.resolveStsAuthConfig)(t);return{...(0,pge.resolveAwsSdkSigV4Config)(e)}};Hr.resolveHttpAuthSchemeConfig=_ge});var jr=g(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});ka.commonParams=ka.resolveClientEndpointParameters=void 0;var vge=t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,defaultSigningName:"sts"});ka.resolveClientEndpointParameters=vge;ka.commonParams={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var d1=g((j$e,Ege)=>{Ege.exports={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.645.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sts","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"rimraf ./dist-types tsconfig.types.tsbuildinfo && tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn test:unit","test:unit":"jest"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/client-sso-oidc":"3.645.0","@aws-sdk/core":"3.635.0","@aws-sdk/credential-provider-node":"3.645.0","@aws-sdk/middleware-host-header":"3.620.0","@aws-sdk/middleware-logger":"3.609.0","@aws-sdk/middleware-recursion-detection":"3.620.0","@aws-sdk/middleware-user-agent":"3.645.0","@aws-sdk/region-config-resolver":"3.614.0","@aws-sdk/types":"3.609.0","@aws-sdk/util-endpoints":"3.645.0","@aws-sdk/util-user-agent-browser":"3.609.0","@aws-sdk/util-user-agent-node":"3.614.0","@smithy/config-resolver":"^3.0.5","@smithy/core":"^2.4.0","@smithy/fetch-http-handler":"^3.2.4","@smithy/hash-node":"^3.0.3","@smithy/invalid-dependency":"^3.0.3","@smithy/middleware-content-length":"^3.0.5","@smithy/middleware-endpoint":"^3.1.0","@smithy/middleware-retry":"^3.0.15","@smithy/middleware-serde":"^3.0.3","@smithy/middleware-stack":"^3.0.3","@smithy/node-config-provider":"^3.1.4","@smithy/node-http-handler":"^3.1.4","@smithy/protocol-http":"^4.1.0","@smithy/smithy-client":"^3.2.0","@smithy/types":"^3.3.0","@smithy/url-parser":"^3.0.3","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.15","@smithy/util-defaults-mode-node":"^3.0.15","@smithy/util-endpoints":"^2.0.5","@smithy/util-middleware":"^3.0.3","@smithy/util-retry":"^3.0.3","@smithy/util-utf8":"^3.0.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node16":"16.1.3","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=16.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}}});var x1=g(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});Nf.ruleSet=void 0;var C1="required",ee="type",pe="fn",me="argv",Go="ref",l1=!1,wC=!0,jo="booleanEquals",St="stringEquals",S1="sigv4",T1="sts",b1="us-east-1",ke="endpoint",u1="https://sts.{Region}.{PartitionResult#dnsSuffix}",sn="tree",Ma="error",OC="getAttr",p1={[C1]:!1,[ee]:"String"},PC={[C1]:!0,default:!1,[ee]:"Boolean"},A1={[Go]:"Endpoint"},m1={[pe]:"isSet",[me]:[{[Go]:"Region"}]},Tt={[Go]:"Region"},h1={[pe]:"aws.partition",[me]:[Tt],assign:"PartitionResult"},I1={[Go]:"UseFIPS"},R1={[Go]:"UseDualStack"},wt={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:S1,signingName:T1,signingRegion:b1}]},headers:{}},tr={},f1={conditions:[{[pe]:St,[me]:[Tt,"aws-global"]}],[ke]:wt,[ee]:ke},w1={[pe]:jo,[me]:[I1,!0]},P1={[pe]:jo,[me]:[R1,!0]},g1={[pe]:OC,[me]:[{[Go]:"PartitionResult"},"supportsFIPS"]},O1={[Go]:"PartitionResult"},y1={[pe]:jo,[me]:[!0,{[pe]:OC,[me]:[O1,"supportsDualStack"]}]},_1=[{[pe]:"isSet",[me]:[A1]}],v1=[w1],E1=[P1],Cge={version:"1.0",parameters:{Region:p1,UseDualStack:PC,UseFIPS:PC,Endpoint:p1,UseGlobalEndpoint:PC},rules:[{conditions:[{[pe]:jo,[me]:[{[Go]:"UseGlobalEndpoint"},wC]},{[pe]:"not",[me]:_1},m1,h1,{[pe]:jo,[me]:[I1,l1]},{[pe]:jo,[me]:[R1,l1]}],rules:[{conditions:[{[pe]:St,[me]:[Tt,"ap-northeast-1"]}],endpoint:wt,[ee]:ke},{conditions:[{[pe]:St,[me]:[Tt,"ap-south-1"]}],endpoint:wt,[ee]:ke},{conditions:[{[pe]:St,[me]:[Tt,"ap-southeast-1"]}],endpoint:wt,[ee]:ke},{conditions:[{[pe]:St,[me]:[Tt,"ap-southeast-2"]}],endpoint:wt,[ee]:ke},f1,{conditions:[{[pe]:St,[me]:[Tt,"ca-central-1"]}],endpoint:wt,[ee]:ke},{conditions:[{[pe]:St,[me]:[Tt,"eu-central-1"]}],endpoint:wt,[ee]:ke},{conditions:[{[pe]:St,[me]:[Tt,"eu-north-1"]}],endpoint:wt,[ee]:ke},{conditions:[{[pe]:St,[me]:[Tt,"eu-west-1"]}],endpoint:wt,[ee]:ke},{conditions:[{[pe]:St,[me]:[Tt,"eu-west-2"]}],endpoint:wt,[ee]:ke},{conditions:[{[pe]:St,[me]:[Tt,"eu-west-3"]}],endpoint:wt,[ee]:ke},{conditions:[{[pe]:St,[me]:[Tt,"sa-east-1"]}],endpoint:wt,[ee]:ke},{conditions:[{[pe]:St,[me]:[Tt,b1]}],endpoint:wt,[ee]:ke},{conditions:[{[pe]:St,[me]:[Tt,"us-east-2"]}],endpoint:wt,[ee]:ke},{conditions:[{[pe]:St,[me]:[Tt,"us-west-1"]}],endpoint:wt,[ee]:ke},{conditions:[{[pe]:St,[me]:[Tt,"us-west-2"]}],endpoint:wt,[ee]:ke},{endpoint:{url:u1,properties:{authSchemes:[{name:S1,signingName:T1,signingRegion:"{Region}"}]},headers:tr},[ee]:ke}],[ee]:sn},{conditions:_1,rules:[{conditions:v1,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[ee]:Ma},{conditions:E1,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[ee]:Ma},{endpoint:{url:A1,properties:tr,headers:tr},[ee]:ke}],[ee]:sn},{conditions:[m1],rules:[{conditions:[h1],rules:[{conditions:[w1,P1],rules:[{conditions:[{[pe]:jo,[me]:[wC,g1]},y1],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:tr,headers:tr},[ee]:ke}],[ee]:sn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[ee]:Ma}],[ee]:sn},{conditions:v1,rules:[{conditions:[{[pe]:jo,[me]:[g1,wC]}],rules:[{conditions:[{[pe]:St,[me]:[{[pe]:OC,[me]:[O1,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:tr,headers:tr},[ee]:ke},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:tr,headers:tr},[ee]:ke}],[ee]:sn},{error:"FIPS is enabled but this partition does not support FIPS",[ee]:Ma}],[ee]:sn},{conditions:E1,rules:[{conditions:[y1],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:tr,headers:tr},[ee]:ke}],[ee]:sn},{error:"DualStack is enabled but this partition does not support DualStack",[ee]:Ma}],[ee]:sn},f1,{endpoint:{url:u1,properties:tr,headers:tr},[ee]:ke}],[ee]:sn}],[ee]:sn},{error:"Invalid Configuration: Missing Region",[ee]:Ma}]};Nf.ruleSet=Cge});var D1=g(Df=>{"use strict";Object.defineProperty(Df,"__esModule",{value:!0});Df.defaultEndpointResolver=void 0;var Sge=Ki(),N1=Vi(),Tge=x1(),bge=(t,e={})=>(0,N1.resolveEndpoint)(Tge.ruleSet,{endpointParams:t,logger:e.logger});Df.defaultEndpointResolver=bge;N1.customEndpointFunctions.aws=Sge.awsEndpointFunctions});var L1=g(kf=>{"use strict";Object.defineProperty(kf,"__esModule",{value:!0});kf.getRuntimeConfig=void 0;var Age=(Ze(),M(Xe)),Ige=(mt(),M(It)),Rge=fe(),wge=Ro(),k1=Mn(),M1=Ct(),Pge=RC(),Oge=D1(),xge=t=>({apiVersion:"2011-06-15",base64Decoder:t?.base64Decoder??k1.fromBase64,base64Encoder:t?.base64Encoder??k1.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??Oge.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??Pge.defaultSTSHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new Age.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Ige.NoAuthSigner}],logger:t?.logger??new Rge.NoOpLogger,serviceId:t?.serviceId??"STS",urlParser:t?.urlParser??wge.parseUrl,utf8Decoder:t?.utf8Decoder??M1.fromUtf8,utf8Encoder:t?.utf8Encoder??M1.toUtf8});kf.getRuntimeConfig=xge});var H1=g(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});Lf.getRuntimeConfig=void 0;var Nge=(_e(),M(ye)),Dge=Nge.__importDefault(d1()),U1=(Ze(),M(Xe)),F1=sl(),kge=Ea(),Mf=fr(),Mge=(mt(),M(It)),Lge=Ca(),B1=_r(),pl=rn(),q1=No(),Uge=Sa(),Fge=Ji(),Bge=L1(),qge=fe(),Hge=Ia(),jge=fe(),Gge=t=>{(0,jge.emitWarningIfUnsupportedVersion)(process.version);let e=(0,Hge.resolveDefaultsModeConfig)(t),r=()=>e().then(qge.loadConfigsForDefaultMode),n=(0,Bge.getRuntimeConfig)(t);return(0,U1.emitWarningIfUnsupportedVersion)(process.version),{...n,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??Uge.calculateBodyLength,credentialDefaultProvider:t?.credentialDefaultProvider??F1.defaultProvider,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,kge.defaultUserAgent)({serviceId:n.serviceId,clientVersion:Dge.default.version}),httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:o=>o.getIdentityProvider("aws.auth#sigv4")||(async i=>await(0,F1.defaultProvider)(i?.__config||{})()),signer:new U1.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:o=>o.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Mge.NoAuthSigner}],maxAttempts:t?.maxAttempts??(0,pl.loadConfig)(B1.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:t?.region??(0,pl.loadConfig)(Mf.NODE_REGION_CONFIG_OPTIONS,Mf.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:q1.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,pl.loadConfig)({...B1.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||Fge.DEFAULT_RETRY_MODE}),sha256:t?.sha256??Lge.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??q1.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,pl.loadConfig)(Mf.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:t?.useFipsEndpoint??(0,pl.loadConfig)(Mf.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}};Lf.getRuntimeConfig=Gge});var j1=g(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});La.resolveHttpAuthRuntimeConfig=La.getHttpAuthExtensionConfiguration=void 0;var $ge=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(o){let i=e.findIndex(s=>s.schemeId===o.schemeId);i===-1?e.push(o):e.splice(i,1,o)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}};La.getHttpAuthExtensionConfiguration=$ge;var zge=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()});La.resolveHttpAuthRuntimeConfig=zge});var K1=g(Ff=>{"use strict";Object.defineProperty(Ff,"__esModule",{value:!0});Ff.resolveRuntimeExtensions=void 0;var G1=wa(),$1=De(),z1=fe(),V1=j1(),Uf=t=>t,Vge=(t,e)=>{let r={...Uf((0,G1.getAwsRegionExtensionConfiguration)(t)),...Uf((0,z1.getDefaultExtensionConfiguration)(t)),...Uf((0,$1.getHttpHandlerExtensionConfiguration)(t)),...Uf((0,V1.getHttpAuthExtensionConfiguration)(t))};return e.forEach(n=>n.configure(r)),{...t,...(0,G1.resolveAwsRegionExtensionConfiguration)(r),...(0,z1.resolveDefaultRuntimeConfig)(r),...(0,$1.resolveHttpHandlerRuntimeConfig)(r),...(0,V1.resolveHttpAuthRuntimeConfig)(r)}};Ff.resolveRuntimeExtensions=Vge});var ul=g(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0});Ua.STSClient=Ua.__Client=void 0;var W1=ra(),Kge=na(),Wge=oa(),Q1=sa(),Qge=fr(),xC=(mt(),M(It)),Yge=fa(),Jge=Po(),Y1=_r(),X1=fe();Object.defineProperty(Ua,"__Client",{enumerable:!0,get:function(){return X1.Client}});var J1=RC(),Xge=jr(),Zge=H1(),eye=K1(),NC=class extends X1.Client{constructor(...[e]){let r=(0,Zge.getRuntimeConfig)(e||{}),n=(0,Xge.resolveClientEndpointParameters)(r),o=(0,Q1.resolveUserAgentConfig)(n),i=(0,Y1.resolveRetryConfig)(o),s=(0,Qge.resolveRegionConfig)(i),a=(0,W1.resolveHostHeaderConfig)(s),c=(0,Jge.resolveEndpointConfig)(a),d=(0,J1.resolveHttpAuthSchemeConfig)(c),u=(0,eye.resolveRuntimeExtensions)(d,e?.extensions||[]);super(u),this.config=u,this.middlewareStack.use((0,Q1.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Y1.getRetryPlugin)(this.config)),this.middlewareStack.use((0,Yge.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,W1.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,Kge.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,Wge.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,xC.getHttpAuthSchemeEndpointRuleSetPlugin)(this.config,{httpAuthSchemeParametersProvider:J1.defaultSTSHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async m=>new xC.DefaultIdentityProviderConfig({"aws.auth#sigv4":m.credentials})})),this.middlewareStack.use((0,xC.getHttpSigningPlugin)(this.config))}destroy(){super.destroy()}};Ua.STSClient=NC});var mS=g((i2e,pS)=>{"use strict";var Bf=Object.defineProperty,tye=Object.getOwnPropertyDescriptor,rye=Object.getOwnPropertyNames,nye=Object.prototype.hasOwnProperty,R=(t,e)=>Bf(t,"name",{value:e,configurable:!0}),oye=(t,e)=>{for(var r in e)Bf(t,r,{get:e[r],enumerable:!0})},aS=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of rye(e))!nye.call(t,o)&&o!==r&&Bf(t,o,{get:()=>e[o],enumerable:!(n=tye(e,o))||n.enumerable});return t},iye=(t,e,r)=>(aS(t,e,"default"),r&&aS(r,e,"default")),sye=t=>aS(Bf({},"__esModule",{value:!0}),t),cS={};oye(cS,{AssumeRoleCommand:()=>lS,AssumeRoleResponseFilterSensitiveLog:()=>IH,AssumeRoleWithSAMLCommand:()=>LH,AssumeRoleWithSAMLRequestFilterSensitiveLog:()=>RH,AssumeRoleWithSAMLResponseFilterSensitiveLog:()=>wH,AssumeRoleWithWebIdentityCommand:()=>uS,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>PH,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>OH,ClientInputEndpointParameters:()=>w_e.ClientInputEndpointParameters,CredentialsFilterSensitiveLog:()=>za,DecodeAuthorizationMessageCommand:()=>BH,ExpiredTokenException:()=>oH,GetAccessKeyInfoCommand:()=>HH,GetCallerIdentityCommand:()=>GH,GetFederationTokenCommand:()=>zH,GetFederationTokenResponseFilterSensitiveLog:()=>xH,GetSessionTokenCommand:()=>KH,GetSessionTokenResponseFilterSensitiveLog:()=>NH,IDPCommunicationErrorException:()=>SH,IDPRejectedClaimException:()=>gH,InvalidAuthorizationMessageException:()=>AH,InvalidIdentityTokenException:()=>vH,MalformedPolicyDocumentException:()=>aH,PackedPolicyTooLargeException:()=>lH,RegionDisabledException:()=>mH,STS:()=>QH,STSServiceException:()=>an,decorateDefaultCredentialProvider:()=>x_e,getDefaultRoleAssumer:()=>tj,getDefaultRoleAssumerWithWebIdentity:()=>rj});pS.exports=sye(cS);iye(cS,ul(),pS.exports);var $o=Po(),zo=wo(),aye=jr(),B=fe(),eH=class tH extends B.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,tH.prototype)}};R(eH,"STSServiceException");var an=eH,rH=class nH extends an{constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,nH.prototype)}};R(rH,"ExpiredTokenException");var oH=rH,iH=class sH extends an{constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,sH.prototype)}};R(iH,"MalformedPolicyDocumentException");var aH=iH,cH=class dH extends an{constructor(e){super({name:"PackedPolicyTooLargeException",$fault:"client",...e}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,dH.prototype)}};R(cH,"PackedPolicyTooLargeException");var lH=cH,uH=class pH extends an{constructor(e){super({name:"RegionDisabledException",$fault:"client",...e}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,pH.prototype)}};R(uH,"RegionDisabledException");var mH=uH,hH=class fH extends an{constructor(e){super({name:"IDPRejectedClaimException",$fault:"client",...e}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,fH.prototype)}};R(hH,"IDPRejectedClaimException");var gH=hH,yH=class _H extends an{constructor(e){super({name:"InvalidIdentityTokenException",$fault:"client",...e}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,_H.prototype)}};R(yH,"InvalidIdentityTokenException");var vH=yH,EH=class CH extends an{constructor(e){super({name:"IDPCommunicationErrorException",$fault:"client",...e}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,CH.prototype)}};R(EH,"IDPCommunicationErrorException");var SH=EH,TH=class bH extends an{constructor(e){super({name:"InvalidAuthorizationMessageException",$fault:"client",...e}),this.name="InvalidAuthorizationMessageException",this.$fault="client",Object.setPrototypeOf(this,bH.prototype)}};R(TH,"InvalidAuthorizationMessageException");var AH=TH,za=R(t=>({...t,...t.SecretAccessKey&&{SecretAccessKey:B.SENSITIVE_STRING}}),"CredentialsFilterSensitiveLog"),IH=R(t=>({...t,...t.Credentials&&{Credentials:za(t.Credentials)}}),"AssumeRoleResponseFilterSensitiveLog"),RH=R(t=>({...t,...t.SAMLAssertion&&{SAMLAssertion:B.SENSITIVE_STRING}}),"AssumeRoleWithSAMLRequestFilterSensitiveLog"),wH=R(t=>({...t,...t.Credentials&&{Credentials:za(t.Credentials)}}),"AssumeRoleWithSAMLResponseFilterSensitiveLog"),PH=R(t=>({...t,...t.WebIdentityToken&&{WebIdentityToken:B.SENSITIVE_STRING}}),"AssumeRoleWithWebIdentityRequestFilterSensitiveLog"),OH=R(t=>({...t,...t.Credentials&&{Credentials:za(t.Credentials)}}),"AssumeRoleWithWebIdentityResponseFilterSensitiveLog"),xH=R(t=>({...t,...t.Credentials&&{Credentials:za(t.Credentials)}}),"GetFederationTokenResponseFilterSensitiveLog"),NH=R(t=>({...t,...t.Credentials&&{Credentials:za(t.Credentials)}}),"GetSessionTokenResponseFilterSensitiveLog"),$n=(Ze(),M(Xe)),cye=De(),dye=R(async(t,e)=>{let r=Wo,n;return n=Xo({...Dye(t,e),[Yo]:l_e,[Jo]:Qo}),Ko(e,r,"/",void 0,n)},"se_AssumeRoleCommand"),lye=R(async(t,e)=>{let r=Wo,n;return n=Xo({...kye(t,e),[Yo]:u_e,[Jo]:Qo}),Ko(e,r,"/",void 0,n)},"se_AssumeRoleWithSAMLCommand"),uye=R(async(t,e)=>{let r=Wo,n;return n=Xo({...Mye(t,e),[Yo]:p_e,[Jo]:Qo}),Ko(e,r,"/",void 0,n)},"se_AssumeRoleWithWebIdentityCommand"),pye=R(async(t,e)=>{let r=Wo,n;return n=Xo({...Lye(t,e),[Yo]:m_e,[Jo]:Qo}),Ko(e,r,"/",void 0,n)},"se_DecodeAuthorizationMessageCommand"),mye=R(async(t,e)=>{let r=Wo,n;return n=Xo({...Uye(t,e),[Yo]:h_e,[Jo]:Qo}),Ko(e,r,"/",void 0,n)},"se_GetAccessKeyInfoCommand"),hye=R(async(t,e)=>{let r=Wo,n;return n=Xo({...Fye(t,e),[Yo]:f_e,[Jo]:Qo}),Ko(e,r,"/",void 0,n)},"se_GetCallerIdentityCommand"),fye=R(async(t,e)=>{let r=Wo,n;return n=Xo({...Bye(t,e),[Yo]:g_e,[Jo]:Qo}),Ko(e,r,"/",void 0,n)},"se_GetFederationTokenCommand"),gye=R(async(t,e)=>{let r=Wo,n;return n=Xo({...qye(t,e),[Yo]:y_e,[Jo]:Qo}),Ko(e,r,"/",void 0,n)},"se_GetSessionTokenCommand"),yye=R(async(t,e)=>{if(t.statusCode>=300)return Vo(t,e);let r=await(0,$n.parseXmlBody)(t.body,e),n={};return n=Vye(r.AssumeRoleResult,e),{$metadata:Pt(t),...n}},"de_AssumeRoleCommand"),_ye=R(async(t,e)=>{if(t.statusCode>=300)return Vo(t,e);let r=await(0,$n.parseXmlBody)(t.body,e),n={};return n=Kye(r.AssumeRoleWithSAMLResult,e),{$metadata:Pt(t),...n}},"de_AssumeRoleWithSAMLCommand"),vye=R(async(t,e)=>{if(t.statusCode>=300)return Vo(t,e);let r=await(0,$n.parseXmlBody)(t.body,e),n={};return n=Wye(r.AssumeRoleWithWebIdentityResult,e),{$metadata:Pt(t),...n}},"de_AssumeRoleWithWebIdentityCommand"),Eye=R(async(t,e)=>{if(t.statusCode>=300)return Vo(t,e);let r=await(0,$n.parseXmlBody)(t.body,e),n={};return n=Qye(r.DecodeAuthorizationMessageResult,e),{$metadata:Pt(t),...n}},"de_DecodeAuthorizationMessageCommand"),Cye=R(async(t,e)=>{if(t.statusCode>=300)return Vo(t,e);let r=await(0,$n.parseXmlBody)(t.body,e),n={};return n=Xye(r.GetAccessKeyInfoResult,e),{$metadata:Pt(t),...n}},"de_GetAccessKeyInfoCommand"),Sye=R(async(t,e)=>{if(t.statusCode>=300)return Vo(t,e);let r=await(0,$n.parseXmlBody)(t.body,e),n={};return n=Zye(r.GetCallerIdentityResult,e),{$metadata:Pt(t),...n}},"de_GetCallerIdentityCommand"),Tye=R(async(t,e)=>{if(t.statusCode>=300)return Vo(t,e);let r=await(0,$n.parseXmlBody)(t.body,e),n={};return n=e_e(r.GetFederationTokenResult,e),{$metadata:Pt(t),...n}},"de_GetFederationTokenCommand"),bye=R(async(t,e)=>{if(t.statusCode>=300)return Vo(t,e);let r=await(0,$n.parseXmlBody)(t.body,e),n={};return n=t_e(r.GetSessionTokenResult,e),{$metadata:Pt(t),...n}},"de_GetSessionTokenCommand"),Vo=R(async(t,e)=>{let r={...t,body:await(0,$n.parseXmlErrorBody)(t.body,e)},n=__e(t,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Aye(r,e);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Oye(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await xye(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Nye(r,e);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await Rye(r,e);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await Pye(r,e);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await Iye(r,e);case"InvalidAuthorizationMessageException":case"com.amazonaws.sts#InvalidAuthorizationMessageException":throw await wye(r,e);default:let o=r.body;return d_e({output:t,parsedBody:o.Error,errorCode:n})}},"de_CommandError"),Aye=R(async(t,e)=>{let r=t.body,n=Yye(r.Error,e),o=new oH({$metadata:Pt(t),...n});return(0,B.decorateServiceException)(o,r)},"de_ExpiredTokenExceptionRes"),Iye=R(async(t,e)=>{let r=t.body,n=r_e(r.Error,e),o=new SH({$metadata:Pt(t),...n});return(0,B.decorateServiceException)(o,r)},"de_IDPCommunicationErrorExceptionRes"),Rye=R(async(t,e)=>{let r=t.body,n=n_e(r.Error,e),o=new gH({$metadata:Pt(t),...n});return(0,B.decorateServiceException)(o,r)},"de_IDPRejectedClaimExceptionRes"),wye=R(async(t,e)=>{let r=t.body,n=o_e(r.Error,e),o=new AH({$metadata:Pt(t),...n});return(0,B.decorateServiceException)(o,r)},"de_InvalidAuthorizationMessageExceptionRes"),Pye=R(async(t,e)=>{let r=t.body,n=i_e(r.Error,e),o=new vH({$metadata:Pt(t),...n});return(0,B.decorateServiceException)(o,r)},"de_InvalidIdentityTokenExceptionRes"),Oye=R(async(t,e)=>{let r=t.body,n=s_e(r.Error,e),o=new aH({$metadata:Pt(t),...n});return(0,B.decorateServiceException)(o,r)},"de_MalformedPolicyDocumentExceptionRes"),xye=R(async(t,e)=>{let r=t.body,n=a_e(r.Error,e),o=new lH({$metadata:Pt(t),...n});return(0,B.decorateServiceException)(o,r)},"de_PackedPolicyTooLargeExceptionRes"),Nye=R(async(t,e)=>{let r=t.body,n=c_e(r.Error,e),o=new mH({$metadata:Pt(t),...n});return(0,B.decorateServiceException)(o,r)},"de_RegionDisabledExceptionRes"),Dye=R((t,e)=>{var r,n,o,i;let s={};if(t[Gn]!=null&&(s[Gn]=t[Gn]),t[Ha]!=null&&(s[Ha]=t[Ha]),t[Ir]!=null){let a=qf(t[Ir],e);((r=t[Ir])==null?void 0:r.length)===0&&(s.PolicyArns=[]),Object.entries(a).forEach(([c,d])=>{let u=`PolicyArns.${c}`;s[u]=d})}if(t[Ar]!=null&&(s[Ar]=t[Ar]),t[Bt]!=null&&(s[Bt]=t[Bt]),t[Ga]!=null){let a=DH(t[Ga],e);((n=t[Ga])==null?void 0:n.length)===0&&(s.Tags=[]),Object.entries(a).forEach(([c,d])=>{let u=`Tags.${c}`;s[u]=d})}if(t[rS]!=null){let a=zye(t[rS],e);((o=t[rS])==null?void 0:o.length)===0&&(s.TransitiveTagKeys=[]),Object.entries(a).forEach(([c,d])=>{let u=`TransitiveTagKeys.${c}`;s[u]=d})}if(t[UC]!=null&&(s[UC]=t[UC]),t[ja]!=null&&(s[ja]=t[ja]),t[$a]!=null&&(s[$a]=t[$a]),t[wr]!=null&&(s[wr]=t[wr]),t[KC]!=null){let a=Gye(t[KC],e);((i=t[KC])==null?void 0:i.length)===0&&(s.ProvidedContexts=[]),Object.entries(a).forEach(([c,d])=>{let u=`ProvidedContexts.${c}`;s[u]=d})}return s},"se_AssumeRoleRequest"),kye=R((t,e)=>{var r;let n={};if(t[Gn]!=null&&(n[Gn]=t[Gn]),t[zC]!=null&&(n[zC]=t[zC]),t[XC]!=null&&(n[XC]=t[XC]),t[Ir]!=null){let o=qf(t[Ir],e);((r=t[Ir])==null?void 0:r.length)===0&&(n.PolicyArns=[]),Object.entries(o).forEach(([i,s])=>{let a=`PolicyArns.${i}`;n[a]=s})}return t[Ar]!=null&&(n[Ar]=t[Ar]),t[Bt]!=null&&(n[Bt]=t[Bt]),n},"se_AssumeRoleWithSAMLRequest"),Mye=R((t,e)=>{var r;let n={};if(t[Gn]!=null&&(n[Gn]=t[Gn]),t[Ha]!=null&&(n[Ha]=t[Ha]),t[iS]!=null&&(n[iS]=t[iS]),t[WC]!=null&&(n[WC]=t[WC]),t[Ir]!=null){let o=qf(t[Ir],e);((r=t[Ir])==null?void 0:r.length)===0&&(n.PolicyArns=[]),Object.entries(o).forEach(([i,s])=>{let a=`PolicyArns.${i}`;n[a]=s})}return t[Ar]!=null&&(n[Ar]=t[Ar]),t[Bt]!=null&&(n[Bt]=t[Bt]),n},"se_AssumeRoleWithWebIdentityRequest"),Lye=R((t,e)=>{let r={};return t[FC]!=null&&(r[FC]=t[FC]),r},"se_DecodeAuthorizationMessageRequest"),Uye=R((t,e)=>{let r={};return t[Fa]!=null&&(r[Fa]=t[Fa]),r},"se_GetAccessKeyInfoRequest"),Fye=R((t,e)=>({}),"se_GetCallerIdentityRequest"),Bye=R((t,e)=>{var r,n;let o={};if(t[GC]!=null&&(o[GC]=t[GC]),t[Ar]!=null&&(o[Ar]=t[Ar]),t[Ir]!=null){let i=qf(t[Ir],e);((r=t[Ir])==null?void 0:r.length)===0&&(o.PolicyArns=[]),Object.entries(i).forEach(([s,a])=>{let c=`PolicyArns.${s}`;o[c]=a})}if(t[Bt]!=null&&(o[Bt]=t[Bt]),t[Ga]!=null){let i=DH(t[Ga],e);((n=t[Ga])==null?void 0:n.length)===0&&(o.Tags=[]),Object.entries(i).forEach(([s,a])=>{let c=`Tags.${s}`;o[c]=a})}return o},"se_GetFederationTokenRequest"),qye=R((t,e)=>{let r={};return t[Bt]!=null&&(r[Bt]=t[Bt]),t[ja]!=null&&(r[ja]=t[ja]),t[$a]!=null&&(r[$a]=t[$a]),r},"se_GetSessionTokenRequest"),qf=R((t,e)=>{let r={},n=1;for(let o of t){if(o===null)continue;let i=Hye(o,e);Object.entries(i).forEach(([s,a])=>{r[`member.${n}.${s}`]=a}),n++}return r},"se_policyDescriptorListType"),Hye=R((t,e)=>{let r={};return t[sS]!=null&&(r[sS]=t[sS]),r},"se_PolicyDescriptorType"),jye=R((t,e)=>{let r={};return t[VC]!=null&&(r[VC]=t[VC]),t[kC]!=null&&(r[kC]=t[kC]),r},"se_ProvidedContext"),Gye=R((t,e)=>{let r={},n=1;for(let o of t){if(o===null)continue;let i=jye(o,e);Object.entries(i).forEach(([s,a])=>{r[`member.${n}.${s}`]=a}),n++}return r},"se_ProvidedContextsListType"),$ye=R((t,e)=>{let r={};return t[jC]!=null&&(r[jC]=t[jC]),t[oS]!=null&&(r[oS]=t[oS]),r},"se_Tag"),zye=R((t,e)=>{let r={},n=1;for(let o of t)o!==null&&(r[`member.${n}`]=o,n++);return r},"se_tagKeyListType"),DH=R((t,e)=>{let r={},n=1;for(let o of t){if(o===null)continue;let i=$ye(o,e);Object.entries(i).forEach(([s,a])=>{r[`member.${n}.${s}`]=a}),n++}return r},"se_tagListType"),dS=R((t,e)=>{let r={};return t[DC]!=null&&(r[DC]=(0,B.expectString)(t[DC])),t[jn]!=null&&(r[jn]=(0,B.expectString)(t[jn])),r},"de_AssumedRoleUser"),Vye=R((t,e)=>{let r={};return t[Ft]!=null&&(r[Ft]=ml(t[Ft],e)),t[Hn]!=null&&(r[Hn]=dS(t[Hn],e)),t[Rr]!=null&&(r[Rr]=(0,B.strictParseInt32)(t[Rr])),t[wr]!=null&&(r[wr]=(0,B.expectString)(t[wr])),r},"de_AssumeRoleResponse"),Kye=R((t,e)=>{let r={};return t[Ft]!=null&&(r[Ft]=ml(t[Ft],e)),t[Hn]!=null&&(r[Hn]=dS(t[Hn],e)),t[Rr]!=null&&(r[Rr]=(0,B.strictParseInt32)(t[Rr])),t[YC]!=null&&(r[YC]=(0,B.expectString)(t[YC])),t[eS]!=null&&(r[eS]=(0,B.expectString)(t[eS])),t[HC]!=null&&(r[HC]=(0,B.expectString)(t[HC])),t[qa]!=null&&(r[qa]=(0,B.expectString)(t[qa])),t[$C]!=null&&(r[$C]=(0,B.expectString)(t[$C])),t[wr]!=null&&(r[wr]=(0,B.expectString)(t[wr])),r},"de_AssumeRoleWithSAMLResponse"),Wye=R((t,e)=>{let r={};return t[Ft]!=null&&(r[Ft]=ml(t[Ft],e)),t[ZC]!=null&&(r[ZC]=(0,B.expectString)(t[ZC])),t[Hn]!=null&&(r[Hn]=dS(t[Hn],e)),t[Rr]!=null&&(r[Rr]=(0,B.strictParseInt32)(t[Rr])),t[QC]!=null&&(r[QC]=(0,B.expectString)(t[QC])),t[qa]!=null&&(r[qa]=(0,B.expectString)(t[qa])),t[wr]!=null&&(r[wr]=(0,B.expectString)(t[wr])),r},"de_AssumeRoleWithWebIdentityResponse"),ml=R((t,e)=>{let r={};return t[Fa]!=null&&(r[Fa]=(0,B.expectString)(t[Fa])),t[JC]!=null&&(r[JC]=(0,B.expectString)(t[JC])),t[tS]!=null&&(r[tS]=(0,B.expectString)(t[tS])),t[LC]!=null&&(r[LC]=(0,B.expectNonNull)((0,B.parseRfc3339DateTimeWithOffset)(t[LC]))),r},"de_Credentials"),Qye=R((t,e)=>{let r={};return t[MC]!=null&&(r[MC]=(0,B.expectString)(t[MC])),r},"de_DecodeAuthorizationMessageResponse"),Yye=R((t,e)=>{let r={};return t[Me]!=null&&(r[Me]=(0,B.expectString)(t[Me])),r},"de_ExpiredTokenException"),Jye=R((t,e)=>{let r={};return t[qC]!=null&&(r[qC]=(0,B.expectString)(t[qC])),t[jn]!=null&&(r[jn]=(0,B.expectString)(t[jn])),r},"de_FederatedUser"),Xye=R((t,e)=>{let r={};return t[Ba]!=null&&(r[Ba]=(0,B.expectString)(t[Ba])),r},"de_GetAccessKeyInfoResponse"),Zye=R((t,e)=>{let r={};return t[nS]!=null&&(r[nS]=(0,B.expectString)(t[nS])),t[Ba]!=null&&(r[Ba]=(0,B.expectString)(t[Ba])),t[jn]!=null&&(r[jn]=(0,B.expectString)(t[jn])),r},"de_GetCallerIdentityResponse"),e_e=R((t,e)=>{let r={};return t[Ft]!=null&&(r[Ft]=ml(t[Ft],e)),t[BC]!=null&&(r[BC]=Jye(t[BC],e)),t[Rr]!=null&&(r[Rr]=(0,B.strictParseInt32)(t[Rr])),r},"de_GetFederationTokenResponse"),t_e=R((t,e)=>{let r={};return t[Ft]!=null&&(r[Ft]=ml(t[Ft],e)),r},"de_GetSessionTokenResponse"),r_e=R((t,e)=>{let r={};return t[Me]!=null&&(r[Me]=(0,B.expectString)(t[Me])),r},"de_IDPCommunicationErrorException"),n_e=R((t,e)=>{let r={};return t[Me]!=null&&(r[Me]=(0,B.expectString)(t[Me])),r},"de_IDPRejectedClaimException"),o_e=R((t,e)=>{let r={};return t[Me]!=null&&(r[Me]=(0,B.expectString)(t[Me])),r},"de_InvalidAuthorizationMessageException"),i_e=R((t,e)=>{let r={};return t[Me]!=null&&(r[Me]=(0,B.expectString)(t[Me])),r},"de_InvalidIdentityTokenException"),s_e=R((t,e)=>{let r={};return t[Me]!=null&&(r[Me]=(0,B.expectString)(t[Me])),r},"de_MalformedPolicyDocumentException"),a_e=R((t,e)=>{let r={};return t[Me]!=null&&(r[Me]=(0,B.expectString)(t[Me])),r},"de_PackedPolicyTooLargeException"),c_e=R((t,e)=>{let r={};return t[Me]!=null&&(r[Me]=(0,B.expectString)(t[Me])),r},"de_RegionDisabledException"),Pt=R(t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),"deserializeMetadata"),d_e=(0,B.withBaseException)(an),Ko=R(async(t,e,r,n,o)=>{let{hostname:i,protocol:s="https",port:a,path:c}=await t.endpoint(),d={protocol:s,hostname:i,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:e};return n!==void 0&&(d.hostname=n),o!==void 0&&(d.body=o),new cye.HttpRequest(d)},"buildHttpRpcRequest"),Wo={"content-type":"application/x-www-form-urlencoded"},Qo="2011-06-15",Yo="Action",Fa="AccessKeyId",l_e="AssumeRole",DC="AssumedRoleId",Hn="AssumedRoleUser",u_e="AssumeRoleWithSAML",p_e="AssumeRoleWithWebIdentity",Ba="Account",jn="Arn",qa="Audience",Ft="Credentials",kC="ContextAssertion",m_e="DecodeAuthorizationMessage",MC="DecodedMessage",Bt="DurationSeconds",LC="Expiration",UC="ExternalId",FC="EncodedMessage",BC="FederatedUser",qC="FederatedUserId",h_e="GetAccessKeyInfo",f_e="GetCallerIdentity",g_e="GetFederationToken",y_e="GetSessionToken",HC="Issuer",jC="Key",GC="Name",$C="NameQualifier",Ar="Policy",Ir="PolicyArns",zC="PrincipalArn",VC="ProviderArn",KC="ProvidedContexts",WC="ProviderId",Rr="PackedPolicySize",QC="Provider",Gn="RoleArn",Ha="RoleSessionName",YC="Subject",JC="SecretAccessKey",XC="SAMLAssertion",ZC="SubjectFromWebIdentityToken",wr="SourceIdentity",ja="SerialNumber",eS="SubjectType",tS="SessionToken",Ga="Tags",$a="TokenCode",rS="TransitiveTagKeys",nS="UserId",Jo="Version",oS="Value",iS="WebIdentityToken",sS="arn",Me="message",Xo=R(t=>Object.entries(t).map(([e,r])=>(0,B.extendedEncodeURIComponent)(e)+"="+(0,B.extendedEncodeURIComponent)(r)).join("&"),"buildFormUrlencodedString"),__e=R((t,e)=>{var r;if(((r=e.Error)==null?void 0:r.Code)!==void 0)return e.Error.Code;if(t.statusCode==404)return"NotFound"},"loadQueryErrorCode"),kH=class extends B.Command.classBuilder().ep({...aye.commonParams}).m(function(e,r,n,o){return[(0,zo.getSerdePlugin)(n,this.serialize,this.deserialize),(0,$o.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,IH).ser(dye).de(yye).build(){};R(kH,"AssumeRoleCommand");var lS=kH,v_e=jr(),MH=class extends B.Command.classBuilder().ep({...v_e.commonParams}).m(function(e,r,n,o){return[(0,zo.getSerdePlugin)(n,this.serialize,this.deserialize),(0,$o.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithSAML",{}).n("STSClient","AssumeRoleWithSAMLCommand").f(RH,wH).ser(lye).de(_ye).build(){};R(MH,"AssumeRoleWithSAMLCommand");var LH=MH,E_e=jr(),UH=class extends B.Command.classBuilder().ep({...E_e.commonParams}).m(function(e,r,n,o){return[(0,zo.getSerdePlugin)(n,this.serialize,this.deserialize),(0,$o.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(PH,OH).ser(uye).de(vye).build(){};R(UH,"AssumeRoleWithWebIdentityCommand");var uS=UH,C_e=jr(),FH=class extends B.Command.classBuilder().ep({...C_e.commonParams}).m(function(e,r,n,o){return[(0,zo.getSerdePlugin)(n,this.serialize,this.deserialize),(0,$o.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","DecodeAuthorizationMessage",{}).n("STSClient","DecodeAuthorizationMessageCommand").f(void 0,void 0).ser(pye).de(Eye).build(){};R(FH,"DecodeAuthorizationMessageCommand");var BH=FH,S_e=jr(),qH=class extends B.Command.classBuilder().ep({...S_e.commonParams}).m(function(e,r,n,o){return[(0,zo.getSerdePlugin)(n,this.serialize,this.deserialize),(0,$o.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","GetAccessKeyInfo",{}).n("STSClient","GetAccessKeyInfoCommand").f(void 0,void 0).ser(mye).de(Cye).build(){};R(qH,"GetAccessKeyInfoCommand");var HH=qH,T_e=jr(),jH=class extends B.Command.classBuilder().ep({...T_e.commonParams}).m(function(e,r,n,o){return[(0,zo.getSerdePlugin)(n,this.serialize,this.deserialize),(0,$o.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","GetCallerIdentity",{}).n("STSClient","GetCallerIdentityCommand").f(void 0,void 0).ser(hye).de(Sye).build(){};R(jH,"GetCallerIdentityCommand");var GH=jH,b_e=jr(),$H=class extends B.Command.classBuilder().ep({...b_e.commonParams}).m(function(e,r,n,o){return[(0,zo.getSerdePlugin)(n,this.serialize,this.deserialize),(0,$o.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","GetFederationToken",{}).n("STSClient","GetFederationTokenCommand").f(void 0,xH).ser(fye).de(Tye).build(){};R($H,"GetFederationTokenCommand");var zH=$H,A_e=jr(),VH=class extends B.Command.classBuilder().ep({...A_e.commonParams}).m(function(e,r,n,o){return[(0,zo.getSerdePlugin)(n,this.serialize,this.deserialize),(0,$o.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","GetSessionToken",{}).n("STSClient","GetSessionTokenCommand").f(void 0,NH).ser(gye).de(bye).build(){};R(VH,"GetSessionTokenCommand");var KH=VH,I_e=ul(),R_e={AssumeRoleCommand:lS,AssumeRoleWithSAMLCommand:LH,AssumeRoleWithWebIdentityCommand:uS,DecodeAuthorizationMessageCommand:BH,GetAccessKeyInfoCommand:HH,GetCallerIdentityCommand:GH,GetFederationTokenCommand:zH,GetSessionTokenCommand:KH},WH=class extends I_e.STSClient{};R(WH,"STS");var QH=WH;(0,B.createAggregatedClient)(R_e,QH);var w_e=jr(),Z1="us-east-1",YH=R(t=>{if(typeof t?.Arn=="string"){let e=t.Arn.split(":");if(e.length>4&&e[4]!=="")return e[4]}},"getAccountIdFromAssumedRoleUser"),JH=R(async(t,e,r)=>{var n;let o=typeof t=="function"?await t():t,i=typeof e=="function"?await e():e;return(n=r?.debug)==null||n.call(r,"@aws-sdk/client-sts::resolveRegion","accepting first of:",`${o} (provider)`,`${i} (parent client)`,`${Z1} (STS default)`),o??i??Z1},"resolveRegion"),P_e=R((t,e)=>{let r,n;return async(o,i)=>{var s,a,c;if(n=o,!r){let{logger:f=(s=t?.parentClientConfig)==null?void 0:s.logger,region:h,requestHandler:y=(a=t?.parentClientConfig)==null?void 0:a.requestHandler,credentialProviderLogger:E}=t,A=await JH(h,(c=t?.parentClientConfig)==null?void 0:c.region,E),w=!XH(y);r=new e({credentialDefaultProvider:()=>async()=>n,region:A,requestHandler:w?y:void 0,logger:f})}let{Credentials:d,AssumedRoleUser:u}=await r.send(new lS(i));if(!d||!d.AccessKeyId||!d.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${i.RoleArn}`);let m=YH(u);return{accessKeyId:d.AccessKeyId,secretAccessKey:d.SecretAccessKey,sessionToken:d.SessionToken,expiration:d.Expiration,...d.CredentialScope&&{credentialScope:d.CredentialScope},...m&&{accountId:m}}}},"getDefaultRoleAssumer"),O_e=R((t,e)=>{let r;return async n=>{var o,i,s;if(!r){let{logger:u=(o=t?.parentClientConfig)==null?void 0:o.logger,region:m,requestHandler:f=(i=t?.parentClientConfig)==null?void 0:i.requestHandler,credentialProviderLogger:h}=t,y=await JH(m,(s=t?.parentClientConfig)==null?void 0:s.region,h),E=!XH(f);r=new e({region:y,requestHandler:E?f:void 0,logger:u})}let{Credentials:a,AssumedRoleUser:c}=await r.send(new uS(n));if(!a||!a.AccessKeyId||!a.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);let d=YH(c);return{accessKeyId:a.AccessKeyId,secretAccessKey:a.SecretAccessKey,sessionToken:a.SessionToken,expiration:a.Expiration,...a.CredentialScope&&{credentialScope:a.CredentialScope},...d&&{accountId:d}}}},"getDefaultRoleAssumerWithWebIdentity"),XH=R(t=>{var e;return((e=t?.metadata)==null?void 0:e.handlerProtocol)==="h2"},"isH2"),ZH=ul(),ej=R((t,e)=>{var r;return e?(r=class extends t{constructor(n){super(n);for(let o of e)this.middlewareStack.use(o)}},R(r,"CustomizableSTSClient"),r):t},"getCustomizableStsClientCtor"),tj=R((t={},e)=>P_e(t,ej(ZH.STSClient,e)),"getDefaultRoleAssumer"),rj=R((t={},e)=>O_e(t,ej(ZH.STSClient,e)),"getDefaultRoleAssumerWithWebIdentity"),x_e=R(t=>e=>t({roleAssumer:tj(e),roleAssumerWithWebIdentity:rj(e),...e}),"decorateDefaultCredentialProvider")});var gS=g((a2e,ij)=>{"use strict";var Hf=Object.defineProperty,N_e=Object.getOwnPropertyDescriptor,D_e=Object.getOwnPropertyNames,k_e=Object.prototype.hasOwnProperty,fS=(t,e)=>Hf(t,"name",{value:e,configurable:!0}),M_e=(t,e)=>{for(var r in e)Hf(t,r,{get:e[r],enumerable:!0})},L_e=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of D_e(e))!k_e.call(t,o)&&o!==r&&Hf(t,o,{get:()=>e[o],enumerable:!(n=N_e(e,o))||n.enumerable});return t},U_e=t=>L_e(Hf({},"__esModule",{value:!0}),t),oj={};M_e(oj,{fromProcess:()=>j_e});ij.exports=U_e(oj);var nj=Io(),hS=Lt(),F_e=require("child_process"),B_e=require("util"),q_e=fS((t,e,r)=>{var n;if(e.Version!==1)throw Error(`Profile ${t} credential_process did not return Version 1.`);if(e.AccessKeyId===void 0||e.SecretAccessKey===void 0)throw Error(`Profile ${t} credential_process returned invalid credentials.`);if(e.Expiration){let i=new Date;if(new Date(e.Expiration)<i)throw Error(`Profile ${t} credential_process returned expired credentials.`)}let o=e.AccountId;return!o&&((n=r?.[t])!=null&&n.aws_account_id)&&(o=r[t].aws_account_id),{accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,...e.SessionToken&&{sessionToken:e.SessionToken},...e.Expiration&&{expiration:new Date(e.Expiration)},...e.CredentialScope&&{credentialScope:e.CredentialScope},...o&&{accountId:o}}},"getValidatedProcessCredentials"),H_e=fS(async(t,e,r)=>{let n=e[t];if(e[t]){let o=n.credential_process;if(o!==void 0){let i=(0,B_e.promisify)(F_e.exec);try{let{stdout:s}=await i(o),a;try{a=JSON.parse(s.trim())}catch{throw Error(`Profile ${t} credential_process returned invalid JSON.`)}return q_e(t,a,e)}catch(s){throw new hS.CredentialsProviderError(s.message,{logger:r})}}else throw new hS.CredentialsProviderError(`Profile ${t} did not contain credential_process.`,{logger:r})}else throw new hS.CredentialsProviderError(`Profile ${t} could not be found in shared credentials file.`,{logger:r})},"resolveProcessCredentials"),j_e=fS((t={})=>async()=>{var e;(e=t.logger)==null||e.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await(0,nj.parseKnownFiles)(t);return H_e((0,nj.getProfileName)(t),r,t.logger)},"fromProcess")});var yS=g(cn=>{"use strict";var G_e=cn&&cn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),$_e=cn&&cn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),z_e=cn&&cn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&G_e(e,t,r);return $_e(e,t),e};Object.defineProperty(cn,"__esModule",{value:!0});cn.fromWebToken=void 0;var V_e=t=>async()=>{t.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:e,roleSessionName:r,webIdentityToken:n,providerId:o,policyArns:i,policy:s,durationSeconds:a}=t,{roleAssumerWithWebIdentity:c}=t;if(!c){let{getDefaultRoleAssumerWithWebIdentity:d}=await Promise.resolve().then(()=>z_e(mS()));c=d({...t.clientConfig,credentialProviderLogger:t.logger,parentClientConfig:t.parentClientConfig},t.clientPlugins)}return c({RoleArn:e,RoleSessionName:r??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:o,PolicyArns:i,Policy:s,DurationSeconds:a})};cn.fromWebToken=V_e});var sj=g(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});jf.fromTokenFile=void 0;var K_e=Lt(),W_e=require("fs"),Q_e=yS(),Y_e="AWS_WEB_IDENTITY_TOKEN_FILE",J_e="AWS_ROLE_ARN",X_e="AWS_ROLE_SESSION_NAME",Z_e=(t={})=>async()=>{t.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let e=t?.webIdentityTokenFile??process.env[Y_e],r=t?.roleArn??process.env[J_e],n=t?.roleSessionName??process.env[X_e];if(!e||!r)throw new K_e.CredentialsProviderError("Web identity configuration not specified",{logger:t.logger});return(0,Q_e.fromWebToken)({...t,webIdentityToken:(0,W_e.readFileSync)(e,{encoding:"ascii"}),roleArn:r,roleSessionName:n})()};jf.fromTokenFile=Z_e});var ES=g((l2e,Gf)=>{"use strict";var aj=Object.defineProperty,eve=Object.getOwnPropertyDescriptor,tve=Object.getOwnPropertyNames,rve=Object.prototype.hasOwnProperty,_S=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of tve(e))!rve.call(t,o)&&o!==r&&aj(t,o,{get:()=>e[o],enumerable:!(n=eve(e,o))||n.enumerable});return t},cj=(t,e,r)=>(_S(t,e,"default"),r&&_S(r,e,"default")),nve=t=>_S(aj({},"__esModule",{value:!0}),t),vS={};Gf.exports=nve(vS);cj(vS,sj(),Gf.exports);cj(vS,yS(),Gf.exports)});var fj=g((u2e,hj)=>{"use strict";var ove=Object.create,fl=Object.defineProperty,ive=Object.getOwnPropertyDescriptor,sve=Object.getOwnPropertyNames,ave=Object.getPrototypeOf,cve=Object.prototype.hasOwnProperty,qt=(t,e)=>fl(t,"name",{value:e,configurable:!0}),dve=(t,e)=>{for(var r in e)fl(t,r,{get:e[r],enumerable:!0})},uj=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of sve(e))!cve.call(t,o)&&o!==r&&fl(t,o,{get:()=>e[o],enumerable:!(n=ive(e,o))||n.enumerable});return t},Zo=(t,e,r)=>(r=t!=null?ove(ave(t)):{},uj(e||!t||!t.__esModule?fl(r,"default",{value:t,enumerable:!0}):r,t)),lve=t=>uj(fl({},"__esModule",{value:!0}),t),pj={};dve(pj,{fromIni:()=>Sve});hj.exports=lve(pj);var CS=Io(),hl=Lt(),uve=qt((t,e,r)=>{let n={EcsContainer:async o=>{let{fromHttp:i}=await Promise.resolve().then(()=>Zo(cC())),{fromContainerMetadata:s}=await Promise.resolve().then(()=>Zo(Xd()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),(0,hl.chain)(i(o??{}),s(o))},Ec2InstanceMetadata:async o=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:i}=await Promise.resolve().then(()=>Zo(Xd()));return i(o)},Environment:async o=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:i}=await Promise.resolve().then(()=>Zo(tC()));return i(o)}};if(t in n)return n[t];throw new hl.CredentialsProviderError(`Unsupported credential source in profile ${e}. Got ${t}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},"resolveCredentialSource"),pve=qt((t,{profile:e="default",logger:r}={})=>!!t&&typeof t=="object"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1&&["undefined","string"].indexOf(typeof t.external_id)>-1&&["undefined","string"].indexOf(typeof t.mfa_serial)>-1&&(mve(t,{profile:e,logger:r})||hve(t,{profile:e,logger:r})),"isAssumeRoleProfile"),mve=qt((t,{profile:e,logger:r})=>{var n;let o=typeof t.source_profile=="string"&&typeof t.credential_source>"u";return o&&((n=r?.debug)==null||n.call(r,`    ${e} isAssumeRoleWithSourceProfile source_profile=${t.source_profile}`)),o},"isAssumeRoleWithSourceProfile"),hve=qt((t,{profile:e,logger:r})=>{var n;let o=typeof t.credential_source=="string"&&typeof t.source_profile>"u";return o&&((n=r?.debug)==null||n.call(r,`    ${e} isCredentialSourceProfile credential_source=${t.credential_source}`)),o},"isCredentialSourceProfile"),fve=qt(async(t,e,r,n={})=>{var o,i;(o=r.logger)==null||o.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let s=e[t];if(!r.roleAssumer){let{getDefaultRoleAssumer:f}=await Promise.resolve().then(()=>Zo(mS()));r.roleAssumer=f({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:r?.parentClientConfig},r.clientPlugins)}let{source_profile:a}=s;if(a&&a in n)throw new hl.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${(0,CS.getProfileName)(r)}. Profiles visited: `+Object.keys(n).join(", "),{logger:r.logger});(i=r.logger)==null||i.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${a?`source_profile=[${a}]`:`profile=[${t}]`}`);let c=a?mj(a,{...e,[a]:{...e[a],role_arn:s.role_arn??e[a].role_arn}},r,{...n,[a]:!0}):(await uve(s.credential_source,t,r.logger)(r))(),d={RoleArn:s.role_arn,RoleSessionName:s.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:s.external_id,DurationSeconds:parseInt(s.duration_seconds||"3600",10)},{mfa_serial:u}=s;if(u){if(!r.mfaCodeProvider)throw new hl.CredentialsProviderError(`Profile ${t} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});d.SerialNumber=u,d.TokenCode=await r.mfaCodeProvider(u)}let m=await c;return r.roleAssumer(m,d)},"resolveAssumeRoleCredentials"),gve=qt(t=>!!t&&typeof t=="object"&&typeof t.credential_process=="string","isProcessProfile"),yve=qt(async(t,e)=>Promise.resolve().then(()=>Zo(gS())).then(({fromProcess:r})=>r({...t,profile:e})()),"resolveProcessCredentials"),_ve=qt(async(t,e={})=>{let{fromSSO:r}=await Promise.resolve().then(()=>Zo(IC()));return r({profile:t,logger:e.logger})()},"resolveSsoCredentials"),vve=qt(t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string"),"isSsoProfile"),dj=qt(t=>!!t&&typeof t=="object"&&typeof t.aws_access_key_id=="string"&&typeof t.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof t.aws_session_token)>-1&&["undefined","string"].indexOf(typeof t.aws_account_id)>-1,"isStaticCredsProfile"),lj=qt((t,e)=>{var r;return(r=e?.logger)==null||r.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials"),Promise.resolve({accessKeyId:t.aws_access_key_id,secretAccessKey:t.aws_secret_access_key,sessionToken:t.aws_session_token,...t.aws_credential_scope&&{credentialScope:t.aws_credential_scope},...t.aws_account_id&&{accountId:t.aws_account_id}})},"resolveStaticCredentials"),Eve=qt(t=>!!t&&typeof t=="object"&&typeof t.web_identity_token_file=="string"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1,"isWebIdentityProfile"),Cve=qt(async(t,e)=>Promise.resolve().then(()=>Zo(ES())).then(({fromTokenFile:r})=>r({webIdentityTokenFile:t.web_identity_token_file,roleArn:t.role_arn,roleSessionName:t.role_session_name,roleAssumerWithWebIdentity:e.roleAssumerWithWebIdentity,logger:e.logger,parentClientConfig:e.parentClientConfig})()),"resolveWebIdentityCredentials"),mj=qt(async(t,e,r,n={})=>{let o=e[t];if(Object.keys(n).length>0&&dj(o))return lj(o,r);if(pve(o,{profile:t,logger:r.logger}))return fve(t,e,r,n);if(dj(o))return lj(o,r);if(Eve(o))return Cve(o,r);if(gve(o))return yve(r,t);if(vve(o))return await _ve(t,r);throw new hl.CredentialsProviderError(`Could not resolve credentials using profile: [${t}] in configuration/credentials file(s).`,{logger:r.logger})},"resolveProfileData"),Sve=qt((t={})=>async()=>{var e;(e=t.logger)==null||e.debug("@aws-sdk/credential-provider-ini - fromIni");let r=await(0,CS.parseKnownFiles)(t);return mj((0,CS.getProfileName)(t),r,t)},"fromIni")});var sl=g((p2e,Cj)=>{"use strict";var Tve=Object.create,gl=Object.defineProperty,bve=Object.getOwnPropertyDescriptor,Ave=Object.getOwnPropertyNames,Ive=Object.getPrototypeOf,Rve=Object.prototype.hasOwnProperty,$f=(t,e)=>gl(t,"name",{value:e,configurable:!0}),wve=(t,e)=>{for(var r in e)gl(t,r,{get:e[r],enumerable:!0})},yj=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Ave(e))!Rve.call(t,o)&&o!==r&&gl(t,o,{get:()=>e[o],enumerable:!(n=bve(e,o))||n.enumerable});return t},Va=(t,e,r)=>(r=t!=null?Tve(Ive(t)):{},yj(e||!t||!t.__esModule?gl(r,"default",{value:t,enumerable:!0}):r,t)),Pve=t=>yj(gl({},"__esModule",{value:!0}),t),_j={};wve(_j,{credentialsTreatedAsExpired:()=>Ej,credentialsWillNeedRefresh:()=>vj,defaultProvider:()=>Dve});Cj.exports=Pve(_j);var SS=tC(),Ove=Io(),is=Lt(),xve="AWS_EC2_METADATA_DISABLED",Nve=$f(async t=>{var e,r;let{ENV_CMDS_FULL_URI:n,ENV_CMDS_RELATIVE_URI:o,fromContainerMetadata:i,fromInstanceMetadata:s}=await Promise.resolve().then(()=>Va(Xd()));if(process.env[o]||process.env[n]){(e=t.logger)==null||e.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:a}=await Promise.resolve().then(()=>Va(cC()));return(0,is.chain)(a(t),i(t))}return process.env[xve]?async()=>{throw new is.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:t.logger})}:((r=t.logger)==null||r.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),s(t))},"remoteProvider"),gj=!1,Dve=$f((t={})=>(0,is.memoize)((0,is.chain)(async()=>{var e,r,n,o;if(t.profile??process.env[Ove.ENV_PROFILE])throw process.env[SS.ENV_KEY]&&process.env[SS.ENV_SECRET]&&(gj||(((e=t.logger)!=null&&e.warn&&((n=(r=t.logger)==null?void 0:r.constructor)==null?void 0:n.name)!=="NoOpLogger"?t.logger.warn:console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),gj=!0)),new is.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:t.logger,tryNextLink:!0});return(o=t.logger)==null||o.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),(0,SS.fromEnv)(t)()},async()=>{var e;(e=t.logger)==null||e.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:o,ssoRoleName:i,ssoSession:s}=t;if(!r&&!n&&!o&&!i&&!s)throw new is.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:t.logger});let{fromSSO:a}=await Promise.resolve().then(()=>Va(IC()));return a(t)()},async()=>{var e;(e=t.logger)==null||e.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:r}=await Promise.resolve().then(()=>Va(fj()));return r(t)()},async()=>{var e;(e=t.logger)==null||e.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:r}=await Promise.resolve().then(()=>Va(gS()));return r(t)()},async()=>{var e;(e=t.logger)==null||e.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:r}=await Promise.resolve().then(()=>Va(ES()));return r(t)()},async()=>{var e;return(e=t.logger)==null||e.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await Nve(t))()},async()=>{throw new is.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:t.logger})}),Ej,vj),"defaultProvider"),vj=$f(t=>t?.expiration!==void 0,"credentialsWillNeedRefresh"),Ej=$f(t=>t?.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,"credentialsTreatedAsExpired")});var Fj=g(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});zf.ruleSet=void 0;var Dj="required",nr="fn",or="argv",Wa="ref",Sj=!0,Tj="isSet",yl="booleanEquals",Ka="error",ss="endpoint",zn="tree",TS="PartitionResult",bS="getAttr",bj="stringEquals",Aj={[Dj]:!1,type:"String"},Ij={[Dj]:!0,default:!1,type:"Boolean"},Rj={[Wa]:"Endpoint"},kj={[nr]:yl,[or]:[{[Wa]:"UseFIPS"},!0]},Mj={[nr]:yl,[or]:[{[Wa]:"UseDualStack"},!0]},rr={},Lj={[Wa]:"Region"},wj={[nr]:bS,[or]:[{[Wa]:TS},"supportsFIPS"]},Uj={[Wa]:TS},Pj={[nr]:yl,[or]:[!0,{[nr]:bS,[or]:[Uj,"supportsDualStack"]}]},Oj=[kj],xj=[Mj],Nj=[Lj],kve={version:"1.0",parameters:{Region:Aj,UseDualStack:Ij,UseFIPS:Ij,Endpoint:Aj},rules:[{conditions:[{[nr]:Tj,[or]:[Rj]}],rules:[{conditions:Oj,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ka},{conditions:xj,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ka},{endpoint:{url:Rj,properties:rr,headers:rr},type:ss}],type:zn},{conditions:[{[nr]:Tj,[or]:Nj}],rules:[{conditions:[{[nr]:"aws.partition",[or]:Nj,assign:TS}],rules:[{conditions:[kj,Mj],rules:[{conditions:[{[nr]:yl,[or]:[Sj,wj]},Pj],rules:[{endpoint:{url:"https://dynamodb-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:rr,headers:rr},type:ss}],type:zn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ka}],type:zn},{conditions:Oj,rules:[{conditions:[{[nr]:yl,[or]:[wj,Sj]}],rules:[{conditions:[{[nr]:bj,[or]:[{[nr]:bS,[or]:[Uj,"name"]},"aws-us-gov"]}],endpoint:{url:"https://dynamodb.{Region}.amazonaws.com",properties:rr,headers:rr},type:ss},{endpoint:{url:"https://dynamodb-fips.{Region}.{PartitionResult#dnsSuffix}",properties:rr,headers:rr},type:ss}],type:zn},{error:"FIPS is enabled but this partition does not support FIPS",type:Ka}],type:zn},{conditions:xj,rules:[{conditions:[Pj],rules:[{endpoint:{url:"https://dynamodb.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:rr,headers:rr},type:ss}],type:zn},{error:"DualStack is enabled but this partition does not support DualStack",type:Ka}],type:zn},{conditions:[{[nr]:bj,[or]:[Lj,"local"]}],endpoint:{url:"http://localhost:8000",properties:{authSchemes:[{name:"sigv4",signingName:"dynamodb",signingRegion:"us-east-1"}]},headers:rr},type:ss},{endpoint:{url:"https://dynamodb.{Region}.{PartitionResult#dnsSuffix}",properties:rr,headers:rr},type:ss}],type:zn}],type:zn},{error:"Invalid Configuration: Missing Region",type:Ka}]};zf.ruleSet=kve});var qj=g(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});Vf.defaultEndpointResolver=void 0;var Mve=Ki(),Bj=Vi(),Lve=Fj(),Uve=(t,e={})=>(0,Bj.resolveEndpoint)(Lve.ruleSet,{endpointParams:t,logger:e.logger});Vf.defaultEndpointResolver=Uve;Bj.customEndpointFunctions.aws=Mve.awsEndpointFunctions});var Gj=g(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});Kf.getRuntimeConfig=void 0;var Fve=(Ze(),M(Xe)),Bve=fe(),qve=Ro(),Hj=Mn(),jj=Ct(),Hve=eC(),jve=qj(),Gve=t=>({apiVersion:"2012-08-10",base64Decoder:t?.base64Decoder??Hj.fromBase64,base64Encoder:t?.base64Encoder??Hj.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??jve.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??Hve.defaultDynamoDBHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new Fve.AwsSdkSigV4Signer}],logger:t?.logger??new Bve.NoOpLogger,serviceId:t?.serviceId??"DynamoDB",urlParser:t?.urlParser??qve.parseUrl,utf8Decoder:t?.utf8Decoder??jj.fromUtf8,utf8Encoder:t?.utf8Encoder??jj.toUtf8});Kf.getRuntimeConfig=Gve});var Vj=g(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});Qf.getRuntimeConfig=void 0;var $ve=(_e(),M(ye)),zve=$ve.__importDefault(qL()),Vve=(Ze(),M(Xe)),Kve=sl(),Wve=ov(),Qve=Ea(),Wf=fr(),Yve=Ca(),$j=_r(),Qa=rn(),zj=No(),Jve=Sa(),Xve=Ji(),Zve=Gj(),eEe=fe(),tEe=Ia(),rEe=fe(),nEe=t=>{(0,rEe.emitWarningIfUnsupportedVersion)(process.version);let e=(0,tEe.resolveDefaultsModeConfig)(t),r=()=>e().then(eEe.loadConfigsForDefaultMode),n=(0,Zve.getRuntimeConfig)(t);return(0,Vve.emitWarningIfUnsupportedVersion)(process.version),{...n,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??Jve.calculateBodyLength,credentialDefaultProvider:t?.credentialDefaultProvider??Kve.defaultProvider,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,Qve.defaultUserAgent)({serviceId:n.serviceId,clientVersion:zve.default.version}),endpointDiscoveryEnabledProvider:t?.endpointDiscoveryEnabledProvider??(0,Qa.loadConfig)(Wve.NODE_ENDPOINT_DISCOVERY_CONFIG_OPTIONS),maxAttempts:t?.maxAttempts??(0,Qa.loadConfig)($j.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:t?.region??(0,Qa.loadConfig)(Wf.NODE_REGION_CONFIG_OPTIONS,Wf.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:zj.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Qa.loadConfig)({...$j.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||Xve.DEFAULT_RETRY_MODE}),sha256:t?.sha256??Yve.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??zj.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Qa.loadConfig)(Wf.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:t?.useFipsEndpoint??(0,Qa.loadConfig)(Wf.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}};Qf.getRuntimeConfig=nEe});var Xj=g((y2e,Jj)=>{var Yf=Object.defineProperty,oEe=Object.getOwnPropertyDescriptor,iEe=Object.getOwnPropertyNames,sEe=Object.prototype.hasOwnProperty,Vn=(t,e)=>Yf(t,"name",{value:e,configurable:!0}),aEe=(t,e)=>{for(var r in e)Yf(t,r,{get:e[r],enumerable:!0})},cEe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of iEe(e))!sEe.call(t,o)&&o!==r&&Yf(t,o,{get:()=>e[o],enumerable:!(n=oEe(e,o))||n.enumerable});return t},dEe=t=>cEe(Yf({},"__esModule",{value:!0}),t),Wj={};aEe(Wj,{WaiterState:()=>Yj,checkExceptions:()=>uEe,createWaiter:()=>gEe,waiterServiceDefaults:()=>Qj});Jj.exports=dEe(Wj);var lEe=Vn(t=>new Promise(e=>setTimeout(e,t*1e3)),"sleep"),Qj={minDelay:2,maxDelay:120},Yj=(t=>(t.ABORTED="ABORTED",t.FAILURE="FAILURE",t.SUCCESS="SUCCESS",t.RETRY="RETRY",t.TIMEOUT="TIMEOUT",t))(Yj||{}),uEe=Vn(t=>{if(t.state==="ABORTED"){let e=new Error(`${JSON.stringify({...t,reason:"Request was aborted"})}`);throw e.name="AbortError",e}else if(t.state==="TIMEOUT"){let e=new Error(`${JSON.stringify({...t,reason:"Waiter has timed out"})}`);throw e.name="TimeoutError",e}else if(t.state!=="SUCCESS")throw new Error(`${JSON.stringify(t)}`);return t},"checkExceptions"),pEe=Vn((t,e,r,n)=>{if(n>r)return e;let o=t*2**(n-1);return mEe(t,o)},"exponentialBackoffWithJitter"),mEe=Vn((t,e)=>t+Math.random()*(e-t),"randomInRange"),hEe=Vn(async({minDelay:t,maxDelay:e,maxWaitTime:r,abortController:n,client:o,abortSignal:i},s,a)=>{var c;let{state:d,reason:u}=await a(o,s);if(d!=="RETRY")return{state:d,reason:u};let m=1,f=Date.now()+r*1e3,h=Math.log(e/t)/Math.log(2)+1;for(;;){if((c=n?.signal)!=null&&c.aborted||i?.aborted)return{state:"ABORTED"};let y=pEe(t,e,h,m);if(Date.now()+y*1e3>f)return{state:"TIMEOUT"};await lEe(y);let{state:E,reason:A}=await a(o,s);if(E!=="RETRY")return{state:E,reason:A};m+=1}},"runPolling"),fEe=Vn(t=>{if(t.maxWaitTime<1)throw new Error("WaiterConfiguration.maxWaitTime must be greater than 0");if(t.minDelay<1)throw new Error("WaiterConfiguration.minDelay must be greater than 0");if(t.maxDelay<1)throw new Error("WaiterConfiguration.maxDelay must be greater than 0");if(t.maxWaitTime<=t.minDelay)throw new Error(`WaiterConfiguration.maxWaitTime [${t.maxWaitTime}] must be greater than WaiterConfiguration.minDelay [${t.minDelay}] for this waiter`);if(t.maxDelay<t.minDelay)throw new Error(`WaiterConfiguration.maxDelay [${t.maxDelay}] must be greater than WaiterConfiguration.minDelay [${t.minDelay}] for this waiter`)},"validateWaiterOptions"),Kj=Vn(async t=>new Promise(e=>{let r=Vn(()=>e({state:"ABORTED"}),"onAbort");typeof t.addEventListener=="function"?t.addEventListener("abort",r):t.onabort=r}),"abortTimeout"),gEe=Vn(async(t,e,r)=>{let n={...Qj,...t};fEe(n);let o=[hEe(n,e,r)];return t.abortController&&o.push(Kj(t.abortController.signal)),t.abortSignal&&o.push(Kj(t.abortSignal)),Promise.race(o)},"createWaiter")});var EV=g((Tze,vV)=>{"use strict";var Zf=Object.defineProperty,yEe=Object.getOwnPropertyDescriptor,_Ee=Object.getOwnPropertyNames,vEe=Object.prototype.hasOwnProperty,p=(t,e)=>Zf(t,"name",{value:e,configurable:!0}),EEe=(t,e)=>{for(var r in e)Zf(t,r,{get:e[r],enumerable:!0})},CEe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of _Ee(e))!vEe.call(t,o)&&o!==r&&Zf(t,o,{get:()=>e[o],enumerable:!(n=yEe(e,o))||n.enumerable});return t},SEe=t=>CEe(Zf({},"__esModule",{value:!0}),t),iG={};EEe(iG,{ApproximateCreationDateTimePrecision:()=>PEe,AttributeAction:()=>OEe,AttributeValue:()=>Xf,BackupInUseException:()=>lG,BackupNotFoundException:()=>mG,BackupStatus:()=>NEe,BackupType:()=>DEe,BackupTypeFilter:()=>HEe,BatchExecuteStatementCommand:()=>v2,BatchGetItemCommand:()=>C2,BatchStatementErrorCodeEnum:()=>$Ee,BatchWriteItemCommand:()=>T2,BillingMode:()=>kEe,ComparisonOperator:()=>VEe,ConditionalCheckFailedException:()=>Q$,ConditionalOperator:()=>KEe,ContinuousBackupsStatus:()=>WEe,ContinuousBackupsUnavailableException:()=>kG,ContributorInsightsAction:()=>YEe,ContributorInsightsStatus:()=>JEe,CreateBackupCommand:()=>A2,CreateGlobalTableCommand:()=>R2,CreateTableCommand:()=>P2,DeleteBackupCommand:()=>x2,DeleteItemCommand:()=>D2,DeleteResourcePolicyCommand:()=>M2,DeleteTableCommand:()=>U2,DescribeBackupCommand:()=>B2,DescribeContinuousBackupsCommand:()=>H2,DescribeContributorInsightsCommand:()=>G2,DescribeEndpointsCommand:()=>NS,DescribeExportCommand:()=>z2,DescribeGlobalTableCommand:()=>K2,DescribeGlobalTableSettingsCommand:()=>Q2,DescribeImportCommand:()=>J2,DescribeKinesisStreamingDestinationCommand:()=>Z2,DescribeLimitsCommand:()=>tz,DescribeTableCommand:()=>ng,DescribeTableReplicaAutoScalingCommand:()=>oz,DescribeTimeToLiveCommand:()=>sz,DestinationStatus:()=>pCe,DisableKinesisStreamingDestinationCommand:()=>cz,DuplicateItemException:()=>m$,DynamoDB:()=>gV,DynamoDBClient:()=>ni,DynamoDBServiceException:()=>ce,EnableKinesisStreamingDestinationCommand:()=>lz,ExecuteStatementCommand:()=>pz,ExecuteTransactionCommand:()=>hz,ExportConflictException:()=>S$,ExportFormat:()=>oCe,ExportNotFoundException:()=>o$,ExportStatus:()=>iCe,ExportTableToPointInTimeCommand:()=>gz,ExportType:()=>sCe,ExportViewType:()=>aCe,GetItemCommand:()=>_z,GetResourcePolicyCommand:()=>Ez,GlobalTableAlreadyExistsException:()=>VG,GlobalTableNotFoundException:()=>a$,GlobalTableStatus:()=>XEe,IdempotentParameterMismatchException:()=>g$,ImportConflictException:()=>x$,ImportNotFoundException:()=>l$,ImportStatus:()=>dCe,ImportTableCommand:()=>Sz,IndexNotFoundException:()=>V$,IndexStatus:()=>tCe,InputCompressionType:()=>lCe,InputFormat:()=>uCe,InternalServerError:()=>gG,InvalidEndpointException:()=>SG,InvalidExportTimeException:()=>A$,InvalidRestoreTimeException:()=>U$,ItemCollectionSizeLimitExceededException:()=>xG,KeyType:()=>MEe,LimitExceededException:()=>UG,ListBackupsCommand:()=>bz,ListContributorInsightsCommand:()=>DS,ListExportsCommand:()=>kS,ListGlobalTablesCommand:()=>wz,ListImportsCommand:()=>MS,ListTablesCommand:()=>LS,ListTagsOfResourceCommand:()=>Nz,PointInTimeRecoveryStatus:()=>QEe,PointInTimeRecoveryUnavailableException:()=>w$,PolicyNotFoundException:()=>t$,ProjectionType:()=>LEe,ProvisionedThroughputExceededException:()=>AG,PutItemCommand:()=>kz,PutResourcePolicyCommand:()=>Lz,QueryCommand:()=>US,ReplicaAlreadyExistsException:()=>q$,ReplicaNotFoundException:()=>G$,ReplicaStatus:()=>ZEe,RequestLimitExceeded:()=>vG,ResourceInUseException:()=>QG,ResourceNotFoundException:()=>wG,RestoreTableFromBackupCommand:()=>Bz,RestoreTableToPointInTimeCommand:()=>Hz,ReturnConsumedCapacity:()=>jEe,ReturnItemCollectionMetrics:()=>zEe,ReturnValue:()=>nCe,ReturnValuesOnConditionCheckFailure:()=>GEe,S3SseAlgorithm:()=>cCe,SSEStatus:()=>FEe,SSEType:()=>UEe,ScalarAttributeType:()=>xEe,ScanCommand:()=>FS,Select:()=>mCe,StreamViewType:()=>BEe,TableAlreadyExistsException:()=>k$,TableClass:()=>eCe,TableInUseException:()=>qG,TableNotFoundException:()=>GG,TableStatus:()=>rCe,TagResourceCommand:()=>$z,TimeToLiveStatus:()=>qEe,TransactGetItemsCommand:()=>Vz,TransactWriteItemsCommand:()=>Wz,TransactionCanceledException:()=>X$,TransactionConflictException:()=>XG,TransactionInProgressException:()=>v$,UntagResourceCommand:()=>Yz,UpdateContinuousBackupsCommand:()=>Xz,UpdateContributorInsightsCommand:()=>eV,UpdateGlobalTableCommand:()=>rV,UpdateGlobalTableSettingsCommand:()=>oV,UpdateItemCommand:()=>sV,UpdateKinesisStreamingDestinationCommand:()=>cV,UpdateTableCommand:()=>lV,UpdateTableReplicaAutoScalingCommand:()=>pV,UpdateTimeToLiveCommand:()=>hV,__Client:()=>l.Client,paginateListContributorInsights:()=>zIe,paginateListExports:()=>KIe,paginateListImports:()=>QIe,paginateListTables:()=>JIe,paginateQuery:()=>ZIe,paginateScan:()=>tRe,waitForTableExists:()=>rRe,waitForTableNotExists:()=>oRe,waitUntilTableExists:()=>nRe,waitUntilTableNotExists:()=>iRe});vV.exports=SEe(iG);var TEe=ov(),Zj=ra(),bEe=na(),AEe=oa(),eG=sa(),IEe=fr(),AS=(mt(),M(It)),REe=fa(),tG=_r(),rG=eC(),q=Po(),j=wo(),wEe=p(t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"dynamodb"}),"resolveClientEndpointParameters"),G={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},L=(Ze(),M(Xe)),IS=De(),eg=(Lv(),M(Mv)),l=fe(),sG=class aG extends l.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,aG.prototype)}};p(sG,"DynamoDBServiceException");var ce=sG,PEe={MICROSECOND:"MICROSECOND",MILLISECOND:"MILLISECOND"},OEe={ADD:"ADD",DELETE:"DELETE",PUT:"PUT"},xEe={B:"B",N:"N",S:"S"},NEe={AVAILABLE:"AVAILABLE",CREATING:"CREATING",DELETED:"DELETED"},DEe={AWS_BACKUP:"AWS_BACKUP",SYSTEM:"SYSTEM",USER:"USER"},kEe={PAY_PER_REQUEST:"PAY_PER_REQUEST",PROVISIONED:"PROVISIONED"},MEe={HASH:"HASH",RANGE:"RANGE"},LEe={ALL:"ALL",INCLUDE:"INCLUDE",KEYS_ONLY:"KEYS_ONLY"},UEe={AES256:"AES256",KMS:"KMS"},FEe={DISABLED:"DISABLED",DISABLING:"DISABLING",ENABLED:"ENABLED",ENABLING:"ENABLING",UPDATING:"UPDATING"},BEe={KEYS_ONLY:"KEYS_ONLY",NEW_AND_OLD_IMAGES:"NEW_AND_OLD_IMAGES",NEW_IMAGE:"NEW_IMAGE",OLD_IMAGE:"OLD_IMAGE"},qEe={DISABLED:"DISABLED",DISABLING:"DISABLING",ENABLED:"ENABLED",ENABLING:"ENABLING"},cG=class dG extends ce{constructor(e){super({name:"BackupInUseException",$fault:"client",...e}),this.name="BackupInUseException",this.$fault="client",Object.setPrototypeOf(this,dG.prototype)}};p(cG,"BackupInUseException");var lG=cG,uG=class pG extends ce{constructor(e){super({name:"BackupNotFoundException",$fault:"client",...e}),this.name="BackupNotFoundException",this.$fault="client",Object.setPrototypeOf(this,pG.prototype)}};p(uG,"BackupNotFoundException");var mG=uG,HEe={ALL:"ALL",AWS_BACKUP:"AWS_BACKUP",SYSTEM:"SYSTEM",USER:"USER"},jEe={INDEXES:"INDEXES",NONE:"NONE",TOTAL:"TOTAL"},GEe={ALL_OLD:"ALL_OLD",NONE:"NONE"},$Ee={AccessDenied:"AccessDenied",ConditionalCheckFailed:"ConditionalCheckFailed",DuplicateItem:"DuplicateItem",InternalServerError:"InternalServerError",ItemCollectionSizeLimitExceeded:"ItemCollectionSizeLimitExceeded",ProvisionedThroughputExceeded:"ProvisionedThroughputExceeded",RequestLimitExceeded:"RequestLimitExceeded",ResourceNotFound:"ResourceNotFound",ThrottlingError:"ThrottlingError",TransactionConflict:"TransactionConflict",ValidationError:"ValidationError"},hG=class fG extends ce{constructor(e){super({name:"InternalServerError",$fault:"server",...e}),this.name="InternalServerError",this.$fault="server",Object.setPrototypeOf(this,fG.prototype)}};p(hG,"InternalServerError");var gG=hG,yG=class _G extends ce{constructor(e){super({name:"RequestLimitExceeded",$fault:"client",...e}),this.name="RequestLimitExceeded",this.$fault="client",Object.setPrototypeOf(this,_G.prototype)}};p(yG,"RequestLimitExceeded");var vG=yG,EG=class CG extends ce{constructor(e){super({name:"InvalidEndpointException",$fault:"client",...e}),this.name="InvalidEndpointException",this.$fault="client",Object.setPrototypeOf(this,CG.prototype),this.Message=e.Message}};p(EG,"InvalidEndpointException");var SG=EG,TG=class bG extends ce{constructor(e){super({name:"ProvisionedThroughputExceededException",$fault:"client",...e}),this.name="ProvisionedThroughputExceededException",this.$fault="client",Object.setPrototypeOf(this,bG.prototype)}};p(TG,"ProvisionedThroughputExceededException");var AG=TG,IG=class RG extends ce{constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,RG.prototype)}};p(IG,"ResourceNotFoundException");var wG=IG,zEe={NONE:"NONE",SIZE:"SIZE"},PG=class OG extends ce{constructor(e){super({name:"ItemCollectionSizeLimitExceededException",$fault:"client",...e}),this.name="ItemCollectionSizeLimitExceededException",this.$fault="client",Object.setPrototypeOf(this,OG.prototype)}};p(PG,"ItemCollectionSizeLimitExceededException");var xG=PG,VEe={BEGINS_WITH:"BEGINS_WITH",BETWEEN:"BETWEEN",CONTAINS:"CONTAINS",EQ:"EQ",GE:"GE",GT:"GT",IN:"IN",LE:"LE",LT:"LT",NE:"NE",NOT_CONTAINS:"NOT_CONTAINS",NOT_NULL:"NOT_NULL",NULL:"NULL"},KEe={AND:"AND",OR:"OR"},WEe={DISABLED:"DISABLED",ENABLED:"ENABLED"},QEe={DISABLED:"DISABLED",ENABLED:"ENABLED"},NG=class DG extends ce{constructor(e){super({name:"ContinuousBackupsUnavailableException",$fault:"client",...e}),this.name="ContinuousBackupsUnavailableException",this.$fault="client",Object.setPrototypeOf(this,DG.prototype)}};p(NG,"ContinuousBackupsUnavailableException");var kG=NG,YEe={DISABLE:"DISABLE",ENABLE:"ENABLE"},JEe={DISABLED:"DISABLED",DISABLING:"DISABLING",ENABLED:"ENABLED",ENABLING:"ENABLING",FAILED:"FAILED"},MG=class LG extends ce{constructor(e){super({name:"LimitExceededException",$fault:"client",...e}),this.name="LimitExceededException",this.$fault="client",Object.setPrototypeOf(this,LG.prototype)}};p(MG,"LimitExceededException");var UG=MG,FG=class BG extends ce{constructor(e){super({name:"TableInUseException",$fault:"client",...e}),this.name="TableInUseException",this.$fault="client",Object.setPrototypeOf(this,BG.prototype)}};p(FG,"TableInUseException");var qG=FG,HG=class jG extends ce{constructor(e){super({name:"TableNotFoundException",$fault:"client",...e}),this.name="TableNotFoundException",this.$fault="client",Object.setPrototypeOf(this,jG.prototype)}};p(HG,"TableNotFoundException");var GG=HG,XEe={ACTIVE:"ACTIVE",CREATING:"CREATING",DELETING:"DELETING",UPDATING:"UPDATING"},ZEe={ACTIVE:"ACTIVE",CREATING:"CREATING",CREATION_FAILED:"CREATION_FAILED",DELETING:"DELETING",INACCESSIBLE_ENCRYPTION_CREDENTIALS:"INACCESSIBLE_ENCRYPTION_CREDENTIALS",REGION_DISABLED:"REGION_DISABLED",UPDATING:"UPDATING"},eCe={STANDARD:"STANDARD",STANDARD_INFREQUENT_ACCESS:"STANDARD_INFREQUENT_ACCESS"},$G=class zG extends ce{constructor(e){super({name:"GlobalTableAlreadyExistsException",$fault:"client",...e}),this.name="GlobalTableAlreadyExistsException",this.$fault="client",Object.setPrototypeOf(this,zG.prototype)}};p($G,"GlobalTableAlreadyExistsException");var VG=$G,tCe={ACTIVE:"ACTIVE",CREATING:"CREATING",DELETING:"DELETING",UPDATING:"UPDATING"},rCe={ACTIVE:"ACTIVE",ARCHIVED:"ARCHIVED",ARCHIVING:"ARCHIVING",CREATING:"CREATING",DELETING:"DELETING",INACCESSIBLE_ENCRYPTION_CREDENTIALS:"INACCESSIBLE_ENCRYPTION_CREDENTIALS",UPDATING:"UPDATING"},KG=class WG extends ce{constructor(e){super({name:"ResourceInUseException",$fault:"client",...e}),this.name="ResourceInUseException",this.$fault="client",Object.setPrototypeOf(this,WG.prototype)}};p(KG,"ResourceInUseException");var QG=KG,nCe={ALL_NEW:"ALL_NEW",ALL_OLD:"ALL_OLD",NONE:"NONE",UPDATED_NEW:"UPDATED_NEW",UPDATED_OLD:"UPDATED_OLD"},YG=class JG extends ce{constructor(e){super({name:"TransactionConflictException",$fault:"client",...e}),this.name="TransactionConflictException",this.$fault="client",Object.setPrototypeOf(this,JG.prototype)}};p(YG,"TransactionConflictException");var XG=YG,ZG=class e$ extends ce{constructor(e){super({name:"PolicyNotFoundException",$fault:"client",...e}),this.name="PolicyNotFoundException",this.$fault="client",Object.setPrototypeOf(this,e$.prototype)}};p(ZG,"PolicyNotFoundException");var t$=ZG,oCe={DYNAMODB_JSON:"DYNAMODB_JSON",ION:"ION"},iCe={COMPLETED:"COMPLETED",FAILED:"FAILED",IN_PROGRESS:"IN_PROGRESS"},sCe={FULL_EXPORT:"FULL_EXPORT",INCREMENTAL_EXPORT:"INCREMENTAL_EXPORT"},aCe={NEW_AND_OLD_IMAGES:"NEW_AND_OLD_IMAGES",NEW_IMAGE:"NEW_IMAGE"},cCe={AES256:"AES256",KMS:"KMS"},r$=class n$ extends ce{constructor(e){super({name:"ExportNotFoundException",$fault:"client",...e}),this.name="ExportNotFoundException",this.$fault="client",Object.setPrototypeOf(this,n$.prototype)}};p(r$,"ExportNotFoundException");var o$=r$,i$=class s$ extends ce{constructor(e){super({name:"GlobalTableNotFoundException",$fault:"client",...e}),this.name="GlobalTableNotFoundException",this.$fault="client",Object.setPrototypeOf(this,s$.prototype)}};p(i$,"GlobalTableNotFoundException");var a$=i$,dCe={CANCELLED:"CANCELLED",CANCELLING:"CANCELLING",COMPLETED:"COMPLETED",FAILED:"FAILED",IN_PROGRESS:"IN_PROGRESS"},lCe={GZIP:"GZIP",NONE:"NONE",ZSTD:"ZSTD"},uCe={CSV:"CSV",DYNAMODB_JSON:"DYNAMODB_JSON",ION:"ION"},c$=class d$ extends ce{constructor(e){super({name:"ImportNotFoundException",$fault:"client",...e}),this.name="ImportNotFoundException",this.$fault="client",Object.setPrototypeOf(this,d$.prototype)}};p(c$,"ImportNotFoundException");var l$=c$,pCe={ACTIVE:"ACTIVE",DISABLED:"DISABLED",DISABLING:"DISABLING",ENABLE_FAILED:"ENABLE_FAILED",ENABLING:"ENABLING",UPDATING:"UPDATING"},u$=class p$ extends ce{constructor(e){super({name:"DuplicateItemException",$fault:"client",...e}),this.name="DuplicateItemException",this.$fault="client",Object.setPrototypeOf(this,p$.prototype)}};p(u$,"DuplicateItemException");var m$=u$,h$=class f$ extends ce{constructor(e){super({name:"IdempotentParameterMismatchException",$fault:"client",...e}),this.name="IdempotentParameterMismatchException",this.$fault="client",Object.setPrototypeOf(this,f$.prototype),this.Message=e.Message}};p(h$,"IdempotentParameterMismatchException");var g$=h$,y$=class _$ extends ce{constructor(e){super({name:"TransactionInProgressException",$fault:"client",...e}),this.name="TransactionInProgressException",this.$fault="client",Object.setPrototypeOf(this,_$.prototype),this.Message=e.Message}};p(y$,"TransactionInProgressException");var v$=y$,E$=class C$ extends ce{constructor(e){super({name:"ExportConflictException",$fault:"client",...e}),this.name="ExportConflictException",this.$fault="client",Object.setPrototypeOf(this,C$.prototype)}};p(E$,"ExportConflictException");var S$=E$,T$=class b$ extends ce{constructor(e){super({name:"InvalidExportTimeException",$fault:"client",...e}),this.name="InvalidExportTimeException",this.$fault="client",Object.setPrototypeOf(this,b$.prototype)}};p(T$,"InvalidExportTimeException");var A$=T$,I$=class R$ extends ce{constructor(e){super({name:"PointInTimeRecoveryUnavailableException",$fault:"client",...e}),this.name="PointInTimeRecoveryUnavailableException",this.$fault="client",Object.setPrototypeOf(this,R$.prototype)}};p(I$,"PointInTimeRecoveryUnavailableException");var w$=I$,P$=class O$ extends ce{constructor(e){super({name:"ImportConflictException",$fault:"client",...e}),this.name="ImportConflictException",this.$fault="client",Object.setPrototypeOf(this,O$.prototype)}};p(P$,"ImportConflictException");var x$=P$,mCe={ALL_ATTRIBUTES:"ALL_ATTRIBUTES",ALL_PROJECTED_ATTRIBUTES:"ALL_PROJECTED_ATTRIBUTES",COUNT:"COUNT",SPECIFIC_ATTRIBUTES:"SPECIFIC_ATTRIBUTES"},N$=class D$ extends ce{constructor(e){super({name:"TableAlreadyExistsException",$fault:"client",...e}),this.name="TableAlreadyExistsException",this.$fault="client",Object.setPrototypeOf(this,D$.prototype)}};p(N$,"TableAlreadyExistsException");var k$=N$,M$=class L$ extends ce{constructor(e){super({name:"InvalidRestoreTimeException",$fault:"client",...e}),this.name="InvalidRestoreTimeException",this.$fault="client",Object.setPrototypeOf(this,L$.prototype)}};p(M$,"InvalidRestoreTimeException");var U$=M$,F$=class B$ extends ce{constructor(e){super({name:"ReplicaAlreadyExistsException",$fault:"client",...e}),this.name="ReplicaAlreadyExistsException",this.$fault="client",Object.setPrototypeOf(this,B$.prototype)}};p(F$,"ReplicaAlreadyExistsException");var q$=F$,H$=class j$ extends ce{constructor(e){super({name:"ReplicaNotFoundException",$fault:"client",...e}),this.name="ReplicaNotFoundException",this.$fault="client",Object.setPrototypeOf(this,j$.prototype)}};p(H$,"ReplicaNotFoundException");var G$=H$,$$=class z$ extends ce{constructor(e){super({name:"IndexNotFoundException",$fault:"client",...e}),this.name="IndexNotFoundException",this.$fault="client",Object.setPrototypeOf(this,z$.prototype)}};p($$,"IndexNotFoundException");var V$=$$,Xf;(t=>{t.visit=p((e,r)=>e.S!==void 0?r.S(e.S):e.N!==void 0?r.N(e.N):e.B!==void 0?r.B(e.B):e.SS!==void 0?r.SS(e.SS):e.NS!==void 0?r.NS(e.NS):e.BS!==void 0?r.BS(e.BS):e.M!==void 0?r.M(e.M):e.L!==void 0?r.L(e.L):e.NULL!==void 0?r.NULL(e.NULL):e.BOOL!==void 0?r.BOOL(e.BOOL):r._(e.$unknown[0],e.$unknown[1]),"visit")})(Xf||(Xf={}));var K$=class W$ extends ce{constructor(e){super({name:"ConditionalCheckFailedException",$fault:"client",...e}),this.name="ConditionalCheckFailedException",this.$fault="client",Object.setPrototypeOf(this,W$.prototype),this.Item=e.Item}};p(K$,"ConditionalCheckFailedException");var Q$=K$,Y$=class J$ extends ce{constructor(e){super({name:"TransactionCanceledException",$fault:"client",...e}),this.name="TransactionCanceledException",this.$fault="client",Object.setPrototypeOf(this,J$.prototype),this.Message=e.Message,this.CancellationReasons=e.CancellationReasons}};p(Y$,"TransactionCanceledException");var X$=Y$,hCe=p(async(t,e)=>{let r=H("BatchExecuteStatement"),n;return n=JSON.stringify(nbe(t,e)),z(e,r,"/",void 0,n)},"se_BatchExecuteStatementCommand"),fCe=p(async(t,e)=>{let r=H("BatchGetItem"),n;return n=JSON.stringify(obe(t,e)),z(e,r,"/",void 0,n)},"se_BatchGetItemCommand"),gCe=p(async(t,e)=>{let r=H("BatchWriteItem"),n;return n=JSON.stringify(abe(t,e)),z(e,r,"/",void 0,n)},"se_BatchWriteItemCommand"),yCe=p(async(t,e)=>{let r=H("CreateBackup"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_CreateBackupCommand"),_Ce=p(async(t,e)=>{let r=H("CreateGlobalTable"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_CreateGlobalTableCommand"),vCe=p(async(t,e)=>{let r=H("CreateTable"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_CreateTableCommand"),ECe=p(async(t,e)=>{let r=H("DeleteBackup"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_DeleteBackupCommand"),CCe=p(async(t,e)=>{let r=H("DeleteItem"),n;return n=JSON.stringify(pbe(t,e)),z(e,r,"/",void 0,n)},"se_DeleteItemCommand"),SCe=p(async(t,e)=>{let r=H("DeleteResourcePolicy"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_DeleteResourcePolicyCommand"),TCe=p(async(t,e)=>{let r=H("DeleteTable"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_DeleteTableCommand"),bCe=p(async(t,e)=>{let r=H("DescribeBackup"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_DescribeBackupCommand"),ACe=p(async(t,e)=>{let r=H("DescribeContinuousBackups"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_DescribeContinuousBackupsCommand"),ICe=p(async(t,e)=>{let r=H("DescribeContributorInsights"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_DescribeContributorInsightsCommand"),RCe=p(async(t,e)=>{let r=H("DescribeEndpoints"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_DescribeEndpointsCommand"),wCe=p(async(t,e)=>{let r=H("DescribeExport"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_DescribeExportCommand"),PCe=p(async(t,e)=>{let r=H("DescribeGlobalTable"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_DescribeGlobalTableCommand"),OCe=p(async(t,e)=>{let r=H("DescribeGlobalTableSettings"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_DescribeGlobalTableSettingsCommand"),xCe=p(async(t,e)=>{let r=H("DescribeImport"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_DescribeImportCommand"),NCe=p(async(t,e)=>{let r=H("DescribeKinesisStreamingDestination"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_DescribeKinesisStreamingDestinationCommand"),DCe=p(async(t,e)=>{let r=H("DescribeLimits"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_DescribeLimitsCommand"),kCe=p(async(t,e)=>{let r=H("DescribeTable"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_DescribeTableCommand"),MCe=p(async(t,e)=>{let r=H("DescribeTableReplicaAutoScaling"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_DescribeTableReplicaAutoScalingCommand"),LCe=p(async(t,e)=>{let r=H("DescribeTimeToLive"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_DescribeTimeToLiveCommand"),UCe=p(async(t,e)=>{let r=H("DisableKinesisStreamingDestination"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_DisableKinesisStreamingDestinationCommand"),FCe=p(async(t,e)=>{let r=H("EnableKinesisStreamingDestination"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_EnableKinesisStreamingDestinationCommand"),BCe=p(async(t,e)=>{let r=H("ExecuteStatement"),n;return n=JSON.stringify(hbe(t,e)),z(e,r,"/",void 0,n)},"se_ExecuteStatementCommand"),qCe=p(async(t,e)=>{let r=H("ExecuteTransaction"),n;return n=JSON.stringify(fbe(t,e)),z(e,r,"/",void 0,n)},"se_ExecuteTransactionCommand"),HCe=p(async(t,e)=>{let r=H("ExportTableToPointInTime"),n;return n=JSON.stringify(ybe(t,e)),z(e,r,"/",void 0,n)},"se_ExportTableToPointInTimeCommand"),jCe=p(async(t,e)=>{let r=H("GetItem"),n;return n=JSON.stringify(vbe(t,e)),z(e,r,"/",void 0,n)},"se_GetItemCommand"),GCe=p(async(t,e)=>{let r=H("GetResourcePolicy"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_GetResourcePolicyCommand"),$Ce=p(async(t,e)=>{let r=H("ImportTable"),n;return n=JSON.stringify(bbe(t,e)),z(e,r,"/",void 0,n)},"se_ImportTableCommand"),zCe=p(async(t,e)=>{let r=H("ListBackups"),n;return n=JSON.stringify(Obe(t,e)),z(e,r,"/",void 0,n)},"se_ListBackupsCommand"),VCe=p(async(t,e)=>{let r=H("ListContributorInsights"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_ListContributorInsightsCommand"),KCe=p(async(t,e)=>{let r=H("ListExports"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_ListExportsCommand"),WCe=p(async(t,e)=>{let r=H("ListGlobalTables"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_ListGlobalTablesCommand"),QCe=p(async(t,e)=>{let r=H("ListImports"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_ListImportsCommand"),YCe=p(async(t,e)=>{let r=H("ListTables"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_ListTablesCommand"),JCe=p(async(t,e)=>{let r=H("ListTagsOfResource"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_ListTagsOfResourceCommand"),XCe=p(async(t,e)=>{let r=H("PutItem"),n;return n=JSON.stringify(Lbe(t,e)),z(e,r,"/",void 0,n)},"se_PutItemCommand"),ZCe=p(async(t,e)=>{let r=H("PutResourcePolicy"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_PutResourcePolicyCommand"),eSe=p(async(t,e)=>{let r=H("Query"),n;return n=JSON.stringify(Fbe(t,e)),z(e,r,"/",void 0,n)},"se_QueryCommand"),tSe=p(async(t,e)=>{let r=H("RestoreTableFromBackup"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_RestoreTableFromBackupCommand"),rSe=p(async(t,e)=>{let r=H("RestoreTableToPointInTime"),n;return n=JSON.stringify(Kbe(t,e)),z(e,r,"/",void 0,n)},"se_RestoreTableToPointInTimeCommand"),nSe=p(async(t,e)=>{let r=H("Scan"),n;return n=JSON.stringify(Wbe(t,e)),z(e,r,"/",void 0,n)},"se_ScanCommand"),oSe=p(async(t,e)=>{let r=H("TagResource"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_TagResourceCommand"),iSe=p(async(t,e)=>{let r=H("TransactGetItems"),n;return n=JSON.stringify(Jbe(t,e)),z(e,r,"/",void 0,n)},"se_TransactGetItemsCommand"),sSe=p(async(t,e)=>{let r=H("TransactWriteItems"),n;return n=JSON.stringify(eAe(t,e)),z(e,r,"/",void 0,n)},"se_TransactWriteItemsCommand"),aSe=p(async(t,e)=>{let r=H("UntagResource"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_UntagResourceCommand"),cSe=p(async(t,e)=>{let r=H("UpdateContinuousBackups"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_UpdateContinuousBackupsCommand"),dSe=p(async(t,e)=>{let r=H("UpdateContributorInsights"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_UpdateContributorInsightsCommand"),lSe=p(async(t,e)=>{let r=H("UpdateGlobalTable"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_UpdateGlobalTableCommand"),uSe=p(async(t,e)=>{let r=H("UpdateGlobalTableSettings"),n;return n=JSON.stringify(rAe(t,e)),z(e,r,"/",void 0,n)},"se_UpdateGlobalTableSettingsCommand"),pSe=p(async(t,e)=>{let r=H("UpdateItem"),n;return n=JSON.stringify(nAe(t,e)),z(e,r,"/",void 0,n)},"se_UpdateItemCommand"),mSe=p(async(t,e)=>{let r=H("UpdateKinesisStreamingDestination"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_UpdateKinesisStreamingDestinationCommand"),hSe=p(async(t,e)=>{let r=H("UpdateTable"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_UpdateTableCommand"),fSe=p(async(t,e)=>{let r=H("UpdateTableReplicaAutoScaling"),n;return n=JSON.stringify(oAe(t,e)),z(e,r,"/",void 0,n)},"se_UpdateTableReplicaAutoScalingCommand"),gSe=p(async(t,e)=>{let r=H("UpdateTimeToLive"),n;return n=JSON.stringify((0,l._json)(t)),z(e,r,"/",void 0,n)},"se_UpdateTimeToLiveCommand"),ySe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=mAe(r,e),{$metadata:P(t),...n}},"de_BatchExecuteStatementCommand"),_Se=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=hAe(r,e),{$metadata:P(t),...n}},"de_BatchGetItemCommand"),vSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=vAe(r,e),{$metadata:P(t),...n}},"de_BatchWriteItemCommand"),ESe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=AAe(r,e),{$metadata:P(t),...n}},"de_CreateBackupCommand"),CSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=IAe(r,e),{$metadata:P(t),...n}},"de_CreateGlobalTableCommand"),SSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=RAe(r,e),{$metadata:P(t),...n}},"de_CreateTableCommand"),TSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=wAe(r,e),{$metadata:P(t),...n}},"de_DeleteBackupCommand"),bSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=PAe(r,e),{$metadata:P(t),...n}},"de_DeleteItemCommand"),ASe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=(0,l._json)(r),{$metadata:P(t),...n}},"de_DeleteResourcePolicyCommand"),ISe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=xAe(r,e),{$metadata:P(t),...n}},"de_DeleteTableCommand"),RSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=NAe(r,e),{$metadata:P(t),...n}},"de_DescribeBackupCommand"),wSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=DAe(r,e),{$metadata:P(t),...n}},"de_DescribeContinuousBackupsCommand"),PSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=kAe(r,e),{$metadata:P(t),...n}},"de_DescribeContributorInsightsCommand"),OSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=(0,l._json)(r),{$metadata:P(t),...n}},"de_DescribeEndpointsCommand"),xSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=MAe(r,e),{$metadata:P(t),...n}},"de_DescribeExportCommand"),NSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=LAe(r,e),{$metadata:P(t),...n}},"de_DescribeGlobalTableCommand"),DSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=UAe(r,e),{$metadata:P(t),...n}},"de_DescribeGlobalTableSettingsCommand"),kSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=FAe(r,e),{$metadata:P(t),...n}},"de_DescribeImportCommand"),MSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=(0,l._json)(r),{$metadata:P(t),...n}},"de_DescribeKinesisStreamingDestinationCommand"),LSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=(0,l._json)(r),{$metadata:P(t),...n}},"de_DescribeLimitsCommand"),USe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=BAe(r,e),{$metadata:P(t),...n}},"de_DescribeTableCommand"),FSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=qAe(r,e),{$metadata:P(t),...n}},"de_DescribeTableReplicaAutoScalingCommand"),BSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=(0,l._json)(r),{$metadata:P(t),...n}},"de_DescribeTimeToLiveCommand"),qSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=(0,l._json)(r),{$metadata:P(t),...n}},"de_DisableKinesisStreamingDestinationCommand"),HSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=(0,l._json)(r),{$metadata:P(t),...n}},"de_EnableKinesisStreamingDestinationCommand"),jSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=HAe(r,e),{$metadata:P(t),...n}},"de_ExecuteStatementCommand"),GSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=jAe(r,e),{$metadata:P(t),...n}},"de_ExecuteTransactionCommand"),$Se=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=GAe(r,e),{$metadata:P(t),...n}},"de_ExportTableToPointInTimeCommand"),zSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=$Ae(r,e),{$metadata:P(t),...n}},"de_GetItemCommand"),VSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=(0,l._json)(r),{$metadata:P(t),...n}},"de_GetResourcePolicyCommand"),KSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=QAe(r,e),{$metadata:P(t),...n}},"de_ImportTableCommand"),WSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=oIe(r,e),{$metadata:P(t),...n}},"de_ListBackupsCommand"),QSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=(0,l._json)(r),{$metadata:P(t),...n}},"de_ListContributorInsightsCommand"),YSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=(0,l._json)(r),{$metadata:P(t),...n}},"de_ListExportsCommand"),JSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=(0,l._json)(r),{$metadata:P(t),...n}},"de_ListGlobalTablesCommand"),XSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=iIe(r,e),{$metadata:P(t),...n}},"de_ListImportsCommand"),ZSe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=(0,l._json)(r),{$metadata:P(t),...n}},"de_ListTablesCommand"),eTe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=(0,l._json)(r),{$metadata:P(t),...n}},"de_ListTagsOfResourceCommand"),tTe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=lIe(r,e),{$metadata:P(t),...n}},"de_PutItemCommand"),rTe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=(0,l._json)(r),{$metadata:P(t),...n}},"de_PutResourcePolicyCommand"),nTe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=pIe(r,e),{$metadata:P(t),...n}},"de_QueryCommand"),oTe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=SIe(r,e),{$metadata:P(t),...n}},"de_RestoreTableFromBackupCommand"),iTe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=TIe(r,e),{$metadata:P(t),...n}},"de_RestoreTableToPointInTimeCommand"),sTe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=bIe(r,e),{$metadata:P(t),...n}},"de_ScanCommand"),aTe=p(async(t,e)=>t.statusCode>=300?$(t,e):(await(0,l.collectBody)(t.body,e),{$metadata:P(t)}),"de_TagResourceCommand"),cTe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=RIe(r,e),{$metadata:P(t),...n}},"de_TransactGetItemsCommand"),dTe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=PIe(r,e),{$metadata:P(t),...n}},"de_TransactWriteItemsCommand"),lTe=p(async(t,e)=>t.statusCode>=300?$(t,e):(await(0,l.collectBody)(t.body,e),{$metadata:P(t)}),"de_UntagResourceCommand"),uTe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=OIe(r,e),{$metadata:P(t),...n}},"de_UpdateContinuousBackupsCommand"),pTe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=(0,l._json)(r),{$metadata:P(t),...n}},"de_UpdateContributorInsightsCommand"),mTe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=xIe(r,e),{$metadata:P(t),...n}},"de_UpdateGlobalTableCommand"),hTe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=NIe(r,e),{$metadata:P(t),...n}},"de_UpdateGlobalTableSettingsCommand"),fTe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=DIe(r,e),{$metadata:P(t),...n}},"de_UpdateItemCommand"),gTe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=(0,l._json)(r),{$metadata:P(t),...n}},"de_UpdateKinesisStreamingDestinationCommand"),yTe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=kIe(r,e),{$metadata:P(t),...n}},"de_UpdateTableCommand"),_Te=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=MIe(r,e),{$metadata:P(t),...n}},"de_UpdateTableReplicaAutoScalingCommand"),vTe=p(async(t,e)=>{if(t.statusCode>=300)return $(t,e);let r=await(0,L.parseJsonBody)(t.body,e),n={};return n=(0,l._json)(r),{$metadata:P(t),...n}},"de_UpdateTimeToLiveCommand"),$=p(async(t,e)=>{let r={...t,body:await(0,L.parseJsonErrorBody)(t.body,e)},n=(0,L.loadRestJsonErrorCode)(t,r.body);switch(n){case"InternalServerError":case"com.amazonaws.dynamodb#InternalServerError":throw await DTe(r,e);case"RequestLimitExceeded":case"com.amazonaws.dynamodb#RequestLimitExceeded":throw await $Te(r,e);case"InvalidEndpointException":case"com.amazonaws.dynamodb#InvalidEndpointException":throw await kTe(r,e);case"ProvisionedThroughputExceededException":case"com.amazonaws.dynamodb#ProvisionedThroughputExceededException":throw await HTe(r,e);case"ResourceNotFoundException":case"com.amazonaws.dynamodb#ResourceNotFoundException":throw await VTe(r,e);case"ItemCollectionSizeLimitExceededException":case"com.amazonaws.dynamodb#ItemCollectionSizeLimitExceededException":throw await UTe(r,e);case"BackupInUseException":case"com.amazonaws.dynamodb#BackupInUseException":throw await ETe(r,e);case"ContinuousBackupsUnavailableException":case"com.amazonaws.dynamodb#ContinuousBackupsUnavailableException":throw await TTe(r,e);case"LimitExceededException":case"com.amazonaws.dynamodb#LimitExceededException":throw await FTe(r,e);case"TableInUseException":case"com.amazonaws.dynamodb#TableInUseException":throw await WTe(r,e);case"TableNotFoundException":case"com.amazonaws.dynamodb#TableNotFoundException":throw await QTe(r,e);case"GlobalTableAlreadyExistsException":case"com.amazonaws.dynamodb#GlobalTableAlreadyExistsException":throw await RTe(r,e);case"ResourceInUseException":case"com.amazonaws.dynamodb#ResourceInUseException":throw await zTe(r,e);case"BackupNotFoundException":case"com.amazonaws.dynamodb#BackupNotFoundException":throw await CTe(r,e);case"ConditionalCheckFailedException":case"com.amazonaws.dynamodb#ConditionalCheckFailedException":throw await STe(r,e);case"TransactionConflictException":case"com.amazonaws.dynamodb#TransactionConflictException":throw await JTe(r,e);case"PolicyNotFoundException":case"com.amazonaws.dynamodb#PolicyNotFoundException":throw await qTe(r,e);case"ExportNotFoundException":case"com.amazonaws.dynamodb#ExportNotFoundException":throw await ITe(r,e);case"GlobalTableNotFoundException":case"com.amazonaws.dynamodb#GlobalTableNotFoundException":throw await wTe(r,e);case"ImportNotFoundException":case"com.amazonaws.dynamodb#ImportNotFoundException":throw await xTe(r,e);case"DuplicateItemException":case"com.amazonaws.dynamodb#DuplicateItemException":throw await bTe(r,e);case"IdempotentParameterMismatchException":case"com.amazonaws.dynamodb#IdempotentParameterMismatchException":throw await PTe(r,e);case"TransactionCanceledException":case"com.amazonaws.dynamodb#TransactionCanceledException":throw await YTe(r,e);case"TransactionInProgressException":case"com.amazonaws.dynamodb#TransactionInProgressException":throw await XTe(r,e);case"ExportConflictException":case"com.amazonaws.dynamodb#ExportConflictException":throw await ATe(r,e);case"InvalidExportTimeException":case"com.amazonaws.dynamodb#InvalidExportTimeException":throw await MTe(r,e);case"PointInTimeRecoveryUnavailableException":case"com.amazonaws.dynamodb#PointInTimeRecoveryUnavailableException":throw await BTe(r,e);case"ImportConflictException":case"com.amazonaws.dynamodb#ImportConflictException":throw await OTe(r,e);case"TableAlreadyExistsException":case"com.amazonaws.dynamodb#TableAlreadyExistsException":throw await KTe(r,e);case"InvalidRestoreTimeException":case"com.amazonaws.dynamodb#InvalidRestoreTimeException":throw await LTe(r,e);case"ReplicaAlreadyExistsException":case"com.amazonaws.dynamodb#ReplicaAlreadyExistsException":throw await jTe(r,e);case"ReplicaNotFoundException":case"com.amazonaws.dynamodb#ReplicaNotFoundException":throw await GTe(r,e);case"IndexNotFoundException":case"com.amazonaws.dynamodb#IndexNotFoundException":throw await NTe(r,e);default:let o=r.body;return FIe({output:t,parsedBody:o,errorCode:n})}},"de_CommandError"),ETe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new lG({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_BackupInUseExceptionRes"),CTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new mG({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_BackupNotFoundExceptionRes"),STe=p(async(t,e)=>{let r=t.body,n=bAe(r,e),o=new Q$({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_ConditionalCheckFailedExceptionRes"),TTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new kG({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_ContinuousBackupsUnavailableExceptionRes"),bTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new m$({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_DuplicateItemExceptionRes"),ATe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new S$({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_ExportConflictExceptionRes"),ITe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new o$({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_ExportNotFoundExceptionRes"),RTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new VG({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_GlobalTableAlreadyExistsExceptionRes"),wTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new a$({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_GlobalTableNotFoundExceptionRes"),PTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new g$({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_IdempotentParameterMismatchExceptionRes"),OTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new x$({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_ImportConflictExceptionRes"),xTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new l$({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_ImportNotFoundExceptionRes"),NTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new V$({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_IndexNotFoundExceptionRes"),DTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new gG({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_InternalServerErrorRes"),kTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new SG({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_InvalidEndpointExceptionRes"),MTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new A$({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_InvalidExportTimeExceptionRes"),LTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new U$({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_InvalidRestoreTimeExceptionRes"),UTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new xG({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_ItemCollectionSizeLimitExceededExceptionRes"),FTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new UG({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_LimitExceededExceptionRes"),BTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new w$({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_PointInTimeRecoveryUnavailableExceptionRes"),qTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new t$({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_PolicyNotFoundExceptionRes"),HTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new AG({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_ProvisionedThroughputExceededExceptionRes"),jTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new q$({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_ReplicaAlreadyExistsExceptionRes"),GTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new G$({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_ReplicaNotFoundExceptionRes"),$Te=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new vG({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_RequestLimitExceededRes"),zTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new QG({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_ResourceInUseExceptionRes"),VTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new wG({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_ResourceNotFoundExceptionRes"),KTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new k$({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_TableAlreadyExistsExceptionRes"),WTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new qG({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_TableInUseExceptionRes"),QTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new GG({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_TableNotFoundExceptionRes"),YTe=p(async(t,e)=>{let r=t.body,n=wIe(r,e),o=new X$({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_TransactionCanceledExceptionRes"),JTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new XG({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_TransactionConflictExceptionRes"),XTe=p(async(t,e)=>{let r=t.body,n=(0,l._json)(r),o=new v$({$metadata:P(t),...n});return(0,l.decorateServiceException)(o,r)},"de_TransactionInProgressExceptionRes"),ZTe=p((t,e)=>Object.entries(t).reduce((r,[n,o])=>(o===null||(r[n]=ebe(o,e)),r),{}),"se_AttributeUpdates"),Kn=p((t,e)=>Xf.visit(t,{B:r=>({B:e.base64Encoder(r)}),BOOL:r=>({BOOL:r}),BS:r=>({BS:dbe(r,e)}),L:r=>({L:Pbe(r,e)}),M:r=>({M:xbe(r,e)}),N:r=>({N:r}),NS:r=>({NS:(0,l._json)(r)}),NULL:r=>({NULL:r}),S:r=>({S:r}),SS:r=>({SS:(0,l._json)(r)}),_:(r,n)=>({name:n})}),"se_AttributeValue"),Z$=p((t,e)=>t.filter(r=>r!=null).map(r=>Kn(r,e)),"se_AttributeValueList"),ebe=p((t,e)=>(0,l.take)(t,{Action:[],Value:r=>Kn(r,e)}),"se_AttributeValueUpdate"),tbe=p((t,e)=>(0,l.take)(t,{PolicyName:[],TargetTrackingScalingPolicyConfiguration:r=>rbe(r,e)}),"se_AutoScalingPolicyUpdate"),ti=p((t,e)=>(0,l.take)(t,{AutoScalingDisabled:[],AutoScalingRoleArn:[],MaximumUnits:[],MinimumUnits:[],ScalingPolicyUpdate:r=>tbe(r,e)}),"se_AutoScalingSettingsUpdate"),rbe=p((t,e)=>(0,l.take)(t,{DisableScaleIn:[],ScaleInCooldown:[],ScaleOutCooldown:[],TargetValue:l.serializeFloat}),"se_AutoScalingTargetTrackingScalingPolicyConfigurationUpdate"),nbe=p((t,e)=>(0,l.take)(t,{ReturnConsumedCapacity:[],Statements:r=>kbe(r,e)}),"se_BatchExecuteStatementInput"),obe=p((t,e)=>(0,l.take)(t,{RequestItems:r=>ibe(r,e),ReturnConsumedCapacity:[]}),"se_BatchGetItemInput"),ibe=p((t,e)=>Object.entries(t).reduce((r,[n,o])=>(o===null||(r[n]=wbe(o,e)),r),{}),"se_BatchGetRequestMap"),sbe=p((t,e)=>(0,l.take)(t,{ConsistentRead:[],Parameters:r=>wS(r,e),ReturnValuesOnConditionCheckFailure:[],Statement:[]}),"se_BatchStatementRequest"),abe=p((t,e)=>(0,l.take)(t,{RequestItems:r=>cbe(r,e),ReturnConsumedCapacity:[],ReturnItemCollectionMetrics:[]}),"se_BatchWriteItemInput"),cbe=p((t,e)=>Object.entries(t).reduce((r,[n,o])=>(o===null||(r[n]=sAe(o,e)),r),{}),"se_BatchWriteItemRequestMap"),dbe=p((t,e)=>t.filter(r=>r!=null).map(r=>e.base64Encoder(r)),"se_BinarySetAttributeValue"),e2=p((t,e)=>(0,l.take)(t,{AttributeValueList:r=>Z$(r,e),ComparisonOperator:[]}),"se_Condition"),lbe=p((t,e)=>(0,l.take)(t,{ConditionExpression:[],ExpressionAttributeNames:l._json,ExpressionAttributeValues:r=>Wn(r,e),Key:r=>$r(r,e),ReturnValuesOnConditionCheckFailure:[],TableName:[]}),"se_ConditionCheck"),ube=p((t,e)=>(0,l.take)(t,{ConditionExpression:[],ExpressionAttributeNames:l._json,ExpressionAttributeValues:r=>Wn(r,e),Key:r=>$r(r,e),ReturnValuesOnConditionCheckFailure:[],TableName:[]}),"se_Delete"),pbe=p((t,e)=>(0,l.take)(t,{ConditionExpression:[],ConditionalOperator:[],Expected:r=>RS(r,e),ExpressionAttributeNames:l._json,ExpressionAttributeValues:r=>Wn(r,e),Key:r=>$r(r,e),ReturnConsumedCapacity:[],ReturnItemCollectionMetrics:[],ReturnValues:[],ReturnValuesOnConditionCheckFailure:[],TableName:[]}),"se_DeleteItemInput"),mbe=p((t,e)=>(0,l.take)(t,{Key:r=>$r(r,e)}),"se_DeleteRequest"),hbe=p((t,e)=>(0,l.take)(t,{ConsistentRead:[],Limit:[],NextToken:[],Parameters:r=>wS(r,e),ReturnConsumedCapacity:[],ReturnValuesOnConditionCheckFailure:[],Statement:[]}),"se_ExecuteStatementInput"),fbe=p((t,e)=>(0,l.take)(t,{ClientRequestToken:[!0,r=>r??(0,eg.v4)()],ReturnConsumedCapacity:[],TransactStatements:r=>Dbe(r,e)}),"se_ExecuteTransactionInput"),RS=p((t,e)=>Object.entries(t).reduce((r,[n,o])=>(o===null||(r[n]=gbe(o,e)),r),{}),"se_ExpectedAttributeMap"),gbe=p((t,e)=>(0,l.take)(t,{AttributeValueList:r=>Z$(r,e),ComparisonOperator:[],Exists:[],Value:r=>Kn(r,e)}),"se_ExpectedAttributeValue"),ybe=p((t,e)=>(0,l.take)(t,{ClientToken:[!0,r=>r??(0,eg.v4)()],ExportFormat:[],ExportTime:r=>r.getTime()/1e3,ExportType:[],IncrementalExportSpecification:r=>Abe(r,e),S3Bucket:[],S3BucketOwner:[],S3Prefix:[],S3SseAlgorithm:[],S3SseKmsKeyId:[],TableArn:[]}),"se_ExportTableToPointInTimeInput"),Wn=p((t,e)=>Object.entries(t).reduce((r,[n,o])=>(o===null||(r[n]=Kn(o,e)),r),{}),"se_ExpressionAttributeValueMap"),t2=p((t,e)=>Object.entries(t).reduce((r,[n,o])=>(o===null||(r[n]=e2(o,e)),r),{}),"se_FilterConditionMap"),_be=p((t,e)=>(0,l.take)(t,{ExpressionAttributeNames:l._json,Key:r=>$r(r,e),ProjectionExpression:[],TableName:[]}),"se_Get"),vbe=p((t,e)=>(0,l.take)(t,{AttributesToGet:l._json,ConsistentRead:[],ExpressionAttributeNames:l._json,Key:r=>$r(r,e),ProjectionExpression:[],ReturnConsumedCapacity:[],TableName:[]}),"se_GetItemInput"),Ebe=p((t,e)=>(0,l.take)(t,{IndexName:[],ProvisionedWriteCapacityAutoScalingUpdate:r=>ti(r,e)}),"se_GlobalSecondaryIndexAutoScalingUpdate"),Cbe=p((t,e)=>t.filter(r=>r!=null).map(r=>Ebe(r,e)),"se_GlobalSecondaryIndexAutoScalingUpdateList"),Sbe=p((t,e)=>(0,l.take)(t,{IndexName:[],ProvisionedWriteCapacityAutoScalingSettingsUpdate:r=>ti(r,e),ProvisionedWriteCapacityUnits:[]}),"se_GlobalTableGlobalSecondaryIndexSettingsUpdate"),Tbe=p((t,e)=>t.filter(r=>r!=null).map(r=>Sbe(r,e)),"se_GlobalTableGlobalSecondaryIndexSettingsUpdateList"),bbe=p((t,e)=>(0,l.take)(t,{ClientToken:[!0,r=>r??(0,eg.v4)()],InputCompressionType:[],InputFormat:[],InputFormatOptions:l._json,S3BucketSource:l._json,TableCreationParameters:l._json}),"se_ImportTableInput"),Abe=p((t,e)=>(0,l.take)(t,{ExportFromTime:r=>r.getTime()/1e3,ExportToTime:r=>r.getTime()/1e3,ExportViewType:[]}),"se_IncrementalExportSpecification"),$r=p((t,e)=>Object.entries(t).reduce((r,[n,o])=>(o===null||(r[n]=Kn(o,e)),r),{}),"se_Key"),Ibe=p((t,e)=>Object.entries(t).reduce((r,[n,o])=>(o===null||(r[n]=e2(o,e)),r),{}),"se_KeyConditions"),Rbe=p((t,e)=>t.filter(r=>r!=null).map(r=>$r(r,e)),"se_KeyList"),wbe=p((t,e)=>(0,l.take)(t,{AttributesToGet:l._json,ConsistentRead:[],ExpressionAttributeNames:l._json,Keys:r=>Rbe(r,e),ProjectionExpression:[]}),"se_KeysAndAttributes"),Pbe=p((t,e)=>t.filter(r=>r!=null).map(r=>Kn(r,e)),"se_ListAttributeValue"),Obe=p((t,e)=>(0,l.take)(t,{BackupType:[],ExclusiveStartBackupArn:[],Limit:[],TableName:[],TimeRangeLowerBound:r=>r.getTime()/1e3,TimeRangeUpperBound:r=>r.getTime()/1e3}),"se_ListBackupsInput"),xbe=p((t,e)=>Object.entries(t).reduce((r,[n,o])=>(o===null||(r[n]=Kn(o,e)),r),{}),"se_MapAttributeValue"),Nbe=p((t,e)=>(0,l.take)(t,{Parameters:r=>wS(r,e),ReturnValuesOnConditionCheckFailure:[],Statement:[]}),"se_ParameterizedStatement"),Dbe=p((t,e)=>t.filter(r=>r!=null).map(r=>Nbe(r,e)),"se_ParameterizedStatements"),kbe=p((t,e)=>t.filter(r=>r!=null).map(r=>sbe(r,e)),"se_PartiQLBatchRequest"),wS=p((t,e)=>t.filter(r=>r!=null).map(r=>Kn(r,e)),"se_PreparedStatementParameters"),Mbe=p((t,e)=>(0,l.take)(t,{ConditionExpression:[],ExpressionAttributeNames:l._json,ExpressionAttributeValues:r=>Wn(r,e),Item:r=>PS(r,e),ReturnValuesOnConditionCheckFailure:[],TableName:[]}),"se_Put"),Lbe=p((t,e)=>(0,l.take)(t,{ConditionExpression:[],ConditionalOperator:[],Expected:r=>RS(r,e),ExpressionAttributeNames:l._json,ExpressionAttributeValues:r=>Wn(r,e),Item:r=>PS(r,e),ReturnConsumedCapacity:[],ReturnItemCollectionMetrics:[],ReturnValues:[],ReturnValuesOnConditionCheckFailure:[],TableName:[]}),"se_PutItemInput"),PS=p((t,e)=>Object.entries(t).reduce((r,[n,o])=>(o===null||(r[n]=Kn(o,e)),r),{}),"se_PutItemInputAttributeMap"),Ube=p((t,e)=>(0,l.take)(t,{Item:r=>PS(r,e)}),"se_PutRequest"),Fbe=p((t,e)=>(0,l.take)(t,{AttributesToGet:l._json,ConditionalOperator:[],ConsistentRead:[],ExclusiveStartKey:r=>$r(r,e),ExpressionAttributeNames:l._json,ExpressionAttributeValues:r=>Wn(r,e),FilterExpression:[],IndexName:[],KeyConditionExpression:[],KeyConditions:r=>Ibe(r,e),Limit:[],ProjectionExpression:[],QueryFilter:r=>t2(r,e),ReturnConsumedCapacity:[],ScanIndexForward:[],Select:[],TableName:[]}),"se_QueryInput"),Bbe=p((t,e)=>(0,l.take)(t,{RegionName:[],ReplicaGlobalSecondaryIndexUpdates:r=>jbe(r,e),ReplicaProvisionedReadCapacityAutoScalingUpdate:r=>ti(r,e)}),"se_ReplicaAutoScalingUpdate"),qbe=p((t,e)=>t.filter(r=>r!=null).map(r=>Bbe(r,e)),"se_ReplicaAutoScalingUpdateList"),Hbe=p((t,e)=>(0,l.take)(t,{IndexName:[],ProvisionedReadCapacityAutoScalingUpdate:r=>ti(r,e)}),"se_ReplicaGlobalSecondaryIndexAutoScalingUpdate"),jbe=p((t,e)=>t.filter(r=>r!=null).map(r=>Hbe(r,e)),"se_ReplicaGlobalSecondaryIndexAutoScalingUpdateList"),Gbe=p((t,e)=>(0,l.take)(t,{IndexName:[],ProvisionedReadCapacityAutoScalingSettingsUpdate:r=>ti(r,e),ProvisionedReadCapacityUnits:[]}),"se_ReplicaGlobalSecondaryIndexSettingsUpdate"),$be=p((t,e)=>t.filter(r=>r!=null).map(r=>Gbe(r,e)),"se_ReplicaGlobalSecondaryIndexSettingsUpdateList"),zbe=p((t,e)=>(0,l.take)(t,{RegionName:[],ReplicaGlobalSecondaryIndexSettingsUpdate:r=>$be(r,e),ReplicaProvisionedReadCapacityAutoScalingSettingsUpdate:r=>ti(r,e),ReplicaProvisionedReadCapacityUnits:[],ReplicaTableClass:[]}),"se_ReplicaSettingsUpdate"),Vbe=p((t,e)=>t.filter(r=>r!=null).map(r=>zbe(r,e)),"se_ReplicaSettingsUpdateList"),Kbe=p((t,e)=>(0,l.take)(t,{BillingModeOverride:[],GlobalSecondaryIndexOverride:l._json,LocalSecondaryIndexOverride:l._json,OnDemandThroughputOverride:l._json,ProvisionedThroughputOverride:l._json,RestoreDateTime:r=>r.getTime()/1e3,SSESpecificationOverride:l._json,SourceTableArn:[],SourceTableName:[],TargetTableName:[],UseLatestRestorableTime:[]}),"se_RestoreTableToPointInTimeInput"),Wbe=p((t,e)=>(0,l.take)(t,{AttributesToGet:l._json,ConditionalOperator:[],ConsistentRead:[],ExclusiveStartKey:r=>$r(r,e),ExpressionAttributeNames:l._json,ExpressionAttributeValues:r=>Wn(r,e),FilterExpression:[],IndexName:[],Limit:[],ProjectionExpression:[],ReturnConsumedCapacity:[],ScanFilter:r=>t2(r,e),Segment:[],Select:[],TableName:[],TotalSegments:[]}),"se_ScanInput"),Qbe=p((t,e)=>(0,l.take)(t,{Get:r=>_be(r,e)}),"se_TransactGetItem"),Ybe=p((t,e)=>t.filter(r=>r!=null).map(r=>Qbe(r,e)),"se_TransactGetItemList"),Jbe=p((t,e)=>(0,l.take)(t,{ReturnConsumedCapacity:[],TransactItems:r=>Ybe(r,e)}),"se_TransactGetItemsInput"),Xbe=p((t,e)=>(0,l.take)(t,{ConditionCheck:r=>lbe(r,e),Delete:r=>ube(r,e),Put:r=>Mbe(r,e),Update:r=>tAe(r,e)}),"se_TransactWriteItem"),Zbe=p((t,e)=>t.filter(r=>r!=null).map(r=>Xbe(r,e)),"se_TransactWriteItemList"),eAe=p((t,e)=>(0,l.take)(t,{ClientRequestToken:[!0,r=>r??(0,eg.v4)()],ReturnConsumedCapacity:[],ReturnItemCollectionMetrics:[],TransactItems:r=>Zbe(r,e)}),"se_TransactWriteItemsInput"),tAe=p((t,e)=>(0,l.take)(t,{ConditionExpression:[],ExpressionAttributeNames:l._json,ExpressionAttributeValues:r=>Wn(r,e),Key:r=>$r(r,e),ReturnValuesOnConditionCheckFailure:[],TableName:[],UpdateExpression:[]}),"se_Update"),rAe=p((t,e)=>(0,l.take)(t,{GlobalTableBillingMode:[],GlobalTableGlobalSecondaryIndexSettingsUpdate:r=>Tbe(r,e),GlobalTableName:[],GlobalTableProvisionedWriteCapacityAutoScalingSettingsUpdate:r=>ti(r,e),GlobalTableProvisionedWriteCapacityUnits:[],ReplicaSettingsUpdate:r=>Vbe(r,e)}),"se_UpdateGlobalTableSettingsInput"),nAe=p((t,e)=>(0,l.take)(t,{AttributeUpdates:r=>ZTe(r,e),ConditionExpression:[],ConditionalOperator:[],Expected:r=>RS(r,e),ExpressionAttributeNames:l._json,ExpressionAttributeValues:r=>Wn(r,e),Key:r=>$r(r,e),ReturnConsumedCapacity:[],ReturnItemCollectionMetrics:[],ReturnValues:[],ReturnValuesOnConditionCheckFailure:[],TableName:[],UpdateExpression:[]}),"se_UpdateItemInput"),oAe=p((t,e)=>(0,l.take)(t,{GlobalSecondaryIndexUpdates:r=>Cbe(r,e),ProvisionedWriteCapacityAutoScalingUpdate:r=>ti(r,e),ReplicaUpdates:r=>qbe(r,e),TableName:[]}),"se_UpdateTableReplicaAutoScalingInput"),iAe=p((t,e)=>(0,l.take)(t,{DeleteRequest:r=>mbe(r,e),PutRequest:r=>Ube(r,e)}),"se_WriteRequest"),sAe=p((t,e)=>t.filter(r=>r!=null).map(r=>iAe(r,e)),"se_WriteRequests"),aAe=p((t,e)=>(0,l.take)(t,{ArchivalBackupArn:l.expectString,ArchivalDateTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r))),ArchivalReason:l.expectString}),"de_ArchivalSummary"),dn=p((t,e)=>Object.entries(t).reduce((r,[n,o])=>(o===null||(r[n]=Ya((0,L.awsExpectUnion)(o),e)),r),{}),"de_AttributeMap"),Ya=p((t,e)=>t.B!=null?{B:e.base64Decoder(t.B)}:(0,l.expectBoolean)(t.BOOL)!==void 0?{BOOL:(0,l.expectBoolean)(t.BOOL)}:t.BS!=null?{BS:CAe(t.BS,e)}:t.L!=null?{L:nIe(t.L,e)}:t.M!=null?{M:sIe(t.M,e)}:(0,l.expectString)(t.N)!==void 0?{N:(0,l.expectString)(t.N)}:t.NS!=null?{NS:(0,l._json)(t.NS)}:(0,l.expectBoolean)(t.NULL)!==void 0?{NULL:(0,l.expectBoolean)(t.NULL)}:(0,l.expectString)(t.S)!==void 0?{S:(0,l.expectString)(t.S)}:t.SS!=null?{SS:(0,l._json)(t.SS)}:{$unknown:Object.entries(t)[0]},"de_AttributeValue"),cAe=p((t,e)=>(0,l.take)(t,{PolicyName:l.expectString,TargetTrackingScalingPolicyConfiguration:r=>lAe(r,e)}),"de_AutoScalingPolicyDescription"),dAe=p((t,e)=>(t||[]).filter(n=>n!=null).map(n=>cAe(n,e)),"de_AutoScalingPolicyDescriptionList"),ei=p((t,e)=>(0,l.take)(t,{AutoScalingDisabled:l.expectBoolean,AutoScalingRoleArn:l.expectString,MaximumUnits:l.expectLong,MinimumUnits:l.expectLong,ScalingPolicies:r=>dAe(r,e)}),"de_AutoScalingSettingsDescription"),lAe=p((t,e)=>(0,l.take)(t,{DisableScaleIn:l.expectBoolean,ScaleInCooldown:l.expectInt32,ScaleOutCooldown:l.expectInt32,TargetValue:l.limitedParseDouble}),"de_AutoScalingTargetTrackingScalingPolicyConfigurationDescription"),r2=p((t,e)=>(0,l.take)(t,{BackupDetails:r=>n2(r,e),SourceTableDetails:r=>AIe(r,e),SourceTableFeatureDetails:r=>IIe(r,e)}),"de_BackupDescription"),n2=p((t,e)=>(0,l.take)(t,{BackupArn:l.expectString,BackupCreationDateTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r))),BackupExpiryDateTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r))),BackupName:l.expectString,BackupSizeBytes:l.expectLong,BackupStatus:l.expectString,BackupType:l.expectString}),"de_BackupDetails"),uAe=p((t,e)=>(t||[]).filter(n=>n!=null).map(n=>pAe(n,e)),"de_BackupSummaries"),pAe=p((t,e)=>(0,l.take)(t,{BackupArn:l.expectString,BackupCreationDateTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r))),BackupExpiryDateTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r))),BackupName:l.expectString,BackupSizeBytes:l.expectLong,BackupStatus:l.expectString,BackupType:l.expectString,TableArn:l.expectString,TableId:l.expectString,TableName:l.expectString}),"de_BackupSummary"),mAe=p((t,e)=>(0,l.take)(t,{ConsumedCapacity:r=>Ja(r,e),Responses:r=>aIe(r,e)}),"de_BatchExecuteStatementOutput"),hAe=p((t,e)=>(0,l.take)(t,{ConsumedCapacity:r=>Ja(r,e),Responses:r=>gAe(r,e),UnprocessedKeys:r=>fAe(r,e)}),"de_BatchGetItemOutput"),fAe=p((t,e)=>Object.entries(t).reduce((r,[n,o])=>(o===null||(r[n]=rIe(o,e)),r),{}),"de_BatchGetRequestMap"),gAe=p((t,e)=>Object.entries(t).reduce((r,[n,o])=>(o===null||(r[n]=rg(o,e)),r),{}),"de_BatchGetResponseMap"),yAe=p((t,e)=>(0,l.take)(t,{Code:l.expectString,Item:r=>dn(r,e),Message:l.expectString}),"de_BatchStatementError"),_Ae=p((t,e)=>(0,l.take)(t,{Error:r=>yAe(r,e),Item:r=>dn(r,e),TableName:l.expectString}),"de_BatchStatementResponse"),vAe=p((t,e)=>(0,l.take)(t,{ConsumedCapacity:r=>Ja(r,e),ItemCollectionMetrics:r=>d2(r,e),UnprocessedItems:r=>EAe(r,e)}),"de_BatchWriteItemOutput"),EAe=p((t,e)=>Object.entries(t).reduce((r,[n,o])=>(o===null||(r[n]=UIe(o,e)),r),{}),"de_BatchWriteItemRequestMap"),o2=p((t,e)=>(0,l.take)(t,{BillingMode:l.expectString,LastUpdateToPayPerRequestDateTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r)))}),"de_BillingModeSummary"),CAe=p((t,e)=>(t||[]).filter(n=>n!=null).map(n=>e.base64Decoder(n)),"de_BinarySetAttributeValue"),SAe=p((t,e)=>(0,l.take)(t,{Code:l.expectString,Item:r=>dn(r,e),Message:l.expectString}),"de_CancellationReason"),TAe=p((t,e)=>(t||[]).filter(n=>n!=null).map(n=>SAe(n,e)),"de_CancellationReasonList"),i2=p((t,e)=>(0,l.take)(t,{CapacityUnits:l.limitedParseDouble,ReadCapacityUnits:l.limitedParseDouble,WriteCapacityUnits:l.limitedParseDouble}),"de_Capacity"),bAe=p((t,e)=>(0,l.take)(t,{Item:r=>dn(r,e),message:l.expectString}),"de_ConditionalCheckFailedException"),ri=p((t,e)=>(0,l.take)(t,{CapacityUnits:l.limitedParseDouble,GlobalSecondaryIndexes:r=>nG(r,e),LocalSecondaryIndexes:r=>nG(r,e),ReadCapacityUnits:l.limitedParseDouble,Table:r=>i2(r,e),TableName:l.expectString,WriteCapacityUnits:l.limitedParseDouble}),"de_ConsumedCapacity"),Ja=p((t,e)=>(t||[]).filter(n=>n!=null).map(n=>ri(n,e)),"de_ConsumedCapacityMultiple"),s2=p((t,e)=>(0,l.take)(t,{ContinuousBackupsStatus:l.expectString,PointInTimeRecoveryDescription:r=>cIe(r,e)}),"de_ContinuousBackupsDescription"),AAe=p((t,e)=>(0,l.take)(t,{BackupDetails:r=>n2(r,e)}),"de_CreateBackupOutput"),IAe=p((t,e)=>(0,l.take)(t,{GlobalTableDescription:r=>OS(r,e)}),"de_CreateGlobalTableOutput"),RAe=p((t,e)=>(0,l.take)(t,{TableDescription:r=>Xa(r,e)}),"de_CreateTableOutput"),wAe=p((t,e)=>(0,l.take)(t,{BackupDescription:r=>r2(r,e)}),"de_DeleteBackupOutput"),PAe=p((t,e)=>(0,l.take)(t,{Attributes:r=>dn(r,e),ConsumedCapacity:r=>ri(r,e),ItemCollectionMetrics:r=>tg(r,e)}),"de_DeleteItemOutput"),OAe=p((t,e)=>(0,l.take)(t,{Key:r=>_l(r,e)}),"de_DeleteRequest"),xAe=p((t,e)=>(0,l.take)(t,{TableDescription:r=>Xa(r,e)}),"de_DeleteTableOutput"),NAe=p((t,e)=>(0,l.take)(t,{BackupDescription:r=>r2(r,e)}),"de_DescribeBackupOutput"),DAe=p((t,e)=>(0,l.take)(t,{ContinuousBackupsDescription:r=>s2(r,e)}),"de_DescribeContinuousBackupsOutput"),kAe=p((t,e)=>(0,l.take)(t,{ContributorInsightsRuleList:l._json,ContributorInsightsStatus:l.expectString,FailureException:l._json,IndexName:l.expectString,LastUpdateDateTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r))),TableName:l.expectString}),"de_DescribeContributorInsightsOutput"),MAe=p((t,e)=>(0,l.take)(t,{ExportDescription:r=>a2(r,e)}),"de_DescribeExportOutput"),LAe=p((t,e)=>(0,l.take)(t,{GlobalTableDescription:r=>OS(r,e)}),"de_DescribeGlobalTableOutput"),UAe=p((t,e)=>(0,l.take)(t,{GlobalTableName:l.expectString,ReplicaSettings:r=>m2(r,e)}),"de_DescribeGlobalTableSettingsOutput"),FAe=p((t,e)=>(0,l.take)(t,{ImportTableDescription:r=>c2(r,e)}),"de_DescribeImportOutput"),BAe=p((t,e)=>(0,l.take)(t,{Table:r=>Xa(r,e)}),"de_DescribeTableOutput"),qAe=p((t,e)=>(0,l.take)(t,{TableAutoScalingDescription:r=>f2(r,e)}),"de_DescribeTableReplicaAutoScalingOutput"),HAe=p((t,e)=>(0,l.take)(t,{ConsumedCapacity:r=>ri(r,e),Items:r=>rg(r,e),LastEvaluatedKey:r=>_l(r,e),NextToken:l.expectString}),"de_ExecuteStatementOutput"),jAe=p((t,e)=>(0,l.take)(t,{ConsumedCapacity:r=>Ja(r,e),Responses:r=>l2(r,e)}),"de_ExecuteTransactionOutput"),a2=p((t,e)=>(0,l.take)(t,{BilledSizeBytes:l.expectLong,ClientToken:l.expectString,EndTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r))),ExportArn:l.expectString,ExportFormat:l.expectString,ExportManifest:l.expectString,ExportStatus:l.expectString,ExportTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r))),ExportType:l.expectString,FailureCode:l.expectString,FailureMessage:l.expectString,IncrementalExportSpecification:r=>YAe(r,e),ItemCount:l.expectLong,S3Bucket:l.expectString,S3BucketOwner:l.expectString,S3Prefix:l.expectString,S3SseAlgorithm:l.expectString,S3SseKmsKeyId:l.expectString,StartTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r))),TableArn:l.expectString,TableId:l.expectString}),"de_ExportDescription"),GAe=p((t,e)=>(0,l.take)(t,{ExportDescription:r=>a2(r,e)}),"de_ExportTableToPointInTimeOutput"),$Ae=p((t,e)=>(0,l.take)(t,{ConsumedCapacity:r=>ri(r,e),Item:r=>dn(r,e)}),"de_GetItemOutput"),zAe=p((t,e)=>(0,l.take)(t,{Backfilling:l.expectBoolean,IndexArn:l.expectString,IndexName:l.expectString,IndexSizeBytes:l.expectLong,IndexStatus:l.expectString,ItemCount:l.expectLong,KeySchema:l._json,OnDemandThroughput:l._json,Projection:l._json,ProvisionedThroughput:r=>u2(r,e)}),"de_GlobalSecondaryIndexDescription"),VAe=p((t,e)=>(t||[]).filter(n=>n!=null).map(n=>zAe(n,e)),"de_GlobalSecondaryIndexDescriptionList"),OS=p((t,e)=>(0,l.take)(t,{CreationDateTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r))),GlobalTableArn:l.expectString,GlobalTableName:l.expectString,GlobalTableStatus:l.expectString,ReplicationGroup:r=>p2(r,e)}),"de_GlobalTableDescription"),KAe=p((t,e)=>(0,l.take)(t,{CloudWatchLogGroupArn:l.expectString,EndTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r))),ImportArn:l.expectString,ImportStatus:l.expectString,InputFormat:l.expectString,S3BucketSource:l._json,StartTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r))),TableArn:l.expectString}),"de_ImportSummary"),WAe=p((t,e)=>(t||[]).filter(n=>n!=null).map(n=>KAe(n,e)),"de_ImportSummaryList"),c2=p((t,e)=>(0,l.take)(t,{ClientToken:l.expectString,CloudWatchLogGroupArn:l.expectString,EndTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r))),ErrorCount:l.expectLong,FailureCode:l.expectString,FailureMessage:l.expectString,ImportArn:l.expectString,ImportStatus:l.expectString,ImportedItemCount:l.expectLong,InputCompressionType:l.expectString,InputFormat:l.expectString,InputFormatOptions:l._json,ProcessedItemCount:l.expectLong,ProcessedSizeBytes:l.expectLong,S3BucketSource:l._json,StartTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r))),TableArn:l.expectString,TableCreationParameters:l._json,TableId:l.expectString}),"de_ImportTableDescription"),QAe=p((t,e)=>(0,l.take)(t,{ImportTableDescription:r=>c2(r,e)}),"de_ImportTableOutput"),YAe=p((t,e)=>(0,l.take)(t,{ExportFromTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r))),ExportToTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r))),ExportViewType:l.expectString}),"de_IncrementalExportSpecification"),JAe=p((t,e)=>Object.entries(t).reduce((r,[n,o])=>(o===null||(r[n]=Ya((0,L.awsExpectUnion)(o),e)),r),{}),"de_ItemCollectionKeyAttributeMap"),tg=p((t,e)=>(0,l.take)(t,{ItemCollectionKey:r=>JAe(r,e),SizeEstimateRangeGB:r=>ZAe(r,e)}),"de_ItemCollectionMetrics"),XAe=p((t,e)=>(t||[]).filter(n=>n!=null).map(n=>tg(n,e)),"de_ItemCollectionMetricsMultiple"),d2=p((t,e)=>Object.entries(t).reduce((r,[n,o])=>(o===null||(r[n]=XAe(o,e)),r),{}),"de_ItemCollectionMetricsPerTable"),ZAe=p((t,e)=>(t||[]).filter(n=>n!=null).map(n=>(0,l.limitedParseDouble)(n)),"de_ItemCollectionSizeEstimateRange"),rg=p((t,e)=>(t||[]).filter(n=>n!=null).map(n=>dn(n,e)),"de_ItemList"),eIe=p((t,e)=>(0,l.take)(t,{Item:r=>dn(r,e)}),"de_ItemResponse"),l2=p((t,e)=>(t||[]).filter(n=>n!=null).map(n=>eIe(n,e)),"de_ItemResponseList"),_l=p((t,e)=>Object.entries(t).reduce((r,[n,o])=>(o===null||(r[n]=Ya((0,L.awsExpectUnion)(o),e)),r),{}),"de_Key"),tIe=p((t,e)=>(t||[]).filter(n=>n!=null).map(n=>_l(n,e)),"de_KeyList"),rIe=p((t,e)=>(0,l.take)(t,{AttributesToGet:l._json,ConsistentRead:l.expectBoolean,ExpressionAttributeNames:l._json,Keys:r=>tIe(r,e),ProjectionExpression:l.expectString}),"de_KeysAndAttributes"),nIe=p((t,e)=>(t||[]).filter(n=>n!=null).map(n=>Ya((0,L.awsExpectUnion)(n),e)),"de_ListAttributeValue"),oIe=p((t,e)=>(0,l.take)(t,{BackupSummaries:r=>uAe(r,e),LastEvaluatedBackupArn:l.expectString}),"de_ListBackupsOutput"),iIe=p((t,e)=>(0,l.take)(t,{ImportSummaryList:r=>WAe(r,e),NextToken:l.expectString}),"de_ListImportsOutput"),sIe=p((t,e)=>Object.entries(t).reduce((r,[n,o])=>(o===null||(r[n]=Ya((0,L.awsExpectUnion)(o),e)),r),{}),"de_MapAttributeValue"),aIe=p((t,e)=>(t||[]).filter(n=>n!=null).map(n=>_Ae(n,e)),"de_PartiQLBatchResponse"),cIe=p((t,e)=>(0,l.take)(t,{EarliestRestorableDateTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r))),LatestRestorableDateTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r))),PointInTimeRecoveryStatus:l.expectString}),"de_PointInTimeRecoveryDescription"),u2=p((t,e)=>(0,l.take)(t,{LastDecreaseDateTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r))),LastIncreaseDateTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r))),NumberOfDecreasesToday:l.expectLong,ReadCapacityUnits:l.expectLong,WriteCapacityUnits:l.expectLong}),"de_ProvisionedThroughputDescription"),dIe=p((t,e)=>Object.entries(t).reduce((r,[n,o])=>(o===null||(r[n]=Ya((0,L.awsExpectUnion)(o),e)),r),{}),"de_PutItemInputAttributeMap"),lIe=p((t,e)=>(0,l.take)(t,{Attributes:r=>dn(r,e),ConsumedCapacity:r=>ri(r,e),ItemCollectionMetrics:r=>tg(r,e)}),"de_PutItemOutput"),uIe=p((t,e)=>(0,l.take)(t,{Item:r=>dIe(r,e)}),"de_PutRequest"),pIe=p((t,e)=>(0,l.take)(t,{ConsumedCapacity:r=>ri(r,e),Count:l.expectInt32,Items:r=>rg(r,e),LastEvaluatedKey:r=>_l(r,e),ScannedCount:l.expectInt32}),"de_QueryOutput"),mIe=p((t,e)=>(0,l.take)(t,{GlobalSecondaryIndexes:r=>yIe(r,e),RegionName:l.expectString,ReplicaProvisionedReadCapacityAutoScalingSettings:r=>ei(r,e),ReplicaProvisionedWriteCapacityAutoScalingSettings:r=>ei(r,e),ReplicaStatus:l.expectString}),"de_ReplicaAutoScalingDescription"),hIe=p((t,e)=>(t||[]).filter(n=>n!=null).map(n=>mIe(n,e)),"de_ReplicaAutoScalingDescriptionList"),fIe=p((t,e)=>(0,l.take)(t,{GlobalSecondaryIndexes:l._json,KMSMasterKeyId:l.expectString,OnDemandThroughputOverride:l._json,ProvisionedThroughputOverride:l._json,RegionName:l.expectString,ReplicaInaccessibleDateTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r))),ReplicaStatus:l.expectString,ReplicaStatusDescription:l.expectString,ReplicaStatusPercentProgress:l.expectString,ReplicaTableClassSummary:r=>xS(r,e)}),"de_ReplicaDescription"),p2=p((t,e)=>(t||[]).filter(n=>n!=null).map(n=>fIe(n,e)),"de_ReplicaDescriptionList"),gIe=p((t,e)=>(0,l.take)(t,{IndexName:l.expectString,IndexStatus:l.expectString,ProvisionedReadCapacityAutoScalingSettings:r=>ei(r,e),ProvisionedWriteCapacityAutoScalingSettings:r=>ei(r,e)}),"de_ReplicaGlobalSecondaryIndexAutoScalingDescription"),yIe=p((t,e)=>(t||[]).filter(n=>n!=null).map(n=>gIe(n,e)),"de_ReplicaGlobalSecondaryIndexAutoScalingDescriptionList"),_Ie=p((t,e)=>(0,l.take)(t,{IndexName:l.expectString,IndexStatus:l.expectString,ProvisionedReadCapacityAutoScalingSettings:r=>ei(r,e),ProvisionedReadCapacityUnits:l.expectLong,ProvisionedWriteCapacityAutoScalingSettings:r=>ei(r,e),ProvisionedWriteCapacityUnits:l.expectLong}),"de_ReplicaGlobalSecondaryIndexSettingsDescription"),vIe=p((t,e)=>(t||[]).filter(n=>n!=null).map(n=>_Ie(n,e)),"de_ReplicaGlobalSecondaryIndexSettingsDescriptionList"),EIe=p((t,e)=>(0,l.take)(t,{RegionName:l.expectString,ReplicaBillingModeSummary:r=>o2(r,e),ReplicaGlobalSecondaryIndexSettings:r=>vIe(r,e),ReplicaProvisionedReadCapacityAutoScalingSettings:r=>ei(r,e),ReplicaProvisionedReadCapacityUnits:l.expectLong,ReplicaProvisionedWriteCapacityAutoScalingSettings:r=>ei(r,e),ReplicaProvisionedWriteCapacityUnits:l.expectLong,ReplicaStatus:l.expectString,ReplicaTableClassSummary:r=>xS(r,e)}),"de_ReplicaSettingsDescription"),m2=p((t,e)=>(t||[]).filter(n=>n!=null).map(n=>EIe(n,e)),"de_ReplicaSettingsDescriptionList"),CIe=p((t,e)=>(0,l.take)(t,{RestoreDateTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r))),RestoreInProgress:l.expectBoolean,SourceBackupArn:l.expectString,SourceTableArn:l.expectString}),"de_RestoreSummary"),SIe=p((t,e)=>(0,l.take)(t,{TableDescription:r=>Xa(r,e)}),"de_RestoreTableFromBackupOutput"),TIe=p((t,e)=>(0,l.take)(t,{TableDescription:r=>Xa(r,e)}),"de_RestoreTableToPointInTimeOutput"),bIe=p((t,e)=>(0,l.take)(t,{ConsumedCapacity:r=>ri(r,e),Count:l.expectInt32,Items:r=>rg(r,e),LastEvaluatedKey:r=>_l(r,e),ScannedCount:l.expectInt32}),"de_ScanOutput"),nG=p((t,e)=>Object.entries(t).reduce((r,[n,o])=>(o===null||(r[n]=i2(o,e)),r),{}),"de_SecondaryIndexesCapacityMap"),AIe=p((t,e)=>(0,l.take)(t,{BillingMode:l.expectString,ItemCount:l.expectLong,KeySchema:l._json,OnDemandThroughput:l._json,ProvisionedThroughput:l._json,TableArn:l.expectString,TableCreationDateTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r))),TableId:l.expectString,TableName:l.expectString,TableSizeBytes:l.expectLong}),"de_SourceTableDetails"),IIe=p((t,e)=>(0,l.take)(t,{GlobalSecondaryIndexes:l._json,LocalSecondaryIndexes:l._json,SSEDescription:r=>h2(r,e),StreamDescription:l._json,TimeToLiveDescription:l._json}),"de_SourceTableFeatureDetails"),h2=p((t,e)=>(0,l.take)(t,{InaccessibleEncryptionDateTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r))),KMSMasterKeyArn:l.expectString,SSEType:l.expectString,Status:l.expectString}),"de_SSEDescription"),f2=p((t,e)=>(0,l.take)(t,{Replicas:r=>hIe(r,e),TableName:l.expectString,TableStatus:l.expectString}),"de_TableAutoScalingDescription"),xS=p((t,e)=>(0,l.take)(t,{LastUpdateDateTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r))),TableClass:l.expectString}),"de_TableClassSummary"),Xa=p((t,e)=>(0,l.take)(t,{ArchivalSummary:r=>aAe(r,e),AttributeDefinitions:l._json,BillingModeSummary:r=>o2(r,e),CreationDateTime:r=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(r))),DeletionProtectionEnabled:l.expectBoolean,GlobalSecondaryIndexes:r=>VAe(r,e),GlobalTableVersion:l.expectString,ItemCount:l.expectLong,KeySchema:l._json,LatestStreamArn:l.expectString,LatestStreamLabel:l.expectString,LocalSecondaryIndexes:l._json,OnDemandThroughput:l._json,ProvisionedThroughput:r=>u2(r,e),Replicas:r=>p2(r,e),RestoreSummary:r=>CIe(r,e),SSEDescription:r=>h2(r,e),StreamSpecification:l._json,TableArn:l.expectString,TableClassSummary:r=>xS(r,e),TableId:l.expectString,TableName:l.expectString,TableSizeBytes:l.expectLong,TableStatus:l.expectString}),"de_TableDescription"),RIe=p((t,e)=>(0,l.take)(t,{ConsumedCapacity:r=>Ja(r,e),Responses:r=>l2(r,e)}),"de_TransactGetItemsOutput"),wIe=p((t,e)=>(0,l.take)(t,{CancellationReasons:r=>TAe(r,e),Message:l.expectString}),"de_TransactionCanceledException"),PIe=p((t,e)=>(0,l.take)(t,{ConsumedCapacity:r=>Ja(r,e),ItemCollectionMetrics:r=>d2(r,e)}),"de_TransactWriteItemsOutput"),OIe=p((t,e)=>(0,l.take)(t,{ContinuousBackupsDescription:r=>s2(r,e)}),"de_UpdateContinuousBackupsOutput"),xIe=p((t,e)=>(0,l.take)(t,{GlobalTableDescription:r=>OS(r,e)}),"de_UpdateGlobalTableOutput"),NIe=p((t,e)=>(0,l.take)(t,{GlobalTableName:l.expectString,ReplicaSettings:r=>m2(r,e)}),"de_UpdateGlobalTableSettingsOutput"),DIe=p((t,e)=>(0,l.take)(t,{Attributes:r=>dn(r,e),ConsumedCapacity:r=>ri(r,e),ItemCollectionMetrics:r=>tg(r,e)}),"de_UpdateItemOutput"),kIe=p((t,e)=>(0,l.take)(t,{TableDescription:r=>Xa(r,e)}),"de_UpdateTableOutput"),MIe=p((t,e)=>(0,l.take)(t,{TableAutoScalingDescription:r=>f2(r,e)}),"de_UpdateTableReplicaAutoScalingOutput"),LIe=p((t,e)=>(0,l.take)(t,{DeleteRequest:r=>OAe(r,e),PutRequest:r=>uIe(r,e)}),"de_WriteRequest"),UIe=p((t,e)=>(t||[]).filter(n=>n!=null).map(n=>LIe(n,e)),"de_WriteRequests"),P=p(t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),"deserializeMetadata"),FIe=(0,l.withBaseException)(ce),z=p(async(t,e,r,n,o)=>{let{hostname:i,protocol:s="https",port:a,path:c}=await t.endpoint(),d={protocol:s,hostname:i,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:e};return n!==void 0&&(d.hostname=n),o!==void 0&&(d.body=o),new IS.HttpRequest(d)},"buildHttpRpcRequest");function H(t){return{"content-type":"application/x-amz-json-1.0","x-amz-target":`DynamoDB_20120810.${t}`}}p(H,"sharedHeaders");var g2=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeEndpoints",{}).n("DynamoDBClient","DescribeEndpointsCommand").f(void 0,void 0).ser(RCe).de(OSe).build(){};p(g2,"DescribeEndpointsCommand");var NS=g2,BIe=Vj(),oG=wa(),qIe=p(t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(o){let i=e.findIndex(s=>s.schemeId===o.schemeId);i===-1?e.push(o):e.splice(i,1,o)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},"getHttpAuthExtensionConfiguration"),HIe=p(t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),"resolveHttpAuthRuntimeConfig"),Jf=p(t=>t,"asPartial"),jIe=p((t,e)=>{let r={...Jf((0,oG.getAwsRegionExtensionConfiguration)(t)),...Jf((0,l.getDefaultExtensionConfiguration)(t)),...Jf((0,IS.getHttpHandlerExtensionConfiguration)(t)),...Jf(qIe(t))};return e.forEach(n=>n.configure(r)),{...t,...(0,oG.resolveAwsRegionExtensionConfiguration)(r),...(0,l.resolveDefaultRuntimeConfig)(r),...(0,IS.resolveHttpHandlerRuntimeConfig)(r),...HIe(r)}},"resolveRuntimeExtensions"),y2=class extends l.Client{constructor(...[e]){let r=(0,BIe.getRuntimeConfig)(e||{}),n=wEe(r),o=(0,eG.resolveUserAgentConfig)(n),i=(0,tG.resolveRetryConfig)(o),s=(0,IEe.resolveRegionConfig)(i),a=(0,Zj.resolveHostHeaderConfig)(s),c=(0,q.resolveEndpointConfig)(a),d=(0,rG.resolveHttpAuthSchemeConfig)(c),u=(0,TEe.resolveEndpointDiscoveryConfig)(d,{endpointDiscoveryCommandCtor:NS}),m=jIe(u,e?.extensions||[]);super(m),this.config=m,this.middlewareStack.use((0,eG.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,tG.getRetryPlugin)(this.config)),this.middlewareStack.use((0,REe.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Zj.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,bEe.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,AEe.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,AS.getHttpAuthSchemeEndpointRuleSetPlugin)(this.config,{httpAuthSchemeParametersProvider:rG.defaultDynamoDBHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async f=>new AS.DefaultIdentityProviderConfig({"aws.auth#sigv4":f.credentials})})),this.middlewareStack.use((0,AS.getHttpSigningPlugin)(this.config))}destroy(){super.destroy()}};p(y2,"DynamoDBClient");var ni=y2,_2=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","BatchExecuteStatement",{}).n("DynamoDBClient","BatchExecuteStatementCommand").f(void 0,void 0).ser(hCe).de(ySe).build(){};p(_2,"BatchExecuteStatementCommand");var v2=_2,E2=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","BatchGetItem",{}).n("DynamoDBClient","BatchGetItemCommand").f(void 0,void 0).ser(fCe).de(_Se).build(){};p(E2,"BatchGetItemCommand");var C2=E2,S2=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","BatchWriteItem",{}).n("DynamoDBClient","BatchWriteItemCommand").f(void 0,void 0).ser(gCe).de(vSe).build(){};p(S2,"BatchWriteItemCommand");var T2=S2,b2=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","CreateBackup",{}).n("DynamoDBClient","CreateBackupCommand").f(void 0,void 0).ser(yCe).de(ESe).build(){};p(b2,"CreateBackupCommand");var A2=b2,I2=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","CreateGlobalTable",{}).n("DynamoDBClient","CreateGlobalTableCommand").f(void 0,void 0).ser(_Ce).de(CSe).build(){};p(I2,"CreateGlobalTableCommand");var R2=I2,w2=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","CreateTable",{}).n("DynamoDBClient","CreateTableCommand").f(void 0,void 0).ser(vCe).de(SSe).build(){};p(w2,"CreateTableCommand");var P2=w2,O2=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DeleteBackup",{}).n("DynamoDBClient","DeleteBackupCommand").f(void 0,void 0).ser(ECe).de(TSe).build(){};p(O2,"DeleteBackupCommand");var x2=O2,N2=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DeleteItem",{}).n("DynamoDBClient","DeleteItemCommand").f(void 0,void 0).ser(CCe).de(bSe).build(){};p(N2,"DeleteItemCommand");var D2=N2,k2=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DeleteResourcePolicy",{}).n("DynamoDBClient","DeleteResourcePolicyCommand").f(void 0,void 0).ser(SCe).de(ASe).build(){};p(k2,"DeleteResourcePolicyCommand");var M2=k2,L2=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DeleteTable",{}).n("DynamoDBClient","DeleteTableCommand").f(void 0,void 0).ser(TCe).de(ISe).build(){};p(L2,"DeleteTableCommand");var U2=L2,F2=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeBackup",{}).n("DynamoDBClient","DescribeBackupCommand").f(void 0,void 0).ser(bCe).de(RSe).build(){};p(F2,"DescribeBackupCommand");var B2=F2,q2=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeContinuousBackups",{}).n("DynamoDBClient","DescribeContinuousBackupsCommand").f(void 0,void 0).ser(ACe).de(wSe).build(){};p(q2,"DescribeContinuousBackupsCommand");var H2=q2,j2=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeContributorInsights",{}).n("DynamoDBClient","DescribeContributorInsightsCommand").f(void 0,void 0).ser(ICe).de(PSe).build(){};p(j2,"DescribeContributorInsightsCommand");var G2=j2,$2=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeExport",{}).n("DynamoDBClient","DescribeExportCommand").f(void 0,void 0).ser(wCe).de(xSe).build(){};p($2,"DescribeExportCommand");var z2=$2,V2=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeGlobalTable",{}).n("DynamoDBClient","DescribeGlobalTableCommand").f(void 0,void 0).ser(PCe).de(NSe).build(){};p(V2,"DescribeGlobalTableCommand");var K2=V2,W2=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeGlobalTableSettings",{}).n("DynamoDBClient","DescribeGlobalTableSettingsCommand").f(void 0,void 0).ser(OCe).de(DSe).build(){};p(W2,"DescribeGlobalTableSettingsCommand");var Q2=W2,Y2=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeImport",{}).n("DynamoDBClient","DescribeImportCommand").f(void 0,void 0).ser(xCe).de(kSe).build(){};p(Y2,"DescribeImportCommand");var J2=Y2,X2=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeKinesisStreamingDestination",{}).n("DynamoDBClient","DescribeKinesisStreamingDestinationCommand").f(void 0,void 0).ser(NCe).de(MSe).build(){};p(X2,"DescribeKinesisStreamingDestinationCommand");var Z2=X2,ez=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeLimits",{}).n("DynamoDBClient","DescribeLimitsCommand").f(void 0,void 0).ser(DCe).de(LSe).build(){};p(ez,"DescribeLimitsCommand");var tz=ez,rz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeTable",{}).n("DynamoDBClient","DescribeTableCommand").f(void 0,void 0).ser(kCe).de(USe).build(){};p(rz,"DescribeTableCommand");var ng=rz,nz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeTableReplicaAutoScaling",{}).n("DynamoDBClient","DescribeTableReplicaAutoScalingCommand").f(void 0,void 0).ser(MCe).de(FSe).build(){};p(nz,"DescribeTableReplicaAutoScalingCommand");var oz=nz,iz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeTimeToLive",{}).n("DynamoDBClient","DescribeTimeToLiveCommand").f(void 0,void 0).ser(LCe).de(BSe).build(){};p(iz,"DescribeTimeToLiveCommand");var sz=iz,az=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DisableKinesisStreamingDestination",{}).n("DynamoDBClient","DisableKinesisStreamingDestinationCommand").f(void 0,void 0).ser(UCe).de(qSe).build(){};p(az,"DisableKinesisStreamingDestinationCommand");var cz=az,dz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","EnableKinesisStreamingDestination",{}).n("DynamoDBClient","EnableKinesisStreamingDestinationCommand").f(void 0,void 0).ser(FCe).de(HSe).build(){};p(dz,"EnableKinesisStreamingDestinationCommand");var lz=dz,uz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","ExecuteStatement",{}).n("DynamoDBClient","ExecuteStatementCommand").f(void 0,void 0).ser(BCe).de(jSe).build(){};p(uz,"ExecuteStatementCommand");var pz=uz,mz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","ExecuteTransaction",{}).n("DynamoDBClient","ExecuteTransactionCommand").f(void 0,void 0).ser(qCe).de(GSe).build(){};p(mz,"ExecuteTransactionCommand");var hz=mz,fz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","ExportTableToPointInTime",{}).n("DynamoDBClient","ExportTableToPointInTimeCommand").f(void 0,void 0).ser(HCe).de($Se).build(){};p(fz,"ExportTableToPointInTimeCommand");var gz=fz,yz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","GetItem",{}).n("DynamoDBClient","GetItemCommand").f(void 0,void 0).ser(jCe).de(zSe).build(){};p(yz,"GetItemCommand");var _z=yz,vz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","GetResourcePolicy",{}).n("DynamoDBClient","GetResourcePolicyCommand").f(void 0,void 0).ser(GCe).de(VSe).build(){};p(vz,"GetResourcePolicyCommand");var Ez=vz,Cz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","ImportTable",{}).n("DynamoDBClient","ImportTableCommand").f(void 0,void 0).ser($Ce).de(KSe).build(){};p(Cz,"ImportTableCommand");var Sz=Cz,Tz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","ListBackups",{}).n("DynamoDBClient","ListBackupsCommand").f(void 0,void 0).ser(zCe).de(WSe).build(){};p(Tz,"ListBackupsCommand");var bz=Tz,Az=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","ListContributorInsights",{}).n("DynamoDBClient","ListContributorInsightsCommand").f(void 0,void 0).ser(VCe).de(QSe).build(){};p(Az,"ListContributorInsightsCommand");var DS=Az,Iz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","ListExports",{}).n("DynamoDBClient","ListExportsCommand").f(void 0,void 0).ser(KCe).de(YSe).build(){};p(Iz,"ListExportsCommand");var kS=Iz,Rz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","ListGlobalTables",{}).n("DynamoDBClient","ListGlobalTablesCommand").f(void 0,void 0).ser(WCe).de(JSe).build(){};p(Rz,"ListGlobalTablesCommand");var wz=Rz,Pz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","ListImports",{}).n("DynamoDBClient","ListImportsCommand").f(void 0,void 0).ser(QCe).de(XSe).build(){};p(Pz,"ListImportsCommand");var MS=Pz,Oz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","ListTables",{}).n("DynamoDBClient","ListTablesCommand").f(void 0,void 0).ser(YCe).de(ZSe).build(){};p(Oz,"ListTablesCommand");var LS=Oz,xz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","ListTagsOfResource",{}).n("DynamoDBClient","ListTagsOfResourceCommand").f(void 0,void 0).ser(JCe).de(eTe).build(){};p(xz,"ListTagsOfResourceCommand");var Nz=xz,Dz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","PutItem",{}).n("DynamoDBClient","PutItemCommand").f(void 0,void 0).ser(XCe).de(tTe).build(){};p(Dz,"PutItemCommand");var kz=Dz,Mz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","PutResourcePolicy",{}).n("DynamoDBClient","PutResourcePolicyCommand").f(void 0,void 0).ser(ZCe).de(rTe).build(){};p(Mz,"PutResourcePolicyCommand");var Lz=Mz,Uz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","Query",{}).n("DynamoDBClient","QueryCommand").f(void 0,void 0).ser(eSe).de(nTe).build(){};p(Uz,"QueryCommand");var US=Uz,Fz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","RestoreTableFromBackup",{}).n("DynamoDBClient","RestoreTableFromBackupCommand").f(void 0,void 0).ser(tSe).de(oTe).build(){};p(Fz,"RestoreTableFromBackupCommand");var Bz=Fz,qz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","RestoreTableToPointInTime",{}).n("DynamoDBClient","RestoreTableToPointInTimeCommand").f(void 0,void 0).ser(rSe).de(iTe).build(){};p(qz,"RestoreTableToPointInTimeCommand");var Hz=qz,jz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","Scan",{}).n("DynamoDBClient","ScanCommand").f(void 0,void 0).ser(nSe).de(sTe).build(){};p(jz,"ScanCommand");var FS=jz,Gz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","TagResource",{}).n("DynamoDBClient","TagResourceCommand").f(void 0,void 0).ser(oSe).de(aTe).build(){};p(Gz,"TagResourceCommand");var $z=Gz,zz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","TransactGetItems",{}).n("DynamoDBClient","TransactGetItemsCommand").f(void 0,void 0).ser(iSe).de(cTe).build(){};p(zz,"TransactGetItemsCommand");var Vz=zz,Kz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","TransactWriteItems",{}).n("DynamoDBClient","TransactWriteItemsCommand").f(void 0,void 0).ser(sSe).de(dTe).build(){};p(Kz,"TransactWriteItemsCommand");var Wz=Kz,Qz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","UntagResource",{}).n("DynamoDBClient","UntagResourceCommand").f(void 0,void 0).ser(aSe).de(lTe).build(){};p(Qz,"UntagResourceCommand");var Yz=Qz,Jz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","UpdateContinuousBackups",{}).n("DynamoDBClient","UpdateContinuousBackupsCommand").f(void 0,void 0).ser(cSe).de(uTe).build(){};p(Jz,"UpdateContinuousBackupsCommand");var Xz=Jz,Zz=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","UpdateContributorInsights",{}).n("DynamoDBClient","UpdateContributorInsightsCommand").f(void 0,void 0).ser(dSe).de(pTe).build(){};p(Zz,"UpdateContributorInsightsCommand");var eV=Zz,tV=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","UpdateGlobalTable",{}).n("DynamoDBClient","UpdateGlobalTableCommand").f(void 0,void 0).ser(lSe).de(mTe).build(){};p(tV,"UpdateGlobalTableCommand");var rV=tV,nV=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","UpdateGlobalTableSettings",{}).n("DynamoDBClient","UpdateGlobalTableSettingsCommand").f(void 0,void 0).ser(uSe).de(hTe).build(){};p(nV,"UpdateGlobalTableSettingsCommand");var oV=nV,iV=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","UpdateItem",{}).n("DynamoDBClient","UpdateItemCommand").f(void 0,void 0).ser(pSe).de(fTe).build(){};p(iV,"UpdateItemCommand");var sV=iV,aV=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","UpdateKinesisStreamingDestination",{}).n("DynamoDBClient","UpdateKinesisStreamingDestinationCommand").f(void 0,void 0).ser(mSe).de(gTe).build(){};p(aV,"UpdateKinesisStreamingDestinationCommand");var cV=aV,dV=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","UpdateTable",{}).n("DynamoDBClient","UpdateTableCommand").f(void 0,void 0).ser(hSe).de(yTe).build(){};p(dV,"UpdateTableCommand");var lV=dV,uV=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","UpdateTableReplicaAutoScaling",{}).n("DynamoDBClient","UpdateTableReplicaAutoScalingCommand").f(void 0,void 0).ser(fSe).de(_Te).build(){};p(uV,"UpdateTableReplicaAutoScalingCommand");var pV=uV,mV=class extends l.Command.classBuilder().ep({...G}).m(function(e,r,n,o){return[(0,j.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","UpdateTimeToLive",{}).n("DynamoDBClient","UpdateTimeToLiveCommand").f(void 0,void 0).ser(gSe).de(vTe).build(){};p(mV,"UpdateTimeToLiveCommand");var hV=mV,GIe={BatchExecuteStatementCommand:v2,BatchGetItemCommand:C2,BatchWriteItemCommand:T2,CreateBackupCommand:A2,CreateGlobalTableCommand:R2,CreateTableCommand:P2,DeleteBackupCommand:x2,DeleteItemCommand:D2,DeleteResourcePolicyCommand:M2,DeleteTableCommand:U2,DescribeBackupCommand:B2,DescribeContinuousBackupsCommand:H2,DescribeContributorInsightsCommand:G2,DescribeEndpointsCommand:NS,DescribeExportCommand:z2,DescribeGlobalTableCommand:K2,DescribeGlobalTableSettingsCommand:Q2,DescribeImportCommand:J2,DescribeKinesisStreamingDestinationCommand:Z2,DescribeLimitsCommand:tz,DescribeTableCommand:ng,DescribeTableReplicaAutoScalingCommand:oz,DescribeTimeToLiveCommand:sz,DisableKinesisStreamingDestinationCommand:cz,EnableKinesisStreamingDestinationCommand:lz,ExecuteStatementCommand:pz,ExecuteTransactionCommand:hz,ExportTableToPointInTimeCommand:gz,GetItemCommand:_z,GetResourcePolicyCommand:Ez,ImportTableCommand:Sz,ListBackupsCommand:bz,ListContributorInsightsCommand:DS,ListExportsCommand:kS,ListGlobalTablesCommand:wz,ListImportsCommand:MS,ListTablesCommand:LS,ListTagsOfResourceCommand:Nz,PutItemCommand:kz,PutResourcePolicyCommand:Lz,QueryCommand:US,RestoreTableFromBackupCommand:Bz,RestoreTableToPointInTimeCommand:Hz,ScanCommand:FS,TagResourceCommand:$z,TransactGetItemsCommand:Vz,TransactWriteItemsCommand:Wz,UntagResourceCommand:Yz,UpdateContinuousBackupsCommand:Xz,UpdateContributorInsightsCommand:eV,UpdateGlobalTableCommand:rV,UpdateGlobalTableSettingsCommand:oV,UpdateItemCommand:sV,UpdateKinesisStreamingDestinationCommand:cV,UpdateTableCommand:lV,UpdateTableReplicaAutoScalingCommand:pV,UpdateTimeToLiveCommand:hV},fV=class extends ni{};p(fV,"DynamoDB");var gV=fV;(0,l.createAggregatedClient)(GIe,gV);var $Ie=(mt(),M(It)),zIe=(0,$Ie.createPaginator)(ni,DS,"NextToken","NextToken","MaxResults"),VIe=(mt(),M(It)),KIe=(0,VIe.createPaginator)(ni,kS,"NextToken","NextToken","MaxResults"),WIe=(mt(),M(It)),QIe=(0,WIe.createPaginator)(ni,MS,"NextToken","NextToken","PageSize"),YIe=(mt(),M(It)),JIe=(0,YIe.createPaginator)(ni,LS,"ExclusiveStartTableName","LastEvaluatedTableName","Limit"),XIe=(mt(),M(It)),ZIe=(0,XIe.createPaginator)(ni,US,"ExclusiveStartKey","LastEvaluatedKey","Limit"),eRe=(mt(),M(It)),tRe=(0,eRe.createPaginator)(ni,FS,"ExclusiveStartKey","LastEvaluatedKey","Limit"),Gr=Xj(),yV=p(async(t,e)=>{let r;try{let n=await t.send(new ng(e));r=n;try{if(p(()=>n.Table.TableStatus,"returnComparator")()==="ACTIVE")return{state:Gr.WaiterState.SUCCESS,reason:r}}catch{}}catch(n){if(r=n,n.name&&n.name=="ResourceNotFoundException")return{state:Gr.WaiterState.RETRY,reason:r}}return{state:Gr.WaiterState.RETRY,reason:r}},"checkState"),rRe=p(async(t,e)=>{let r={minDelay:20,maxDelay:120};return(0,Gr.createWaiter)({...r,...t},e,yV)},"waitForTableExists"),nRe=p(async(t,e)=>{let r={minDelay:20,maxDelay:120},n=await(0,Gr.createWaiter)({...r,...t},e,yV);return(0,Gr.checkExceptions)(n)},"waitUntilTableExists"),_V=p(async(t,e)=>{let r;try{r=await t.send(new ng(e))}catch(n){if(r=n,n.name&&n.name=="ResourceNotFoundException")return{state:Gr.WaiterState.SUCCESS,reason:r}}return{state:Gr.WaiterState.RETRY,reason:r}},"checkState"),oRe=p(async(t,e)=>{let r={minDelay:20,maxDelay:120};return(0,Gr.createWaiter)({...r,...t},e,_V)},"waitForTableNotExists"),iRe=p(async(t,e)=>{let r={minDelay:20,maxDelay:120},n=await(0,Gr.createWaiter)({...r,...t},e,_V);return(0,Gr.checkExceptions)(n)},"waitUntilTableNotExists")});var bV=g((bze,TV)=>{var{marshall:vl,unmarshall:BS}=j0(),{chunkArray:sRe}=$0(),aRe=V0(),{DynamoDBClient:cRe,PutItemCommand:CV,GetItemCommand:dRe,UpdateItemCommand:lRe,BatchWriteItemCommand:uRe,QueryCommand:SV}=EV(),pRe=process.env.REGION,as=new cRe({region:pRe}),mRe=async(t,e)=>{let r={TableName:t,Item:vl(e,{convertClassInstanceToMap:!0,removeUndefinedValues:!0})};try{await as.send(new CV(r))}catch(n){throw console.log("ERROR",n),new Error("ErrorPutnewItemToken",n)}},hRe=async(t,e)=>{let r={TableName:t,Item:vl(e,{convertClassInstanceToMap:!0,removeUndefinedValues:!0}),ConditionExpression:"attribute_not_exists(PK) and attribute_not_exists(SK)"};try{await as.send(new CV(r))}catch(n){if(n.name==="ConditionalCheckFailedException"){console.log(`Message with id ${e.id} already exist in this table`);return}throw console.error("Error inserting item to DynamoDB:",n),new Error(`ErrorPutnewItemMessage: ${n.message}`)}},fRe=async(t,e,r)=>{let n={TableName:t,Key:vl({PK:e,SK:r})};try{let o=await as.send(new dRe(n));return o.Item?BS(o.Item):null}catch(o){throw console.log("ERROR",o),new Error("ErrorGetItem",o)}},gRe=async(t,e)=>{let r=sRe(t,25);for(let n of r){let o=n.map(s=>{let a=new aRe(s);return{PutRequest:{Item:vl(a,{convertClassInstanceToMap:!0,removeUndefinedValues:!0}),ConditionExpression:"attribute_not_exists(SK)"}}}),i={RequestItems:{[e]:o}};try{await as.send(new uRe(i))}catch{throw new Error("Error saving emails to DynamoDB")}}},yRe=async(t,e,r,n,o)=>{let i={TableName:t,Key:{PK:{S:e},SK:{S:r}},UpdateExpression:n,ExpressionAttributeValues:vl(o),ReturnValues:"ALL_NEW"};try{let s=await as.send(new lRe(i));return s.Attributes?s.Attributes:null}catch(s){throw new Error("ErrorupdateItem",s)}},_Re=async(t,e)=>{let r={TableName:t,KeyConditionExpression:"PK = :pk",ExpressionAttributeValues:{":pk":{S:e}}};try{let n=await as.send(new SV(r)),o=n.Items?n.Items.map(i=>BS(i)):null;return{Message:o,Count:o?.length||0}}catch(n){throw new Error("ErrorgetAllItems",n)}},vRe=async(t,e)=>{let r={TableName:t,KeyConditionExpression:"PK = :pk",ProjectionExpression:"subject, #fromAlias",ExpressionAttributeNames:{"#fromAlias":"from"},ExpressionAttributeValues:{":pk":{S:e}}},n=[],o=null;try{do{o&&(r.ExclusiveStartKey=o);let i=await as.send(new SV(r));if(i.Items){let s=i.Items.map(a=>BS(a));n=n.concat(s)}o=i.LastEvaluatedKey}while(o);return{items:n,count:n.length}}catch(i){throw new Error(`Error in queryAllItems: ${i.message}`)}};TV.exports={createItemService:hRe,createItemTokenService:mRe,getPrimaryItemService:fRe,updateItemService:yRe,addBatchEmailService:gRe,queryAllItemsService:vRe,getAllItemsService:_Re}});var DV=g((Aze,NV)=>{"use strict";var og=Object.defineProperty,ERe=Object.getOwnPropertyDescriptor,CRe=Object.getOwnPropertyNames,SRe=Object.prototype.hasOwnProperty,Qn=(t,e)=>og(t,"name",{value:e,configurable:!0}),TRe=(t,e)=>{for(var r in e)og(t,r,{get:e[r],enumerable:!0})},bRe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of CRe(e))!SRe.call(t,o)&&o!==r&&og(t,o,{get:()=>e[o],enumerable:!(n=ERe(e,o))||n.enumerable});return t},ARe=t=>bRe(og({},"__esModule",{value:!0}),t),AV={};TRe(AV,{getQueueUrlPlugin:()=>wRe,getReceiveMessagePlugin:()=>ORe,getSendMessageBatchPlugin:()=>kRe,getSendMessagePlugin:()=>NRe,queueUrlMiddleware:()=>qS,queueUrlMiddlewareOptions:()=>IV,receiveMessageMiddleware:()=>jS,receiveMessageMiddlewareOptions:()=>RV,resolveQueueUrlConfig:()=>RRe,sendMessageBatchMiddleware:()=>OV,sendMessageBatchMiddlewareOptions:()=>xV,sendMessageMiddleware:()=>wV,sendMessageMiddlewareOptions:()=>PV});NV.exports=ARe(AV);var IRe=fe(),RRe=Qn(t=>({...t,useQueueUrlAsEndpoint:t.useQueueUrlAsEndpoint??!0}),"resolveQueueUrlConfig");function qS({useQueueUrlAsEndpoint:t,endpoint:e}){return(r,n)=>async o=>{var i;let{input:s}=o,a=n.endpointV2;if(!e&&s.QueueUrl&&a&&t){let c=n.logger instanceof IRe.NoOpLogger||!((i=n.logger)!=null&&i.warn)?console:n.logger;try{let d=new URL(s.QueueUrl),u=new URL(d.origin);a.url.origin!==u.origin&&(c.warn(`QueueUrl=${s.QueueUrl} differs from SQSClient resolved endpoint=${a.url.toString()}, using QueueUrl host as endpoint.
Set [endpoint=string] or [useQueueUrlAsEndpoint=false] on the SQSClient.`),a.url=u)}catch(d){c.warn(d)}}return r(o)}}Qn(qS,"queueUrlMiddleware");var IV={name:"queueUrlMiddleware",relation:"after",toMiddleware:"endpointV2Middleware",override:!0},wRe=Qn(t=>({applyToStack:e=>{e.addRelativeTo(qS(t),IV)}}),"getQueueUrlPlugin"),HS=_h(),PRe=Ct();function jS(t){return e=>async r=>{let n=await e({...r});if(t.md5===!1)return n;let o=n.output,i=[];if(o.Messages!==void 0)for(let s of o.Messages){let a=s.MD5OfBody,c=new t.md5;c.update((0,PRe.toUint8Array)(s.Body||"")),a!==(0,HS.toHex)(await c.digest())&&i.push(s.MessageId)}if(i.length>0)throw new Error("Invalid MD5 checksum on messages: "+i.join(", "));return n}}Qn(jS,"receiveMessageMiddleware");var RV={step:"initialize",tags:["VALIDATE_BODY_MD5"],name:"receiveMessageMiddleware",override:!0},ORe=Qn(t=>({applyToStack:e=>{e.add(jS(t),RV)}}),"getReceiveMessagePlugin"),xRe=Ct(),wV=Qn(t=>e=>async r=>{let n=await e({...r});if(t.md5===!1)return n;let o=n.output,i=new t.md5;if(i.update((0,xRe.toUint8Array)(r.input.MessageBody||"")),o.MD5OfMessageBody!==(0,HS.toHex)(await i.digest()))throw new Error("InvalidChecksumError");return n},"sendMessageMiddleware"),PV={step:"initialize",tags:["VALIDATE_BODY_MD5"],name:"sendMessageMiddleware",override:!0},NRe=Qn(t=>({applyToStack:e=>{e.add(wV(t),PV)}}),"getSendMessagePlugin"),DRe=Ct(),OV=Qn(t=>e=>async r=>{let n=await e({...r});if(t.md5===!1)return n;let o=n.output,i=[],s={};if(o.Successful!==void 0)for(let a of o.Successful)a.Id!==void 0&&(s[a.Id]=a);for(let a of r.input.Entries)if(s[a.Id]){let c=s[a.Id].MD5OfMessageBody,d=new t.md5;d.update((0,DRe.toUint8Array)(a.MessageBody||"")),c!==(0,HS.toHex)(await d.digest())&&i.push(s[a.Id].MessageId)}if(i.length>0)throw new Error("Invalid MD5 checksum on messages: "+i.join(", "));return n},"sendMessageBatchMiddleware"),xV={step:"initialize",tags:["VALIDATE_BODY_MD5"],name:"sendMessageBatchMiddleware",override:!0},kRe=Qn(t=>({applyToStack:e=>{e.add(OV(t),xV)}}),"getSendMessageBatchPlugin")});var GS=g(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.resolveHttpAuthSchemeConfig=oi.defaultSQSHttpAuthSchemeProvider=oi.defaultSQSHttpAuthSchemeParametersProvider=void 0;var MRe=(Ze(),M(Xe)),kV=hr(),LRe=async(t,e,r)=>({operation:(0,kV.getSmithyContext)(e).operation,region:await(0,kV.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});oi.defaultSQSHttpAuthSchemeParametersProvider=LRe;function URe(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sqs",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}var FRe=t=>{let e=[];switch(t.operation){default:e.push(URe(t))}return e};oi.defaultSQSHttpAuthSchemeProvider=FRe;var BRe=t=>({...(0,MRe.resolveAwsSdkSigV4Config)(t)});oi.resolveHttpAuthSchemeConfig=BRe});var MV=g((Rze,qRe)=>{qRe.exports={name:"@aws-sdk/client-sqs",description:"AWS SDK for JavaScript Sqs Client for Node.js, Browser and React Native",version:"3.645.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sqs","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sqs"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/client-sso-oidc":"3.645.0","@aws-sdk/client-sts":"3.645.0","@aws-sdk/core":"3.635.0","@aws-sdk/credential-provider-node":"3.645.0","@aws-sdk/middleware-host-header":"3.620.0","@aws-sdk/middleware-logger":"3.609.0","@aws-sdk/middleware-recursion-detection":"3.620.0","@aws-sdk/middleware-sdk-sqs":"3.635.0","@aws-sdk/middleware-user-agent":"3.645.0","@aws-sdk/region-config-resolver":"3.614.0","@aws-sdk/types":"3.609.0","@aws-sdk/util-endpoints":"3.645.0","@aws-sdk/util-user-agent-browser":"3.609.0","@aws-sdk/util-user-agent-node":"3.614.0","@smithy/config-resolver":"^3.0.5","@smithy/core":"^2.4.0","@smithy/fetch-http-handler":"^3.2.4","@smithy/hash-node":"^3.0.3","@smithy/invalid-dependency":"^3.0.3","@smithy/md5-js":"^3.0.3","@smithy/middleware-content-length":"^3.0.5","@smithy/middleware-endpoint":"^3.1.0","@smithy/middleware-retry":"^3.0.15","@smithy/middleware-serde":"^3.0.3","@smithy/middleware-stack":"^3.0.3","@smithy/node-config-provider":"^3.1.4","@smithy/node-http-handler":"^3.1.4","@smithy/protocol-http":"^4.1.0","@smithy/smithy-client":"^3.2.0","@smithy/types":"^3.3.0","@smithy/url-parser":"^3.0.3","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.15","@smithy/util-defaults-mode-node":"^3.0.15","@smithy/util-endpoints":"^2.0.5","@smithy/util-middleware":"^3.0.3","@smithy/util-retry":"^3.0.3","@smithy/util-utf8":"^3.0.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node16":"16.1.3","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=16.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sqs",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sqs"}}});var YV=g(ig=>{"use strict";Object.defineProperty(ig,"__esModule",{value:!0});ig.ruleSet=void 0;var VV="required",Or="fn",xr="argv",tc="ref",LV=!0,UV="isSet",El="booleanEquals",Za="error",ec="endpoint",Yn="tree",$S="PartitionResult",zS="getAttr",FV={[VV]:!1,type:"String"},BV={[VV]:!0,default:!1,type:"Boolean"},qV={[tc]:"Endpoint"},KV={[Or]:El,[xr]:[{[tc]:"UseFIPS"},!0]},WV={[Or]:El,[xr]:[{[tc]:"UseDualStack"},!0]},Pr={},HV={[Or]:zS,[xr]:[{[tc]:$S},"supportsFIPS"]},QV={[tc]:$S},jV={[Or]:El,[xr]:[!0,{[Or]:zS,[xr]:[QV,"supportsDualStack"]}]},GV=[KV],$V=[WV],zV=[{[tc]:"Region"}],HRe={version:"1.0",parameters:{Region:FV,UseDualStack:BV,UseFIPS:BV,Endpoint:FV},rules:[{conditions:[{[Or]:UV,[xr]:[qV]}],rules:[{conditions:GV,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Za},{conditions:$V,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Za},{endpoint:{url:qV,properties:Pr,headers:Pr},type:ec}],type:Yn},{conditions:[{[Or]:UV,[xr]:zV}],rules:[{conditions:[{[Or]:"aws.partition",[xr]:zV,assign:$S}],rules:[{conditions:[KV,WV],rules:[{conditions:[{[Or]:El,[xr]:[LV,HV]},jV],rules:[{endpoint:{url:"https://sqs-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Pr,headers:Pr},type:ec}],type:Yn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Za}],type:Yn},{conditions:GV,rules:[{conditions:[{[Or]:El,[xr]:[HV,LV]}],rules:[{conditions:[{[Or]:"stringEquals",[xr]:[{[Or]:zS,[xr]:[QV,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sqs.{Region}.amazonaws.com",properties:Pr,headers:Pr},type:ec},{endpoint:{url:"https://sqs-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Pr,headers:Pr},type:ec}],type:Yn},{error:"FIPS is enabled but this partition does not support FIPS",type:Za}],type:Yn},{conditions:$V,rules:[{conditions:[jV],rules:[{endpoint:{url:"https://sqs.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Pr,headers:Pr},type:ec}],type:Yn},{error:"DualStack is enabled but this partition does not support DualStack",type:Za}],type:Yn},{endpoint:{url:"https://sqs.{Region}.{PartitionResult#dnsSuffix}",properties:Pr,headers:Pr},type:ec}],type:Yn}],type:Yn},{error:"Invalid Configuration: Missing Region",type:Za}]};ig.ruleSet=HRe});var XV=g(sg=>{"use strict";Object.defineProperty(sg,"__esModule",{value:!0});sg.defaultEndpointResolver=void 0;var jRe=Ki(),JV=Vi(),GRe=YV(),$Re=(t,e={})=>(0,JV.resolveEndpoint)(GRe.ruleSet,{endpointParams:t,logger:e.logger});sg.defaultEndpointResolver=$Re;JV.customEndpointFunctions.aws=jRe.awsEndpointFunctions});var t3=g(ag=>{"use strict";Object.defineProperty(ag,"__esModule",{value:!0});ag.getRuntimeConfig=void 0;var zRe=(Ze(),M(Xe)),VRe=fe(),KRe=Ro(),ZV=Mn(),e3=Ct(),WRe=GS(),QRe=XV(),YRe=t=>({apiVersion:"2012-11-05",base64Decoder:t?.base64Decoder??ZV.fromBase64,base64Encoder:t?.base64Encoder??ZV.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??QRe.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??WRe.defaultSQSHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new zRe.AwsSdkSigV4Signer}],logger:t?.logger??new VRe.NoOpLogger,serviceId:t?.serviceId??"SQS",urlParser:t?.urlParser??KRe.parseUrl,utf8Decoder:t?.utf8Decoder??e3.fromUtf8,utf8Encoder:t?.utf8Encoder??e3.toUtf8});ag.getRuntimeConfig=YRe});var i3=g(dg=>{"use strict";Object.defineProperty(dg,"__esModule",{value:!0});dg.getRuntimeConfig=void 0;var JRe=(_e(),M(ye)),XRe=JRe.__importDefault(MV()),ZRe=(Ze(),M(Xe)),ewe=sl(),twe=Ea(),cg=fr(),r3=Ca(),n3=_r(),Cl=rn(),o3=No(),rwe=Sa(),nwe=Ji(),owe=t3(),iwe=fe(),swe=Ia(),awe=fe(),cwe=t=>{(0,awe.emitWarningIfUnsupportedVersion)(process.version);let e=(0,swe.resolveDefaultsModeConfig)(t),r=()=>e().then(iwe.loadConfigsForDefaultMode),n=(0,owe.getRuntimeConfig)(t);return(0,ZRe.emitWarningIfUnsupportedVersion)(process.version),{...n,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??rwe.calculateBodyLength,credentialDefaultProvider:t?.credentialDefaultProvider??ewe.defaultProvider,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,twe.defaultUserAgent)({serviceId:n.serviceId,clientVersion:XRe.default.version}),maxAttempts:t?.maxAttempts??(0,Cl.loadConfig)(n3.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),md5:t?.md5??r3.Hash.bind(null,"md5"),region:t?.region??(0,Cl.loadConfig)(cg.NODE_REGION_CONFIG_OPTIONS,cg.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:o3.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Cl.loadConfig)({...n3.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||nwe.DEFAULT_RETRY_MODE}),sha256:t?.sha256??r3.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??o3.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Cl.loadConfig)(cg.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:t?.useFipsEndpoint??(0,Cl.loadConfig)(cg.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}};dg.getRuntimeConfig=cwe});var zW=g((nVe,$W)=>{"use strict";var ug=Object.defineProperty,dwe=Object.getOwnPropertyDescriptor,lwe=Object.getOwnPropertyNames,uwe=Object.prototype.hasOwnProperty,_=(t,e)=>ug(t,"name",{value:e,configurable:!0}),pwe=(t,e)=>{for(var r in e)ug(t,r,{get:e[r],enumerable:!0})},mwe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of lwe(e))!uwe.call(t,o)&&o!==r&&ug(t,o,{get:()=>e[o],enumerable:!(n=dwe(e,o))||n.enumerable});return t},hwe=t=>mwe(ug({},"__esModule",{value:!0}),t),u3={};pwe(u3,{AddPermissionCommand:()=>ZK,BatchEntryIdsNotDistinct:()=>$3,BatchRequestTooLong:()=>$K,CancelMessageMoveTaskCommand:()=>tW,ChangeMessageVisibilityBatchCommand:()=>nW,ChangeMessageVisibilityCommand:()=>iW,CreateQueueCommand:()=>aW,DeleteMessageBatchCommand:()=>dW,DeleteMessageCommand:()=>uW,DeleteQueueCommand:()=>mW,EmptyBatchRequest:()=>K3,GetQueueAttributesCommand:()=>fW,GetQueueUrlCommand:()=>yW,InvalidAddress:()=>y3,InvalidAttributeName:()=>rK,InvalidAttributeValue:()=>iK,InvalidBatchEntryId:()=>Y3,InvalidIdFormat:()=>hK,InvalidMessageContents:()=>HK,InvalidSecurity:()=>E3,KmsAccessDenied:()=>EK,KmsDisabled:()=>TK,KmsInvalidKeyUsage:()=>IK,KmsInvalidState:()=>PK,KmsNotFound:()=>NK,KmsOptInRequired:()=>MK,KmsThrottled:()=>FK,ListDeadLetterSourceQueuesCommand:()=>KS,ListMessageMoveTasksCommand:()=>EW,ListQueueTagsCommand:()=>TW,ListQueuesCommand:()=>WS,MessageNotInflight:()=>F3,MessageSystemAttributeName:()=>Awe,MessageSystemAttributeNameForSends:()=>Iwe,OverLimit:()=>T3,PurgeQueueCommand:()=>AW,PurgeQueueInProgress:()=>yK,QueueAttributeName:()=>bwe,QueueDeletedRecently:()=>cK,QueueDoesNotExist:()=>I3,QueueNameExists:()=>uK,ReceiptHandleIsInvalid:()=>H3,ReceiveMessageCommand:()=>RW,RemovePermissionCommand:()=>PW,RequestThrottled:()=>P3,ResourceNotFoundException:()=>M3,SQS:()=>GW,SQSClient:()=>pg,SQSServiceException:()=>ge,SendMessageBatchCommand:()=>xW,SendMessageCommand:()=>DW,SetQueueAttributesCommand:()=>MW,StartMessageMoveTaskCommand:()=>UW,TagQueueCommand:()=>BW,TooManyEntriesInBatchRequest:()=>Z3,UnsupportedOperation:()=>N3,UntagQueueCommand:()=>HW,__Client:()=>T.Client,paginateListDeadLetterSourceQueues:()=>FPe,paginateListQueues:()=>BPe});$W.exports=hwe(u3);var s3=ra(),fwe=na(),gwe=oa(),Tl=DV(),a3=sa(),ywe=fr(),Sl=(mt(),M(It)),_we=fa(),Le=Po(),c3=_r(),d3=GS(),vwe=_(t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"sqs"}),"resolveClientEndpointParameters"),Ge={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Ewe=i3(),l3=wa(),VS=De(),T=fe(),Cwe=_(t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(o){let i=e.findIndex(s=>s.schemeId===o.schemeId);i===-1?e.push(o):e.splice(i,1,o)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},"getHttpAuthExtensionConfiguration"),Swe=_(t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),"resolveHttpAuthRuntimeConfig"),lg=_(t=>t,"asPartial"),Twe=_((t,e)=>{let r={...lg((0,l3.getAwsRegionExtensionConfiguration)(t)),...lg((0,T.getDefaultExtensionConfiguration)(t)),...lg((0,VS.getHttpHandlerExtensionConfiguration)(t)),...lg(Cwe(t))};return e.forEach(n=>n.configure(r)),{...t,...(0,l3.resolveAwsRegionExtensionConfiguration)(r),...(0,T.resolveDefaultRuntimeConfig)(r),...(0,VS.resolveHttpHandlerRuntimeConfig)(r),...Swe(r)}},"resolveRuntimeExtensions"),p3=class extends T.Client{constructor(...[e]){let r=(0,Ewe.getRuntimeConfig)(e||{}),n=vwe(r),o=(0,a3.resolveUserAgentConfig)(n),i=(0,c3.resolveRetryConfig)(o),s=(0,ywe.resolveRegionConfig)(i),a=(0,s3.resolveHostHeaderConfig)(s),c=(0,Le.resolveEndpointConfig)(a),d=(0,Tl.resolveQueueUrlConfig)(c),u=(0,d3.resolveHttpAuthSchemeConfig)(d),m=Twe(u,e?.extensions||[]);super(m),this.config=m,this.middlewareStack.use((0,a3.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,c3.getRetryPlugin)(this.config)),this.middlewareStack.use((0,_we.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,s3.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,fwe.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,gwe.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,Tl.getQueueUrlPlugin)(this.config)),this.middlewareStack.use((0,Sl.getHttpAuthSchemeEndpointRuleSetPlugin)(this.config,{httpAuthSchemeParametersProvider:d3.defaultSQSHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async f=>new Sl.DefaultIdentityProviderConfig({"aws.auth#sigv4":f.credentials})})),this.middlewareStack.use((0,Sl.getHttpSigningPlugin)(this.config))}destroy(){super.destroy()}};_(p3,"SQSClient");var pg=p3,$e=wo(),O=(Ze(),M(Xe)),m3=class h3 extends T.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,h3.prototype)}};_(m3,"SQSServiceException");var ge=m3,f3=class g3 extends ge{constructor(e){super({name:"InvalidAddress",$fault:"client",...e}),this.name="InvalidAddress",this.$fault="client",Object.setPrototypeOf(this,g3.prototype)}};_(f3,"InvalidAddress");var y3=f3,_3=class v3 extends ge{constructor(e){super({name:"InvalidSecurity",$fault:"client",...e}),this.name="InvalidSecurity",this.$fault="client",Object.setPrototypeOf(this,v3.prototype)}};_(_3,"InvalidSecurity");var E3=_3,C3=class S3 extends ge{constructor(e){super({name:"OverLimit",$fault:"client",...e}),this.name="OverLimit",this.$fault="client",Object.setPrototypeOf(this,S3.prototype)}};_(C3,"OverLimit");var T3=C3,b3=class A3 extends ge{constructor(e){super({name:"QueueDoesNotExist",$fault:"client",...e}),this.name="QueueDoesNotExist",this.$fault="client",Object.setPrototypeOf(this,A3.prototype)}};_(b3,"QueueDoesNotExist");var I3=b3,R3=class w3 extends ge{constructor(e){super({name:"RequestThrottled",$fault:"client",...e}),this.name="RequestThrottled",this.$fault="client",Object.setPrototypeOf(this,w3.prototype)}};_(R3,"RequestThrottled");var P3=R3,O3=class x3 extends ge{constructor(e){super({name:"UnsupportedOperation",$fault:"client",...e}),this.name="UnsupportedOperation",this.$fault="client",Object.setPrototypeOf(this,x3.prototype)}};_(O3,"UnsupportedOperation");var N3=O3,D3=class k3 extends ge{constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,k3.prototype)}};_(D3,"ResourceNotFoundException");var M3=D3,L3=class U3 extends ge{constructor(e){super({name:"MessageNotInflight",$fault:"client",...e}),this.name="MessageNotInflight",this.$fault="client",Object.setPrototypeOf(this,U3.prototype)}};_(L3,"MessageNotInflight");var F3=L3,B3=class q3 extends ge{constructor(e){super({name:"ReceiptHandleIsInvalid",$fault:"client",...e}),this.name="ReceiptHandleIsInvalid",this.$fault="client",Object.setPrototypeOf(this,q3.prototype)}};_(B3,"ReceiptHandleIsInvalid");var H3=B3,j3=class G3 extends ge{constructor(e){super({name:"BatchEntryIdsNotDistinct",$fault:"client",...e}),this.name="BatchEntryIdsNotDistinct",this.$fault="client",Object.setPrototypeOf(this,G3.prototype)}};_(j3,"BatchEntryIdsNotDistinct");var $3=j3,z3=class V3 extends ge{constructor(e){super({name:"EmptyBatchRequest",$fault:"client",...e}),this.name="EmptyBatchRequest",this.$fault="client",Object.setPrototypeOf(this,V3.prototype)}};_(z3,"EmptyBatchRequest");var K3=z3,W3=class Q3 extends ge{constructor(e){super({name:"InvalidBatchEntryId",$fault:"client",...e}),this.name="InvalidBatchEntryId",this.$fault="client",Object.setPrototypeOf(this,Q3.prototype)}};_(W3,"InvalidBatchEntryId");var Y3=W3,J3=class X3 extends ge{constructor(e){super({name:"TooManyEntriesInBatchRequest",$fault:"client",...e}),this.name="TooManyEntriesInBatchRequest",this.$fault="client",Object.setPrototypeOf(this,X3.prototype)}};_(J3,"TooManyEntriesInBatchRequest");var Z3=J3,bwe={All:"All",ApproximateNumberOfMessages:"ApproximateNumberOfMessages",ApproximateNumberOfMessagesDelayed:"ApproximateNumberOfMessagesDelayed",ApproximateNumberOfMessagesNotVisible:"ApproximateNumberOfMessagesNotVisible",ContentBasedDeduplication:"ContentBasedDeduplication",CreatedTimestamp:"CreatedTimestamp",DeduplicationScope:"DeduplicationScope",DelaySeconds:"DelaySeconds",FifoQueue:"FifoQueue",FifoThroughputLimit:"FifoThroughputLimit",KmsDataKeyReusePeriodSeconds:"KmsDataKeyReusePeriodSeconds",KmsMasterKeyId:"KmsMasterKeyId",LastModifiedTimestamp:"LastModifiedTimestamp",MaximumMessageSize:"MaximumMessageSize",MessageRetentionPeriod:"MessageRetentionPeriod",Policy:"Policy",QueueArn:"QueueArn",ReceiveMessageWaitTimeSeconds:"ReceiveMessageWaitTimeSeconds",RedriveAllowPolicy:"RedriveAllowPolicy",RedrivePolicy:"RedrivePolicy",SqsManagedSseEnabled:"SqsManagedSseEnabled",VisibilityTimeout:"VisibilityTimeout"},eK=class tK extends ge{constructor(e){super({name:"InvalidAttributeName",$fault:"client",...e}),this.name="InvalidAttributeName",this.$fault="client",Object.setPrototypeOf(this,tK.prototype)}};_(eK,"InvalidAttributeName");var rK=eK,nK=class oK extends ge{constructor(e){super({name:"InvalidAttributeValue",$fault:"client",...e}),this.name="InvalidAttributeValue",this.$fault="client",Object.setPrototypeOf(this,oK.prototype)}};_(nK,"InvalidAttributeValue");var iK=nK,sK=class aK extends ge{constructor(e){super({name:"QueueDeletedRecently",$fault:"client",...e}),this.name="QueueDeletedRecently",this.$fault="client",Object.setPrototypeOf(this,aK.prototype)}};_(sK,"QueueDeletedRecently");var cK=sK,dK=class lK extends ge{constructor(e){super({name:"QueueNameExists",$fault:"client",...e}),this.name="QueueNameExists",this.$fault="client",Object.setPrototypeOf(this,lK.prototype)}};_(dK,"QueueNameExists");var uK=dK,pK=class mK extends ge{constructor(e){super({name:"InvalidIdFormat",$fault:"client",...e}),this.name="InvalidIdFormat",this.$fault="client",Object.setPrototypeOf(this,mK.prototype)}};_(pK,"InvalidIdFormat");var hK=pK,fK=class gK extends ge{constructor(e){super({name:"PurgeQueueInProgress",$fault:"client",...e}),this.name="PurgeQueueInProgress",this.$fault="client",Object.setPrototypeOf(this,gK.prototype)}};_(fK,"PurgeQueueInProgress");var yK=fK,_K=class vK extends ge{constructor(e){super({name:"KmsAccessDenied",$fault:"client",...e}),this.name="KmsAccessDenied",this.$fault="client",Object.setPrototypeOf(this,vK.prototype)}};_(_K,"KmsAccessDenied");var EK=_K,CK=class SK extends ge{constructor(e){super({name:"KmsDisabled",$fault:"client",...e}),this.name="KmsDisabled",this.$fault="client",Object.setPrototypeOf(this,SK.prototype)}};_(CK,"KmsDisabled");var TK=CK,bK=class AK extends ge{constructor(e){super({name:"KmsInvalidKeyUsage",$fault:"client",...e}),this.name="KmsInvalidKeyUsage",this.$fault="client",Object.setPrototypeOf(this,AK.prototype)}};_(bK,"KmsInvalidKeyUsage");var IK=bK,RK=class wK extends ge{constructor(e){super({name:"KmsInvalidState",$fault:"client",...e}),this.name="KmsInvalidState",this.$fault="client",Object.setPrototypeOf(this,wK.prototype)}};_(RK,"KmsInvalidState");var PK=RK,OK=class xK extends ge{constructor(e){super({name:"KmsNotFound",$fault:"client",...e}),this.name="KmsNotFound",this.$fault="client",Object.setPrototypeOf(this,xK.prototype)}};_(OK,"KmsNotFound");var NK=OK,DK=class kK extends ge{constructor(e){super({name:"KmsOptInRequired",$fault:"client",...e}),this.name="KmsOptInRequired",this.$fault="client",Object.setPrototypeOf(this,kK.prototype)}};_(DK,"KmsOptInRequired");var MK=DK,LK=class UK extends ge{constructor(e){super({name:"KmsThrottled",$fault:"client",...e}),this.name="KmsThrottled",this.$fault="client",Object.setPrototypeOf(this,UK.prototype)}};_(LK,"KmsThrottled");var FK=LK,Awe={AWSTraceHeader:"AWSTraceHeader",All:"All",ApproximateFirstReceiveTimestamp:"ApproximateFirstReceiveTimestamp",ApproximateReceiveCount:"ApproximateReceiveCount",DeadLetterQueueSourceArn:"DeadLetterQueueSourceArn",MessageDeduplicationId:"MessageDeduplicationId",MessageGroupId:"MessageGroupId",SenderId:"SenderId",SentTimestamp:"SentTimestamp",SequenceNumber:"SequenceNumber"},BK=class qK extends ge{constructor(e){super({name:"InvalidMessageContents",$fault:"client",...e}),this.name="InvalidMessageContents",this.$fault="client",Object.setPrototypeOf(this,qK.prototype)}};_(BK,"InvalidMessageContents");var HK=BK,Iwe={AWSTraceHeader:"AWSTraceHeader"},jK=class GK extends ge{constructor(e){super({name:"BatchRequestTooLong",$fault:"client",...e}),this.name="BatchRequestTooLong",this.$fault="client",Object.setPrototypeOf(this,GK.prototype)}};_(jK,"BatchRequestTooLong");var $K=jK,Rwe=_(async(t,e)=>{let r=Ue("AddPermission"),n;return n=JSON.stringify(W0e(t,e)),Ve(e,r,"/",void 0,n)},"se_AddPermissionCommand"),wwe=_(async(t,e)=>{let r=Ue("CancelMessageMoveTask"),n;return n=JSON.stringify(Y0e(t,e)),Ve(e,r,"/",void 0,n)},"se_CancelMessageMoveTaskCommand"),Pwe=_(async(t,e)=>{let r=Ue("ChangeMessageVisibility"),n;return n=JSON.stringify(ePe(t,e)),Ve(e,r,"/",void 0,n)},"se_ChangeMessageVisibilityCommand"),Owe=_(async(t,e)=>{let r=Ue("ChangeMessageVisibilityBatch"),n;return n=JSON.stringify(J0e(t,e)),Ve(e,r,"/",void 0,n)},"se_ChangeMessageVisibilityBatchCommand"),xwe=_(async(t,e)=>{let r=Ue("CreateQueue"),n;return n=JSON.stringify(tPe(t,e)),Ve(e,r,"/",void 0,n)},"se_CreateQueueCommand"),Nwe=_(async(t,e)=>{let r=Ue("DeleteMessage"),n;return n=JSON.stringify(iPe(t,e)),Ve(e,r,"/",void 0,n)},"se_DeleteMessageCommand"),Dwe=_(async(t,e)=>{let r=Ue("DeleteMessageBatch"),n;return n=JSON.stringify(rPe(t,e)),Ve(e,r,"/",void 0,n)},"se_DeleteMessageBatchCommand"),kwe=_(async(t,e)=>{let r=Ue("DeleteQueue"),n;return n=JSON.stringify(sPe(t,e)),Ve(e,r,"/",void 0,n)},"se_DeleteQueueCommand"),Mwe=_(async(t,e)=>{let r=Ue("GetQueueAttributes"),n;return n=JSON.stringify(aPe(t,e)),Ve(e,r,"/",void 0,n)},"se_GetQueueAttributesCommand"),Lwe=_(async(t,e)=>{let r=Ue("GetQueueUrl"),n;return n=JSON.stringify(cPe(t,e)),Ve(e,r,"/",void 0,n)},"se_GetQueueUrlCommand"),Uwe=_(async(t,e)=>{let r=Ue("ListDeadLetterSourceQueues"),n;return n=JSON.stringify(dPe(t,e)),Ve(e,r,"/",void 0,n)},"se_ListDeadLetterSourceQueuesCommand"),Fwe=_(async(t,e)=>{let r=Ue("ListMessageMoveTasks"),n;return n=JSON.stringify(lPe(t,e)),Ve(e,r,"/",void 0,n)},"se_ListMessageMoveTasksCommand"),Bwe=_(async(t,e)=>{let r=Ue("ListQueues"),n;return n=JSON.stringify(uPe(t,e)),Ve(e,r,"/",void 0,n)},"se_ListQueuesCommand"),qwe=_(async(t,e)=>{let r=Ue("ListQueueTags"),n;return n=JSON.stringify(pPe(t,e)),Ve(e,r,"/",void 0,n)},"se_ListQueueTagsCommand"),Hwe=_(async(t,e)=>{let r=Ue("PurgeQueue"),n;return n=JSON.stringify(yPe(t,e)),Ve(e,r,"/",void 0,n)},"se_PurgeQueueCommand"),jwe=_(async(t,e)=>{let r=Ue("ReceiveMessage"),n;return n=JSON.stringify(_Pe(t,e)),Ve(e,r,"/",void 0,n)},"se_ReceiveMessageCommand"),Gwe=_(async(t,e)=>{let r=Ue("RemovePermission"),n;return n=JSON.stringify(vPe(t,e)),Ve(e,r,"/",void 0,n)},"se_RemovePermissionCommand"),$we=_(async(t,e)=>{let r=Ue("SendMessage"),n;return n=JSON.stringify(TPe(t,e)),Ve(e,r,"/",void 0,n)},"se_SendMessageCommand"),zwe=_(async(t,e)=>{let r=Ue("SendMessageBatch"),n;return n=JSON.stringify(EPe(t,e)),Ve(e,r,"/",void 0,n)},"se_SendMessageBatchCommand"),Vwe=_(async(t,e)=>{let r=Ue("SetQueueAttributes"),n;return n=JSON.stringify(bPe(t,e)),Ve(e,r,"/",void 0,n)},"se_SetQueueAttributesCommand"),Kwe=_(async(t,e)=>{let r=Ue("StartMessageMoveTask"),n;return n=JSON.stringify(APe(t,e)),Ve(e,r,"/",void 0,n)},"se_StartMessageMoveTaskCommand"),Wwe=_(async(t,e)=>{let r=Ue("TagQueue"),n;return n=JSON.stringify(RPe(t,e)),Ve(e,r,"/",void 0,n)},"se_TagQueueCommand"),Qwe=_(async(t,e)=>{let r=Ue("UntagQueue"),n;return n=JSON.stringify(wPe(t,e)),Ve(e,r,"/",void 0,n)},"se_UntagQueueCommand"),Ywe=_(async(t,e)=>t.statusCode>=300?ze(t,e):(await(0,T.collectBody)(t.body,e),{$metadata:Q(t)}),"de_AddPermissionCommand"),Jwe=_(async(t,e)=>{if(t.statusCode>=300)return ze(t,e);let r=await(0,O.parseJsonBody)(t.body,e),n={};return n=(0,T._json)(r),{$metadata:Q(t),...n}},"de_CancelMessageMoveTaskCommand"),Xwe=_(async(t,e)=>t.statusCode>=300?ze(t,e):(await(0,T.collectBody)(t.body,e),{$metadata:Q(t)}),"de_ChangeMessageVisibilityCommand"),Zwe=_(async(t,e)=>{if(t.statusCode>=300)return ze(t,e);let r=await(0,O.parseJsonBody)(t.body,e),n={};return n=(0,T._json)(r),{$metadata:Q(t),...n}},"de_ChangeMessageVisibilityBatchCommand"),e0e=_(async(t,e)=>{if(t.statusCode>=300)return ze(t,e);let r=await(0,O.parseJsonBody)(t.body,e),n={};return n=(0,T._json)(r),{$metadata:Q(t),...n}},"de_CreateQueueCommand"),t0e=_(async(t,e)=>t.statusCode>=300?ze(t,e):(await(0,T.collectBody)(t.body,e),{$metadata:Q(t)}),"de_DeleteMessageCommand"),r0e=_(async(t,e)=>{if(t.statusCode>=300)return ze(t,e);let r=await(0,O.parseJsonBody)(t.body,e),n={};return n=(0,T._json)(r),{$metadata:Q(t),...n}},"de_DeleteMessageBatchCommand"),n0e=_(async(t,e)=>t.statusCode>=300?ze(t,e):(await(0,T.collectBody)(t.body,e),{$metadata:Q(t)}),"de_DeleteQueueCommand"),o0e=_(async(t,e)=>{if(t.statusCode>=300)return ze(t,e);let r=await(0,O.parseJsonBody)(t.body,e),n={};return n=(0,T._json)(r),{$metadata:Q(t),...n}},"de_GetQueueAttributesCommand"),i0e=_(async(t,e)=>{if(t.statusCode>=300)return ze(t,e);let r=await(0,O.parseJsonBody)(t.body,e),n={};return n=(0,T._json)(r),{$metadata:Q(t),...n}},"de_GetQueueUrlCommand"),s0e=_(async(t,e)=>{if(t.statusCode>=300)return ze(t,e);let r=await(0,O.parseJsonBody)(t.body,e),n={};return n=(0,T._json)(r),{$metadata:Q(t),...n}},"de_ListDeadLetterSourceQueuesCommand"),a0e=_(async(t,e)=>{if(t.statusCode>=300)return ze(t,e);let r=await(0,O.parseJsonBody)(t.body,e),n={};return n=(0,T._json)(r),{$metadata:Q(t),...n}},"de_ListMessageMoveTasksCommand"),c0e=_(async(t,e)=>{if(t.statusCode>=300)return ze(t,e);let r=await(0,O.parseJsonBody)(t.body,e),n={};return n=(0,T._json)(r),{$metadata:Q(t),...n}},"de_ListQueuesCommand"),d0e=_(async(t,e)=>{if(t.statusCode>=300)return ze(t,e);let r=await(0,O.parseJsonBody)(t.body,e),n={};return n=(0,T._json)(r),{$metadata:Q(t),...n}},"de_ListQueueTagsCommand"),l0e=_(async(t,e)=>t.statusCode>=300?ze(t,e):(await(0,T.collectBody)(t.body,e),{$metadata:Q(t)}),"de_PurgeQueueCommand"),u0e=_(async(t,e)=>{if(t.statusCode>=300)return ze(t,e);let r=await(0,O.parseJsonBody)(t.body,e),n={};return n=kPe(r,e),{$metadata:Q(t),...n}},"de_ReceiveMessageCommand"),p0e=_(async(t,e)=>t.statusCode>=300?ze(t,e):(await(0,T.collectBody)(t.body,e),{$metadata:Q(t)}),"de_RemovePermissionCommand"),m0e=_(async(t,e)=>{if(t.statusCode>=300)return ze(t,e);let r=await(0,O.parseJsonBody)(t.body,e),n={};return n=(0,T._json)(r),{$metadata:Q(t),...n}},"de_SendMessageCommand"),h0e=_(async(t,e)=>{if(t.statusCode>=300)return ze(t,e);let r=await(0,O.parseJsonBody)(t.body,e),n={};return n=(0,T._json)(r),{$metadata:Q(t),...n}},"de_SendMessageBatchCommand"),f0e=_(async(t,e)=>t.statusCode>=300?ze(t,e):(await(0,T.collectBody)(t.body,e),{$metadata:Q(t)}),"de_SetQueueAttributesCommand"),g0e=_(async(t,e)=>{if(t.statusCode>=300)return ze(t,e);let r=await(0,O.parseJsonBody)(t.body,e),n={};return n=(0,T._json)(r),{$metadata:Q(t),...n}},"de_StartMessageMoveTaskCommand"),y0e=_(async(t,e)=>t.statusCode>=300?ze(t,e):(await(0,T.collectBody)(t.body,e),{$metadata:Q(t)}),"de_TagQueueCommand"),_0e=_(async(t,e)=>t.statusCode>=300?ze(t,e):(await(0,T.collectBody)(t.body,e),{$metadata:Q(t)}),"de_UntagQueueCommand"),ze=_(async(t,e)=>{let r={...t,body:await(0,O.parseJsonErrorBody)(t.body,e)};LPe(r,t.headers);let n=(0,O.loadRestJsonErrorCode)(t,r.body);switch(n){case"InvalidAddress":case"com.amazonaws.sqs#InvalidAddress":throw await S0e(r,e);case"InvalidSecurity":case"com.amazonaws.sqs#InvalidSecurity":throw await w0e(r,e);case"OverLimit":case"com.amazonaws.sqs#OverLimit":throw await U0e(r,e);case"QueueDoesNotExist":case"com.amazonaws.sqs#QueueDoesNotExist":throw await q0e(r,e);case"RequestThrottled":case"com.amazonaws.sqs#RequestThrottled":throw await G0e(r,e);case"UnsupportedOperation":case"com.amazonaws.sqs#UnsupportedOperation":throw await V0e(r,e);case"ResourceNotFoundException":case"com.amazonaws.sqs#ResourceNotFoundException":throw await $0e(r,e);case"MessageNotInflight":case"com.amazonaws.sqs#MessageNotInflight":throw await L0e(r,e);case"ReceiptHandleIsInvalid":case"com.amazonaws.sqs#ReceiptHandleIsInvalid":throw await j0e(r,e);case"BatchEntryIdsNotDistinct":case"com.amazonaws.sqs#BatchEntryIdsNotDistinct":throw await v0e(r,e);case"EmptyBatchRequest":case"com.amazonaws.sqs#EmptyBatchRequest":throw await C0e(r,e);case"InvalidBatchEntryId":case"com.amazonaws.sqs#InvalidBatchEntryId":throw await A0e(r,e);case"TooManyEntriesInBatchRequest":case"com.amazonaws.sqs#TooManyEntriesInBatchRequest":throw await z0e(r,e);case"InvalidAttributeName":case"com.amazonaws.sqs#InvalidAttributeName":throw await T0e(r,e);case"InvalidAttributeValue":case"com.amazonaws.sqs#InvalidAttributeValue":throw await b0e(r,e);case"QueueDeletedRecently":case"com.amazonaws.sqs#QueueDeletedRecently":throw await B0e(r,e);case"QueueNameExists":case"com.amazonaws.sqs#QueueNameExists":throw await H0e(r,e);case"InvalidIdFormat":case"com.amazonaws.sqs#InvalidIdFormat":throw await I0e(r,e);case"PurgeQueueInProgress":case"com.amazonaws.sqs#PurgeQueueInProgress":throw await F0e(r,e);case"KmsAccessDenied":case"com.amazonaws.sqs#KmsAccessDenied":throw await P0e(r,e);case"KmsDisabled":case"com.amazonaws.sqs#KmsDisabled":throw await O0e(r,e);case"KmsInvalidKeyUsage":case"com.amazonaws.sqs#KmsInvalidKeyUsage":throw await x0e(r,e);case"KmsInvalidState":case"com.amazonaws.sqs#KmsInvalidState":throw await N0e(r,e);case"KmsNotFound":case"com.amazonaws.sqs#KmsNotFound":throw await D0e(r,e);case"KmsOptInRequired":case"com.amazonaws.sqs#KmsOptInRequired":throw await k0e(r,e);case"KmsThrottled":case"com.amazonaws.sqs#KmsThrottled":throw await M0e(r,e);case"InvalidMessageContents":case"com.amazonaws.sqs#InvalidMessageContents":throw await R0e(r,e);case"BatchRequestTooLong":case"com.amazonaws.sqs#BatchRequestTooLong":throw await E0e(r,e);default:let o=r.body;return MPe({output:t,parsedBody:o,errorCode:n})}},"de_CommandError"),v0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new $3({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_BatchEntryIdsNotDistinctRes"),E0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new $K({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_BatchRequestTooLongRes"),C0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new K3({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_EmptyBatchRequestRes"),S0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new y3({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_InvalidAddressRes"),T0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new rK({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_InvalidAttributeNameRes"),b0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new iK({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_InvalidAttributeValueRes"),A0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new Y3({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_InvalidBatchEntryIdRes"),I0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new hK({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_InvalidIdFormatRes"),R0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new HK({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_InvalidMessageContentsRes"),w0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new E3({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_InvalidSecurityRes"),P0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new EK({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_KmsAccessDeniedRes"),O0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new TK({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_KmsDisabledRes"),x0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new IK({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_KmsInvalidKeyUsageRes"),N0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new PK({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_KmsInvalidStateRes"),D0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new NK({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_KmsNotFoundRes"),k0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new MK({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_KmsOptInRequiredRes"),M0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new FK({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_KmsThrottledRes"),L0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new F3({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_MessageNotInflightRes"),U0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new T3({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_OverLimitRes"),F0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new yK({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_PurgeQueueInProgressRes"),B0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new cK({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_QueueDeletedRecentlyRes"),q0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new I3({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_QueueDoesNotExistRes"),H0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new uK({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_QueueNameExistsRes"),j0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new H3({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_ReceiptHandleIsInvalidRes"),G0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new P3({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_RequestThrottledRes"),$0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new M3({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_ResourceNotFoundExceptionRes"),z0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new Z3({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_TooManyEntriesInBatchRequestRes"),V0e=_(async(t,e)=>{let r=t.body,n=(0,T._json)(r),o=new N3({$metadata:Q(t),...n});return(0,T.decorateServiceException)(o,r)},"de_UnsupportedOperationRes"),K0e=_((t,e)=>t.filter(r=>r!=null).map(r=>(0,O._toStr)(r)),"se_ActionNameList"),W0e=_((t,e)=>(0,T.take)(t,{AWSAccountIds:r=>Q0e(r,e),Actions:r=>K0e(r,e),Label:O._toStr,QueueUrl:O._toStr}),"se_AddPermissionRequest"),zK=_((t,e)=>t.filter(r=>r!=null).map(r=>(0,O._toStr)(r)),"se_AttributeNameList"),Q0e=_((t,e)=>t.filter(r=>r!=null).map(r=>(0,O._toStr)(r)),"se_AWSAccountIdList"),VK=_((t,e)=>t.filter(r=>r!=null).map(r=>e.base64Encoder(r)),"se_BinaryList"),Y0e=_((t,e)=>(0,T.take)(t,{TaskHandle:O._toStr}),"se_CancelMessageMoveTaskRequest"),J0e=_((t,e)=>(0,T.take)(t,{Entries:r=>Z0e(r,e),QueueUrl:O._toStr}),"se_ChangeMessageVisibilityBatchRequest"),X0e=_((t,e)=>(0,T.take)(t,{Id:O._toStr,ReceiptHandle:O._toStr,VisibilityTimeout:O._toNum}),"se_ChangeMessageVisibilityBatchRequestEntry"),Z0e=_((t,e)=>t.filter(r=>r!=null).map(r=>X0e(r,e)),"se_ChangeMessageVisibilityBatchRequestEntryList"),ePe=_((t,e)=>(0,T.take)(t,{QueueUrl:O._toStr,ReceiptHandle:O._toStr,VisibilityTimeout:O._toNum}),"se_ChangeMessageVisibilityRequest"),tPe=_((t,e)=>(0,T.take)(t,{Attributes:r=>QK(r,e),QueueName:O._toStr,tags:r=>JK(r,e)}),"se_CreateQueueRequest"),rPe=_((t,e)=>(0,T.take)(t,{Entries:r=>oPe(r,e),QueueUrl:O._toStr}),"se_DeleteMessageBatchRequest"),nPe=_((t,e)=>(0,T.take)(t,{Id:O._toStr,ReceiptHandle:O._toStr}),"se_DeleteMessageBatchRequestEntry"),oPe=_((t,e)=>t.filter(r=>r!=null).map(r=>nPe(r,e)),"se_DeleteMessageBatchRequestEntryList"),iPe=_((t,e)=>(0,T.take)(t,{QueueUrl:O._toStr,ReceiptHandle:O._toStr}),"se_DeleteMessageRequest"),sPe=_((t,e)=>(0,T.take)(t,{QueueUrl:O._toStr}),"se_DeleteQueueRequest"),aPe=_((t,e)=>(0,T.take)(t,{AttributeNames:r=>zK(r,e),QueueUrl:O._toStr}),"se_GetQueueAttributesRequest"),cPe=_((t,e)=>(0,T.take)(t,{QueueName:O._toStr,QueueOwnerAWSAccountId:O._toStr}),"se_GetQueueUrlRequest"),dPe=_((t,e)=>(0,T.take)(t,{MaxResults:O._toNum,NextToken:O._toStr,QueueUrl:O._toStr}),"se_ListDeadLetterSourceQueuesRequest"),lPe=_((t,e)=>(0,T.take)(t,{MaxResults:O._toNum,SourceArn:O._toStr}),"se_ListMessageMoveTasksRequest"),uPe=_((t,e)=>(0,T.take)(t,{MaxResults:O._toNum,NextToken:O._toStr,QueueNamePrefix:O._toStr}),"se_ListQueuesRequest"),pPe=_((t,e)=>(0,T.take)(t,{QueueUrl:O._toStr}),"se_ListQueueTagsRequest"),mPe=_((t,e)=>t.filter(r=>r!=null).map(r=>(0,O._toStr)(r)),"se_MessageAttributeNameList"),hPe=_((t,e)=>(0,T.take)(t,{BinaryListValues:r=>VK(r,e),BinaryValue:e.base64Encoder,DataType:O._toStr,StringListValues:r=>YK(r,e),StringValue:O._toStr}),"se_MessageAttributeValue"),KK=_((t,e)=>Object.entries(t).reduce((r,[n,o])=>(o===null||(r[n]=hPe(o,e)),r),{}),"se_MessageBodyAttributeMap"),WK=_((t,e)=>Object.entries(t).reduce((r,[n,o])=>(o===null||(r[n]=gPe(o,e)),r),{}),"se_MessageBodySystemAttributeMap"),fPe=_((t,e)=>t.filter(r=>r!=null).map(r=>(0,O._toStr)(r)),"se_MessageSystemAttributeList"),gPe=_((t,e)=>(0,T.take)(t,{BinaryListValues:r=>VK(r,e),BinaryValue:e.base64Encoder,DataType:O._toStr,StringListValues:r=>YK(r,e),StringValue:O._toStr}),"se_MessageSystemAttributeValue"),yPe=_((t,e)=>(0,T.take)(t,{QueueUrl:O._toStr}),"se_PurgeQueueRequest"),QK=_((t,e)=>Object.entries(t).reduce((r,[n,o])=>(o===null||(r[n]=(0,O._toStr)(o)),r),{}),"se_QueueAttributeMap"),_Pe=_((t,e)=>(0,T.take)(t,{AttributeNames:r=>zK(r,e),MaxNumberOfMessages:O._toNum,MessageAttributeNames:r=>mPe(r,e),MessageSystemAttributeNames:r=>fPe(r,e),QueueUrl:O._toStr,ReceiveRequestAttemptId:O._toStr,VisibilityTimeout:O._toNum,WaitTimeSeconds:O._toNum}),"se_ReceiveMessageRequest"),vPe=_((t,e)=>(0,T.take)(t,{Label:O._toStr,QueueUrl:O._toStr}),"se_RemovePermissionRequest"),EPe=_((t,e)=>(0,T.take)(t,{Entries:r=>SPe(r,e),QueueUrl:O._toStr}),"se_SendMessageBatchRequest"),CPe=_((t,e)=>(0,T.take)(t,{DelaySeconds:O._toNum,Id:O._toStr,MessageAttributes:r=>KK(r,e),MessageBody:O._toStr,MessageDeduplicationId:O._toStr,MessageGroupId:O._toStr,MessageSystemAttributes:r=>WK(r,e)}),"se_SendMessageBatchRequestEntry"),SPe=_((t,e)=>t.filter(r=>r!=null).map(r=>CPe(r,e)),"se_SendMessageBatchRequestEntryList"),TPe=_((t,e)=>(0,T.take)(t,{DelaySeconds:O._toNum,MessageAttributes:r=>KK(r,e),MessageBody:O._toStr,MessageDeduplicationId:O._toStr,MessageGroupId:O._toStr,MessageSystemAttributes:r=>WK(r,e),QueueUrl:O._toStr}),"se_SendMessageRequest"),bPe=_((t,e)=>(0,T.take)(t,{Attributes:r=>QK(r,e),QueueUrl:O._toStr}),"se_SetQueueAttributesRequest"),APe=_((t,e)=>(0,T.take)(t,{DestinationArn:O._toStr,MaxNumberOfMessagesPerSecond:O._toNum,SourceArn:O._toStr}),"se_StartMessageMoveTaskRequest"),YK=_((t,e)=>t.filter(r=>r!=null).map(r=>(0,O._toStr)(r)),"se_StringList"),IPe=_((t,e)=>t.filter(r=>r!=null).map(r=>(0,O._toStr)(r)),"se_TagKeyList"),JK=_((t,e)=>Object.entries(t).reduce((r,[n,o])=>(o===null||(r[n]=(0,O._toStr)(o)),r),{}),"se_TagMap"),RPe=_((t,e)=>(0,T.take)(t,{QueueUrl:O._toStr,Tags:r=>JK(r,e)}),"se_TagQueueRequest"),wPe=_((t,e)=>(0,T.take)(t,{QueueUrl:O._toStr,TagKeys:r=>IPe(r,e)}),"se_UntagQueueRequest"),PPe=_((t,e)=>(t||[]).filter(n=>n!=null).map(n=>e.base64Decoder(n)),"de_BinaryList"),OPe=_((t,e)=>(0,T.take)(t,{Attributes:T._json,Body:T.expectString,MD5OfBody:T.expectString,MD5OfMessageAttributes:T.expectString,MessageAttributes:r=>NPe(r,e),MessageId:T.expectString,ReceiptHandle:T.expectString}),"de_Message"),xPe=_((t,e)=>(0,T.take)(t,{BinaryListValues:r=>PPe(r,e),BinaryValue:e.base64Decoder,DataType:T.expectString,StringListValues:T._json,StringValue:T.expectString}),"de_MessageAttributeValue"),NPe=_((t,e)=>Object.entries(t).reduce((r,[n,o])=>(o===null||(r[n]=xPe(o,e)),r),{}),"de_MessageBodyAttributeMap"),DPe=_((t,e)=>(t||[]).filter(n=>n!=null).map(n=>OPe(n,e)),"de_MessageList"),kPe=_((t,e)=>(0,T.take)(t,{Messages:r=>DPe(r,e)}),"de_ReceiveMessageResult"),Q=_(t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),"deserializeMetadata"),MPe=(0,T.withBaseException)(ge),Ve=_(async(t,e,r,n,o)=>{let{hostname:i,protocol:s="https",port:a,path:c}=await t.endpoint(),d={protocol:s,hostname:i,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:e};return n!==void 0&&(d.hostname=n),o!==void 0&&(d.body=o),new VS.HttpRequest(d)},"buildHttpRpcRequest");function Ue(t){return{"content-type":"application/x-amz-json-1.0","x-amz-target":`AmazonSQS.${t}`}}_(Ue,"sharedHeaders");var LPe=_((t,e)=>{let r=e["x-amzn-query-error"];if(t.body!==void 0&&r!=null){let n=r.split(";");t.body.Code=n[0],t.body.Type=n[1]}},"populateBodyWithQueryCompatibility"),XK=class extends T.Command.classBuilder().ep({...Ge}).m(function(e,r,n,o){return[(0,$e.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Le.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AmazonSQS","AddPermission",{}).n("SQSClient","AddPermissionCommand").f(void 0,void 0).ser(Rwe).de(Ywe).build(){};_(XK,"AddPermissionCommand");var ZK=XK,eW=class extends T.Command.classBuilder().ep({...Ge}).m(function(e,r,n,o){return[(0,$e.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Le.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AmazonSQS","CancelMessageMoveTask",{}).n("SQSClient","CancelMessageMoveTaskCommand").f(void 0,void 0).ser(wwe).de(Jwe).build(){};_(eW,"CancelMessageMoveTaskCommand");var tW=eW,rW=class extends T.Command.classBuilder().ep({...Ge}).m(function(e,r,n,o){return[(0,$e.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Le.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AmazonSQS","ChangeMessageVisibilityBatch",{}).n("SQSClient","ChangeMessageVisibilityBatchCommand").f(void 0,void 0).ser(Owe).de(Zwe).build(){};_(rW,"ChangeMessageVisibilityBatchCommand");var nW=rW,oW=class extends T.Command.classBuilder().ep({...Ge}).m(function(e,r,n,o){return[(0,$e.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Le.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AmazonSQS","ChangeMessageVisibility",{}).n("SQSClient","ChangeMessageVisibilityCommand").f(void 0,void 0).ser(Pwe).de(Xwe).build(){};_(oW,"ChangeMessageVisibilityCommand");var iW=oW,sW=class extends T.Command.classBuilder().ep({...Ge}).m(function(e,r,n,o){return[(0,$e.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Le.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AmazonSQS","CreateQueue",{}).n("SQSClient","CreateQueueCommand").f(void 0,void 0).ser(xwe).de(e0e).build(){};_(sW,"CreateQueueCommand");var aW=sW,cW=class extends T.Command.classBuilder().ep({...Ge}).m(function(e,r,n,o){return[(0,$e.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Le.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AmazonSQS","DeleteMessageBatch",{}).n("SQSClient","DeleteMessageBatchCommand").f(void 0,void 0).ser(Dwe).de(r0e).build(){};_(cW,"DeleteMessageBatchCommand");var dW=cW,lW=class extends T.Command.classBuilder().ep({...Ge}).m(function(e,r,n,o){return[(0,$e.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Le.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AmazonSQS","DeleteMessage",{}).n("SQSClient","DeleteMessageCommand").f(void 0,void 0).ser(Nwe).de(t0e).build(){};_(lW,"DeleteMessageCommand");var uW=lW,pW=class extends T.Command.classBuilder().ep({...Ge}).m(function(e,r,n,o){return[(0,$e.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Le.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AmazonSQS","DeleteQueue",{}).n("SQSClient","DeleteQueueCommand").f(void 0,void 0).ser(kwe).de(n0e).build(){};_(pW,"DeleteQueueCommand");var mW=pW,hW=class extends T.Command.classBuilder().ep({...Ge}).m(function(e,r,n,o){return[(0,$e.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Le.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AmazonSQS","GetQueueAttributes",{}).n("SQSClient","GetQueueAttributesCommand").f(void 0,void 0).ser(Mwe).de(o0e).build(){};_(hW,"GetQueueAttributesCommand");var fW=hW,gW=class extends T.Command.classBuilder().ep({...Ge}).m(function(e,r,n,o){return[(0,$e.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Le.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AmazonSQS","GetQueueUrl",{}).n("SQSClient","GetQueueUrlCommand").f(void 0,void 0).ser(Lwe).de(i0e).build(){};_(gW,"GetQueueUrlCommand");var yW=gW,_W=class extends T.Command.classBuilder().ep({...Ge}).m(function(e,r,n,o){return[(0,$e.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Le.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AmazonSQS","ListDeadLetterSourceQueues",{}).n("SQSClient","ListDeadLetterSourceQueuesCommand").f(void 0,void 0).ser(Uwe).de(s0e).build(){};_(_W,"ListDeadLetterSourceQueuesCommand");var KS=_W,vW=class extends T.Command.classBuilder().ep({...Ge}).m(function(e,r,n,o){return[(0,$e.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Le.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AmazonSQS","ListMessageMoveTasks",{}).n("SQSClient","ListMessageMoveTasksCommand").f(void 0,void 0).ser(Fwe).de(a0e).build(){};_(vW,"ListMessageMoveTasksCommand");var EW=vW,CW=class extends T.Command.classBuilder().ep({...Ge}).m(function(e,r,n,o){return[(0,$e.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Le.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AmazonSQS","ListQueues",{}).n("SQSClient","ListQueuesCommand").f(void 0,void 0).ser(Bwe).de(c0e).build(){};_(CW,"ListQueuesCommand");var WS=CW,SW=class extends T.Command.classBuilder().ep({...Ge}).m(function(e,r,n,o){return[(0,$e.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Le.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AmazonSQS","ListQueueTags",{}).n("SQSClient","ListQueueTagsCommand").f(void 0,void 0).ser(qwe).de(d0e).build(){};_(SW,"ListQueueTagsCommand");var TW=SW,bW=class extends T.Command.classBuilder().ep({...Ge}).m(function(e,r,n,o){return[(0,$e.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Le.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AmazonSQS","PurgeQueue",{}).n("SQSClient","PurgeQueueCommand").f(void 0,void 0).ser(Hwe).de(l0e).build(){};_(bW,"PurgeQueueCommand");var AW=bW,IW=class extends T.Command.classBuilder().ep({...Ge}).m(function(e,r,n,o){return[(0,$e.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Le.getEndpointPlugin)(n,e.getEndpointParameterInstructions()),(0,Tl.getReceiveMessagePlugin)(n)]}).s("AmazonSQS","ReceiveMessage",{}).n("SQSClient","ReceiveMessageCommand").f(void 0,void 0).ser(jwe).de(u0e).build(){};_(IW,"ReceiveMessageCommand");var RW=IW,wW=class extends T.Command.classBuilder().ep({...Ge}).m(function(e,r,n,o){return[(0,$e.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Le.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AmazonSQS","RemovePermission",{}).n("SQSClient","RemovePermissionCommand").f(void 0,void 0).ser(Gwe).de(p0e).build(){};_(wW,"RemovePermissionCommand");var PW=wW,OW=class extends T.Command.classBuilder().ep({...Ge}).m(function(e,r,n,o){return[(0,$e.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Le.getEndpointPlugin)(n,e.getEndpointParameterInstructions()),(0,Tl.getSendMessageBatchPlugin)(n)]}).s("AmazonSQS","SendMessageBatch",{}).n("SQSClient","SendMessageBatchCommand").f(void 0,void 0).ser(zwe).de(h0e).build(){};_(OW,"SendMessageBatchCommand");var xW=OW,NW=class extends T.Command.classBuilder().ep({...Ge}).m(function(e,r,n,o){return[(0,$e.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Le.getEndpointPlugin)(n,e.getEndpointParameterInstructions()),(0,Tl.getSendMessagePlugin)(n)]}).s("AmazonSQS","SendMessage",{}).n("SQSClient","SendMessageCommand").f(void 0,void 0).ser($we).de(m0e).build(){};_(NW,"SendMessageCommand");var DW=NW,kW=class extends T.Command.classBuilder().ep({...Ge}).m(function(e,r,n,o){return[(0,$e.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Le.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AmazonSQS","SetQueueAttributes",{}).n("SQSClient","SetQueueAttributesCommand").f(void 0,void 0).ser(Vwe).de(f0e).build(){};_(kW,"SetQueueAttributesCommand");var MW=kW,LW=class extends T.Command.classBuilder().ep({...Ge}).m(function(e,r,n,o){return[(0,$e.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Le.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AmazonSQS","StartMessageMoveTask",{}).n("SQSClient","StartMessageMoveTaskCommand").f(void 0,void 0).ser(Kwe).de(g0e).build(){};_(LW,"StartMessageMoveTaskCommand");var UW=LW,FW=class extends T.Command.classBuilder().ep({...Ge}).m(function(e,r,n,o){return[(0,$e.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Le.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AmazonSQS","TagQueue",{}).n("SQSClient","TagQueueCommand").f(void 0,void 0).ser(Wwe).de(y0e).build(){};_(FW,"TagQueueCommand");var BW=FW,qW=class extends T.Command.classBuilder().ep({...Ge}).m(function(e,r,n,o){return[(0,$e.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Le.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AmazonSQS","UntagQueue",{}).n("SQSClient","UntagQueueCommand").f(void 0,void 0).ser(Qwe).de(_0e).build(){};_(qW,"UntagQueueCommand");var HW=qW,UPe={AddPermissionCommand:ZK,CancelMessageMoveTaskCommand:tW,ChangeMessageVisibilityCommand:iW,ChangeMessageVisibilityBatchCommand:nW,CreateQueueCommand:aW,DeleteMessageCommand:uW,DeleteMessageBatchCommand:dW,DeleteQueueCommand:mW,GetQueueAttributesCommand:fW,GetQueueUrlCommand:yW,ListDeadLetterSourceQueuesCommand:KS,ListMessageMoveTasksCommand:EW,ListQueuesCommand:WS,ListQueueTagsCommand:TW,PurgeQueueCommand:AW,ReceiveMessageCommand:RW,RemovePermissionCommand:PW,SendMessageCommand:DW,SendMessageBatchCommand:xW,SetQueueAttributesCommand:MW,StartMessageMoveTaskCommand:UW,TagQueueCommand:BW,UntagQueueCommand:HW},jW=class extends pg{};_(jW,"SQS");var GW=jW;(0,T.createAggregatedClient)(UPe,GW);var FPe=(0,Sl.createPaginator)(pg,KS,"NextToken","NextToken","MaxResults"),BPe=(0,Sl.createPaginator)(pg,WS,"NextToken","NextToken","MaxResults")});var WW=g((oVe,KW)=>{var{SQSClient:qPe,SendMessageCommand:HPe,GetQueueUrlCommand:jPe}=zW(),GPe=process.env.REGION,VW=new qPe({region:GPe}),$Pe=async(t,e)=>{try{let n={QueueUrl:await zPe(t),MessageBody:JSON.stringify(e)};await VW.send(new HPe(n))}catch(r){throw new Error("Failed to send message to SQS",r)}},zPe=async t=>{let e={QueueName:t};try{let r=new jPe(e);return(await VW.send(r)).QueueUrl}catch(r){throw new Error("Failed to get queue URL",r)}};KW.exports={sendSqsService:$Pe}});var ZW=g((iVe,XW)=>{var{ConfidentialClientApplication:VPe}=(hw(),M(mw)),{Client:KPe}=b0(),QW=I0(),{getPrimaryItemService:WPe,createItemTokenService:YW}=bV(),{sendSqsService:QPe}=WW(),QS=process.env.EMAIL_TABLE_NAME,YPe=process.env.SQS_QUEUE_NAME,JPe=process.env.MICROSOFT_CLIENT_ID,XPe=process.env.MICROSOFT_SECRET_ID_VALUE,JW=process.env.MICROSOFT_REDIRECT_URL2,YS=["User.Read","Mail.Read","openid","profile","offline_access"],cs=new VPe({auth:{clientId:JPe,authority:"https://login.microsoftonline.com/common",clientSecret:XPe}}),ZPe=async()=>{try{return await cs.getAuthCodeUrl({scopes:YS,redirectUri:JW})}catch(t){throw new Error(`Error generating authentication URL: ${t.message}`)}},eOe=async t=>{let e={code:t,scopes:YS,redirectUri:JW};try{let r=await cs.acquireTokenByCode(e),n=cs.getTokenCache().serialize(),o={emailUser:r.account.username,access_token:r.accessToken,expiry_date:r.expiresOn,token_cache:n},i=new QW(o);await YW(QS,i)}catch{throw new Error("Failed to exchange authorization code for tokens.")}},tOe=async t=>{try{let e=await JS(t);if(e==null)throw new Error("Failed to get credential user.");let r=await ZS(e,t),n=await XS(r),o=new Date,i=new Date(o.getTime()-24*60*60*1e3).toISOString();console.log("pastTimeHours",i);let a=(await n.api("/me/messages").select("id").filter(`receivedDateTime ge ${i}`).orderby("receivedDateTime DESC").get()).value.map(d=>d.id);return await QPe(YPe,{emailUser:t,emailIds:a}),a}catch(e){throw console.log("\u{1F680} ~ syncroniceEmailsService ~ (error:",e),new Error("Failed to list emails.",e)}},rOe=async(t,e)=>{try{let r=await JS(t);if(r==null)throw new Error("Failed to get credential user.");let n=await ZS(r,t);return await(await XS(n)).api(`/me/messages/${e}`).get()}catch{throw new Error(`Failed to retrieve email by ID: ${e}`)}},nOe=async(t,e)=>{try{let r=await JS(t);if(r==null)throw new Error("Failed to get credential user.");let n=await ZS(r,t);return(await(await XS(n)).api(`/me/messages/${e}/attachments`).get()).value.filter(a=>a["@odata.type"]==="#microsoft.graph.fileAttachment").map(a=>({name:a.name,contentType:a.contentType,size:a.size,contentBytes:a.contentBytes}))}catch(r){throw new Error(`Failed to retrieve attachments for message: ${e}. Error: ${r.message}`)}},JS=async t=>{try{return await WPe(QS,"TOKEN",`MAIL#${t}`)}catch(e){throw new Error(`Error retrieving client token: ${e.message}`)}},XS=async t=>KPe.init({authProvider:e=>{e(null,t)}}),ZS=async(t,e)=>{let{access_token:r,expiry_date:n,token_cache:o}=t,i=new Date().getTime();if(o&&await cs.getTokenCache().deserialize(o),i>=n){let a={account:(await cs.getTokenCache().getAllAccounts()).find(c=>c.username===e),scopes:YS};try{let c=await cs.acquireTokenSilent(a),d=cs.getTokenCache().serialize(),u={emailUser:c.account.username,access_token:c.accessToken,expiry_date:c.expiresOn,token_cache:d,token_refresh:!0},m=new QW(u);return await YW(QS,m),r=c.accessToken,r}catch(c){throw new Error(`Failed to refresh token: ${c.message}`)}}else return r};XW.exports={authUrlEmailService:ZPe,changeCodeByTokenService:eOe,syncroniceEmailsService:tOe,getEmailByIdService:rOe,getAttachmentsFromEmailService:nOe}});var e4=(nT(),M(rT)),{syncroniceEmailsService:oOe}=ZW(),iOe=async t=>{let{email:e}=JSON.parse(t.body);try{let r=await oOe(e);return e4.ok(r)}catch{return e4.serverError()}};module.exports={handler:iOe};
/*! Bundled license information:

@azure/msal-node/dist/cache/serializer/Serializer.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-common/dist/utils/Constants.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/error/AuthErrorCodes.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/error/AuthError.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/error/ClientAuthErrorCodes.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/error/ClientAuthError.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/account/AuthToken.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/authority/AuthorityType.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/authority/OpenIdConfigResponse.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/error/ClientConfigurationErrorCodes.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/error/ClientConfigurationError.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/utils/StringUtils.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/utils/UrlUtils.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/url/UrlString.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/authority/AuthorityMetadata.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/authority/ProtocolMode.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/authority/AuthorityOptions.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/authority/CloudInstanceDiscoveryResponse.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/authority/CloudInstanceDiscoveryErrorResponse.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/telemetry/performance/PerformanceEvent.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/utils/FunctionWrappers.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/authority/RegionDiscovery.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/utils/TimeUtils.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/cache/utils/CacheHelpers.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/authority/Authority.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/authority/AuthorityFactory.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/utils/ClientAssertionUtils.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/constants/AADServerParamKeys.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/crypto/ICrypto.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/logger/Logger.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/packageMetadata.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/request/ScopeSet.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/account/ClientInfo.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/account/AccountInfo.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/account/TokenClaims.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/cache/entities/AccountEntity.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/error/CacheErrorCodes.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/error/CacheError.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/cache/CacheManager.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/config/ClientConfiguration.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/error/ServerError.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/network/ThrottlingUtils.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/network/NetworkManager.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/account/CcsCredential.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/request/RequestValidator.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/request/RequestParameterBuilder.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/client/BaseClient.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/error/InteractionRequiredAuthErrorCodes.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/error/InteractionRequiredAuthError.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/utils/ProtocolUtils.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/crypto/PopTokenGenerator.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/cache/persistence/TokenCacheContext.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/response/ResponseHandler.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/client/AuthorizationCodeClient.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/client/RefreshTokenClient.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/client/SilentFlowClient.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/telemetry/server/ServerTelemetryManager.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-common/dist/index.mjs:
  (*! @azure/msal-common v14.14.2 2024-08-28 *)

@azure/msal-node/dist/cache/serializer/Deserializer.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/internals.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/utils/Constants.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/utils/NetworkUtils.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/network/HttpClient.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/error/ManagedIdentityErrorCodes.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/error/ManagedIdentityError.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/config/ManagedIdentityId.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/retry/LinearRetryPolicy.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/network/HttpClientWithRetries.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/error/NodeAuthError.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/config/Configuration.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/crypto/GuidGenerator.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/utils/EncodingUtils.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/crypto/HashUtils.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/crypto/PkceGenerator.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/crypto/CryptoProvider.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/cache/NodeStorage.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/cache/TokenCache.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@azure/msal-node/dist/client/ClientAssertion.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/packageMetadata.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/client/UsernamePasswordClient.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/client/ClientApplication.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/network/LoopbackClient.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/client/DeviceCodeClient.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/client/PublicClientApplication.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/client/ClientCredentialClient.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/client/OnBehalfOfClient.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/client/ConfidentialClientApplication.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/client/ManagedIdentitySources/BaseManagedIdentitySource.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/config/ManagedIdentityRequestParameters.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/client/ManagedIdentitySources/AppService.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/client/ManagedIdentitySources/AzureArc.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/client/ManagedIdentitySources/CloudShell.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/client/ManagedIdentitySources/Imds.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/client/ManagedIdentitySources/ServiceFabric.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/client/ManagedIdentityClient.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/client/ManagedIdentityApplication.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/cache/distributed/DistributedCachePlugin.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)

@azure/msal-node/dist/index.mjs:
  (*! @azure/msal-node v2.13.1 2024-08-29 *)
*/
